var Xj=Object.defineProperty;var q1=n=>{throw TypeError(n)};var Yj=(n,e,t)=>e in n?Xj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var q=(n,e,t)=>Yj(n,typeof e!="symbol"?e+"":e,t),Fw=(n,e,t)=>e.has(n)||q1("Cannot "+t);var c=(n,e,t)=>(Fw(n,e,"read from private field"),t?t.call(n):e.get(n)),A=(n,e,t)=>e.has(n)?q1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),b=(n,e,t,s)=>(Fw(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),k=(n,e,t)=>(Fw(n,e,"access private method"),t);var Jt=(n,e,t,s)=>({set _(i){b(n,e,i,t)},get _(){return c(n,e,s)}});function Qj(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function iT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rT={exports:{}},Kx={},aT={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg=Symbol.for("react.element"),Zj=Symbol.for("react.portal"),Jj=Symbol.for("react.fragment"),eL=Symbol.for("react.strict_mode"),tL=Symbol.for("react.profiler"),nL=Symbol.for("react.provider"),sL=Symbol.for("react.context"),iL=Symbol.for("react.forward_ref"),rL=Symbol.for("react.suspense"),aL=Symbol.for("react.memo"),oL=Symbol.for("react.lazy"),G1=Symbol.iterator;function lL(n){return n===null||typeof n!="object"?null:(n=G1&&n[G1]||n["@@iterator"],typeof n=="function"?n:null)}var oT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lT=Object.assign,cT={};function lf(n,e,t){this.props=n,this.context=e,this.refs=cT,this.updater=t||oT}lf.prototype.isReactComponent={};lf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};lf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function uT(){}uT.prototype=lf.prototype;function VS(n,e,t){this.props=n,this.context=e,this.refs=cT,this.updater=t||oT}var BS=VS.prototype=new uT;BS.constructor=VS;lT(BS,lf.prototype);BS.isPureReactComponent=!0;var K1=Array.isArray,dT=Object.prototype.hasOwnProperty,zS={current:null},hT={key:!0,ref:!0,__self:!0,__source:!0};function fT(n,e,t){var s,i={},r=null,a=null;if(e!=null)for(s in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(r=""+e.key),e)dT.call(e,s)&&!hT.hasOwnProperty(s)&&(i[s]=e[s]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(s in o=n.defaultProps,o)i[s]===void 0&&(i[s]=o[s]);return{$$typeof:Mg,type:n,key:r,ref:a,props:i,_owner:zS.current}}function cL(n,e){return{$$typeof:Mg,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function US(n){return typeof n=="object"&&n!==null&&n.$$typeof===Mg}function uL(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var X1=/\/+/g;function $w(n,e){return typeof n=="object"&&n!==null&&n.key!=null?uL(""+n.key):e.toString(36)}function Dy(n,e,t,s,i){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case Mg:case Zj:a=!0}}if(a)return a=n,i=i(a),n=s===""?"."+$w(a,0):s,K1(i)?(t="",n!=null&&(t=n.replace(X1,"$&/")+"/"),Dy(i,e,t,"",function(u){return u})):i!=null&&(US(i)&&(i=cL(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(X1,"$&/")+"/")+n)),e.push(i)),1;if(a=0,s=s===""?".":s+":",K1(n))for(var o=0;o<n.length;o++){r=n[o];var l=s+$w(r,o);a+=Dy(r,e,t,l,i)}else if(l=lL(n),typeof l=="function")for(n=l.call(n),o=0;!(r=n.next()).done;)r=r.value,l=s+$w(r,o++),a+=Dy(r,e,t,l,i);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Jg(n,e,t){if(n==null)return n;var s=[],i=0;return Dy(n,s,"","",function(r){return e.call(t,r,i++)}),s}function dL(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var es={current:null},My={transition:null},hL={ReactCurrentDispatcher:es,ReactCurrentBatchConfig:My,ReactCurrentOwner:zS};function pT(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:Jg,forEach:function(n,e,t){Jg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Jg(n,function(){e++}),e},toArray:function(n){return Jg(n,function(e){return e})||[]},only:function(n){if(!US(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Re.Component=lf;Re.Fragment=Jj;Re.Profiler=tL;Re.PureComponent=VS;Re.StrictMode=eL;Re.Suspense=rL;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hL;Re.act=pT;Re.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=lT({},n.props),i=n.key,r=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,a=zS.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)dT.call(e,l)&&!hT.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];s.children=o}return{$$typeof:Mg,type:n.type,key:i,ref:r,props:s,_owner:a}};Re.createContext=function(n){return n={$$typeof:sL,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:nL,_context:n},n.Consumer=n};Re.createElement=fT;Re.createFactory=function(n){var e=fT.bind(null,n);return e.type=n,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(n){return{$$typeof:iL,render:n}};Re.isValidElement=US;Re.lazy=function(n){return{$$typeof:oL,_payload:{_status:-1,_result:n},_init:dL}};Re.memo=function(n,e){return{$$typeof:aL,type:n,compare:e===void 0?null:e}};Re.startTransition=function(n){var e=My.transition;My.transition={};try{n()}finally{My.transition=e}};Re.unstable_act=pT;Re.useCallback=function(n,e){return es.current.useCallback(n,e)};Re.useContext=function(n){return es.current.useContext(n)};Re.useDebugValue=function(){};Re.useDeferredValue=function(n){return es.current.useDeferredValue(n)};Re.useEffect=function(n,e){return es.current.useEffect(n,e)};Re.useId=function(){return es.current.useId()};Re.useImperativeHandle=function(n,e,t){return es.current.useImperativeHandle(n,e,t)};Re.useInsertionEffect=function(n,e){return es.current.useInsertionEffect(n,e)};Re.useLayoutEffect=function(n,e){return es.current.useLayoutEffect(n,e)};Re.useMemo=function(n,e){return es.current.useMemo(n,e)};Re.useReducer=function(n,e,t){return es.current.useReducer(n,e,t)};Re.useRef=function(n){return es.current.useRef(n)};Re.useState=function(n){return es.current.useState(n)};Re.useSyncExternalStore=function(n,e,t){return es.current.useSyncExternalStore(n,e,t)};Re.useTransition=function(){return es.current.useTransition()};Re.version="18.3.1";aT.exports=Re;var C=aT.exports;const Gt=iT(C),mT=Qj({__proto__:null,default:Gt},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fL=C,pL=Symbol.for("react.element"),mL=Symbol.for("react.fragment"),gL=Object.prototype.hasOwnProperty,yL=fL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vL={key:!0,ref:!0,__self:!0,__source:!0};function gT(n,e,t){var s,i={},r=null,a=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)gL.call(e,s)&&!vL.hasOwnProperty(s)&&(i[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:pL,type:n,key:r,ref:a,props:i,_owner:yL.current}}Kx.Fragment=mL;Kx.jsx=gT;Kx.jsxs=gT;rT.exports=Kx;var h=rT.exports,yT={exports:{}},Gs={},vT={exports:{}},xT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,H){var ee=O.length;O.push(H);e:for(;0<ee;){var de=ee-1>>>1,me=O[de];if(0<i(me,H))O[de]=H,O[ee]=me,ee=de;else break e}}function t(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var H=O[0],ee=O.pop();if(ee!==H){O[0]=ee;e:for(var de=0,me=O.length,Ce=me>>>1;de<Ce;){var Je=2*(de+1)-1,At=O[Je],at=Je+1,Q=O[at];if(0>i(At,ee))at<me&&0>i(Q,At)?(O[de]=Q,O[at]=ee,de=at):(O[de]=At,O[Je]=ee,de=Je);else if(at<me&&0>i(Q,ee))O[de]=Q,O[at]=ee,de=at;else break e}}return H}function i(O,H){var ee=O.sortIndex-H.sortIndex;return ee!==0?ee:O.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,f=null,p=3,y=!1,g=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(O){for(var H=t(u);H!==null;){if(H.callback===null)s(u);else if(H.startTime<=O)s(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=t(u)}}function S(O){if(m=!1,_(O),!g)if(t(l)!==null)g=!0,$(E);else{var H=t(u);H!==null&&B(S,H.startTime-O)}}function E(O,H){g=!1,m&&(m=!1,v(N),N=-1),y=!0;var ee=p;try{for(_(H),f=t(l);f!==null&&(!(f.expirationTime>H)||O&&!j());){var de=f.callback;if(typeof de=="function"){f.callback=null,p=f.priorityLevel;var me=de(f.expirationTime<=H);H=n.unstable_now(),typeof me=="function"?f.callback=me:f===t(l)&&s(l),_(H)}else s(l);f=t(l)}if(f!==null)var Ce=!0;else{var Je=t(u);Je!==null&&B(S,Je.startTime-H),Ce=!1}return Ce}finally{f=null,p=ee,y=!1}}var P=!1,T=null,N=-1,I=5,D=-1;function j(){return!(n.unstable_now()-D<I)}function L(){if(T!==null){var O=n.unstable_now();D=O;var H=!0;try{H=T(!0,O)}finally{H?z():(P=!1,T=null)}}else P=!1}var z;if(typeof x=="function")z=function(){x(L)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,J=F.port2;F.port1.onmessage=L,z=function(){J.postMessage(null)}}else z=function(){w(L,0)};function $(O){T=O,P||(P=!0,z())}function B(O,H){N=w(function(){O(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){g||y||(g=!0,$(E))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var ee=p;p=H;try{return O()}finally{p=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,H){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var ee=p;p=O;try{return H()}finally{p=ee}},n.unstable_scheduleCallback=function(O,H,ee){var de=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?de+ee:de):ee=de,O){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ee+me,O={id:d++,callback:H,priorityLevel:O,startTime:ee,expirationTime:me,sortIndex:-1},ee>de?(O.sortIndex=ee,e(u,O),t(l)===null&&O===t(u)&&(m?(v(N),N=-1):m=!0,B(S,ee-de))):(O.sortIndex=me,e(l,O),g||y||(g=!0,$(E))),O},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(O){var H=p;return function(){var ee=p;p=H;try{return O.apply(this,arguments)}finally{p=ee}}}})(xT);vT.exports=xT;var xL=vT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wL=C,qs=xL;function W(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wT=new Set,xp={};function Nu(n,e){Gh(n,e),Gh(n+"Capture",e)}function Gh(n,e){for(xp[n]=e,n=0;n<e.length;n++)wT.add(e[n])}var ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zb=Object.prototype.hasOwnProperty,bL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y1={},Q1={};function _L(n){return zb.call(Q1,n)?!0:zb.call(Y1,n)?!1:bL.test(n)?Q1[n]=!0:(Y1[n]=!0,!1)}function SL(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function AL(n,e,t,s){if(e===null||typeof e>"u"||SL(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ts(n,e,t,s,i,r,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}var bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){bn[n]=new ts(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];bn[e]=new ts(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){bn[n]=new ts(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){bn[n]=new ts(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){bn[n]=new ts(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){bn[n]=new ts(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){bn[n]=new ts(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){bn[n]=new ts(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){bn[n]=new ts(n,5,!1,n.toLowerCase(),null,!1,!1)});var HS=/[\-:]([a-z])/g;function WS(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(HS,WS);bn[e]=new ts(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(HS,WS);bn[e]=new ts(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(HS,WS);bn[e]=new ts(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){bn[n]=new ts(n,1,!1,n.toLowerCase(),null,!1,!1)});bn.xlinkHref=new ts("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){bn[n]=new ts(n,1,!1,n.toLowerCase(),null,!0,!0)});function qS(n,e,t,s){var i=bn.hasOwnProperty(e)?bn[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AL(e,t,i,s)&&(t=null),s||i===null?_L(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,s=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var Ua=wL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ey=Symbol.for("react.element"),Zu=Symbol.for("react.portal"),Ju=Symbol.for("react.fragment"),GS=Symbol.for("react.strict_mode"),Ub=Symbol.for("react.profiler"),bT=Symbol.for("react.provider"),_T=Symbol.for("react.context"),KS=Symbol.for("react.forward_ref"),Hb=Symbol.for("react.suspense"),Wb=Symbol.for("react.suspense_list"),XS=Symbol.for("react.memo"),Ja=Symbol.for("react.lazy"),ST=Symbol.for("react.offscreen"),Z1=Symbol.iterator;function gf(n){return n===null||typeof n!="object"?null:(n=Z1&&n[Z1]||n["@@iterator"],typeof n=="function"?n:null)}var St=Object.assign,Vw;function Mf(n){if(Vw===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Vw=e&&e[1]||""}return`
`+Vw+n}var Bw=!1;function zw(n,e){if(!n||Bw)return"";Bw=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=s.stack.split(`
`),a=i.length-1,o=r.length-1;1<=a&&0<=o&&i[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==r[o]){var l=`
`+i[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{Bw=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Mf(n):""}function CL(n){switch(n.tag){case 5:return Mf(n.type);case 16:return Mf("Lazy");case 13:return Mf("Suspense");case 19:return Mf("SuspenseList");case 0:case 2:case 15:return n=zw(n.type,!1),n;case 11:return n=zw(n.type.render,!1),n;case 1:return n=zw(n.type,!0),n;default:return""}}function qb(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ju:return"Fragment";case Zu:return"Portal";case Ub:return"Profiler";case GS:return"StrictMode";case Hb:return"Suspense";case Wb:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case _T:return(n.displayName||"Context")+".Consumer";case bT:return(n._context.displayName||"Context")+".Provider";case KS:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case XS:return e=n.displayName||null,e!==null?e:qb(n.type)||"Memo";case Ja:e=n._payload,n=n._init;try{return qb(n(e))}catch{}}return null}function kL(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qb(e);case 8:return e===GS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function AT(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EL(n){var e=AT(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){s=""+a,r.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function ty(n){n._valueTracker||(n._valueTracker=EL(n))}function CT(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=AT(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function Pv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Gb(n,e){var t=e.checked;return St({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function J1(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=hl(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kT(n,e){e=e.checked,e!=null&&qS(n,"checked",e,!1)}function Kb(n,e){kT(n,e);var t=hl(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Xb(n,e.type,t):e.hasOwnProperty("defaultValue")&&Xb(n,e.type,hl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function eC(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Xb(n,e,t){(e!=="number"||Pv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var jf=Array.isArray;function pd(n,e,t,s){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&s&&(n[t].defaultSelected=!0)}else{for(t=""+hl(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,s&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Yb(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return St({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function tC(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(W(92));if(jf(t)){if(1<t.length)throw Error(W(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:hl(t)}}function ET(n,e){var t=hl(e.value),s=hl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function nC(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function TT(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qb(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?TT(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ny,PT=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(ny=ny||document.createElement("div"),ny.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ny.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function wp(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var op={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TL=["Webkit","ms","Moz","O"];Object.keys(op).forEach(function(n){TL.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),op[e]=op[n]})});function NT(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||op.hasOwnProperty(n)&&op[n]?(""+e).trim():e+"px"}function RT(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,i=NT(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,i):n[t]=i}}var PL=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zb(n,e){if(e){if(PL[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Jb(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var e0=null;function YS(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var t0=null,md=null,gd=null;function sC(n){if(n=Og(n)){if(typeof t0!="function")throw Error(W(280));var e=n.stateNode;e&&(e=Jx(e),t0(n.stateNode,n.type,e))}}function IT(n){md?gd?gd.push(n):gd=[n]:md=n}function DT(){if(md){var n=md,e=gd;if(gd=md=null,sC(n),e)for(n=0;n<e.length;n++)sC(e[n])}}function MT(n,e){return n(e)}function jT(){}var Uw=!1;function LT(n,e,t){if(Uw)return n(e,t);Uw=!0;try{return MT(n,e,t)}finally{Uw=!1,(md!==null||gd!==null)&&(jT(),DT())}}function bp(n,e){var t=n.stateNode;if(t===null)return null;var s=Jx(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(W(231,e,typeof t));return t}var n0=!1;if(ja)try{var yf={};Object.defineProperty(yf,"passive",{get:function(){n0=!0}}),window.addEventListener("test",yf,yf),window.removeEventListener("test",yf,yf)}catch{n0=!1}function NL(n,e,t,s,i,r,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var lp=!1,Nv=null,Rv=!1,s0=null,RL={onError:function(n){lp=!0,Nv=n}};function IL(n,e,t,s,i,r,a,o,l){lp=!1,Nv=null,NL.apply(RL,arguments)}function DL(n,e,t,s,i,r,a,o,l){if(IL.apply(this,arguments),lp){if(lp){var u=Nv;lp=!1,Nv=null}else throw Error(W(198));Rv||(Rv=!0,s0=u)}}function Ru(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function OT(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function iC(n){if(Ru(n)!==n)throw Error(W(188))}function ML(n){var e=n.alternate;if(!e){if(e=Ru(n),e===null)throw Error(W(188));return e!==n?null:n}for(var t=n,s=e;;){var i=t.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){t=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===t)return iC(i),n;if(r===s)return iC(i),e;r=r.sibling}throw Error(W(188))}if(t.return!==s.return)t=i,s=r;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,s=r;break}if(o===s){a=!0,s=i,t=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===t){a=!0,t=r,s=i;break}if(o===s){a=!0,s=r,t=i;break}o=o.sibling}if(!a)throw Error(W(189))}}if(t.alternate!==s)throw Error(W(190))}if(t.tag!==3)throw Error(W(188));return t.stateNode.current===t?n:e}function FT(n){return n=ML(n),n!==null?$T(n):null}function $T(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=$T(n);if(e!==null)return e;n=n.sibling}return null}var VT=qs.unstable_scheduleCallback,rC=qs.unstable_cancelCallback,jL=qs.unstable_shouldYield,LL=qs.unstable_requestPaint,Rt=qs.unstable_now,OL=qs.unstable_getCurrentPriorityLevel,QS=qs.unstable_ImmediatePriority,BT=qs.unstable_UserBlockingPriority,Iv=qs.unstable_NormalPriority,FL=qs.unstable_LowPriority,zT=qs.unstable_IdlePriority,Xx=null,Er=null;function $L(n){if(Er&&typeof Er.onCommitFiberRoot=="function")try{Er.onCommitFiberRoot(Xx,n,void 0,(n.current.flags&128)===128)}catch{}}var Fi=Math.clz32?Math.clz32:zL,VL=Math.log,BL=Math.LN2;function zL(n){return n>>>=0,n===0?32:31-(VL(n)/BL|0)|0}var sy=64,iy=4194304;function Lf(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Dv(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,i=n.suspendedLanes,r=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~i;o!==0?s=Lf(o):(r&=a,r!==0&&(s=Lf(r)))}else a=t&~i,a!==0?s=Lf(a):r!==0&&(s=Lf(r));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-Fi(e),i=1<<t,s|=n[t],e&=~i;return s}function UL(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HL(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,i=n.expirationTimes,r=n.pendingLanes;0<r;){var a=31-Fi(r),o=1<<a,l=i[a];l===-1?(!(o&t)||o&s)&&(i[a]=UL(o,e)):l<=e&&(n.expiredLanes|=o),r&=~o}}function i0(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function UT(){var n=sy;return sy<<=1,!(sy&4194240)&&(sy=64),n}function Hw(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function jg(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Fi(e),n[e]=t}function WL(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Fi(t),r=1<<i;e[i]=0,s[i]=-1,n[i]=-1,t&=~r}}function ZS(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-Fi(t),i=1<<s;i&e|n[s]&e&&(n[s]|=e),t&=~i}}var Ze=0;function HT(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var WT,JS,qT,GT,KT,r0=!1,ry=[],nl=null,sl=null,il=null,_p=new Map,Sp=new Map,to=[],qL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aC(n,e){switch(n){case"focusin":case"focusout":nl=null;break;case"dragenter":case"dragleave":sl=null;break;case"mouseover":case"mouseout":il=null;break;case"pointerover":case"pointerout":_p.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sp.delete(e.pointerId)}}function vf(n,e,t,s,i,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=Og(e),e!==null&&JS(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function GL(n,e,t,s,i){switch(e){case"focusin":return nl=vf(nl,n,e,t,s,i),!0;case"dragenter":return sl=vf(sl,n,e,t,s,i),!0;case"mouseover":return il=vf(il,n,e,t,s,i),!0;case"pointerover":var r=i.pointerId;return _p.set(r,vf(_p.get(r)||null,n,e,t,s,i)),!0;case"gotpointercapture":return r=i.pointerId,Sp.set(r,vf(Sp.get(r)||null,n,e,t,s,i)),!0}return!1}function XT(n){var e=Ul(n.target);if(e!==null){var t=Ru(e);if(t!==null){if(e=t.tag,e===13){if(e=OT(t),e!==null){n.blockedOn=e,KT(n.priority,function(){qT(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function jy(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=a0(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);e0=s,t.target.dispatchEvent(s),e0=null}else return e=Og(t),e!==null&&JS(e),n.blockedOn=t,!1;e.shift()}return!0}function oC(n,e,t){jy(n)&&t.delete(e)}function KL(){r0=!1,nl!==null&&jy(nl)&&(nl=null),sl!==null&&jy(sl)&&(sl=null),il!==null&&jy(il)&&(il=null),_p.forEach(oC),Sp.forEach(oC)}function xf(n,e){n.blockedOn===e&&(n.blockedOn=null,r0||(r0=!0,qs.unstable_scheduleCallback(qs.unstable_NormalPriority,KL)))}function Ap(n){function e(i){return xf(i,n)}if(0<ry.length){xf(ry[0],n);for(var t=1;t<ry.length;t++){var s=ry[t];s.blockedOn===n&&(s.blockedOn=null)}}for(nl!==null&&xf(nl,n),sl!==null&&xf(sl,n),il!==null&&xf(il,n),_p.forEach(e),Sp.forEach(e),t=0;t<to.length;t++)s=to[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<to.length&&(t=to[0],t.blockedOn===null);)XT(t),t.blockedOn===null&&to.shift()}var yd=Ua.ReactCurrentBatchConfig,Mv=!0;function XL(n,e,t,s){var i=Ze,r=yd.transition;yd.transition=null;try{Ze=1,eA(n,e,t,s)}finally{Ze=i,yd.transition=r}}function YL(n,e,t,s){var i=Ze,r=yd.transition;yd.transition=null;try{Ze=4,eA(n,e,t,s)}finally{Ze=i,yd.transition=r}}function eA(n,e,t,s){if(Mv){var i=a0(n,e,t,s);if(i===null)eb(n,e,s,jv,t),aC(n,s);else if(GL(i,n,e,t,s))s.stopPropagation();else if(aC(n,s),e&4&&-1<qL.indexOf(n)){for(;i!==null;){var r=Og(i);if(r!==null&&WT(r),r=a0(n,e,t,s),r===null&&eb(n,e,s,jv,t),r===i)break;i=r}i!==null&&s.stopPropagation()}else eb(n,e,s,null,t)}}var jv=null;function a0(n,e,t,s){if(jv=null,n=YS(s),n=Ul(n),n!==null)if(e=Ru(n),e===null)n=null;else if(t=e.tag,t===13){if(n=OT(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return jv=n,null}function YT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OL()){case QS:return 1;case BT:return 4;case Iv:case FL:return 16;case zT:return 536870912;default:return 16}default:return 16}}var Zo=null,tA=null,Ly=null;function QT(){if(Ly)return Ly;var n,e=tA,t=e.length,s,i="value"in Zo?Zo.value:Zo.textContent,r=i.length;for(n=0;n<t&&e[n]===i[n];n++);var a=t-n;for(s=1;s<=a&&e[t-s]===i[r-s];s++);return Ly=i.slice(n,1<s?1-s:void 0)}function Oy(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function ay(){return!0}function lC(){return!1}function Ks(n){function e(t,s,i,r,a){this._reactName=t,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?ay:lC,this.isPropagationStopped=lC,this}return St(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ay)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ay)},persist:function(){},isPersistent:ay}),e}var cf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nA=Ks(cf),Lg=St({},cf,{view:0,detail:0}),QL=Ks(Lg),Ww,qw,wf,Yx=St({},Lg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sA,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==wf&&(wf&&n.type==="mousemove"?(Ww=n.screenX-wf.screenX,qw=n.screenY-wf.screenY):qw=Ww=0,wf=n),Ww)},movementY:function(n){return"movementY"in n?n.movementY:qw}}),cC=Ks(Yx),ZL=St({},Yx,{dataTransfer:0}),JL=Ks(ZL),eO=St({},Lg,{relatedTarget:0}),Gw=Ks(eO),tO=St({},cf,{animationName:0,elapsedTime:0,pseudoElement:0}),nO=Ks(tO),sO=St({},cf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),iO=Ks(sO),rO=St({},cf,{data:0}),uC=Ks(rO),aO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cO(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=lO[n])?!!e[n]:!1}function sA(){return cO}var uO=St({},Lg,{key:function(n){if(n.key){var e=aO[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Oy(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?oO[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sA,charCode:function(n){return n.type==="keypress"?Oy(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Oy(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),dO=Ks(uO),hO=St({},Yx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dC=Ks(hO),fO=St({},Lg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sA}),pO=Ks(fO),mO=St({},cf,{propertyName:0,elapsedTime:0,pseudoElement:0}),gO=Ks(mO),yO=St({},Yx,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),vO=Ks(yO),xO=[9,13,27,32],iA=ja&&"CompositionEvent"in window,cp=null;ja&&"documentMode"in document&&(cp=document.documentMode);var wO=ja&&"TextEvent"in window&&!cp,ZT=ja&&(!iA||cp&&8<cp&&11>=cp),hC=" ",fC=!1;function JT(n,e){switch(n){case"keyup":return xO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eP(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ed=!1;function bO(n,e){switch(n){case"compositionend":return eP(e);case"keypress":return e.which!==32?null:(fC=!0,hC);case"textInput":return n=e.data,n===hC&&fC?null:n;default:return null}}function _O(n,e){if(ed)return n==="compositionend"||!iA&&JT(n,e)?(n=QT(),Ly=tA=Zo=null,ed=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZT&&e.locale!=="ko"?null:e.data;default:return null}}var SO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!SO[n.type]:e==="textarea"}function tP(n,e,t,s){IT(s),e=Lv(e,"onChange"),0<e.length&&(t=new nA("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var up=null,Cp=null;function AO(n){hP(n,0)}function Qx(n){var e=sd(n);if(CT(e))return n}function CO(n,e){if(n==="change")return e}var nP=!1;if(ja){var Kw;if(ja){var Xw="oninput"in document;if(!Xw){var mC=document.createElement("div");mC.setAttribute("oninput","return;"),Xw=typeof mC.oninput=="function"}Kw=Xw}else Kw=!1;nP=Kw&&(!document.documentMode||9<document.documentMode)}function gC(){up&&(up.detachEvent("onpropertychange",sP),Cp=up=null)}function sP(n){if(n.propertyName==="value"&&Qx(Cp)){var e=[];tP(e,Cp,n,YS(n)),LT(AO,e)}}function kO(n,e,t){n==="focusin"?(gC(),up=e,Cp=t,up.attachEvent("onpropertychange",sP)):n==="focusout"&&gC()}function EO(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Qx(Cp)}function TO(n,e){if(n==="click")return Qx(e)}function PO(n,e){if(n==="input"||n==="change")return Qx(e)}function NO(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Bi=typeof Object.is=="function"?Object.is:NO;function kp(n,e){if(Bi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var i=t[s];if(!zb.call(e,i)||!Bi(n[i],e[i]))return!1}return!0}function yC(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function vC(n,e){var t=yC(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=yC(t)}}function iP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?iP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function rP(){for(var n=window,e=Pv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Pv(n.document)}return e}function rA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function RO(n){var e=rP(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&iP(t.ownerDocument.documentElement,t)){if(s!==null&&rA(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,r=Math.min(s.start,i);s=s.end===void 0?r:Math.min(s.end,i),!n.extend&&r>s&&(i=s,s=r,r=i),i=vC(t,r);var a=vC(t,s);i&&a&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),r>s?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var IO=ja&&"documentMode"in document&&11>=document.documentMode,td=null,o0=null,dp=null,l0=!1;function xC(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;l0||td==null||td!==Pv(s)||(s=td,"selectionStart"in s&&rA(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),dp&&kp(dp,s)||(dp=s,s=Lv(o0,"onSelect"),0<s.length&&(e=new nA("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=td)))}function oy(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var nd={animationend:oy("Animation","AnimationEnd"),animationiteration:oy("Animation","AnimationIteration"),animationstart:oy("Animation","AnimationStart"),transitionend:oy("Transition","TransitionEnd")},Yw={},aP={};ja&&(aP=document.createElement("div").style,"AnimationEvent"in window||(delete nd.animationend.animation,delete nd.animationiteration.animation,delete nd.animationstart.animation),"TransitionEvent"in window||delete nd.transitionend.transition);function Zx(n){if(Yw[n])return Yw[n];if(!nd[n])return n;var e=nd[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in aP)return Yw[n]=e[t];return n}var oP=Zx("animationend"),lP=Zx("animationiteration"),cP=Zx("animationstart"),uP=Zx("transitionend"),dP=new Map,wC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kl(n,e){dP.set(n,e),Nu(e,[n])}for(var Qw=0;Qw<wC.length;Qw++){var Zw=wC[Qw],DO=Zw.toLowerCase(),MO=Zw[0].toUpperCase()+Zw.slice(1);kl(DO,"on"+MO)}kl(oP,"onAnimationEnd");kl(lP,"onAnimationIteration");kl(cP,"onAnimationStart");kl("dblclick","onDoubleClick");kl("focusin","onFocus");kl("focusout","onBlur");kl(uP,"onTransitionEnd");Gh("onMouseEnter",["mouseout","mouseover"]);Gh("onMouseLeave",["mouseout","mouseover"]);Gh("onPointerEnter",["pointerout","pointerover"]);Gh("onPointerLeave",["pointerout","pointerover"]);Nu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Of));function bC(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,DL(s,e,void 0,n),n.currentTarget=null}function hP(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var a=s.length-1;0<=a;a--){var o=s[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==r&&i.isPropagationStopped())break e;bC(i,o,u),r=l}else for(a=0;a<s.length;a++){if(o=s[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==r&&i.isPropagationStopped())break e;bC(i,o,u),r=l}}}if(Rv)throw n=s0,Rv=!1,s0=null,n}function dt(n,e){var t=e[f0];t===void 0&&(t=e[f0]=new Set);var s=n+"__bubble";t.has(s)||(fP(e,n,2,!1),t.add(s))}function Jw(n,e,t){var s=0;e&&(s|=4),fP(t,n,s,e)}var ly="_reactListening"+Math.random().toString(36).slice(2);function Ep(n){if(!n[ly]){n[ly]=!0,wT.forEach(function(t){t!=="selectionchange"&&(jO.has(t)||Jw(t,!1,n),Jw(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[ly]||(e[ly]=!0,Jw("selectionchange",!1,e))}}function fP(n,e,t,s){switch(YT(e)){case 1:var i=XL;break;case 4:i=YL;break;default:i=eA}t=i.bind(null,e,t,n),i=void 0,!n0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function eb(n,e,t,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var o=s.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=s.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Ul(o),a===null)return;if(l=a.tag,l===5||l===6){s=r=a;continue e}o=o.parentNode}}s=s.return}LT(function(){var u=r,d=YS(t),f=[];e:{var p=dP.get(n);if(p!==void 0){var y=nA,g=n;switch(n){case"keypress":if(Oy(t)===0)break e;case"keydown":case"keyup":y=dO;break;case"focusin":g="focus",y=Gw;break;case"focusout":g="blur",y=Gw;break;case"beforeblur":case"afterblur":y=Gw;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=cC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=JL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=pO;break;case oP:case lP:case cP:y=nO;break;case uP:y=gO;break;case"scroll":y=QL;break;case"wheel":y=vO;break;case"copy":case"cut":case"paste":y=iO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=dC}var m=(e&4)!==0,w=!m&&n==="scroll",v=m?p!==null?p+"Capture":null:p;m=[];for(var x=u,_;x!==null;){_=x;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,v!==null&&(S=bp(x,v),S!=null&&m.push(Tp(x,S,_)))),w)break;x=x.return}0<m.length&&(p=new y(p,g,null,t,d),f.push({event:p,listeners:m}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",y=n==="mouseout"||n==="pointerout",p&&t!==e0&&(g=t.relatedTarget||t.fromElement)&&(Ul(g)||g[La]))break e;if((y||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,y?(g=t.relatedTarget||t.toElement,y=u,g=g?Ul(g):null,g!==null&&(w=Ru(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=u),y!==g)){if(m=cC,S="onMouseLeave",v="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(m=dC,S="onPointerLeave",v="onPointerEnter",x="pointer"),w=y==null?p:sd(y),_=g==null?p:sd(g),p=new m(S,x+"leave",y,t,d),p.target=w,p.relatedTarget=_,S=null,Ul(d)===u&&(m=new m(v,x+"enter",g,t,d),m.target=_,m.relatedTarget=w,S=m),w=S,y&&g)t:{for(m=y,v=g,x=0,_=m;_;_=Fu(_))x++;for(_=0,S=v;S;S=Fu(S))_++;for(;0<x-_;)m=Fu(m),x--;for(;0<_-x;)v=Fu(v),_--;for(;x--;){if(m===v||v!==null&&m===v.alternate)break t;m=Fu(m),v=Fu(v)}m=null}else m=null;y!==null&&_C(f,p,y,m,!1),g!==null&&w!==null&&_C(f,w,g,m,!0)}}e:{if(p=u?sd(u):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var E=CO;else if(pC(p))if(nP)E=PO;else{E=EO;var P=kO}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(E=TO);if(E&&(E=E(n,u))){tP(f,E,t,d);break e}P&&P(n,p,u),n==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&Xb(p,"number",p.value)}switch(P=u?sd(u):window,n){case"focusin":(pC(P)||P.contentEditable==="true")&&(td=P,o0=u,dp=null);break;case"focusout":dp=o0=td=null;break;case"mousedown":l0=!0;break;case"contextmenu":case"mouseup":case"dragend":l0=!1,xC(f,t,d);break;case"selectionchange":if(IO)break;case"keydown":case"keyup":xC(f,t,d)}var T;if(iA)e:{switch(n){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else ed?JT(n,t)&&(N="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(ZT&&t.locale!=="ko"&&(ed||N!=="onCompositionStart"?N==="onCompositionEnd"&&ed&&(T=QT()):(Zo=d,tA="value"in Zo?Zo.value:Zo.textContent,ed=!0)),P=Lv(u,N),0<P.length&&(N=new uC(N,n,null,t,d),f.push({event:N,listeners:P}),T?N.data=T:(T=eP(t),T!==null&&(N.data=T)))),(T=wO?bO(n,t):_O(n,t))&&(u=Lv(u,"onBeforeInput"),0<u.length&&(d=new uC("onBeforeInput","beforeinput",null,t,d),f.push({event:d,listeners:u}),d.data=T))}hP(f,e)})}function Tp(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Lv(n,e){for(var t=e+"Capture",s=[];n!==null;){var i=n,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=bp(n,t),r!=null&&s.unshift(Tp(n,r,i)),r=bp(n,e),r!=null&&s.push(Tp(n,r,i))),n=n.return}return s}function Fu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function _C(n,e,t,s,i){for(var r=e._reactName,a=[];t!==null&&t!==s;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===s)break;o.tag===5&&u!==null&&(o=u,i?(l=bp(t,r),l!=null&&a.unshift(Tp(t,l,o))):i||(l=bp(t,r),l!=null&&a.push(Tp(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var LO=/\r\n?/g,OO=/\u0000|\uFFFD/g;function SC(n){return(typeof n=="string"?n:""+n).replace(LO,`
`).replace(OO,"")}function cy(n,e,t){if(e=SC(e),SC(n)!==e&&t)throw Error(W(425))}function Ov(){}var c0=null,u0=null;function d0(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var h0=typeof setTimeout=="function"?setTimeout:void 0,FO=typeof clearTimeout=="function"?clearTimeout:void 0,AC=typeof Promise=="function"?Promise:void 0,$O=typeof queueMicrotask=="function"?queueMicrotask:typeof AC<"u"?function(n){return AC.resolve(null).then(n).catch(VO)}:h0;function VO(n){setTimeout(function(){throw n})}function tb(n,e){var t=e,s=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(s===0){n.removeChild(i),Ap(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=i}while(t);Ap(e)}function rl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function CC(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var uf=Math.random().toString(36).slice(2),_r="__reactFiber$"+uf,Pp="__reactProps$"+uf,La="__reactContainer$"+uf,f0="__reactEvents$"+uf,BO="__reactListeners$"+uf,zO="__reactHandles$"+uf;function Ul(n){var e=n[_r];if(e)return e;for(var t=n.parentNode;t;){if(e=t[La]||t[_r]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=CC(n);n!==null;){if(t=n[_r])return t;n=CC(n)}return e}n=t,t=n.parentNode}return null}function Og(n){return n=n[_r]||n[La],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function sd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(W(33))}function Jx(n){return n[Pp]||null}var p0=[],id=-1;function El(n){return{current:n}}function ht(n){0>id||(n.current=p0[id],p0[id]=null,id--)}function lt(n,e){id++,p0[id]=n.current,n.current=e}var fl={},Dn=El(fl),gs=El(!1),du=fl;function Kh(n,e){var t=n.type.contextTypes;if(!t)return fl;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in t)i[r]=e[r];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ys(n){return n=n.childContextTypes,n!=null}function Fv(){ht(gs),ht(Dn)}function kC(n,e,t){if(Dn.current!==fl)throw Error(W(168));lt(Dn,e),lt(gs,t)}function pP(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(W(108,kL(n)||"Unknown",i));return St({},t,s)}function $v(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fl,du=Dn.current,lt(Dn,n),lt(gs,gs.current),!0}function EC(n,e,t){var s=n.stateNode;if(!s)throw Error(W(169));t?(n=pP(n,e,du),s.__reactInternalMemoizedMergedChildContext=n,ht(gs),ht(Dn),lt(Dn,n)):ht(gs),lt(gs,t)}var Xr=null,ew=!1,nb=!1;function mP(n){Xr===null?Xr=[n]:Xr.push(n)}function UO(n){ew=!0,mP(n)}function Tl(){if(!nb&&Xr!==null){nb=!0;var n=0,e=Ze;try{var t=Xr;for(Ze=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}Xr=null,ew=!1}catch(i){throw Xr!==null&&(Xr=Xr.slice(n+1)),VT(QS,Tl),i}finally{Ze=e,nb=!1}}return null}var rd=[],ad=0,Vv=null,Bv=0,ri=[],ai=0,hu=null,Pa=1,Na="";function Ml(n,e){rd[ad++]=Bv,rd[ad++]=Vv,Vv=n,Bv=e}function gP(n,e,t){ri[ai++]=Pa,ri[ai++]=Na,ri[ai++]=hu,hu=n;var s=Pa;n=Na;var i=32-Fi(s)-1;s&=~(1<<i),t+=1;var r=32-Fi(e)+i;if(30<r){var a=i-i%5;r=(s&(1<<a)-1).toString(32),s>>=a,i-=a,Pa=1<<32-Fi(e)+i|t<<i|s,Na=r+n}else Pa=1<<r|t<<i|s,Na=n}function aA(n){n.return!==null&&(Ml(n,1),gP(n,1,0))}function oA(n){for(;n===Vv;)Vv=rd[--ad],rd[ad]=null,Bv=rd[--ad],rd[ad]=null;for(;n===hu;)hu=ri[--ai],ri[ai]=null,Na=ri[--ai],ri[ai]=null,Pa=ri[--ai],ri[ai]=null}var zs=null,Bs=null,yt=!1,Ii=null;function yP(n,e){var t=li(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function TC(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,zs=n,Bs=rl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,zs=n,Bs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=hu!==null?{id:Pa,overflow:Na}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=li(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,zs=n,Bs=null,!0):!1;default:return!1}}function m0(n){return(n.mode&1)!==0&&(n.flags&128)===0}function g0(n){if(yt){var e=Bs;if(e){var t=e;if(!TC(n,e)){if(m0(n))throw Error(W(418));e=rl(t.nextSibling);var s=zs;e&&TC(n,e)?yP(s,t):(n.flags=n.flags&-4097|2,yt=!1,zs=n)}}else{if(m0(n))throw Error(W(418));n.flags=n.flags&-4097|2,yt=!1,zs=n}}}function PC(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;zs=n}function uy(n){if(n!==zs)return!1;if(!yt)return PC(n),yt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!d0(n.type,n.memoizedProps)),e&&(e=Bs)){if(m0(n))throw vP(),Error(W(418));for(;e;)yP(n,e),e=rl(e.nextSibling)}if(PC(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(W(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Bs=rl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Bs=null}}else Bs=zs?rl(n.stateNode.nextSibling):null;return!0}function vP(){for(var n=Bs;n;)n=rl(n.nextSibling)}function Xh(){Bs=zs=null,yt=!1}function lA(n){Ii===null?Ii=[n]:Ii.push(n)}var HO=Ua.ReactCurrentBatchConfig;function bf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(W(309));var s=t.stateNode}if(!s)throw Error(W(147,n));var i=s,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(a){var o=i.refs;a===null?delete o[r]:o[r]=a},e._stringRef=r,e)}if(typeof n!="string")throw Error(W(284));if(!t._owner)throw Error(W(290,n))}return n}function dy(n,e){throw n=Object.prototype.toString.call(e),Error(W(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function NC(n){var e=n._init;return e(n._payload)}function xP(n){function e(v,x){if(n){var _=v.deletions;_===null?(v.deletions=[x],v.flags|=16):_.push(x)}}function t(v,x){if(!n)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function s(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function i(v,x){return v=cl(v,x),v.index=0,v.sibling=null,v}function r(v,x,_){return v.index=_,n?(_=v.alternate,_!==null?(_=_.index,_<x?(v.flags|=2,x):_):(v.flags|=2,x)):(v.flags|=1048576,x)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function o(v,x,_,S){return x===null||x.tag!==6?(x=cb(_,v.mode,S),x.return=v,x):(x=i(x,_),x.return=v,x)}function l(v,x,_,S){var E=_.type;return E===Ju?d(v,x,_.props.children,S,_.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ja&&NC(E)===x.type)?(S=i(x,_.props),S.ref=bf(v,x,_),S.return=v,S):(S=Hy(_.type,_.key,_.props,null,v.mode,S),S.ref=bf(v,x,_),S.return=v,S)}function u(v,x,_,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=ub(_,v.mode,S),x.return=v,x):(x=i(x,_.children||[]),x.return=v,x)}function d(v,x,_,S,E){return x===null||x.tag!==7?(x=cu(_,v.mode,S,E),x.return=v,x):(x=i(x,_),x.return=v,x)}function f(v,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=cb(""+x,v.mode,_),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ey:return _=Hy(x.type,x.key,x.props,null,v.mode,_),_.ref=bf(v,null,x),_.return=v,_;case Zu:return x=ub(x,v.mode,_),x.return=v,x;case Ja:var S=x._init;return f(v,S(x._payload),_)}if(jf(x)||gf(x))return x=cu(x,v.mode,_,null),x.return=v,x;dy(v,x)}return null}function p(v,x,_,S){var E=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:o(v,x,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ey:return _.key===E?l(v,x,_,S):null;case Zu:return _.key===E?u(v,x,_,S):null;case Ja:return E=_._init,p(v,x,E(_._payload),S)}if(jf(_)||gf(_))return E!==null?null:d(v,x,_,S,null);dy(v,_)}return null}function y(v,x,_,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(_)||null,o(x,v,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ey:return v=v.get(S.key===null?_:S.key)||null,l(x,v,S,E);case Zu:return v=v.get(S.key===null?_:S.key)||null,u(x,v,S,E);case Ja:var P=S._init;return y(v,x,_,P(S._payload),E)}if(jf(S)||gf(S))return v=v.get(_)||null,d(x,v,S,E,null);dy(x,S)}return null}function g(v,x,_,S){for(var E=null,P=null,T=x,N=x=0,I=null;T!==null&&N<_.length;N++){T.index>N?(I=T,T=null):I=T.sibling;var D=p(v,T,_[N],S);if(D===null){T===null&&(T=I);break}n&&T&&D.alternate===null&&e(v,T),x=r(D,x,N),P===null?E=D:P.sibling=D,P=D,T=I}if(N===_.length)return t(v,T),yt&&Ml(v,N),E;if(T===null){for(;N<_.length;N++)T=f(v,_[N],S),T!==null&&(x=r(T,x,N),P===null?E=T:P.sibling=T,P=T);return yt&&Ml(v,N),E}for(T=s(v,T);N<_.length;N++)I=y(T,v,N,_[N],S),I!==null&&(n&&I.alternate!==null&&T.delete(I.key===null?N:I.key),x=r(I,x,N),P===null?E=I:P.sibling=I,P=I);return n&&T.forEach(function(j){return e(v,j)}),yt&&Ml(v,N),E}function m(v,x,_,S){var E=gf(_);if(typeof E!="function")throw Error(W(150));if(_=E.call(_),_==null)throw Error(W(151));for(var P=E=null,T=x,N=x=0,I=null,D=_.next();T!==null&&!D.done;N++,D=_.next()){T.index>N?(I=T,T=null):I=T.sibling;var j=p(v,T,D.value,S);if(j===null){T===null&&(T=I);break}n&&T&&j.alternate===null&&e(v,T),x=r(j,x,N),P===null?E=j:P.sibling=j,P=j,T=I}if(D.done)return t(v,T),yt&&Ml(v,N),E;if(T===null){for(;!D.done;N++,D=_.next())D=f(v,D.value,S),D!==null&&(x=r(D,x,N),P===null?E=D:P.sibling=D,P=D);return yt&&Ml(v,N),E}for(T=s(v,T);!D.done;N++,D=_.next())D=y(T,v,N,D.value,S),D!==null&&(n&&D.alternate!==null&&T.delete(D.key===null?N:D.key),x=r(D,x,N),P===null?E=D:P.sibling=D,P=D);return n&&T.forEach(function(L){return e(v,L)}),yt&&Ml(v,N),E}function w(v,x,_,S){if(typeof _=="object"&&_!==null&&_.type===Ju&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ey:e:{for(var E=_.key,P=x;P!==null;){if(P.key===E){if(E=_.type,E===Ju){if(P.tag===7){t(v,P.sibling),x=i(P,_.props.children),x.return=v,v=x;break e}}else if(P.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ja&&NC(E)===P.type){t(v,P.sibling),x=i(P,_.props),x.ref=bf(v,P,_),x.return=v,v=x;break e}t(v,P);break}else e(v,P);P=P.sibling}_.type===Ju?(x=cu(_.props.children,v.mode,S,_.key),x.return=v,v=x):(S=Hy(_.type,_.key,_.props,null,v.mode,S),S.ref=bf(v,x,_),S.return=v,v=S)}return a(v);case Zu:e:{for(P=_.key;x!==null;){if(x.key===P)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){t(v,x.sibling),x=i(x,_.children||[]),x.return=v,v=x;break e}else{t(v,x);break}else e(v,x);x=x.sibling}x=ub(_,v.mode,S),x.return=v,v=x}return a(v);case Ja:return P=_._init,w(v,x,P(_._payload),S)}if(jf(_))return g(v,x,_,S);if(gf(_))return m(v,x,_,S);dy(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(t(v,x.sibling),x=i(x,_),x.return=v,v=x):(t(v,x),x=cb(_,v.mode,S),x.return=v,v=x),a(v)):t(v,x)}return w}var Yh=xP(!0),wP=xP(!1),zv=El(null),Uv=null,od=null,cA=null;function uA(){cA=od=Uv=null}function dA(n){var e=zv.current;ht(zv),n._currentValue=e}function y0(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function vd(n,e){Uv=n,cA=od=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ms=!0),n.firstContext=null)}function di(n){var e=n._currentValue;if(cA!==n)if(n={context:n,memoizedValue:e,next:null},od===null){if(Uv===null)throw Error(W(308));od=n,Uv.dependencies={lanes:0,firstContext:n}}else od=od.next=n;return e}var Hl=null;function hA(n){Hl===null?Hl=[n]:Hl.push(n)}function bP(n,e,t,s){var i=e.interleaved;return i===null?(t.next=t,hA(e)):(t.next=i.next,i.next=t),e.interleaved=t,Oa(n,s)}function Oa(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var eo=!1;function fA(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _P(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ra(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function al(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,Be&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,Oa(n,t)}return i=s.interleaved,i===null?(e.next=e,hA(s)):(e.next=i.next,i.next=e),s.interleaved=e,Oa(n,t)}function Fy(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,ZS(n,t)}}function RC(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var i=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?i=r=a:r=r.next=a,t=t.next}while(t!==null);r===null?i=r=e:r=r.next=e}else i=r=e;t={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Hv(n,e,t,s){var i=n.updateQueue;eo=!1;var r=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?r=u:a.next=u,a=l;var d=n.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(r!==null){var f=i.baseState;a=0,d=u=l=null,o=r;do{var p=o.lane,y=o.eventTime;if((s&p)===p){d!==null&&(d=d.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=n,m=o;switch(p=e,y=t,m.tag){case 1:if(g=m.payload,typeof g=="function"){f=g.call(y,f,p);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,p=typeof g=="function"?g.call(y,f,p):g,p==null)break e;f=St({},f,p);break e;case 2:eo=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else y={eventTime:y,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=y,l=f):d=d.next=y,a|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);pu|=a,n.lanes=a,n.memoizedState=f}}function IC(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],i=s.callback;if(i!==null){if(s.callback=null,s=t,typeof i!="function")throw Error(W(191,i));i.call(s)}}}var Fg={},Tr=El(Fg),Np=El(Fg),Rp=El(Fg);function Wl(n){if(n===Fg)throw Error(W(174));return n}function pA(n,e){switch(lt(Rp,e),lt(Np,n),lt(Tr,Fg),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qb(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Qb(e,n)}ht(Tr),lt(Tr,e)}function Qh(){ht(Tr),ht(Np),ht(Rp)}function SP(n){Wl(Rp.current);var e=Wl(Tr.current),t=Qb(e,n.type);e!==t&&(lt(Np,n),lt(Tr,t))}function mA(n){Np.current===n&&(ht(Tr),ht(Np))}var bt=El(0);function Wv(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sb=[];function gA(){for(var n=0;n<sb.length;n++)sb[n]._workInProgressVersionPrimary=null;sb.length=0}var $y=Ua.ReactCurrentDispatcher,ib=Ua.ReactCurrentBatchConfig,fu=0,_t=null,Kt=null,cn=null,qv=!1,hp=!1,Ip=0,WO=0;function Sn(){throw Error(W(321))}function yA(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Bi(n[t],e[t]))return!1;return!0}function vA(n,e,t,s,i,r){if(fu=r,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$y.current=n===null||n.memoizedState===null?XO:YO,n=t(s,i),hp){r=0;do{if(hp=!1,Ip=0,25<=r)throw Error(W(301));r+=1,cn=Kt=null,e.updateQueue=null,$y.current=QO,n=t(s,i)}while(hp)}if($y.current=Gv,e=Kt!==null&&Kt.next!==null,fu=0,cn=Kt=_t=null,qv=!1,e)throw Error(W(300));return n}function xA(){var n=Ip!==0;return Ip=0,n}function Ji(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?_t.memoizedState=cn=n:cn=cn.next=n,cn}function hi(){if(Kt===null){var n=_t.alternate;n=n!==null?n.memoizedState:null}else n=Kt.next;var e=cn===null?_t.memoizedState:cn.next;if(e!==null)cn=e,Kt=n;else{if(n===null)throw Error(W(310));Kt=n,n={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},cn===null?_t.memoizedState=cn=n:cn=cn.next=n}return cn}function Dp(n,e){return typeof e=="function"?e(n):e}function rb(n){var e=hi(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var s=Kt,i=s.baseQueue,r=t.pending;if(r!==null){if(i!==null){var a=i.next;i.next=r.next,r.next=a}s.baseQueue=i=r,t.pending=null}if(i!==null){r=i.next,s=s.baseState;var o=a=null,l=null,u=r;do{var d=u.lane;if((fu&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,a=s):l=l.next=f,_t.lanes|=d,pu|=d}u=u.next}while(u!==null&&u!==r);l===null?a=s:l.next=o,Bi(s,e.memoizedState)||(ms=!0),e.memoizedState=s,e.baseState=a,e.baseQueue=l,t.lastRenderedState=s}if(n=t.interleaved,n!==null){i=n;do r=i.lane,_t.lanes|=r,pu|=r,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function ab(n){var e=hi(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var s=t.dispatch,i=t.pending,r=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do r=n(r,a.action),a=a.next;while(a!==i);Bi(r,e.memoizedState)||(ms=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,s]}function AP(){}function CP(n,e){var t=_t,s=hi(),i=e(),r=!Bi(s.memoizedState,i);if(r&&(s.memoizedState=i,ms=!0),s=s.queue,wA(TP.bind(null,t,s,n),[n]),s.getSnapshot!==e||r||cn!==null&&cn.memoizedState.tag&1){if(t.flags|=2048,Mp(9,EP.bind(null,t,s,i,e),void 0,null),un===null)throw Error(W(349));fu&30||kP(t,e,i)}return i}function kP(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function EP(n,e,t,s){e.value=t,e.getSnapshot=s,PP(e)&&NP(n)}function TP(n,e,t){return t(function(){PP(e)&&NP(n)})}function PP(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Bi(n,t)}catch{return!0}}function NP(n){var e=Oa(n,1);e!==null&&$i(e,n,1,-1)}function DC(n){var e=Ji();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dp,lastRenderedState:n},e.queue=n,n=n.dispatch=KO.bind(null,_t,n),[e.memoizedState,n]}function Mp(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function RP(){return hi().memoizedState}function Vy(n,e,t,s){var i=Ji();_t.flags|=n,i.memoizedState=Mp(1|e,t,void 0,s===void 0?null:s)}function tw(n,e,t,s){var i=hi();s=s===void 0?null:s;var r=void 0;if(Kt!==null){var a=Kt.memoizedState;if(r=a.destroy,s!==null&&yA(s,a.deps)){i.memoizedState=Mp(e,t,r,s);return}}_t.flags|=n,i.memoizedState=Mp(1|e,t,r,s)}function MC(n,e){return Vy(8390656,8,n,e)}function wA(n,e){return tw(2048,8,n,e)}function IP(n,e){return tw(4,2,n,e)}function DP(n,e){return tw(4,4,n,e)}function MP(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function jP(n,e,t){return t=t!=null?t.concat([n]):null,tw(4,4,MP.bind(null,e,n),t)}function bA(){}function LP(n,e){var t=hi();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&yA(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function OP(n,e){var t=hi();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&yA(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function FP(n,e,t){return fu&21?(Bi(t,e)||(t=UT(),_t.lanes|=t,pu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ms=!0),n.memoizedState=t)}function qO(n,e){var t=Ze;Ze=t!==0&&4>t?t:4,n(!0);var s=ib.transition;ib.transition={};try{n(!1),e()}finally{Ze=t,ib.transition=s}}function $P(){return hi().memoizedState}function GO(n,e,t){var s=ll(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},VP(n))BP(e,t);else if(t=bP(n,e,t,s),t!==null){var i=Qn();$i(t,n,s,i),zP(t,e,s)}}function KO(n,e,t){var s=ll(n),i={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(VP(n))BP(e,i);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,t);if(i.hasEagerState=!0,i.eagerState=o,Bi(o,a)){var l=e.interleaved;l===null?(i.next=i,hA(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=bP(n,e,i,s),t!==null&&(i=Qn(),$i(t,n,s,i),zP(t,e,s))}}function VP(n){var e=n.alternate;return n===_t||e!==null&&e===_t}function BP(n,e){hp=qv=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function zP(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,ZS(n,t)}}var Gv={readContext:di,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useInsertionEffect:Sn,useLayoutEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useMutableSource:Sn,useSyncExternalStore:Sn,useId:Sn,unstable_isNewReconciler:!1},XO={readContext:di,useCallback:function(n,e){return Ji().memoizedState=[n,e===void 0?null:e],n},useContext:di,useEffect:MC,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Vy(4194308,4,MP.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Vy(4194308,4,n,e)},useInsertionEffect:function(n,e){return Vy(4,2,n,e)},useMemo:function(n,e){var t=Ji();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=Ji();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=GO.bind(null,_t,n),[s.memoizedState,n]},useRef:function(n){var e=Ji();return n={current:n},e.memoizedState=n},useState:DC,useDebugValue:bA,useDeferredValue:function(n){return Ji().memoizedState=n},useTransition:function(){var n=DC(!1),e=n[0];return n=qO.bind(null,n[1]),Ji().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=_t,i=Ji();if(yt){if(t===void 0)throw Error(W(407));t=t()}else{if(t=e(),un===null)throw Error(W(349));fu&30||kP(s,e,t)}i.memoizedState=t;var r={value:t,getSnapshot:e};return i.queue=r,MC(TP.bind(null,s,r,n),[n]),s.flags|=2048,Mp(9,EP.bind(null,s,r,t,e),void 0,null),t},useId:function(){var n=Ji(),e=un.identifierPrefix;if(yt){var t=Na,s=Pa;t=(s&~(1<<32-Fi(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ip++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=WO++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},YO={readContext:di,useCallback:LP,useContext:di,useEffect:wA,useImperativeHandle:jP,useInsertionEffect:IP,useLayoutEffect:DP,useMemo:OP,useReducer:rb,useRef:RP,useState:function(){return rb(Dp)},useDebugValue:bA,useDeferredValue:function(n){var e=hi();return FP(e,Kt.memoizedState,n)},useTransition:function(){var n=rb(Dp)[0],e=hi().memoizedState;return[n,e]},useMutableSource:AP,useSyncExternalStore:CP,useId:$P,unstable_isNewReconciler:!1},QO={readContext:di,useCallback:LP,useContext:di,useEffect:wA,useImperativeHandle:jP,useInsertionEffect:IP,useLayoutEffect:DP,useMemo:OP,useReducer:ab,useRef:RP,useState:function(){return ab(Dp)},useDebugValue:bA,useDeferredValue:function(n){var e=hi();return Kt===null?e.memoizedState=n:FP(e,Kt.memoizedState,n)},useTransition:function(){var n=ab(Dp)[0],e=hi().memoizedState;return[n,e]},useMutableSource:AP,useSyncExternalStore:CP,useId:$P,unstable_isNewReconciler:!1};function yi(n,e){if(n&&n.defaultProps){e=St({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function v0(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:St({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var nw={isMounted:function(n){return(n=n._reactInternals)?Ru(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=Qn(),i=ll(n),r=Ra(s,i);r.payload=e,t!=null&&(r.callback=t),e=al(n,r,i),e!==null&&($i(e,n,i,s),Fy(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=Qn(),i=ll(n),r=Ra(s,i);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=al(n,r,i),e!==null&&($i(e,n,i,s),Fy(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Qn(),s=ll(n),i=Ra(t,s);i.tag=2,e!=null&&(i.callback=e),e=al(n,i,s),e!==null&&($i(e,n,s,t),Fy(e,n,s))}};function jC(n,e,t,s,i,r,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,r,a):e.prototype&&e.prototype.isPureReactComponent?!kp(t,s)||!kp(i,r):!0}function UP(n,e,t){var s=!1,i=fl,r=e.contextType;return typeof r=="object"&&r!==null?r=di(r):(i=ys(e)?du:Dn.current,s=e.contextTypes,r=(s=s!=null)?Kh(n,i):fl),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nw,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=r),e}function LC(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&nw.enqueueReplaceState(e,e.state,null)}function x0(n,e,t,s){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},fA(n);var r=e.contextType;typeof r=="object"&&r!==null?i.context=di(r):(r=ys(e)?du:Dn.current,i.context=Kh(n,r)),i.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(v0(n,e,r,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&nw.enqueueReplaceState(i,i.state,null),Hv(n,t,i,s),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Zh(n,e){try{var t="",s=e;do t+=CL(s),s=s.return;while(s);var i=t}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:i,digest:null}}function ob(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function w0(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var ZO=typeof WeakMap=="function"?WeakMap:Map;function HP(n,e,t){t=Ra(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){Xv||(Xv=!0,N0=s),w0(n,e)},t}function WP(n,e,t){t=Ra(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;t.payload=function(){return s(i)},t.callback=function(){w0(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){w0(n,e),typeof s!="function"&&(ol===null?ol=new Set([this]):ol.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function OC(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new ZO;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(t)||(i.add(t),n=hF.bind(null,n,e,t),e.then(n,n))}function FC(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function $C(n,e,t,s,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ra(-1,1),e.tag=2,al(t,e,1))),t.lanes|=1),n)}var JO=Ua.ReactCurrentOwner,ms=!1;function Gn(n,e,t,s){e.child=n===null?wP(e,null,t,s):Yh(e,n.child,t,s)}function VC(n,e,t,s,i){t=t.render;var r=e.ref;return vd(e,i),s=vA(n,e,t,s,r,i),t=xA(),n!==null&&!ms?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Fa(n,e,i)):(yt&&t&&aA(e),e.flags|=1,Gn(n,e,s,i),e.child)}function BC(n,e,t,s,i){if(n===null){var r=t.type;return typeof r=="function"&&!PA(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,qP(n,e,r,s,i)):(n=Hy(t.type,null,s,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&i)){var a=r.memoizedProps;if(t=t.compare,t=t!==null?t:kp,t(a,s)&&n.ref===e.ref)return Fa(n,e,i)}return e.flags|=1,n=cl(r,s),n.ref=e.ref,n.return=e,e.child=n}function qP(n,e,t,s,i){if(n!==null){var r=n.memoizedProps;if(kp(r,s)&&n.ref===e.ref)if(ms=!1,e.pendingProps=s=r,(n.lanes&i)!==0)n.flags&131072&&(ms=!0);else return e.lanes=n.lanes,Fa(n,e,i)}return b0(n,e,t,s,i)}function GP(n,e,t){var s=e.pendingProps,i=s.children,r=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(cd,Os),Os|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,lt(cd,Os),Os|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:t,lt(cd,Os),Os|=s}else r!==null?(s=r.baseLanes|t,e.memoizedState=null):s=t,lt(cd,Os),Os|=s;return Gn(n,e,i,t),e.child}function KP(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function b0(n,e,t,s,i){var r=ys(t)?du:Dn.current;return r=Kh(e,r),vd(e,i),t=vA(n,e,t,s,r,i),s=xA(),n!==null&&!ms?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Fa(n,e,i)):(yt&&s&&aA(e),e.flags|=1,Gn(n,e,t,i),e.child)}function zC(n,e,t,s,i){if(ys(t)){var r=!0;$v(e)}else r=!1;if(vd(e,i),e.stateNode===null)By(n,e),UP(e,t,s),x0(e,t,s,i),s=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=di(u):(u=ys(t)?du:Dn.current,u=Kh(e,u));var d=t.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==s||l!==u)&&LC(e,a,s,u),eo=!1;var p=e.memoizedState;a.state=p,Hv(e,s,a,i),l=e.memoizedState,o!==s||p!==l||gs.current||eo?(typeof d=="function"&&(v0(e,t,d,s),l=e.memoizedState),(o=eo||jC(e,t,o,s,p,l,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),a.props=s,a.state=l,a.context=u,s=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,_P(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:yi(e.type,o),a.props=u,f=e.pendingProps,p=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=di(l):(l=ys(t)?du:Dn.current,l=Kh(e,l));var y=t.getDerivedStateFromProps;(d=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||p!==l)&&LC(e,a,s,l),eo=!1,p=e.memoizedState,a.state=p,Hv(e,s,a,i);var g=e.memoizedState;o!==f||p!==g||gs.current||eo?(typeof y=="function"&&(v0(e,t,y,s),g=e.memoizedState),(u=eo||jC(e,t,u,s,p,g,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,g,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=g),a.props=s,a.state=g,a.context=l,s=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),s=!1)}return _0(n,e,t,s,r,i)}function _0(n,e,t,s,i,r){KP(n,e);var a=(e.flags&128)!==0;if(!s&&!a)return i&&EC(e,t,!1),Fa(n,e,r);s=e.stateNode,JO.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&a?(e.child=Yh(e,n.child,null,r),e.child=Yh(e,null,o,r)):Gn(n,e,o,r),e.memoizedState=s.state,i&&EC(e,t,!0),e.child}function XP(n){var e=n.stateNode;e.pendingContext?kC(n,e.pendingContext,e.pendingContext!==e.context):e.context&&kC(n,e.context,!1),pA(n,e.containerInfo)}function UC(n,e,t,s,i){return Xh(),lA(i),e.flags|=256,Gn(n,e,t,s),e.child}var S0={dehydrated:null,treeContext:null,retryLane:0};function A0(n){return{baseLanes:n,cachePool:null,transitions:null}}function YP(n,e,t){var s=e.pendingProps,i=bt.current,r=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!==0),o?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),lt(bt,i&1),n===null)return g0(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=s.children,n=s.fallback,r?(s=e.mode,r=e.child,a={mode:"hidden",children:a},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=rw(a,s,0,null),n=cu(n,s,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=A0(t),e.memoizedState=S0,n):_A(e,a));if(i=n.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return eF(n,e,a,s,o,i,t);if(r){r=s.fallback,a=e.mode,i=n.child,o=i.sibling;var l={mode:"hidden",children:s.children};return!(a&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=cl(i,l),s.subtreeFlags=i.subtreeFlags&14680064),o!==null?r=cl(o,r):(r=cu(r,a,t,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,a=n.child.memoizedState,a=a===null?A0(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=n.childLanes&~t,e.memoizedState=S0,s}return r=n.child,n=r.sibling,s=cl(r,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function _A(n,e){return e=rw({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function hy(n,e,t,s){return s!==null&&lA(s),Yh(e,n.child,null,t),n=_A(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function eF(n,e,t,s,i,r,a){if(t)return e.flags&256?(e.flags&=-257,s=ob(Error(W(422))),hy(n,e,a,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=s.fallback,i=e.mode,s=rw({mode:"visible",children:s.children},i,0,null),r=cu(r,i,a,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,e.mode&1&&Yh(e,n.child,null,a),e.child.memoizedState=A0(a),e.memoizedState=S0,r);if(!(e.mode&1))return hy(n,e,a,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var o=s.dgst;return s=o,r=Error(W(419)),s=ob(r,s,void 0),hy(n,e,a,s)}if(o=(a&n.childLanes)!==0,ms||o){if(s=un,s!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|a)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,Oa(n,i),$i(s,n,i,-1))}return TA(),s=ob(Error(W(421))),hy(n,e,a,s)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=fF.bind(null,n),i._reactRetry=e,null):(n=r.treeContext,Bs=rl(i.nextSibling),zs=e,yt=!0,Ii=null,n!==null&&(ri[ai++]=Pa,ri[ai++]=Na,ri[ai++]=hu,Pa=n.id,Na=n.overflow,hu=e),e=_A(e,s.children),e.flags|=4096,e)}function HC(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),y0(n.return,e,t)}function lb(n,e,t,s,i){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=t,r.tailMode=i)}function QP(n,e,t){var s=e.pendingProps,i=s.revealOrder,r=s.tail;if(Gn(n,e,s.children,t),s=bt.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&HC(n,t,e);else if(n.tag===19)HC(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(lt(bt,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Wv(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),lb(e,!1,i,t,r);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Wv(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}lb(e,!0,t,null,r);break;case"together":lb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function By(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Fa(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),pu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(W(153));if(e.child!==null){for(n=e.child,t=cl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=cl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function tF(n,e,t){switch(e.tag){case 3:XP(e),Xh();break;case 5:SP(e);break;case 1:ys(e.type)&&$v(e);break;case 4:pA(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;lt(zv,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(lt(bt,bt.current&1),e.flags|=128,null):t&e.child.childLanes?YP(n,e,t):(lt(bt,bt.current&1),n=Fa(n,e,t),n!==null?n.sibling:null);lt(bt,bt.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return QP(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(bt,bt.current),s)break;return null;case 22:case 23:return e.lanes=0,GP(n,e,t)}return Fa(n,e,t)}var ZP,C0,JP,eN;ZP=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};C0=function(){};JP=function(n,e,t,s){var i=n.memoizedProps;if(i!==s){n=e.stateNode,Wl(Tr.current);var r=null;switch(t){case"input":i=Gb(n,i),s=Gb(n,s),r=[];break;case"select":i=St({},i,{value:void 0}),s=St({},s,{value:void 0}),r=[];break;case"textarea":i=Yb(n,i),s=Yb(n,s),r=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=Ov)}Zb(t,s);var a;t=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xp.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in s){var l=s[u];if(o=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(r||(r=[]),r.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(r=r||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xp.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&dt("scroll",n),r||o===l||(r=[])):(r=r||[]).push(u,l))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};eN=function(n,e,t,s){t!==s&&(e.flags|=4)};function _f(n,e){if(!yt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function An(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function nF(n,e,t){var s=e.pendingProps;switch(oA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(e),null;case 1:return ys(e.type)&&Fv(),An(e),null;case 3:return s=e.stateNode,Qh(),ht(gs),ht(Dn),gA(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(uy(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ii!==null&&(D0(Ii),Ii=null))),C0(n,e),An(e),null;case 5:mA(e);var i=Wl(Rp.current);if(t=e.type,n!==null&&e.stateNode!=null)JP(n,e,t,s,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(W(166));return An(e),null}if(n=Wl(Tr.current),uy(e)){s=e.stateNode,t=e.type;var r=e.memoizedProps;switch(s[_r]=e,s[Pp]=r,n=(e.mode&1)!==0,t){case"dialog":dt("cancel",s),dt("close",s);break;case"iframe":case"object":case"embed":dt("load",s);break;case"video":case"audio":for(i=0;i<Of.length;i++)dt(Of[i],s);break;case"source":dt("error",s);break;case"img":case"image":case"link":dt("error",s),dt("load",s);break;case"details":dt("toggle",s);break;case"input":J1(s,r),dt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},dt("invalid",s);break;case"textarea":tC(s,r),dt("invalid",s)}Zb(t,r),i=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?s.textContent!==o&&(r.suppressHydrationWarning!==!0&&cy(s.textContent,o,n),i=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&cy(s.textContent,o,n),i=["children",""+o]):xp.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&dt("scroll",s)}switch(t){case"input":ty(s),eC(s,r,!0);break;case"textarea":ty(s),nC(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=Ov)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=TT(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=a.createElement(t,{is:s.is}):(n=a.createElement(t),t==="select"&&(a=n,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):n=a.createElementNS(n,t),n[_r]=e,n[Pp]=s,ZP(n,e,!1,!1),e.stateNode=n;e:{switch(a=Jb(t,s),t){case"dialog":dt("cancel",n),dt("close",n),i=s;break;case"iframe":case"object":case"embed":dt("load",n),i=s;break;case"video":case"audio":for(i=0;i<Of.length;i++)dt(Of[i],n);i=s;break;case"source":dt("error",n),i=s;break;case"img":case"image":case"link":dt("error",n),dt("load",n),i=s;break;case"details":dt("toggle",n),i=s;break;case"input":J1(n,s),i=Gb(n,s),dt("invalid",n);break;case"option":i=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},i=St({},s,{value:void 0}),dt("invalid",n);break;case"textarea":tC(n,s),i=Yb(n,s),dt("invalid",n);break;default:i=s}Zb(t,i),o=i;for(r in o)if(o.hasOwnProperty(r)){var l=o[r];r==="style"?RT(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&PT(n,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&wp(n,l):typeof l=="number"&&wp(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(xp.hasOwnProperty(r)?l!=null&&r==="onScroll"&&dt("scroll",n):l!=null&&qS(n,r,l,a))}switch(t){case"input":ty(n),eC(n,s,!1);break;case"textarea":ty(n),nC(n);break;case"option":s.value!=null&&n.setAttribute("value",""+hl(s.value));break;case"select":n.multiple=!!s.multiple,r=s.value,r!=null?pd(n,!!s.multiple,r,!1):s.defaultValue!=null&&pd(n,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Ov)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return An(e),null;case 6:if(n&&e.stateNode!=null)eN(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(W(166));if(t=Wl(Rp.current),Wl(Tr.current),uy(e)){if(s=e.stateNode,t=e.memoizedProps,s[_r]=e,(r=s.nodeValue!==t)&&(n=zs,n!==null))switch(n.tag){case 3:cy(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&cy(s.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[_r]=e,e.stateNode=s}return An(e),null;case 13:if(ht(bt),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(yt&&Bs!==null&&e.mode&1&&!(e.flags&128))vP(),Xh(),e.flags|=98560,r=!1;else if(r=uy(e),s!==null&&s.dehydrated!==null){if(n===null){if(!r)throw Error(W(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(W(317));r[_r]=e}else Xh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;An(e),r=!1}else Ii!==null&&(D0(Ii),Ii=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||bt.current&1?Yt===0&&(Yt=3):TA())),e.updateQueue!==null&&(e.flags|=4),An(e),null);case 4:return Qh(),C0(n,e),n===null&&Ep(e.stateNode.containerInfo),An(e),null;case 10:return dA(e.type._context),An(e),null;case 17:return ys(e.type)&&Fv(),An(e),null;case 19:if(ht(bt),r=e.memoizedState,r===null)return An(e),null;if(s=(e.flags&128)!==0,a=r.rendering,a===null)if(s)_f(r,!1);else{if(Yt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=Wv(n),a!==null){for(e.flags|=128,_f(r,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)r=t,n=s,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,n=a.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return lt(bt,bt.current&1|2),e.child}n=n.sibling}r.tail!==null&&Rt()>Jh&&(e.flags|=128,s=!0,_f(r,!1),e.lanes=4194304)}else{if(!s)if(n=Wv(a),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),_f(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!yt)return An(e),null}else 2*Rt()-r.renderingStartTime>Jh&&t!==1073741824&&(e.flags|=128,s=!0,_f(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(t=r.last,t!==null?t.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Rt(),e.sibling=null,t=bt.current,lt(bt,s?t&1|2:t&1),e):(An(e),null);case 22:case 23:return EA(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Os&1073741824&&(An(e),e.subtreeFlags&6&&(e.flags|=8192)):An(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function sF(n,e){switch(oA(e),e.tag){case 1:return ys(e.type)&&Fv(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Qh(),ht(gs),ht(Dn),gA(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return mA(e),null;case 13:if(ht(bt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Xh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ht(bt),null;case 4:return Qh(),null;case 10:return dA(e.type._context),null;case 22:case 23:return EA(),null;case 24:return null;default:return null}}var fy=!1,In=!1,iF=typeof WeakSet=="function"?WeakSet:Set,re=null;function ld(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){Tt(n,e,s)}else t.current=null}function k0(n,e,t){try{t()}catch(s){Tt(n,e,s)}}var WC=!1;function rF(n,e){if(c0=Mv,n=rP(),rA(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,d=0,f=n,p=null;t:for(;;){for(var y;f!==t||i!==0&&f.nodeType!==3||(o=a+i),f!==r||s!==0&&f.nodeType!==3||(l=a+s),f.nodeType===3&&(a+=f.nodeValue.length),(y=f.firstChild)!==null;)p=f,f=y;for(;;){if(f===n)break t;if(p===t&&++u===i&&(o=a),p===r&&++d===s&&(l=a),(y=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=y}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(u0={focusedElem:n,selectionRange:t},Mv=!1,re=e;re!==null;)if(e=re,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,re=n;else for(;re!==null;){e=re;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,w=g.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:yi(e.type,m),w);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(S){Tt(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}return g=WC,WC=!1,g}function fp(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&n)===n){var r=i.destroy;i.destroy=void 0,r!==void 0&&k0(e,t,r)}i=i.next}while(i!==s)}}function sw(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function E0(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function tN(n){var e=n.alternate;e!==null&&(n.alternate=null,tN(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[_r],delete e[Pp],delete e[f0],delete e[BO],delete e[zO])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function nN(n){return n.tag===5||n.tag===3||n.tag===4}function qC(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||nN(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function T0(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ov));else if(s!==4&&(n=n.child,n!==null))for(T0(n,e,t),n=n.sibling;n!==null;)T0(n,e,t),n=n.sibling}function P0(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(P0(n,e,t),n=n.sibling;n!==null;)P0(n,e,t),n=n.sibling}var gn=null,Ri=!1;function qa(n,e,t){for(t=t.child;t!==null;)sN(n,e,t),t=t.sibling}function sN(n,e,t){if(Er&&typeof Er.onCommitFiberUnmount=="function")try{Er.onCommitFiberUnmount(Xx,t)}catch{}switch(t.tag){case 5:In||ld(t,e);case 6:var s=gn,i=Ri;gn=null,qa(n,e,t),gn=s,Ri=i,gn!==null&&(Ri?(n=gn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):gn.removeChild(t.stateNode));break;case 18:gn!==null&&(Ri?(n=gn,t=t.stateNode,n.nodeType===8?tb(n.parentNode,t):n.nodeType===1&&tb(n,t),Ap(n)):tb(gn,t.stateNode));break;case 4:s=gn,i=Ri,gn=t.stateNode.containerInfo,Ri=!0,qa(n,e,t),gn=s,Ri=i;break;case 0:case 11:case 14:case 15:if(!In&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var r=i,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&k0(t,e,a),i=i.next}while(i!==s)}qa(n,e,t);break;case 1:if(!In&&(ld(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(o){Tt(t,e,o)}qa(n,e,t);break;case 21:qa(n,e,t);break;case 22:t.mode&1?(In=(s=In)||t.memoizedState!==null,qa(n,e,t),In=s):qa(n,e,t);break;default:qa(n,e,t)}}function GC(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new iF),e.forEach(function(s){var i=pF.bind(null,n,s);t.has(s)||(t.add(s),s.then(i,i))})}}function pi(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];try{var r=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:gn=o.stateNode,Ri=!1;break e;case 3:gn=o.stateNode.containerInfo,Ri=!0;break e;case 4:gn=o.stateNode.containerInfo,Ri=!0;break e}o=o.return}if(gn===null)throw Error(W(160));sN(r,a,i),gn=null,Ri=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Tt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iN(e,n),e=e.sibling}function iN(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(pi(e,n),Xi(n),s&4){try{fp(3,n,n.return),sw(3,n)}catch(m){Tt(n,n.return,m)}try{fp(5,n,n.return)}catch(m){Tt(n,n.return,m)}}break;case 1:pi(e,n),Xi(n),s&512&&t!==null&&ld(t,t.return);break;case 5:if(pi(e,n),Xi(n),s&512&&t!==null&&ld(t,t.return),n.flags&32){var i=n.stateNode;try{wp(i,"")}catch(m){Tt(n,n.return,m)}}if(s&4&&(i=n.stateNode,i!=null)){var r=n.memoizedProps,a=t!==null?t.memoizedProps:r,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&kT(i,r),Jb(o,a);var u=Jb(o,r);for(a=0;a<l.length;a+=2){var d=l[a],f=l[a+1];d==="style"?RT(i,f):d==="dangerouslySetInnerHTML"?PT(i,f):d==="children"?wp(i,f):qS(i,d,f,u)}switch(o){case"input":Kb(i,r);break;case"textarea":ET(i,r);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var y=r.value;y!=null?pd(i,!!r.multiple,y,!1):p!==!!r.multiple&&(r.defaultValue!=null?pd(i,!!r.multiple,r.defaultValue,!0):pd(i,!!r.multiple,r.multiple?[]:"",!1))}i[Pp]=r}catch(m){Tt(n,n.return,m)}}break;case 6:if(pi(e,n),Xi(n),s&4){if(n.stateNode===null)throw Error(W(162));i=n.stateNode,r=n.memoizedProps;try{i.nodeValue=r}catch(m){Tt(n,n.return,m)}}break;case 3:if(pi(e,n),Xi(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{Ap(e.containerInfo)}catch(m){Tt(n,n.return,m)}break;case 4:pi(e,n),Xi(n);break;case 13:pi(e,n),Xi(n),i=n.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(CA=Rt())),s&4&&GC(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(In=(u=In)||d,pi(e,n),In=u):pi(e,n),Xi(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(re=n,d=n.child;d!==null;){for(f=re=d;re!==null;){switch(p=re,y=p.child,p.tag){case 0:case 11:case 14:case 15:fp(4,p,p.return);break;case 1:ld(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){s=p,t=p.return;try{e=s,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Tt(s,t,m)}}break;case 5:ld(p,p.return);break;case 22:if(p.memoizedState!==null){XC(f);continue}}y!==null?(y.return=p,re=y):XC(f)}d=d.sibling}e:for(d=null,f=n;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=NT("display",a))}catch(m){Tt(n,n.return,m)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){Tt(n,n.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:pi(e,n),Xi(n),s&4&&GC(n);break;case 21:break;default:pi(e,n),Xi(n)}}function Xi(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(nN(t)){var s=t;break e}t=t.return}throw Error(W(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(wp(i,""),s.flags&=-33);var r=qC(n);P0(n,r,i);break;case 3:case 4:var a=s.stateNode.containerInfo,o=qC(n);T0(n,o,a);break;default:throw Error(W(161))}}catch(l){Tt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function aF(n,e,t){re=n,rN(n)}function rN(n,e,t){for(var s=(n.mode&1)!==0;re!==null;){var i=re,r=i.child;if(i.tag===22&&s){var a=i.memoizedState!==null||fy;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||In;o=fy;var u=In;if(fy=a,(In=l)&&!u)for(re=i;re!==null;)a=re,l=a.child,a.tag===22&&a.memoizedState!==null?YC(i):l!==null?(l.return=a,re=l):YC(i);for(;r!==null;)re=r,rN(r),r=r.sibling;re=i,fy=o,In=u}KC(n)}else i.subtreeFlags&8772&&r!==null?(r.return=i,re=r):KC(n)}}function KC(n){for(;re!==null;){var e=re;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:In||sw(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!In)if(t===null)s.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:yi(e.type,t.memoizedProps);s.componentDidUpdate(i,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&IC(e,r,s);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}IC(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ap(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}In||e.flags&512&&E0(e)}catch(p){Tt(e,e.return,p)}}if(e===n){re=null;break}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}}function XC(n){for(;re!==null;){var e=re;if(e===n){re=null;break}var t=e.sibling;if(t!==null){t.return=e.return,re=t;break}re=e.return}}function YC(n){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{sw(4,e)}catch(l){Tt(e,t,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(l){Tt(e,i,l)}}var r=e.return;try{E0(e)}catch(l){Tt(e,r,l)}break;case 5:var a=e.return;try{E0(e)}catch(l){Tt(e,a,l)}}}catch(l){Tt(e,e.return,l)}if(e===n){re=null;break}var o=e.sibling;if(o!==null){o.return=e.return,re=o;break}re=e.return}}var oF=Math.ceil,Kv=Ua.ReactCurrentDispatcher,SA=Ua.ReactCurrentOwner,ci=Ua.ReactCurrentBatchConfig,Be=0,un=null,$t=null,xn=0,Os=0,cd=El(0),Yt=0,jp=null,pu=0,iw=0,AA=0,pp=null,ps=null,CA=0,Jh=1/0,qr=null,Xv=!1,N0=null,ol=null,py=!1,Jo=null,Yv=0,mp=0,R0=null,zy=-1,Uy=0;function Qn(){return Be&6?Rt():zy!==-1?zy:zy=Rt()}function ll(n){return n.mode&1?Be&2&&xn!==0?xn&-xn:HO.transition!==null?(Uy===0&&(Uy=UT()),Uy):(n=Ze,n!==0||(n=window.event,n=n===void 0?16:YT(n.type)),n):1}function $i(n,e,t,s){if(50<mp)throw mp=0,R0=null,Error(W(185));jg(n,t,s),(!(Be&2)||n!==un)&&(n===un&&(!(Be&2)&&(iw|=t),Yt===4&&no(n,xn)),vs(n,s),t===1&&Be===0&&!(e.mode&1)&&(Jh=Rt()+500,ew&&Tl()))}function vs(n,e){var t=n.callbackNode;HL(n,e);var s=Dv(n,n===un?xn:0);if(s===0)t!==null&&rC(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&rC(t),e===1)n.tag===0?UO(QC.bind(null,n)):mP(QC.bind(null,n)),$O(function(){!(Be&6)&&Tl()}),t=null;else{switch(HT(s)){case 1:t=QS;break;case 4:t=BT;break;case 16:t=Iv;break;case 536870912:t=zT;break;default:t=Iv}t=fN(t,aN.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function aN(n,e){if(zy=-1,Uy=0,Be&6)throw Error(W(327));var t=n.callbackNode;if(xd()&&n.callbackNode!==t)return null;var s=Dv(n,n===un?xn:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=Qv(n,s);else{e=s;var i=Be;Be|=2;var r=lN();(un!==n||xn!==e)&&(qr=null,Jh=Rt()+500,lu(n,e));do try{uF();break}catch(o){oN(n,o)}while(!0);uA(),Kv.current=r,Be=i,$t!==null?e=0:(un=null,xn=0,e=Yt)}if(e!==0){if(e===2&&(i=i0(n),i!==0&&(s=i,e=I0(n,i))),e===1)throw t=jp,lu(n,0),no(n,s),vs(n,Rt()),t;if(e===6)no(n,s);else{if(i=n.current.alternate,!(s&30)&&!lF(i)&&(e=Qv(n,s),e===2&&(r=i0(n),r!==0&&(s=r,e=I0(n,r))),e===1))throw t=jp,lu(n,0),no(n,s),vs(n,Rt()),t;switch(n.finishedWork=i,n.finishedLanes=s,e){case 0:case 1:throw Error(W(345));case 2:jl(n,ps,qr);break;case 3:if(no(n,s),(s&130023424)===s&&(e=CA+500-Rt(),10<e)){if(Dv(n,0)!==0)break;if(i=n.suspendedLanes,(i&s)!==s){Qn(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=h0(jl.bind(null,n,ps,qr),e);break}jl(n,ps,qr);break;case 4:if(no(n,s),(s&4194240)===s)break;for(e=n.eventTimes,i=-1;0<s;){var a=31-Fi(s);r=1<<a,a=e[a],a>i&&(i=a),s&=~r}if(s=i,s=Rt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*oF(s/1960))-s,10<s){n.timeoutHandle=h0(jl.bind(null,n,ps,qr),s);break}jl(n,ps,qr);break;case 5:jl(n,ps,qr);break;default:throw Error(W(329))}}}return vs(n,Rt()),n.callbackNode===t?aN.bind(null,n):null}function I0(n,e){var t=pp;return n.current.memoizedState.isDehydrated&&(lu(n,e).flags|=256),n=Qv(n,e),n!==2&&(e=ps,ps=t,e!==null&&D0(e)),n}function D0(n){ps===null?ps=n:ps.push.apply(ps,n)}function lF(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var i=t[s],r=i.getSnapshot;i=i.value;try{if(!Bi(r(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function no(n,e){for(e&=~AA,e&=~iw,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Fi(e),s=1<<t;n[t]=-1,e&=~s}}function QC(n){if(Be&6)throw Error(W(327));xd();var e=Dv(n,0);if(!(e&1))return vs(n,Rt()),null;var t=Qv(n,e);if(n.tag!==0&&t===2){var s=i0(n);s!==0&&(e=s,t=I0(n,s))}if(t===1)throw t=jp,lu(n,0),no(n,e),vs(n,Rt()),t;if(t===6)throw Error(W(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,jl(n,ps,qr),vs(n,Rt()),null}function kA(n,e){var t=Be;Be|=1;try{return n(e)}finally{Be=t,Be===0&&(Jh=Rt()+500,ew&&Tl())}}function mu(n){Jo!==null&&Jo.tag===0&&!(Be&6)&&xd();var e=Be;Be|=1;var t=ci.transition,s=Ze;try{if(ci.transition=null,Ze=1,n)return n()}finally{Ze=s,ci.transition=t,Be=e,!(Be&6)&&Tl()}}function EA(){Os=cd.current,ht(cd)}function lu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,FO(t)),$t!==null)for(t=$t.return;t!==null;){var s=t;switch(oA(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Fv();break;case 3:Qh(),ht(gs),ht(Dn),gA();break;case 5:mA(s);break;case 4:Qh();break;case 13:ht(bt);break;case 19:ht(bt);break;case 10:dA(s.type._context);break;case 22:case 23:EA()}t=t.return}if(un=n,$t=n=cl(n.current,null),xn=Os=e,Yt=0,jp=null,AA=iw=pu=0,ps=pp=null,Hl!==null){for(e=0;e<Hl.length;e++)if(t=Hl[e],s=t.interleaved,s!==null){t.interleaved=null;var i=s.next,r=t.pending;if(r!==null){var a=r.next;r.next=i,s.next=a}t.pending=s}Hl=null}return n}function oN(n,e){do{var t=$t;try{if(uA(),$y.current=Gv,qv){for(var s=_t.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}qv=!1}if(fu=0,cn=Kt=_t=null,hp=!1,Ip=0,SA.current=null,t===null||t.return===null){Yt=1,jp=e,$t=null;break}e:{var r=n,a=t.return,o=t,l=e;if(e=xn,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=FC(a);if(y!==null){y.flags&=-257,$C(y,a,o,r,e),y.mode&1&&OC(r,u,e),e=y,l=u;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){OC(r,u,e),TA();break e}l=Error(W(426))}}else if(yt&&o.mode&1){var w=FC(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),$C(w,a,o,r,e),lA(Zh(l,o));break e}}r=l=Zh(l,o),Yt!==4&&(Yt=2),pp===null?pp=[r]:pp.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var v=HP(r,l,e);RC(r,v);break e;case 1:o=l;var x=r.type,_=r.stateNode;if(!(r.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ol===null||!ol.has(_)))){r.flags|=65536,e&=-e,r.lanes|=e;var S=WP(r,o,e);RC(r,S);break e}}r=r.return}while(r!==null)}uN(t)}catch(E){e=E,$t===t&&t!==null&&($t=t=t.return);continue}break}while(!0)}function lN(){var n=Kv.current;return Kv.current=Gv,n===null?Gv:n}function TA(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),un===null||!(pu&268435455)&&!(iw&268435455)||no(un,xn)}function Qv(n,e){var t=Be;Be|=2;var s=lN();(un!==n||xn!==e)&&(qr=null,lu(n,e));do try{cF();break}catch(i){oN(n,i)}while(!0);if(uA(),Be=t,Kv.current=s,$t!==null)throw Error(W(261));return un=null,xn=0,Yt}function cF(){for(;$t!==null;)cN($t)}function uF(){for(;$t!==null&&!jL();)cN($t)}function cN(n){var e=hN(n.alternate,n,Os);n.memoizedProps=n.pendingProps,e===null?uN(n):$t=e,SA.current=null}function uN(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=sF(t,e),t!==null){t.flags&=32767,$t=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Yt=6,$t=null;return}}else if(t=nF(t,e,Os),t!==null){$t=t;return}if(e=e.sibling,e!==null){$t=e;return}$t=e=n}while(e!==null);Yt===0&&(Yt=5)}function jl(n,e,t){var s=Ze,i=ci.transition;try{ci.transition=null,Ze=1,dF(n,e,t,s)}finally{ci.transition=i,Ze=s}return null}function dF(n,e,t,s){do xd();while(Jo!==null);if(Be&6)throw Error(W(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(W(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(WL(n,r),n===un&&($t=un=null,xn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||py||(py=!0,fN(Iv,function(){return xd(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=ci.transition,ci.transition=null;var a=Ze;Ze=1;var o=Be;Be|=4,SA.current=null,rF(n,t),iN(t,n),RO(u0),Mv=!!c0,u0=c0=null,n.current=t,aF(t),LL(),Be=o,Ze=a,ci.transition=r}else n.current=t;if(py&&(py=!1,Jo=n,Yv=i),r=n.pendingLanes,r===0&&(ol=null),$L(t.stateNode),vs(n,Rt()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],s(i.value,{componentStack:i.stack,digest:i.digest});if(Xv)throw Xv=!1,n=N0,N0=null,n;return Yv&1&&n.tag!==0&&xd(),r=n.pendingLanes,r&1?n===R0?mp++:(mp=0,R0=n):mp=0,Tl(),null}function xd(){if(Jo!==null){var n=HT(Yv),e=ci.transition,t=Ze;try{if(ci.transition=null,Ze=16>n?16:n,Jo===null)var s=!1;else{if(n=Jo,Jo=null,Yv=0,Be&6)throw Error(W(331));var i=Be;for(Be|=4,re=n.current;re!==null;){var r=re,a=r.child;if(re.flags&16){var o=r.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(re=u;re!==null;){var d=re;switch(d.tag){case 0:case 11:case 15:fp(8,d,r)}var f=d.child;if(f!==null)f.return=d,re=f;else for(;re!==null;){d=re;var p=d.sibling,y=d.return;if(tN(d),d===u){re=null;break}if(p!==null){p.return=y,re=p;break}re=y}}}var g=r.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}re=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,re=a;else e:for(;re!==null;){if(r=re,r.flags&2048)switch(r.tag){case 0:case 11:case 15:fp(9,r,r.return)}var v=r.sibling;if(v!==null){v.return=r.return,re=v;break e}re=r.return}}var x=n.current;for(re=x;re!==null;){a=re;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,re=_;else e:for(a=x;re!==null;){if(o=re,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:sw(9,o)}}catch(E){Tt(o,o.return,E)}if(o===a){re=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,re=S;break e}re=o.return}}if(Be=i,Tl(),Er&&typeof Er.onPostCommitFiberRoot=="function")try{Er.onPostCommitFiberRoot(Xx,n)}catch{}s=!0}return s}finally{Ze=t,ci.transition=e}}return!1}function ZC(n,e,t){e=Zh(t,e),e=HP(n,e,1),n=al(n,e,1),e=Qn(),n!==null&&(jg(n,1,e),vs(n,e))}function Tt(n,e,t){if(n.tag===3)ZC(n,n,t);else for(;e!==null;){if(e.tag===3){ZC(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ol===null||!ol.has(s))){n=Zh(t,n),n=WP(e,n,1),e=al(e,n,1),n=Qn(),e!==null&&(jg(e,1,n),vs(e,n));break}}e=e.return}}function hF(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=Qn(),n.pingedLanes|=n.suspendedLanes&t,un===n&&(xn&t)===t&&(Yt===4||Yt===3&&(xn&130023424)===xn&&500>Rt()-CA?lu(n,0):AA|=t),vs(n,e)}function dN(n,e){e===0&&(n.mode&1?(e=iy,iy<<=1,!(iy&130023424)&&(iy=4194304)):e=1);var t=Qn();n=Oa(n,e),n!==null&&(jg(n,e,t),vs(n,t))}function fF(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),dN(n,t)}function pF(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(W(314))}s!==null&&s.delete(e),dN(n,t)}var hN;hN=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||gs.current)ms=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ms=!1,tF(n,e,t);ms=!!(n.flags&131072)}else ms=!1,yt&&e.flags&1048576&&gP(e,Bv,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;By(n,e),n=e.pendingProps;var i=Kh(e,Dn.current);vd(e,t),i=vA(null,e,s,n,i,t);var r=xA();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ys(s)?(r=!0,$v(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fA(e),i.updater=nw,e.stateNode=i,i._reactInternals=e,x0(e,s,n,t),e=_0(null,e,s,!0,r,t)):(e.tag=0,yt&&r&&aA(e),Gn(null,e,i,t),e=e.child),e;case 16:s=e.elementType;e:{switch(By(n,e),n=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=gF(s),n=yi(s,n),i){case 0:e=b0(null,e,s,n,t);break e;case 1:e=zC(null,e,s,n,t);break e;case 11:e=VC(null,e,s,n,t);break e;case 14:e=BC(null,e,s,yi(s.type,n),t);break e}throw Error(W(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:yi(s,i),b0(n,e,s,i,t);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:yi(s,i),zC(n,e,s,i,t);case 3:e:{if(XP(e),n===null)throw Error(W(387));s=e.pendingProps,r=e.memoizedState,i=r.element,_P(n,e),Hv(e,s,null,t);var a=e.memoizedState;if(s=a.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=Zh(Error(W(423)),e),e=UC(n,e,s,t,i);break e}else if(s!==i){i=Zh(Error(W(424)),e),e=UC(n,e,s,t,i);break e}else for(Bs=rl(e.stateNode.containerInfo.firstChild),zs=e,yt=!0,Ii=null,t=wP(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Xh(),s===i){e=Fa(n,e,t);break e}Gn(n,e,s,t)}e=e.child}return e;case 5:return SP(e),n===null&&g0(e),s=e.type,i=e.pendingProps,r=n!==null?n.memoizedProps:null,a=i.children,d0(s,i)?a=null:r!==null&&d0(s,r)&&(e.flags|=32),KP(n,e),Gn(n,e,a,t),e.child;case 6:return n===null&&g0(e),null;case 13:return YP(n,e,t);case 4:return pA(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=Yh(e,null,s,t):Gn(n,e,s,t),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:yi(s,i),VC(n,e,s,i,t);case 7:return Gn(n,e,e.pendingProps,t),e.child;case 8:return Gn(n,e,e.pendingProps.children,t),e.child;case 12:return Gn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,r=e.memoizedProps,a=i.value,lt(zv,s._currentValue),s._currentValue=a,r!==null)if(Bi(r.value,a)){if(r.children===i.children&&!gs.current){e=Fa(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var l=o.firstContext;l!==null;){if(l.context===s){if(r.tag===1){l=Ra(-1,t&-t),l.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),y0(r.return,t,e),o.lanes|=t;break}l=l.next}}else if(r.tag===10)a=r.type===e.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(W(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),y0(a,t,e),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}Gn(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,vd(e,t),i=di(i),s=s(i),e.flags|=1,Gn(n,e,s,t),e.child;case 14:return s=e.type,i=yi(s,e.pendingProps),i=yi(s.type,i),BC(n,e,s,i,t);case 15:return qP(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:yi(s,i),By(n,e),e.tag=1,ys(s)?(n=!0,$v(e)):n=!1,vd(e,t),UP(e,s,i),x0(e,s,i,t),_0(null,e,s,!0,n,t);case 19:return QP(n,e,t);case 22:return GP(n,e,t)}throw Error(W(156,e.tag))};function fN(n,e){return VT(n,e)}function mF(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(n,e,t,s){return new mF(n,e,t,s)}function PA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function gF(n){if(typeof n=="function")return PA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===KS)return 11;if(n===XS)return 14}return 2}function cl(n,e){var t=n.alternate;return t===null?(t=li(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Hy(n,e,t,s,i,r){var a=2;if(s=n,typeof n=="function")PA(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Ju:return cu(t.children,i,r,e);case GS:a=8,i|=8;break;case Ub:return n=li(12,t,e,i|2),n.elementType=Ub,n.lanes=r,n;case Hb:return n=li(13,t,e,i),n.elementType=Hb,n.lanes=r,n;case Wb:return n=li(19,t,e,i),n.elementType=Wb,n.lanes=r,n;case ST:return rw(t,i,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case bT:a=10;break e;case _T:a=9;break e;case KS:a=11;break e;case XS:a=14;break e;case Ja:a=16,s=null;break e}throw Error(W(130,n==null?n:typeof n,""))}return e=li(a,t,e,i),e.elementType=n,e.type=s,e.lanes=r,e}function cu(n,e,t,s){return n=li(7,n,s,e),n.lanes=t,n}function rw(n,e,t,s){return n=li(22,n,s,e),n.elementType=ST,n.lanes=t,n.stateNode={isHidden:!1},n}function cb(n,e,t){return n=li(6,n,null,e),n.lanes=t,n}function ub(n,e,t){return e=li(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function yF(n,e,t,s,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hw(0),this.expirationTimes=Hw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hw(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function NA(n,e,t,s,i,r,a,o,l){return n=new yF(n,e,t,o,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=li(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},fA(r),n}function vF(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zu,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function pN(n){if(!n)return fl;n=n._reactInternals;e:{if(Ru(n)!==n||n.tag!==1)throw Error(W(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ys(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(n.tag===1){var t=n.type;if(ys(t))return pP(n,t,e)}return e}function mN(n,e,t,s,i,r,a,o,l){return n=NA(t,s,!0,n,i,r,a,o,l),n.context=pN(null),t=n.current,s=Qn(),i=ll(t),r=Ra(s,i),r.callback=e??null,al(t,r,i),n.current.lanes=i,jg(n,i,s),vs(n,s),n}function aw(n,e,t,s){var i=e.current,r=Qn(),a=ll(i);return t=pN(t),e.context===null?e.context=t:e.pendingContext=t,e=Ra(r,a),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=al(i,e,a),n!==null&&($i(n,i,a,r),Fy(n,i,a)),a}function Zv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function JC(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function RA(n,e){JC(n,e),(n=n.alternate)&&JC(n,e)}function xF(){return null}var gN=typeof reportError=="function"?reportError:function(n){console.error(n)};function IA(n){this._internalRoot=n}ow.prototype.render=IA.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(W(409));aw(n,e,null,null)};ow.prototype.unmount=IA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;mu(function(){aw(null,n,null,null)}),e[La]=null}};function ow(n){this._internalRoot=n}ow.prototype.unstable_scheduleHydration=function(n){if(n){var e=GT();n={blockedOn:null,target:n,priority:e};for(var t=0;t<to.length&&e!==0&&e<to[t].priority;t++);to.splice(t,0,n),t===0&&XT(n)}};function DA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function lw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ek(){}function wF(n,e,t,s,i){if(i){if(typeof s=="function"){var r=s;s=function(){var u=Zv(a);r.call(u)}}var a=mN(e,s,n,0,null,!1,!1,"",ek);return n._reactRootContainer=a,n[La]=a.current,Ep(n.nodeType===8?n.parentNode:n),mu(),a}for(;i=n.lastChild;)n.removeChild(i);if(typeof s=="function"){var o=s;s=function(){var u=Zv(l);o.call(u)}}var l=NA(n,0,!1,null,null,!1,!1,"",ek);return n._reactRootContainer=l,n[La]=l.current,Ep(n.nodeType===8?n.parentNode:n),mu(function(){aw(e,l,t,s)}),l}function cw(n,e,t,s,i){var r=t._reactRootContainer;if(r){var a=r;if(typeof i=="function"){var o=i;i=function(){var l=Zv(a);o.call(l)}}aw(e,a,n,i)}else a=wF(t,e,n,i,s);return Zv(a)}WT=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Lf(e.pendingLanes);t!==0&&(ZS(e,t|1),vs(e,Rt()),!(Be&6)&&(Jh=Rt()+500,Tl()))}break;case 13:mu(function(){var s=Oa(n,1);if(s!==null){var i=Qn();$i(s,n,1,i)}}),RA(n,1)}};JS=function(n){if(n.tag===13){var e=Oa(n,134217728);if(e!==null){var t=Qn();$i(e,n,134217728,t)}RA(n,134217728)}};qT=function(n){if(n.tag===13){var e=ll(n),t=Oa(n,e);if(t!==null){var s=Qn();$i(t,n,e,s)}RA(n,e)}};GT=function(){return Ze};KT=function(n,e){var t=Ze;try{return Ze=n,e()}finally{Ze=t}};t0=function(n,e,t){switch(e){case"input":if(Kb(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var i=Jx(s);if(!i)throw Error(W(90));CT(s),Kb(s,i)}}}break;case"textarea":ET(n,t);break;case"select":e=t.value,e!=null&&pd(n,!!t.multiple,e,!1)}};MT=kA;jT=mu;var bF={usingClientEntryPoint:!1,Events:[Og,sd,Jx,IT,DT,kA]},Sf={findFiberByHostInstance:Ul,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_F={bundleType:Sf.bundleType,version:Sf.version,rendererPackageName:Sf.rendererPackageName,rendererConfig:Sf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=FT(n),n===null?null:n.stateNode},findFiberByHostInstance:Sf.findFiberByHostInstance||xF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var my=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!my.isDisabled&&my.supportsFiber)try{Xx=my.inject(_F),Er=my}catch{}}Gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bF;Gs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!DA(e))throw Error(W(200));return vF(n,e,null,t)};Gs.createRoot=function(n,e){if(!DA(n))throw Error(W(299));var t=!1,s="",i=gN;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=NA(n,1,!1,null,null,t,!1,s,i),n[La]=e.current,Ep(n.nodeType===8?n.parentNode:n),new IA(e)};Gs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(W(188)):(n=Object.keys(n).join(","),Error(W(268,n)));return n=FT(e),n=n===null?null:n.stateNode,n};Gs.flushSync=function(n){return mu(n)};Gs.hydrate=function(n,e,t){if(!lw(e))throw Error(W(200));return cw(null,n,e,!0,t)};Gs.hydrateRoot=function(n,e,t){if(!DA(n))throw Error(W(405));var s=t!=null&&t.hydratedSources||null,i=!1,r="",a=gN;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=mN(e,null,n,1,t??null,i,!1,r,a),n[La]=e.current,Ep(n),s)for(n=0;n<s.length;n++)t=s[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new ow(e)};Gs.render=function(n,e,t){if(!lw(e))throw Error(W(200));return cw(null,n,e,!1,t)};Gs.unmountComponentAtNode=function(n){if(!lw(n))throw Error(W(40));return n._reactRootContainer?(mu(function(){cw(null,null,n,!1,function(){n._reactRootContainer=null,n[La]=null})}),!0):!1};Gs.unstable_batchedUpdates=kA;Gs.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!lw(t))throw Error(W(200));if(n==null||n._reactInternals===void 0)throw Error(W(38));return cw(n,e,t,!1,s)};Gs.version="18.3.1-next-f1338f8080-20240426";function yN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yN)}catch(n){console.error(n)}}yN(),yT.exports=Gs;var Iu=yT.exports;const SF=iT(Iu);var vN,tk=Iu;vN=tk.createRoot,tk.hydrateRoot;function AF(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,s,i,r,a=[],o="",l=n.split("/");for(l[0]||l.shift();i=l.shift();)t=i[0],t==="*"?(a.push(t),o+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(s=i.indexOf("?",1),r=i.indexOf(".",1),a.push(i.substring(1,~s?s:~r?r:i.length)),o+=~s&&!~r?"(?:/([^/]+?))?":"/([^/]+?)",~r&&(o+=(~s?"?":"")+"\\"+i.substring(r))):o+="/"+i;return{keys:a,pattern:new RegExp("^"+o+(e?"(?=$|/)":"/?$"),"i")}}var xN={exports:{}},wN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ef=C;function CF(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var kF=typeof Object.is=="function"?Object.is:CF,EF=ef.useState,TF=ef.useEffect,PF=ef.useLayoutEffect,NF=ef.useDebugValue;function RF(n,e){var t=e(),s=EF({inst:{value:t,getSnapshot:e}}),i=s[0].inst,r=s[1];return PF(function(){i.value=t,i.getSnapshot=e,db(i)&&r({inst:i})},[n,t,e]),TF(function(){return db(i)&&r({inst:i}),n(function(){db(i)&&r({inst:i})})},[n]),NF(t),t}function db(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!kF(n,t)}catch{return!0}}function IF(n,e){return e()}var DF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?IF:RF;wN.useSyncExternalStore=ef.useSyncExternalStore!==void 0?ef.useSyncExternalStore:DF;xN.exports=wN;var MF=xN.exports;const jF=mT.useInsertionEffect,LF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OF=LF?C.useLayoutEffect:C.useEffect,FF=jF||OF,bN=n=>{const e=C.useRef([n,(...t)=>e[0](...t)]).current;return FF(()=>{e[0]=n}),e[1]},$F="popstate",MA="pushState",jA="replaceState",VF="hashchange",nk=[$F,MA,jA,VF],BF=n=>{for(const e of nk)addEventListener(e,n);return()=>{for(const e of nk)removeEventListener(e,n)}},_N=(n,e)=>MF.useSyncExternalStore(BF,n,e),zF=()=>location.search,UF=({ssrSearch:n=""}={})=>_N(zF,()=>n),sk=()=>location.pathname,HF=({ssrPath:n}={})=>_N(sk,n?()=>n:sk),WF=(n,{replace:e=!1,state:t=null}={})=>history[e?jA:MA](t,"",n),qF=(n={})=>[HF(n),WF],ik=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[ik]>"u"){for(const n of[MA,jA]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),s=new Event(n);return s.arguments=arguments,dispatchEvent(s),t}}Object.defineProperty(window,ik,{value:!0})}const GF=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",SN=(n="")=>n==="/"?"":n,KF=(n,e)=>n[0]==="~"?n.slice(1):SN(e)+n,XF=(n="",e)=>GF(rk(SN(n)),rk(e)),rk=n=>{try{return decodeURI(n)}catch{return n}},AN={hook:qF,searchHook:UF,parser:AF,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:n=>n},CN=C.createContext(AN),uw=()=>C.useContext(CN),kN={},EN=C.createContext(kN),YF=()=>C.useContext(EN),LA=n=>{const[e,t]=n.hook(n);return[XF(n.base,e),bN((s,i)=>t(KF(s,n.base),i))]},TN=(n,e,t,s)=>{const{pattern:i,keys:r}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",s),a=i.exec(t)||[],[o,...l]=a;return o!==void 0?[!0,(()=>{const u=r!==!1?Object.fromEntries(r.map((f,p)=>[f,l[p]])):a.groups;let d={...l};return u&&Object.assign(d,u),d})(),...s?[o]:[]]:[!1,null]},QF=({children:n,...e})=>{var d,f;const t=uw(),s=e.hook?AN:t;let i=s;const[r,a]=((d=e.ssrPath)==null?void 0:d.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=r),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let o=C.useRef({}),l=o.current,u=l;for(let p in s){const y=p==="base"?s[p]+(e[p]||""):e[p]||s[p];l===u&&y!==u[p]&&(o.current=u={...u}),u[p]=y,y!==s[p]&&(i=u)}return C.createElement(CN.Provider,{value:i,children:n})},ak=({children:n,component:e},t)=>e?C.createElement(e,{params:t}):typeof n=="function"?n(t):n,ZF=n=>{let e=C.useRef(kN),t=e.current;for(const s in n)n[s]!==t[s]&&(t=n);return Object.keys(n).length===0&&(t=n),e.current=t},hb=({path:n,nest:e,match:t,...s})=>{const i=uw(),[r]=LA(i),[a,o,l]=t??TN(i.parser,n,r,e),u=ZF({...YF(),...o});if(!a)return null;const d=l?C.createElement(QF,{base:l},ak(s,u)):ak(s,u);return C.createElement(EN.Provider,{value:u,children:d})},PN=C.forwardRef((n,e)=>{const t=uw(),[s,i]=LA(t),{to:r="",href:a=r,onClick:o,asChild:l,children:u,className:d,replace:f,state:p,...y}=n,g=bN(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(o==null||o(w),w.defaultPrevented||(w.preventDefault(),i(a,n)))}),m=t.hrefs(a[0]==="~"?a.slice(1):t.base+a,t);return l&&C.isValidElement(u)?C.cloneElement(u,{onClick:g,href:m}):C.createElement("a",{...y,onClick:g,href:m,className:d!=null&&d.call?d(s===a):d,children:u,ref:e})}),NN=n=>Array.isArray(n)?n.flatMap(e=>NN(e&&e.type===C.Fragment?e.props.children:e)):[n],JF=({children:n,location:e})=>{const t=uw(),[s]=LA(t);for(const i of NN(n)){let r=0;if(C.isValidElement(i)&&(r=TN(t.parser,i.props.path,e||s,i.props.nest))[0])return C.cloneElement(i,{match:r})}return null};var df=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gu=typeof window>"u"||"Deno"in globalThis;function ii(){}function e$(n,e){return typeof n=="function"?n(e):n}function M0(n){return typeof n=="number"&&n>=0&&n!==1/0}function RN(n,e){return Math.max(n+(e||0)-Date.now(),0)}function wd(n,e){return typeof n=="function"?n(e):n}function Di(n,e){return typeof n=="function"?n(e):n}function ok(n,e){const{type:t="all",exact:s,fetchStatus:i,predicate:r,queryKey:a,stale:o}=n;if(a){if(s){if(e.queryHash!==OA(a,e.options))return!1}else if(!Lp(e.queryKey,a))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||i&&i!==e.state.fetchStatus||r&&!r(e))}function lk(n,e){const{exact:t,status:s,predicate:i,mutationKey:r}=n;if(r){if(!e.options.mutationKey)return!1;if(t){if(yu(e.options.mutationKey)!==yu(r))return!1}else if(!Lp(e.options.mutationKey,r))return!1}return!(s&&e.state.status!==s||i&&!i(e))}function OA(n,e){return((e==null?void 0:e.queryKeyHashFn)||yu)(n)}function yu(n){return JSON.stringify(n,(e,t)=>j0(t)?Object.keys(t).sort().reduce((s,i)=>(s[i]=t[i],s),{}):t)}function Lp(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Lp(n[t],e[t])):!1}function IN(n,e){if(n===e)return n;const t=ck(n)&&ck(e);if(t||j0(n)&&j0(e)){const s=t?n:Object.keys(n),i=s.length,r=t?e:Object.keys(e),a=r.length,o=t?[]:{};let l=0;for(let u=0;u<a;u++){const d=t?u:r[u];(!t&&s.includes(d)||t)&&n[d]===void 0&&e[d]===void 0?(o[d]=void 0,l++):(o[d]=IN(n[d],e[d]),o[d]===n[d]&&n[d]!==void 0&&l++)}return i===a&&l===i?n:o}return e}function Jv(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function ck(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function j0(n){if(!uk(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!uk(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function uk(n){return Object.prototype.toString.call(n)==="[object Object]"}function t$(n){return new Promise(e=>{setTimeout(e,n)})}function L0(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?IN(n,e):e}function n$(n,e,t=0){const s=[...n,e];return t&&s.length>t?s.slice(1):s}function s$(n,e,t=0){const s=[e,...n];return t&&s.length>t?s.slice(0,-1):s}var FA=Symbol();function DN(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===FA?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Gl,ro,Pd,GE,i$=(GE=class extends df{constructor(){super();A(this,Gl);A(this,ro);A(this,Pd);b(this,Pd,e=>{if(!gu&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){c(this,ro)||this.setEventListener(c(this,Pd))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,ro))==null||e.call(this),b(this,ro,void 0))}setEventListener(e){var t;b(this,Pd,e),(t=c(this,ro))==null||t.call(this),b(this,ro,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){c(this,Gl)!==e&&(b(this,Gl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof c(this,Gl)=="boolean"?c(this,Gl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Gl=new WeakMap,ro=new WeakMap,Pd=new WeakMap,GE),$A=new i$,Nd,ao,Rd,KE,r$=(KE=class extends df{constructor(){super();A(this,Nd,!0);A(this,ao);A(this,Rd);b(this,Rd,e=>{if(!gu&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){c(this,ao)||this.setEventListener(c(this,Rd))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,ao))==null||e.call(this),b(this,ao,void 0))}setEventListener(e){var t;b(this,Rd,e),(t=c(this,ao))==null||t.call(this),b(this,ao,e(this.setOnline.bind(this)))}setOnline(e){c(this,Nd)!==e&&(b(this,Nd,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return c(this,Nd)}},Nd=new WeakMap,ao=new WeakMap,Rd=new WeakMap,KE),ex=new r$;function O0(){let n,e;const t=new Promise((i,r)=>{n=i,e=r});t.status="pending",t.catch(()=>{});function s(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{s({status:"fulfilled",value:i}),n(i)},t.reject=i=>{s({status:"rejected",reason:i}),e(i)},t}function a$(n){return Math.min(1e3*2**n,3e4)}function MN(n){return(n??"online")==="online"?ex.isOnline():!0}var jN=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function fb(n){return n instanceof jN}function LN(n){let e=!1,t=0,s=!1,i;const r=O0(),a=m=>{var w;s||(p(new jN(m)),(w=n.abort)==null||w.call(n))},o=()=>{e=!0},l=()=>{e=!1},u=()=>$A.isFocused()&&(n.networkMode==="always"||ex.isOnline())&&n.canRun(),d=()=>MN(n.networkMode)&&n.canRun(),f=m=>{var w;s||(s=!0,(w=n.onSuccess)==null||w.call(n,m),i==null||i(),r.resolve(m))},p=m=>{var w;s||(s=!0,(w=n.onError)==null||w.call(n,m),i==null||i(),r.reject(m))},y=()=>new Promise(m=>{var w;i=v=>{(s||u())&&m(v)},(w=n.onPause)==null||w.call(n)}).then(()=>{var m;i=void 0,s||(m=n.onContinue)==null||m.call(n)}),g=()=>{if(s)return;let m;const w=t===0?n.initialPromise:void 0;try{m=w??n.fn()}catch(v){m=Promise.reject(v)}Promise.resolve(m).then(f).catch(v=>{var P;if(s)return;const x=n.retry??(gu?0:3),_=n.retryDelay??a$,S=typeof _=="function"?_(t,v):_,E=x===!0||typeof x=="number"&&t<x||typeof x=="function"&&x(t,v);if(e||!E){p(v);return}t++,(P=n.onFail)==null||P.call(n,t,v),t$(S).then(()=>u()?void 0:y()).then(()=>{e?p(v):g()})})};return{promise:r,cancel:a,continue:()=>(i==null||i(),r),cancelRetry:o,continueRetry:l,canStart:d,start:()=>(d()?g():y().then(g),r)}}function o$(){let n=[],e=0,t=o=>{o()},s=o=>{o()},i=o=>setTimeout(o,0);const r=o=>{e?n.push(o):i(()=>{t(o)})},a=()=>{const o=n;n=[],o.length&&i(()=>{s(()=>{o.forEach(l=>{t(l)})})})};return{batch:o=>{let l;e++;try{l=o()}finally{e--,e||a()}return l},batchCalls:o=>(...l)=>{r(()=>{o(...l)})},schedule:r,setNotifyFunction:o=>{t=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{i=o}}}var Xt=o$(),Kl,XE,ON=(XE=class{constructor(){A(this,Kl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),M0(this.gcTime)&&b(this,Kl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(gu?1/0:5*60*1e3))}clearGcTimeout(){c(this,Kl)&&(clearTimeout(c(this,Kl)),b(this,Kl,void 0))}},Kl=new WeakMap,XE),Id,Dd,Ys,Tn,nm,Xl,vi,Vr,YE,l$=(YE=class extends ON{constructor(e){super();A(this,vi);A(this,Id);A(this,Dd);A(this,Ys);A(this,Tn);A(this,nm);A(this,Xl);b(this,Xl,!1),b(this,nm,e.defaultOptions),this.setOptions(e.options),this.observers=[],b(this,Ys,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,b(this,Id,c$(this.options)),this.state=e.state??c(this,Id),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=c(this,Tn))==null?void 0:e.promise}setOptions(e){this.options={...c(this,nm),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&c(this,Ys).remove(this)}setData(e,t){const s=L0(this.state.data,e,this.options);return k(this,vi,Vr).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){k(this,vi,Vr).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,i;const t=(s=c(this,Tn))==null?void 0:s.promise;return(i=c(this,Tn))==null||i.cancel(e),t?t.then(ii).catch(ii):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(c(this,Id))}isActive(){return this.observers.some(e=>Di(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===FA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!RN(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=c(this,Tn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=c(this,Tn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),c(this,Ys).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(c(this,Tn)&&(c(this,Xl)?c(this,Tn).cancel({revert:!0}):c(this,Tn).cancelRetry()),this.scheduleGc()),c(this,Ys).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||k(this,vi,Vr).call(this,{type:"invalidate"})}fetch(e,t){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(c(this,Tn))return c(this,Tn).continueRetry(),c(this,Tn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const s=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(b(this,Xl,!0),s.signal)})},r=()=>{const f=DN(this.options,t),p={queryKey:this.queryKey,meta:this.meta};return i(p),b(this,Xl,!1),this.options.persister?this.options.persister(f,p,this):f(p)},a={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:r};i(a),(l=this.options.behavior)==null||l.onFetch(a,this),b(this,Dd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&k(this,vi,Vr).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const o=f=>{var p,y,g,m;fb(f)&&f.silent||k(this,vi,Vr).call(this,{type:"error",error:f}),fb(f)||((y=(p=c(this,Ys).config).onError)==null||y.call(p,f,this),(m=(g=c(this,Ys).config).onSettled)==null||m.call(g,this.state.data,f,this)),this.scheduleGc()};return b(this,Tn,LN({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:f=>{var p,y,g,m;if(f===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(w){o(w);return}(y=(p=c(this,Ys).config).onSuccess)==null||y.call(p,f,this),(m=(g=c(this,Ys).config).onSettled)==null||m.call(g,f,this.state.error,this),this.scheduleGc()},onError:o,onFail:(f,p)=>{k(this,vi,Vr).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{k(this,vi,Vr).call(this,{type:"pause"})},onContinue:()=>{k(this,vi,Vr).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),c(this,Tn).start()}},Id=new WeakMap,Dd=new WeakMap,Ys=new WeakMap,Tn=new WeakMap,nm=new WeakMap,Xl=new WeakMap,vi=new WeakSet,Vr=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...FN(s.data,this.options),fetchMeta:e.meta??null};case"success":return{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return fb(i)&&i.revert&&c(this,Dd)?{...c(this,Dd),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),Xt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),c(this,Ys).notify({query:this,type:"updated",action:e})})},YE);function FN(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:MN(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function c$(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,s=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var tr,QE,u$=(QE=class extends df{constructor(e={}){super();A(this,tr);this.config=e,b(this,tr,new Map)}build(e,t,s){const i=t.queryKey,r=t.queryHash??OA(i,t);let a=this.get(r);return a||(a=new l$({cache:this,queryKey:i,queryHash:r,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){c(this,tr).has(e.queryHash)||(c(this,tr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=c(this,tr).get(e.queryHash);t&&(e.destroy(),t===e&&c(this,tr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Xt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return c(this,tr).get(e)}getAll(){return[...c(this,tr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>ok(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>ok(e,s)):t}notify(e){Xt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Xt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Xt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},tr=new WeakMap,QE),nr,$n,Yl,sr,Ya,ZE,d$=(ZE=class extends ON{constructor(e){super();A(this,sr);A(this,nr);A(this,$n);A(this,Yl);this.mutationId=e.mutationId,b(this,$n,e.mutationCache),b(this,nr,[]),this.state=e.state||$N(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){c(this,nr).includes(e)||(c(this,nr).push(e),this.clearGcTimeout(),c(this,$n).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){b(this,nr,c(this,nr).filter(t=>t!==e)),this.scheduleGc(),c(this,$n).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){c(this,nr).length||(this.state.status==="pending"?this.scheduleGc():c(this,$n).remove(this))}continue(){var e;return((e=c(this,Yl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,r,a,o,l,u,d,f,p,y,g,m,w,v,x,_,S,E,P,T;b(this,Yl,LN({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,I)=>{k(this,sr,Ya).call(this,{type:"failed",failureCount:N,error:I})},onPause:()=>{k(this,sr,Ya).call(this,{type:"pause"})},onContinue:()=>{k(this,sr,Ya).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>c(this,$n).canRun(this)}));const t=this.state.status==="pending",s=!c(this,Yl).canStart();try{if(!t){k(this,sr,Ya).call(this,{type:"pending",variables:e,isPaused:s}),await((r=(i=c(this,$n).config).onMutate)==null?void 0:r.call(i,e,this));const I=await((o=(a=this.options).onMutate)==null?void 0:o.call(a,e));I!==this.state.context&&k(this,sr,Ya).call(this,{type:"pending",context:I,variables:e,isPaused:s})}const N=await c(this,Yl).start();return await((u=(l=c(this,$n).config).onSuccess)==null?void 0:u.call(l,N,e,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,N,e,this.state.context)),await((y=(p=c(this,$n).config).onSettled)==null?void 0:y.call(p,N,null,this.state.variables,this.state.context,this)),await((m=(g=this.options).onSettled)==null?void 0:m.call(g,N,null,e,this.state.context)),k(this,sr,Ya).call(this,{type:"success",data:N}),N}catch(N){try{throw await((v=(w=c(this,$n).config).onError)==null?void 0:v.call(w,N,e,this.state.context,this)),await((_=(x=this.options).onError)==null?void 0:_.call(x,N,e,this.state.context)),await((E=(S=c(this,$n).config).onSettled)==null?void 0:E.call(S,void 0,N,this.state.variables,this.state.context,this)),await((T=(P=this.options).onSettled)==null?void 0:T.call(P,void 0,N,e,this.state.context)),N}finally{k(this,sr,Ya).call(this,{type:"error",error:N})}}finally{c(this,$n).runNext(this)}}},nr=new WeakMap,$n=new WeakMap,Yl=new WeakMap,sr=new WeakSet,Ya=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Xt.batch(()=>{c(this,nr).forEach(s=>{s.onMutationUpdate(e)}),c(this,$n).notify({mutation:this,type:"updated",action:e})})},ZE);function $N(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var bs,sm,JE,h$=(JE=class extends df{constructor(e={}){super();A(this,bs);A(this,sm);this.config=e,b(this,bs,new Map),b(this,sm,Date.now())}build(e,t,s){const i=new d$({mutationCache:this,mutationId:++Jt(this,sm)._,options:e.defaultMutationOptions(t),state:s});return this.add(i),i}add(e){const t=gy(e),s=c(this,bs).get(t)??[];s.push(e),c(this,bs).set(t,s),this.notify({type:"added",mutation:e})}remove(e){var s;const t=gy(e);if(c(this,bs).has(t)){const i=(s=c(this,bs).get(t))==null?void 0:s.filter(r=>r!==e);i&&(i.length===0?c(this,bs).delete(t):c(this,bs).set(t,i))}this.notify({type:"removed",mutation:e})}canRun(e){var s;const t=(s=c(this,bs).get(gy(e)))==null?void 0:s.find(i=>i.state.status==="pending");return!t||t===e}runNext(e){var s;const t=(s=c(this,bs).get(gy(e)))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){Xt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...c(this,bs).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(s=>lk(t,s))}findAll(e={}){return this.getAll().filter(t=>lk(e,t))}notify(e){Xt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Xt.batch(()=>Promise.all(e.map(t=>t.continue().catch(ii))))}},bs=new WeakMap,sm=new WeakMap,JE);function gy(n){var e;return((e=n.options.scope)==null?void 0:e.id)??String(n.mutationId)}function dk(n){return{onFetch:(e,t)=>{var d,f,p,y,g;const s=e.options,i=(p=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,r=((y=e.state.data)==null?void 0:y.pages)||[],a=((g=e.state.data)==null?void 0:g.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const u=async()=>{let m=!1;const w=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},v=DN(e.options,e.fetchOptions),x=async(_,S,E)=>{if(m)return Promise.reject();if(S==null&&_.pages.length)return Promise.resolve(_);const P={queryKey:e.queryKey,pageParam:S,direction:E?"backward":"forward",meta:e.options.meta};w(P);const T=await v(P),{maxPages:N}=e.options,I=E?s$:n$;return{pages:I(_.pages,T,N),pageParams:I(_.pageParams,S,N)}};if(i&&r.length){const _=i==="backward",S=_?f$:hk,E={pages:r,pageParams:a},P=S(s,E);o=await x(E,P,_)}else{const _=n??r.length;do{const S=l===0?a[0]??s.initialPageParam:hk(s,o);if(l>0&&S==null)break;o=await x(o,S),l++}while(l<_)}return o};e.options.persister?e.fetchFn=()=>{var m,w;return(w=(m=e.options).persister)==null?void 0:w.call(m,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function hk(n,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?n.getNextPageParam(e[s],e,t[s],t):void 0}function f$(n,{pages:e,pageParams:t}){var s;return e.length>0?(s=n.getPreviousPageParam)==null?void 0:s.call(n,e[0],e,t[0],t):void 0}var kt,oo,lo,Md,jd,co,Ld,Od,eT,p$=(eT=class{constructor(n={}){A(this,kt);A(this,oo);A(this,lo);A(this,Md);A(this,jd);A(this,co);A(this,Ld);A(this,Od);b(this,kt,n.queryCache||new u$),b(this,oo,n.mutationCache||new h$),b(this,lo,n.defaultOptions||{}),b(this,Md,new Map),b(this,jd,new Map),b(this,co,0)}mount(){Jt(this,co)._++,c(this,co)===1&&(b(this,Ld,$A.subscribe(async n=>{n&&(await this.resumePausedMutations(),c(this,kt).onFocus())})),b(this,Od,ex.subscribe(async n=>{n&&(await this.resumePausedMutations(),c(this,kt).onOnline())})))}unmount(){var n,e;Jt(this,co)._--,c(this,co)===0&&((n=c(this,Ld))==null||n.call(this),b(this,Ld,void 0),(e=c(this,Od))==null||e.call(this),b(this,Od,void 0))}isFetching(n){return c(this,kt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return c(this,oo).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=c(this,kt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),s=c(this,kt).build(this,t);return n.revalidateIfStale&&s.isStaleByTime(wd(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return c(this,kt).findAll(n).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(n,e,t){const s=this.defaultQueryOptions({queryKey:n}),i=c(this,kt).get(s.queryHash),r=i==null?void 0:i.state.data,a=e$(e,r);if(a!==void 0)return c(this,kt).build(this,s).setData(a,{...t,manual:!0})}setQueriesData(n,e,t){return Xt.batch(()=>c(this,kt).findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=c(this,kt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=c(this,kt);Xt.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=c(this,kt),s={type:"active",...n};return Xt.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries(s,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},s=Xt.batch(()=>c(this,kt).findAll(n).map(i=>i.cancel(t)));return Promise.all(s).then(ii).catch(ii)}invalidateQueries(n={},e={}){return Xt.batch(()=>{if(c(this,kt).findAll(n).forEach(s=>{s.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},s=Xt.batch(()=>c(this,kt).findAll(n).filter(i=>!i.isDisabled()).map(i=>{let r=i.fetch(void 0,t);return t.throwOnError||(r=r.catch(ii)),i.state.fetchStatus==="paused"?Promise.resolve():r}));return Promise.all(s).then(ii)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=c(this,kt).build(this,e);return t.isStaleByTime(wd(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(ii).catch(ii)}fetchInfiniteQuery(n){return n.behavior=dk(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(ii).catch(ii)}ensureInfiniteQueryData(n){return n.behavior=dk(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return ex.isOnline()?c(this,oo).resumePausedMutations():Promise.resolve()}getQueryCache(){return c(this,kt)}getMutationCache(){return c(this,oo)}getDefaultOptions(){return c(this,lo)}setDefaultOptions(n){b(this,lo,n)}setQueryDefaults(n,e){c(this,Md).set(yu(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...c(this,Md).values()];let t={};return e.forEach(s=>{Lp(n,s.queryKey)&&(t={...t,...s.defaultOptions})}),t}setMutationDefaults(n,e){c(this,jd).set(yu(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...c(this,jd).values()];let t={};return e.forEach(s=>{Lp(n,s.mutationKey)&&(t={...t,...s.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...c(this,lo).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=OA(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===FA&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...c(this,lo).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){c(this,kt).clear(),c(this,oo).clear()}},kt=new WeakMap,oo=new WeakMap,lo=new WeakMap,Md=new WeakMap,jd=new WeakMap,co=new WeakMap,Ld=new WeakMap,Od=new WeakMap,eT),as,je,im,Vn,Ql,Fd,uo,ir,rm,$d,Vd,Zl,Jl,ho,Bd,Ke,Ff,F0,$0,V0,B0,z0,U0,H0,VN,tT,m$=(tT=class extends df{constructor(e,t){super();A(this,Ke);A(this,as);A(this,je);A(this,im);A(this,Vn);A(this,Ql);A(this,Fd);A(this,uo);A(this,ir);A(this,rm);A(this,$d);A(this,Vd);A(this,Zl);A(this,Jl);A(this,ho);A(this,Bd,new Set);this.options=t,b(this,as,e),b(this,ir,null),b(this,uo,O0()),this.options.experimental_prefetchInRender||c(this,uo).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(c(this,je).addObserver(this),fk(c(this,je),this.options)?k(this,Ke,Ff).call(this):this.updateResult(),k(this,Ke,B0).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return W0(c(this,je),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return W0(c(this,je),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,k(this,Ke,z0).call(this),k(this,Ke,U0).call(this),c(this,je).removeObserver(this)}setOptions(e,t){const s=this.options,i=c(this,je);if(this.options=c(this,as).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Di(this.options.enabled,c(this,je))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");k(this,Ke,H0).call(this),c(this,je).setOptions(this.options),s._defaulted&&!Jv(this.options,s)&&c(this,as).getQueryCache().notify({type:"observerOptionsUpdated",query:c(this,je),observer:this});const r=this.hasListeners();r&&pk(c(this,je),i,this.options,s)&&k(this,Ke,Ff).call(this),this.updateResult(t),r&&(c(this,je)!==i||Di(this.options.enabled,c(this,je))!==Di(s.enabled,c(this,je))||wd(this.options.staleTime,c(this,je))!==wd(s.staleTime,c(this,je)))&&k(this,Ke,F0).call(this);const a=k(this,Ke,$0).call(this);r&&(c(this,je)!==i||Di(this.options.enabled,c(this,je))!==Di(s.enabled,c(this,je))||a!==c(this,ho))&&k(this,Ke,V0).call(this,a)}getOptimisticResult(e){const t=c(this,as).getQueryCache().build(c(this,as),e),s=this.createResult(t,e);return y$(this,s)&&(b(this,Vn,s),b(this,Fd,this.options),b(this,Ql,c(this,je).state)),s}getCurrentResult(){return c(this,Vn)}trackResult(e,t){const s={};return Object.keys(e).forEach(i=>{Object.defineProperty(s,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),t==null||t(i),e[i])})}),s}trackProp(e){c(this,Bd).add(e)}getCurrentQuery(){return c(this,je)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=c(this,as).defaultQueryOptions(e),s=c(this,as).getQueryCache().build(c(this,as),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return k(this,Ke,Ff).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),c(this,Vn)))}createResult(e,t){var N;const s=c(this,je),i=this.options,r=c(this,Vn),a=c(this,Ql),o=c(this,Fd),u=e!==s?e.state:c(this,im),{state:d}=e;let f={...d},p=!1,y;if(t._optimisticResults){const I=this.hasListeners(),D=!I&&fk(e,t),j=I&&pk(e,s,t,i);(D||j)&&(f={...f,...FN(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:m,status:w}=f;if(t.select&&f.data!==void 0)if(r&&f.data===(a==null?void 0:a.data)&&t.select===c(this,rm))y=c(this,$d);else try{b(this,rm,t.select),y=t.select(f.data),y=L0(r==null?void 0:r.data,y,t),b(this,$d,y),b(this,ir,null)}catch(I){b(this,ir,I)}else y=f.data;if(t.placeholderData!==void 0&&y===void 0&&w==="pending"){let I;if(r!=null&&r.isPlaceholderData&&t.placeholderData===(o==null?void 0:o.placeholderData))I=r.data;else if(I=typeof t.placeholderData=="function"?t.placeholderData((N=c(this,Vd))==null?void 0:N.state.data,c(this,Vd)):t.placeholderData,t.select&&I!==void 0)try{I=t.select(I),b(this,ir,null)}catch(D){b(this,ir,D)}I!==void 0&&(w="success",y=L0(r==null?void 0:r.data,I,t),p=!0)}c(this,ir)&&(g=c(this,ir),y=c(this,$d),m=Date.now(),w="error");const v=f.fetchStatus==="fetching",x=w==="pending",_=w==="error",S=x&&v,E=y!==void 0,T={status:w,fetchStatus:f.fetchStatus,isPending:x,isSuccess:w==="success",isError:_,isInitialLoading:S,isLoading:S,data:y,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:m,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!x,isLoadingError:_&&!E,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:_&&E,isStale:VA(e,t),refetch:this.refetch,promise:c(this,uo)};if(this.options.experimental_prefetchInRender){const I=L=>{T.status==="error"?L.reject(T.error):T.data!==void 0&&L.resolve(T.data)},D=()=>{const L=b(this,uo,T.promise=O0());I(L)},j=c(this,uo);switch(j.status){case"pending":e.queryHash===s.queryHash&&I(j);break;case"fulfilled":(T.status==="error"||T.data!==j.value)&&D();break;case"rejected":(T.status!=="error"||T.error!==j.reason)&&D();break}}return T}updateResult(e){const t=c(this,Vn),s=this.createResult(c(this,je),this.options);if(b(this,Ql,c(this,je).state),b(this,Fd,this.options),c(this,Ql).data!==void 0&&b(this,Vd,c(this,je)),Jv(s,t))return;b(this,Vn,s);const i={},r=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!c(this,Bd).size)return!0;const l=new Set(o??c(this,Bd));return this.options.throwOnError&&l.add("error"),Object.keys(c(this,Vn)).some(u=>{const d=u;return c(this,Vn)[d]!==t[d]&&l.has(d)})};(e==null?void 0:e.listeners)!==!1&&r()&&(i.listeners=!0),k(this,Ke,VN).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&k(this,Ke,B0).call(this)}},as=new WeakMap,je=new WeakMap,im=new WeakMap,Vn=new WeakMap,Ql=new WeakMap,Fd=new WeakMap,uo=new WeakMap,ir=new WeakMap,rm=new WeakMap,$d=new WeakMap,Vd=new WeakMap,Zl=new WeakMap,Jl=new WeakMap,ho=new WeakMap,Bd=new WeakMap,Ke=new WeakSet,Ff=function(e){k(this,Ke,H0).call(this);let t=c(this,je).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(ii)),t},F0=function(){k(this,Ke,z0).call(this);const e=wd(this.options.staleTime,c(this,je));if(gu||c(this,Vn).isStale||!M0(e))return;const s=RN(c(this,Vn).dataUpdatedAt,e)+1;b(this,Zl,setTimeout(()=>{c(this,Vn).isStale||this.updateResult()},s))},$0=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(c(this,je)):this.options.refetchInterval)??!1},V0=function(e){k(this,Ke,U0).call(this),b(this,ho,e),!(gu||Di(this.options.enabled,c(this,je))===!1||!M0(c(this,ho))||c(this,ho)===0)&&b(this,Jl,setInterval(()=>{(this.options.refetchIntervalInBackground||$A.isFocused())&&k(this,Ke,Ff).call(this)},c(this,ho)))},B0=function(){k(this,Ke,F0).call(this),k(this,Ke,V0).call(this,k(this,Ke,$0).call(this))},z0=function(){c(this,Zl)&&(clearTimeout(c(this,Zl)),b(this,Zl,void 0))},U0=function(){c(this,Jl)&&(clearInterval(c(this,Jl)),b(this,Jl,void 0))},H0=function(){const e=c(this,as).getQueryCache().build(c(this,as),this.options);if(e===c(this,je))return;const t=c(this,je);b(this,je,e),b(this,im,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},VN=function(e){Xt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(c(this,Vn))}),c(this,as).getQueryCache().notify({query:c(this,je),type:"observerResultsUpdated"})})},tT);function g$(n,e){return Di(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function fk(n,e){return g$(n,e)||n.state.data!==void 0&&W0(n,e,e.refetchOnMount)}function W0(n,e,t){if(Di(e.enabled,n)!==!1){const s=typeof t=="function"?t(n):t;return s==="always"||s!==!1&&VA(n,e)}return!1}function pk(n,e,t,s){return(n!==e||Di(s.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&VA(n,t)}function VA(n,e){return Di(e.enabled,n)!==!1&&n.isStaleByTime(wd(e.staleTime,n))}function y$(n,e){return!Jv(n.getCurrentResult(),e)}var fo,po,os,Qr,Ia,Wy,q0,nT,v$=(nT=class extends df{constructor(t,s){super();A(this,Ia);A(this,fo);A(this,po);A(this,os);A(this,Qr);b(this,fo,t),this.setOptions(s),this.bindMethods(),k(this,Ia,Wy).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const s=this.options;this.options=c(this,fo).defaultMutationOptions(t),Jv(this.options,s)||c(this,fo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:c(this,os),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&yu(s.mutationKey)!==yu(this.options.mutationKey)?this.reset():((i=c(this,os))==null?void 0:i.state.status)==="pending"&&c(this,os).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=c(this,os))==null||t.removeObserver(this)}onMutationUpdate(t){k(this,Ia,Wy).call(this),k(this,Ia,q0).call(this,t)}getCurrentResult(){return c(this,po)}reset(){var t;(t=c(this,os))==null||t.removeObserver(this),b(this,os,void 0),k(this,Ia,Wy).call(this),k(this,Ia,q0).call(this)}mutate(t,s){var i;return b(this,Qr,s),(i=c(this,os))==null||i.removeObserver(this),b(this,os,c(this,fo).getMutationCache().build(c(this,fo),this.options)),c(this,os).addObserver(this),c(this,os).execute(t)}},fo=new WeakMap,po=new WeakMap,os=new WeakMap,Qr=new WeakMap,Ia=new WeakSet,Wy=function(){var s;const t=((s=c(this,os))==null?void 0:s.state)??$N();b(this,po,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},q0=function(t){Xt.batch(()=>{var s,i,r,a,o,l,u,d;if(c(this,Qr)&&this.hasListeners()){const f=c(this,po).variables,p=c(this,po).context;(t==null?void 0:t.type)==="success"?((i=(s=c(this,Qr)).onSuccess)==null||i.call(s,t.data,f,p),(a=(r=c(this,Qr)).onSettled)==null||a.call(r,t.data,null,f,p)):(t==null?void 0:t.type)==="error"&&((l=(o=c(this,Qr)).onError)==null||l.call(o,t.error,f,p),(d=(u=c(this,Qr)).onSettled)==null||d.call(u,void 0,t.error,f,p))}this.listeners.forEach(f=>{f(c(this,po))})})},nT),BN=C.createContext(void 0),Pl=n=>{const e=C.useContext(BN);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},x$=({client:n,children:e})=>(C.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),h.jsx(BN.Provider,{value:n,children:e})),zN=C.createContext(!1),w$=()=>C.useContext(zN);zN.Provider;function b$(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var _$=C.createContext(b$()),S$=()=>C.useContext(_$);function UN(n,e){return typeof n=="function"?n(...e):!!n}function G0(){}var A$=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},C$=n=>{C.useEffect(()=>{n.clearReset()},[n])},k$=({result:n,errorResetBoundary:e,throwOnError:t,query:s})=>n.isError&&!e.isReset()&&!n.isFetching&&s&&UN(t,[n.error,s]),E$=n=>{n.suspense&&(n.staleTime===void 0&&(n.staleTime=1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},T$=(n,e)=>n.isLoading&&n.isFetching&&!e,P$=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,mk=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function N$(n,e,t){var d,f,p,y,g;const s=Pl(),i=w$(),r=S$(),a=s.defaultQueryOptions(n);(f=(d=s.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||f.call(d,a),a._optimisticResults=i?"isRestoring":"optimistic",E$(a),A$(a,r),C$(r);const o=!s.getQueryCache().get(a.queryHash),[l]=C.useState(()=>new e(s,a)),u=l.getOptimisticResult(a);if(C.useSyncExternalStore(C.useCallback(m=>{const w=i?G0:l.subscribe(Xt.batchCalls(m));return l.updateResult(),w},[l,i]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),C.useEffect(()=>{l.setOptions(a,{listeners:!1})},[a,l]),P$(a,u))throw mk(a,l,r);if(k$({result:u,errorResetBoundary:r,throwOnError:a.throwOnError,query:s.getQueryCache().get(a.queryHash)}))throw u.error;if((y=(p=s.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||y.call(p,a,u),a.experimental_prefetchInRender&&!gu&&T$(u,i)){const m=o?mk(a,l,r):(g=s.getQueryCache().get(a.queryHash))==null?void 0:g.promise;m==null||m.catch(G0).finally(()=>{l.updateResult()})}return a.notifyOnChangeProps?u:l.trackResult(u)}function $g(n,e){return N$(n,m$)}function Du(n,e){const t=Pl(),[s]=C.useState(()=>new v$(t,n));C.useEffect(()=>{s.setOptions(n)},[s,n]);const i=C.useSyncExternalStore(C.useCallback(a=>s.subscribe(Xt.batchCalls(a)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),r=C.useCallback((a,o)=>{s.mutate(a,o).catch(G0)},[s]);if(i.error&&UN(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:r,mutateAsync:i.mutate}}async function R$(n){if(!n.ok){const e=await n.text()||n.statusText;throw new Error(`${n.status}: ${e}`)}}const I$=({on401:n})=>async({queryKey:e})=>{const t=await fetch(e.join("/"),{credentials:"include"});return n==="returnNull"&&t.status===401?null:(await R$(t),await t.json())},D$=new p$({defaultOptions:{queries:{queryFn:I$({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),M$=1,j$=1e6;let pb=0;function L$(){return pb=(pb+1)%Number.MAX_SAFE_INTEGER,pb.toString()}const mb=new Map,gk=n=>{if(mb.has(n))return;const e=setTimeout(()=>{mb.delete(n),gp({type:"REMOVE_TOAST",toastId:n})},j$);mb.set(n,e)},O$=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,M$)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?gk(t):n.toasts.forEach(s=>{gk(s.id)}),{...n,toasts:n.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},qy=[];let Gy={toasts:[]};function gp(n){Gy=O$(Gy,n),qy.forEach(e=>{e(Gy)})}function F$({...n}){const e=L$(),t=i=>gp({type:"UPDATE_TOAST",toast:{...i,id:e}}),s=()=>gp({type:"DISMISS_TOAST",toastId:e});return gp({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||s()}}}),{id:e,dismiss:s,update:t}}function Mu(){const[n,e]=C.useState(Gy);return C.useEffect(()=>(qy.push(e),()=>{const t=qy.indexOf(e);t>-1&&qy.splice(t,1)}),[n]),{...n,toast:F$,dismiss:t=>gp({type:"DISMISS_TOAST",toastId:t})}}function fe(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function yk(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function HN(...n){return e=>{let t=!1;const s=n.map(i=>{const r=yk(i,e);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let i=0;i<s.length;i++){const r=s[i];typeof r=="function"?r():yk(n[i],null)}}}}function rt(...n){return C.useCallback(HN(...n),n)}function $$(n,e){const t=C.createContext(e),s=r=>{const{children:a,...o}=r,l=C.useMemo(()=>o,Object.values(o));return h.jsx(t.Provider,{value:l,children:a})};s.displayName=n+"Provider";function i(r){const a=C.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${r}\` must be used within \`${n}\``)}return[s,i]}function Lr(n,e=[]){let t=[];function s(r,a){const o=C.createContext(a),l=t.length;t=[...t,a];const u=f=>{var v;const{scope:p,children:y,...g}=f,m=((v=p==null?void 0:p[n])==null?void 0:v[l])||o,w=C.useMemo(()=>g,Object.values(g));return h.jsx(m.Provider,{value:w,children:y})};u.displayName=r+"Provider";function d(f,p){var m;const y=((m=p==null?void 0:p[n])==null?void 0:m[l])||o,g=C.useContext(y);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${r}\``)}return[u,d]}const i=()=>{const r=t.map(a=>C.createContext(a));return function(o){const l=(o==null?void 0:o[n])||r;return C.useMemo(()=>({[`__scope${n}`]:{...o,[n]:l}}),[o,l])}};return i.scopeName=n,[s,V$(i,...e)]}function V$(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(r){const a=s.reduce((o,{useScope:l,scopeName:u})=>{const f=l(r)[`__scope${u}`];return{...o,...f}},{});return C.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function tf(n){const e=z$(n),t=C.forwardRef((s,i)=>{const{children:r,...a}=s,o=C.Children.toArray(r),l=o.find(H$);if(l){const u=l.props.children,d=o.map(f=>f===l?C.Children.count(u)>1?C.Children.only(null):C.isValidElement(u)?u.props.children:null:f);return h.jsx(e,{...a,ref:i,children:C.isValidElement(u)?C.cloneElement(u,void 0,d):null})}return h.jsx(e,{...a,ref:i,children:r})});return t.displayName=`${n}.Slot`,t}var B$=tf("Slot");function z$(n){const e=C.forwardRef((t,s)=>{const{children:i,...r}=t;if(C.isValidElement(i)){const a=q$(i),o=W$(r,i.props);return i.type!==C.Fragment&&(o.ref=s?HN(s,a):a),C.cloneElement(i,o)}return C.Children.count(i)>1?C.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var WN=Symbol("radix.slottable");function U$(n){const e=({children:t})=>h.jsx(h.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=WN,e}function H$(n){return C.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===WN}function W$(n,e){const t={...e};for(const s in e){const i=n[s],r=e[s];/^on[A-Z]/.test(s)?i&&r?t[s]=(...o)=>{r(...o),i(...o)}:i&&(t[s]=i):s==="style"?t[s]={...i,...r}:s==="className"&&(t[s]=[i,r].filter(Boolean).join(" "))}return{...n,...t}}function q$(n){var s,i;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function BA(n){const e=n+"CollectionProvider",[t,s]=Lr(e),[i,r]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=m=>{const{scope:w,children:v}=m,x=Gt.useRef(null),_=Gt.useRef(new Map).current;return h.jsx(i,{scope:w,itemMap:_,collectionRef:x,children:v})};a.displayName=e;const o=n+"CollectionSlot",l=tf(o),u=Gt.forwardRef((m,w)=>{const{scope:v,children:x}=m,_=r(o,v),S=rt(w,_.collectionRef);return h.jsx(l,{ref:S,children:x})});u.displayName=o;const d=n+"CollectionItemSlot",f="data-radix-collection-item",p=tf(d),y=Gt.forwardRef((m,w)=>{const{scope:v,children:x,..._}=m,S=Gt.useRef(null),E=rt(w,S),P=r(d,v);return Gt.useEffect(()=>(P.itemMap.set(S,{ref:S,..._}),()=>void P.itemMap.delete(S))),h.jsx(p,{[f]:"",ref:E,children:x})});y.displayName=d;function g(m){const w=r(n+"CollectionConsumer",m);return Gt.useCallback(()=>{const x=w.collectionRef.current;if(!x)return[];const _=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((P,T)=>_.indexOf(P.ref.current)-_.indexOf(T.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:u,ItemSlot:y},g,s]}var G$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],be=G$.reduce((n,e)=>{const t=tf(`Primitive.${e}`),s=C.forwardRef((i,r)=>{const{asChild:a,...o}=i,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...o,ref:r})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function qN(n,e){n&&Iu.flushSync(()=>n.dispatchEvent(e))}function xs(n){const e=C.useRef(n);return C.useEffect(()=>{e.current=n}),C.useMemo(()=>(...t)=>{var s;return(s=e.current)==null?void 0:s.call(e,...t)},[])}function K$(n,e=globalThis==null?void 0:globalThis.document){const t=xs(n);C.useEffect(()=>{const s=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var X$="DismissableLayer",K0="dismissableLayer.update",Y$="dismissableLayer.pointerDownOutside",Q$="dismissableLayer.focusOutside",vk,GN=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Vg=C.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:r,onInteractOutside:a,onDismiss:o,...l}=n,u=C.useContext(GN),[d,f]=C.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=C.useState({}),g=rt(e,T=>f(T)),m=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(w),x=d?m.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,S=x>=v,E=J$(T=>{const N=T.target,I=[...u.branches].some(D=>D.contains(N));!S||I||(i==null||i(T),a==null||a(T),T.defaultPrevented||o==null||o())},p),P=e3(T=>{const N=T.target;[...u.branches].some(D=>D.contains(N))||(r==null||r(T),a==null||a(T),T.defaultPrevented||o==null||o())},p);return K$(T=>{x===u.layers.size-1&&(s==null||s(T),!T.defaultPrevented&&o&&(T.preventDefault(),o()))},p),C.useEffect(()=>{if(d)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(vk=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),xk(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=vk)}},[d,p,t,u]),C.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),xk())},[d,u]),C.useEffect(()=>{const T=()=>y({});return document.addEventListener(K0,T),()=>document.removeEventListener(K0,T)},[]),h.jsx(be.div,{...l,ref:g,style:{pointerEvents:_?S?"auto":"none":void 0,...n.style},onFocusCapture:fe(n.onFocusCapture,P.onFocusCapture),onBlurCapture:fe(n.onBlurCapture,P.onBlurCapture),onPointerDownCapture:fe(n.onPointerDownCapture,E.onPointerDownCapture)})});Vg.displayName=X$;var Z$="DismissableLayerBranch",KN=C.forwardRef((n,e)=>{const t=C.useContext(GN),s=C.useRef(null),i=rt(e,s);return C.useEffect(()=>{const r=s.current;if(r)return t.branches.add(r),()=>{t.branches.delete(r)}},[t.branches]),h.jsx(be.div,{...n,ref:i})});KN.displayName=Z$;function J$(n,e=globalThis==null?void 0:globalThis.document){const t=xs(n),s=C.useRef(!1),i=C.useRef(()=>{});return C.useEffect(()=>{const r=o=>{if(o.target&&!s.current){let l=function(){XN(Y$,t,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);s.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",r),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function e3(n,e=globalThis==null?void 0:globalThis.document){const t=xs(n),s=C.useRef(!1);return C.useEffect(()=>{const i=r=>{r.target&&!s.current&&XN(Q$,t,{originalEvent:r},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function xk(){const n=new CustomEvent(K0);document.dispatchEvent(n)}function XN(n,e,t,{discrete:s}){const i=t.originalEvent.target,r=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),s?qN(i,r):i.dispatchEvent(r)}var t3=Vg,n3=KN,Mn=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{},s3="Portal",dw=C.forwardRef((n,e)=>{var o;const{container:t,...s}=n,[i,r]=C.useState(!1);Mn(()=>r(!0),[]);const a=t||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?SF.createPortal(h.jsx(be.div,{...s,ref:e}),a):null});dw.displayName=s3;function i3(n,e){return C.useReducer((t,s)=>e[t][s]??t,n)}var Nl=n=>{const{present:e,children:t}=n,s=r3(e),i=typeof t=="function"?t({present:s.isPresent}):C.Children.only(t),r=rt(s.ref,a3(i));return typeof t=="function"||s.isPresent?C.cloneElement(i,{ref:r}):null};Nl.displayName="Presence";function r3(n){const[e,t]=C.useState(),s=C.useRef({}),i=C.useRef(n),r=C.useRef("none"),a=n?"mounted":"unmounted",[o,l]=i3(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const u=yy(s.current);r.current=o==="mounted"?u:"none"},[o]),Mn(()=>{const u=s.current,d=i.current;if(d!==n){const p=r.current,y=yy(u);n?l("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&p!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),Mn(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=y=>{const m=yy(s.current).includes(y.animationName);if(y.target===e&&m&&(l("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},p=y=>{y.target===e&&(r.current=yy(s.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:C.useCallback(u=>{u&&(s.current=getComputedStyle(u)),t(u)},[])}}function yy(n){return(n==null?void 0:n.animationName)||"none"}function a3(n){var s,i;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function vu({prop:n,defaultProp:e,onChange:t=()=>{}}){const[s,i]=o3({defaultProp:e,onChange:t}),r=n!==void 0,a=r?n:s,o=xs(t),l=C.useCallback(u=>{if(r){const f=typeof u=="function"?u(n):u;f!==n&&o(f)}else i(u)},[r,n,i,o]);return[a,l]}function o3({defaultProp:n,onChange:e}){const t=C.useState(n),[s]=t,i=C.useRef(s),r=xs(e);return C.useEffect(()=>{i.current!==s&&(r(s),i.current=s)},[s,i,r]),t}var l3="VisuallyHidden",Bg=C.forwardRef((n,e)=>h.jsx(be.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));Bg.displayName=l3;var c3=Bg,zA="ToastProvider",[UA,u3,d3]=BA("Toast"),[YN,B8]=Lr("Toast",[d3]),[h3,hw]=YN(zA),QN=n=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:i="right",swipeThreshold:r=50,children:a}=n,[o,l]=C.useState(null),[u,d]=C.useState(0),f=C.useRef(!1),p=C.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${zA}\`. Expected non-empty \`string\`.`),h.jsx(UA.Provider,{scope:e,children:h.jsx(h3,{scope:e,label:t,duration:s,swipeDirection:i,swipeThreshold:r,toastCount:u,viewport:o,onViewportChange:l,onToastAdd:C.useCallback(()=>d(y=>y+1),[]),onToastRemove:C.useCallback(()=>d(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:a})})};QN.displayName=zA;var ZN="ToastViewport",f3=["F8"],X0="toast.viewportPause",Y0="toast.viewportResume",JN=C.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:s=f3,label:i="Notifications ({hotkey})",...r}=n,a=hw(ZN,t),o=u3(t),l=C.useRef(null),u=C.useRef(null),d=C.useRef(null),f=C.useRef(null),p=rt(e,f,a.onViewportChange),y=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=a.toastCount>0;C.useEffect(()=>{const w=v=>{var _;s.length!==0&&s.every(S=>v[S]||v.code===S)&&((_=f.current)==null||_.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[s]),C.useEffect(()=>{const w=l.current,v=f.current;if(g&&w&&v){const x=()=>{if(!a.isClosePausedRef.current){const P=new CustomEvent(X0);v.dispatchEvent(P),a.isClosePausedRef.current=!0}},_=()=>{if(a.isClosePausedRef.current){const P=new CustomEvent(Y0);v.dispatchEvent(P),a.isClosePausedRef.current=!1}},S=P=>{!w.contains(P.relatedTarget)&&_()},E=()=>{w.contains(document.activeElement)||_()};return w.addEventListener("focusin",x),w.addEventListener("focusout",S),w.addEventListener("pointermove",x),w.addEventListener("pointerleave",E),window.addEventListener("blur",x),window.addEventListener("focus",_),()=>{w.removeEventListener("focusin",x),w.removeEventListener("focusout",S),w.removeEventListener("pointermove",x),w.removeEventListener("pointerleave",E),window.removeEventListener("blur",x),window.removeEventListener("focus",_)}}},[g,a.isClosePausedRef]);const m=C.useCallback(({tabbingDirection:w})=>{const x=o().map(_=>{const S=_.ref.current,E=[S,...k3(S)];return w==="forwards"?E:E.reverse()});return(w==="forwards"?x.reverse():x).flat()},[o]);return C.useEffect(()=>{const w=f.current;if(w){const v=x=>{var E,P,T;const _=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!_){const N=document.activeElement,I=x.shiftKey;if(x.target===w&&I){(E=u.current)==null||E.focus();return}const L=m({tabbingDirection:I?"backwards":"forwards"}),z=L.findIndex(F=>F===N);gb(L.slice(z+1))?x.preventDefault():I?(P=u.current)==null||P.focus():(T=d.current)==null||T.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[o,m]),h.jsxs(n3,{ref:l,role:"region","aria-label":i.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&h.jsx(Q0,{ref:u,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"forwards"});gb(w)}}),h.jsx(UA.Slot,{scope:t,children:h.jsx(be.ol,{tabIndex:-1,...r,ref:p})}),g&&h.jsx(Q0,{ref:d,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"backwards"});gb(w)}})]})});JN.displayName=ZN;var eR="ToastFocusProxy",Q0=C.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...i}=n,r=hw(eR,t);return h.jsx(Bg,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const o=a.relatedTarget;!((u=r.viewport)!=null&&u.contains(o))&&s()}})});Q0.displayName=eR;var fw="Toast",p3="toast.swipeStart",m3="toast.swipeMove",g3="toast.swipeCancel",y3="toast.swipeEnd",tR=C.forwardRef((n,e)=>{const{forceMount:t,open:s,defaultOpen:i,onOpenChange:r,...a}=n,[o=!0,l]=vu({prop:s,defaultProp:i,onChange:r});return h.jsx(Nl,{present:t||o,children:h.jsx(w3,{open:o,...a,ref:e,onClose:()=>l(!1),onPause:xs(n.onPause),onResume:xs(n.onResume),onSwipeStart:fe(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:fe(n.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:fe(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:fe(n.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});tR.displayName=fw;var[v3,x3]=YN(fw,{onClose(){}}),w3=C.forwardRef((n,e)=>{const{__scopeToast:t,type:s="foreground",duration:i,open:r,onClose:a,onEscapeKeyDown:o,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:y,...g}=n,m=hw(fw,t),[w,v]=C.useState(null),x=rt(e,F=>v(F)),_=C.useRef(null),S=C.useRef(null),E=i||m.duration,P=C.useRef(0),T=C.useRef(E),N=C.useRef(0),{onToastAdd:I,onToastRemove:D}=m,j=xs(()=>{var J;(w==null?void 0:w.contains(document.activeElement))&&((J=m.viewport)==null||J.focus()),a()}),L=C.useCallback(F=>{!F||F===1/0||(window.clearTimeout(N.current),P.current=new Date().getTime(),N.current=window.setTimeout(j,F))},[j]);C.useEffect(()=>{const F=m.viewport;if(F){const J=()=>{L(T.current),u==null||u()},$=()=>{const B=new Date().getTime()-P.current;T.current=T.current-B,window.clearTimeout(N.current),l==null||l()};return F.addEventListener(X0,$),F.addEventListener(Y0,J),()=>{F.removeEventListener(X0,$),F.removeEventListener(Y0,J)}}},[m.viewport,E,l,u,L]),C.useEffect(()=>{r&&!m.isClosePausedRef.current&&L(E)},[r,E,m.isClosePausedRef,L]),C.useEffect(()=>(I(),()=>D()),[I,D]);const z=C.useMemo(()=>w?lR(w):null,[w]);return m.viewport?h.jsxs(h.Fragment,{children:[z&&h.jsx(b3,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),h.jsx(v3,{scope:t,onClose:j,children:Iu.createPortal(h.jsx(UA.ItemSlot,{scope:t,children:h.jsx(t3,{asChild:!0,onEscapeKeyDown:fe(o,()=>{m.isFocusedToastEscapeKeyDownRef.current||j(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(be.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":r?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:x,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:fe(n.onKeyDown,F=>{F.key==="Escape"&&(o==null||o(F.nativeEvent),F.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,j()))}),onPointerDown:fe(n.onPointerDown,F=>{F.button===0&&(_.current={x:F.clientX,y:F.clientY})}),onPointerMove:fe(n.onPointerMove,F=>{if(!_.current)return;const J=F.clientX-_.current.x,$=F.clientY-_.current.y,B=!!S.current,O=["left","right"].includes(m.swipeDirection),H=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,ee=O?H(0,J):0,de=O?0:H(0,$),me=F.pointerType==="touch"?10:2,Ce={x:ee,y:de},Je={originalEvent:F,delta:Ce};B?(S.current=Ce,vy(m3,f,Je,{discrete:!1})):wk(Ce,m.swipeDirection,me)?(S.current=Ce,vy(p3,d,Je,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(J)>me||Math.abs($)>me)&&(_.current=null)}),onPointerUp:fe(n.onPointerUp,F=>{const J=S.current,$=F.target;if($.hasPointerCapture(F.pointerId)&&$.releasePointerCapture(F.pointerId),S.current=null,_.current=null,J){const B=F.currentTarget,O={originalEvent:F,delta:J};wk(J,m.swipeDirection,m.swipeThreshold)?vy(y3,y,O,{discrete:!0}):vy(g3,p,O,{discrete:!0}),B.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),b3=n=>{const{__scopeToast:e,children:t,...s}=n,i=hw(fw,e),[r,a]=C.useState(!1),[o,l]=C.useState(!1);return A3(()=>a(!0)),C.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),o?null:h.jsx(dw,{asChild:!0,children:h.jsx(Bg,{...s,children:r&&h.jsxs(h.Fragment,{children:[i.label," ",t]})})})},_3="ToastTitle",nR=C.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return h.jsx(be.div,{...s,ref:e})});nR.displayName=_3;var S3="ToastDescription",sR=C.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return h.jsx(be.div,{...s,ref:e})});sR.displayName=S3;var iR="ToastAction",rR=C.forwardRef((n,e)=>{const{altText:t,...s}=n;return t.trim()?h.jsx(oR,{altText:t,asChild:!0,children:h.jsx(HA,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${iR}\`. Expected non-empty \`string\`.`),null)});rR.displayName=iR;var aR="ToastClose",HA=C.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n,i=x3(aR,t);return h.jsx(oR,{asChild:!0,children:h.jsx(be.button,{type:"button",...s,ref:e,onClick:fe(n.onClick,i.onClose)})})});HA.displayName=aR;var oR=C.forwardRef((n,e)=>{const{__scopeToast:t,altText:s,...i}=n;return h.jsx(be.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...i,ref:e})});function lR(n){const e=[];return Array.from(n.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),C3(s)){const i=s.ariaHidden||s.hidden||s.style.display==="none",r=s.dataset.radixToastAnnounceExclude==="";if(!i)if(r){const a=s.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...lR(s))}}),e}function vy(n,e,t,{discrete:s}){const i=t.originalEvent.currentTarget,r=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),s?qN(i,r):i.dispatchEvent(r)}var wk=(n,e,t=0)=>{const s=Math.abs(n.x),i=Math.abs(n.y),r=s>i;return e==="left"||e==="right"?r&&s>t:!r&&i>t};function A3(n=()=>{}){const e=xs(n);Mn(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function C3(n){return n.nodeType===n.ELEMENT_NODE}function k3(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function gb(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var E3=QN,cR=JN,uR=tR,dR=nR,hR=sR,fR=rR,pR=HA;function mR(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=mR(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function gR(){for(var n,e,t=0,s="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=mR(n))&&(s&&(s+=" "),s+=e);return s}const bk=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,_k=gR,zg=(n,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return _k(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:r}=e,a=Object.keys(i).map(u=>{const d=t==null?void 0:t[u],f=r==null?void 0:r[u];if(d===null)return null;const p=bk(d)||bk(f);return i[u][p]}),o=t&&Object.entries(t).reduce((u,d)=>{let[f,p]=d;return p===void 0||(u[f]=p),u},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:f,className:p,...y}=d;return Object.entries(y).every(g=>{let[m,w]=g;return Array.isArray(w)?w.includes({...r,...o}[m]):{...r,...o}[m]===w})?[...u,f,p]:u},[]);return _k(n,a,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yR=(...n)=>n.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var P3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=C.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:r,iconNode:a,...o},l)=>C.createElement("svg",{ref:l,...P3,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:yR("lucide",i),...o},[...a.map(([u,d])=>C.createElement(u,d)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(n,e)=>{const t=C.forwardRef(({className:s,...i},r)=>C.createElement(N3,{ref:r,iconNode:e,className:yR(`lucide-${T3(n)}`,s),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=Pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=Pe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=Pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=Pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=Pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=Pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=Pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=Pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=Pe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=Pe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=Pe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=Pe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=Pe("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=Pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=Pe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=Pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=Pe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=Pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=Pe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=Pe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=Pe("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=Pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=Pe("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=Pe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=Pe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=Pe("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=Pe("Rss",[["path",{d:"M4 11a9 9 0 0 1 9 9",key:"pv89mb"}],["path",{d:"M4 4a16 16 0 0 1 16 16",key:"k0647b"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=Pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=Pe("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=Pe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=Pe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=Pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=Pe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=Pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=Pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=Pe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),WA="-",q3=n=>{const e=K3(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:a=>{const o=a.split(WA);return o[0]===""&&o.length!==1&&o.shift(),AR(o,e)||G3(a)},getConflictingClassGroupIds:(a,o)=>{const l=t[a]||[];return o&&s[a]?[...l,...s[a]]:l}}},AR=(n,e)=>{var a;if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),i=s?AR(n.slice(1),s):void 0;if(i)return i;if(e.validators.length===0)return;const r=n.join(WA);return(a=e.validators.find(({validator:o})=>o(r)))==null?void 0:a.classGroupId},Pk=/^\[(.+)\]$/,G3=n=>{if(Pk.test(n)){const e=Pk.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},K3=n=>{const{theme:e,prefix:t}=n,s={nextPart:new Map,validators:[]};return Y3(Object.entries(n.classGroups),t).forEach(([r,a])=>{t_(a,s,r,e)}),s},t_=(n,e,t,s)=>{n.forEach(i=>{if(typeof i=="string"){const r=i===""?e:Nk(e,i);r.classGroupId=t;return}if(typeof i=="function"){if(X3(i)){t_(i(s),e,t,s);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([r,a])=>{t_(a,Nk(e,r),t,s)})})},Nk=(n,e)=>{let t=n;return e.split(WA).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},X3=n=>n.isThemeGetter,Y3=(n,e)=>e?n.map(([t,s])=>{const i=s.map(r=>typeof r=="string"?e+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([a,o])=>[e+a,o])):r);return[t,i]}):n,Q3=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const i=(r,a)=>{t.set(r,a),e++,e>n&&(e=0,s=t,t=new Map)};return{get(r){let a=t.get(r);if(a!==void 0)return a;if((a=s.get(r))!==void 0)return i(r,a),a},set(r,a){t.has(r)?t.set(r,a):i(r,a)}}},CR="!",Z3=n=>{const{separator:e,experimentalParseClassName:t}=n,s=e.length===1,i=e[0],r=e.length,a=o=>{const l=[];let u=0,d=0,f;for(let w=0;w<o.length;w++){let v=o[w];if(u===0){if(v===i&&(s||o.slice(w,w+r)===e)){l.push(o.slice(d,w)),d=w+r;continue}if(v==="/"){f=w;continue}}v==="["?u++:v==="]"&&u--}const p=l.length===0?o:o.substring(d),y=p.startsWith(CR),g=y?p.substring(1):p,m=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:m}};return t?o=>t({className:o,parseClassName:a}):a},J3=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},e4=n=>({cache:Q3(n.cacheSize),parseClassName:Z3(n),...q3(n)}),t4=/\s+/,n4=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:i}=e,r=[],a=n.trim().split(t4);let o="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:y}=t(u);let g=!!y,m=s(g?p.substring(0,y):p);if(!m){if(!g){o=u+(o.length>0?" "+o:o);continue}if(m=s(p),!m){o=u+(o.length>0?" "+o:o);continue}g=!1}const w=J3(d).join(":"),v=f?w+CR:w,x=v+m;if(r.includes(x))continue;r.push(x);const _=i(m,g);for(let S=0;S<_.length;++S){const E=_[S];r.push(v+E)}o=u+(o.length>0?" "+o:o)}return o};function s4(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=kR(e))&&(s&&(s+=" "),s+=t);return s}const kR=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=kR(n[s]))&&(t&&(t+=" "),t+=e);return t};function i4(n,...e){let t,s,i,r=a;function a(l){const u=e.reduce((d,f)=>f(d),n());return t=e4(u),s=t.cache.get,i=t.cache.set,r=o,o(l)}function o(l){const u=s(l);if(u)return u;const d=n4(l,t);return i(l,d),d}return function(){return r(s4.apply(null,arguments))}}const ut=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},ER=/^\[(?:([a-z-]+):)?(.+)\]$/i,r4=/^\d+\/\d+$/,a4=new Set(["px","full","screen"]),o4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,l4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,c4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,u4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,d4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fr=n=>Sd(n)||a4.has(n)||r4.test(n),Ga=n=>hf(n,"length",x4),Sd=n=>!!n&&!Number.isNaN(Number(n)),xb=n=>hf(n,"number",Sd),Af=n=>!!n&&Number.isInteger(Number(n)),h4=n=>n.endsWith("%")&&Sd(n.slice(0,-1)),Ae=n=>ER.test(n),Ka=n=>o4.test(n),f4=new Set(["length","size","percentage"]),p4=n=>hf(n,f4,TR),m4=n=>hf(n,"position",TR),g4=new Set(["image","url"]),y4=n=>hf(n,g4,b4),v4=n=>hf(n,"",w4),Cf=()=>!0,hf=(n,e,t)=>{const s=ER.exec(n);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},x4=n=>l4.test(n)&&!c4.test(n),TR=()=>!1,w4=n=>u4.test(n),b4=n=>d4.test(n),_4=()=>{const n=ut("colors"),e=ut("spacing"),t=ut("blur"),s=ut("brightness"),i=ut("borderColor"),r=ut("borderRadius"),a=ut("borderSpacing"),o=ut("borderWidth"),l=ut("contrast"),u=ut("grayscale"),d=ut("hueRotate"),f=ut("invert"),p=ut("gap"),y=ut("gradientColorStops"),g=ut("gradientColorStopPositions"),m=ut("inset"),w=ut("margin"),v=ut("opacity"),x=ut("padding"),_=ut("saturate"),S=ut("scale"),E=ut("sepia"),P=ut("skew"),T=ut("space"),N=ut("translate"),I=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",Ae,e],L=()=>[Ae,e],z=()=>["",Fr,Ga],F=()=>["auto",Sd,Ae],J=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],B=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Ae],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],de=()=>[Sd,Ae];return{cacheSize:500,separator:":",theme:{colors:[Cf],spacing:[Fr,Ga],blur:["none","",Ka,Ae],brightness:de(),borderColor:[n],borderRadius:["none","","full",Ka,Ae],borderSpacing:L(),borderWidth:z(),contrast:de(),grayscale:H(),hueRotate:de(),invert:H(),gap:L(),gradientColorStops:[n],gradientColorStopPositions:[h4,Ga],inset:j(),margin:j(),opacity:de(),padding:L(),saturate:de(),scale:de(),sepia:H(),skew:de(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",Ae]}],container:["container"],columns:[{columns:[Ka]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...J(),Ae]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Af,Ae]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ae]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",Af,Ae]}],"grid-cols":[{"grid-cols":[Cf]}],"col-start-end":[{col:["auto",{span:["full",Af,Ae]},Ae]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[Cf]}],"row-start-end":[{row:["auto",{span:[Af,Ae]},Ae]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ae]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ae]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ae,e]}],"min-w":[{"min-w":[Ae,e,"min","max","fit"]}],"max-w":[{"max-w":[Ae,e,"none","full","min","max","fit","prose",{screen:[Ka]},Ka]}],h:[{h:[Ae,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ae,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ae,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ae,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ka,Ga]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",xb]}],"font-family":[{font:[Cf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ae]}],"line-clamp":[{"line-clamp":["none",Sd,xb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Fr,Ae]}],"list-image":[{"list-image":["none",Ae]}],"list-style-type":[{list:["none","disc","decimal",Ae]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Fr,Ga]}],"underline-offset":[{"underline-offset":["auto",Fr,Ae]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ae]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ae]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...J(),m4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",p4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},y4]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:$()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[Fr,Ae]}],"outline-w":[{outline:[Fr,Ga]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Fr,Ga]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Ka,v4]}],"shadow-color":[{shadow:[Cf]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...B(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ka,Ae]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[_]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ae]}],duration:[{duration:de()}],ease:[{ease:["linear","in","out","in-out",Ae]}],delay:[{delay:de()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ae]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Af,Ae]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ae]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ae]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ae]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Fr,Ga,xb]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},S4=i4(_4);function Te(...n){return S4(gR(n))}const A4=E3,PR=C.forwardRef(({className:n,...e},t)=>h.jsx(cR,{ref:t,className:Te("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));PR.displayName=cR.displayName;const C4=zg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),NR=C.forwardRef(({className:n,variant:e,...t},s)=>h.jsx(uR,{ref:s,className:Te(C4({variant:e}),n),...t}));NR.displayName=uR.displayName;const k4=C.forwardRef(({className:n,...e},t)=>h.jsx(fR,{ref:t,className:Te("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));k4.displayName=fR.displayName;const RR=C.forwardRef(({className:n,...e},t)=>h.jsx(pR,{ref:t,className:Te("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:h.jsx(_d,{className:"h-4 w-4"})}));RR.displayName=pR.displayName;const IR=C.forwardRef(({className:n,...e},t)=>h.jsx(dR,{ref:t,className:Te("text-sm font-semibold",n),...e}));IR.displayName=dR.displayName;const DR=C.forwardRef(({className:n,...e},t)=>h.jsx(hR,{ref:t,className:Te("text-sm opacity-90",n),...e}));DR.displayName=hR.displayName;function E4(){const{toasts:n}=Mu();return h.jsxs(A4,{children:[n.map(function({id:e,title:t,description:s,action:i,...r}){return h.jsxs(NR,{...r,children:[h.jsxs("div",{className:"grid gap-1",children:[t&&h.jsx(IR,{children:t}),s&&h.jsx(DR,{children:s})]}),i,h.jsx(RR,{})]},e)}),h.jsx(PR,{})]})}var T4=mT[" useId ".trim().toString()]||(()=>{}),P4=0;function ul(n){const[e,t]=C.useState(T4());return Mn(()=>{n||t(s=>s??String(P4++))},[n]),n||(e?`radix-${e}`:"")}const N4=["top","right","bottom","left"],pl=Math.min,$s=Math.max,nx=Math.round,by=Math.floor,Pr=n=>({x:n,y:n}),R4={left:"right",right:"left",bottom:"top",top:"bottom"},I4={start:"end",end:"start"};function n_(n,e,t){return $s(n,pl(e,t))}function $a(n,e){return typeof n=="function"?n(e):n}function Va(n){return n.split("-")[0]}function ff(n){return n.split("-")[1]}function qA(n){return n==="x"?"y":"x"}function GA(n){return n==="y"?"height":"width"}function ml(n){return["top","bottom"].includes(Va(n))?"y":"x"}function KA(n){return qA(ml(n))}function D4(n,e,t){t===void 0&&(t=!1);const s=ff(n),i=KA(n),r=GA(i);let a=i==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(a=sx(a)),[a,sx(a)]}function M4(n){const e=sx(n);return[s_(n),e,s_(e)]}function s_(n){return n.replace(/start|end/g,e=>I4[e])}function j4(n,e,t){const s=["left","right"],i=["right","left"],r=["top","bottom"],a=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:s:e?s:i;case"left":case"right":return e?r:a;default:return[]}}function L4(n,e,t,s){const i=ff(n);let r=j4(Va(n),t==="start",s);return i&&(r=r.map(a=>a+"-"+i),e&&(r=r.concat(r.map(s_)))),r}function sx(n){return n.replace(/left|right|bottom|top/g,e=>R4[e])}function O4(n){return{top:0,right:0,bottom:0,left:0,...n}}function MR(n){return typeof n!="number"?O4(n):{top:n,right:n,bottom:n,left:n}}function ix(n){const{x:e,y:t,width:s,height:i}=n;return{width:s,height:i,top:t,left:e,right:e+s,bottom:t+i,x:e,y:t}}function Rk(n,e,t){let{reference:s,floating:i}=n;const r=ml(e),a=KA(e),o=GA(a),l=Va(e),u=r==="y",d=s.x+s.width/2-i.width/2,f=s.y+s.height/2-i.height/2,p=s[o]/2-i[o]/2;let y;switch(l){case"top":y={x:d,y:s.y-i.height};break;case"bottom":y={x:d,y:s.y+s.height};break;case"right":y={x:s.x+s.width,y:f};break;case"left":y={x:s.x-i.width,y:f};break;default:y={x:s.x,y:s.y}}switch(ff(e)){case"start":y[a]-=p*(t&&u?-1:1);break;case"end":y[a]+=p*(t&&u?-1:1);break}return y}const F4=async(n,e,t)=>{const{placement:s="bottom",strategy:i="absolute",middleware:r=[],platform:a}=t,o=r.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:n,floating:e,strategy:i}),{x:d,y:f}=Rk(u,s,l),p=s,y={},g=0;for(let m=0;m<o.length;m++){const{name:w,fn:v}=o[m],{x,y:_,data:S,reset:E}=await v({x:d,y:f,initialPlacement:s,placement:p,strategy:i,middlewareData:y,rects:u,platform:a,elements:{reference:n,floating:e}});d=x??d,f=_??f,y={...y,[w]:{...y[w],...S}},E&&g<=50&&(g++,typeof E=="object"&&(E.placement&&(p=E.placement),E.rects&&(u=E.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:i}):E.rects),{x:d,y:f}=Rk(u,p,l)),m=-1)}return{x:d,y:f,placement:p,strategy:i,middlewareData:y}};async function Op(n,e){var t;e===void 0&&(e={});const{x:s,y:i,platform:r,rects:a,elements:o,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:y=0}=$a(e,n),g=MR(y),w=o[p?f==="floating"?"reference":"floating":f],v=ix(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(w)))==null||t?w:w.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:l})),x=f==="floating"?{x:s,y:i,width:a.floating.width,height:a.floating.height}:a.reference,_=await(r.getOffsetParent==null?void 0:r.getOffsetParent(o.floating)),S=await(r.isElement==null?void 0:r.isElement(_))?await(r.getScale==null?void 0:r.getScale(_))||{x:1,y:1}:{x:1,y:1},E=ix(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:_,strategy:l}):x);return{top:(v.top-E.top+g.top)/S.y,bottom:(E.bottom-v.bottom+g.bottom)/S.y,left:(v.left-E.left+g.left)/S.x,right:(E.right-v.right+g.right)/S.x}}const $4=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:s,placement:i,rects:r,platform:a,elements:o,middlewareData:l}=e,{element:u,padding:d=0}=$a(n,e)||{};if(u==null)return{};const f=MR(d),p={x:t,y:s},y=KA(i),g=GA(y),m=await a.getDimensions(u),w=y==="y",v=w?"top":"left",x=w?"bottom":"right",_=w?"clientHeight":"clientWidth",S=r.reference[g]+r.reference[y]-p[y]-r.floating[g],E=p[y]-r.reference[y],P=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let T=P?P[_]:0;(!T||!await(a.isElement==null?void 0:a.isElement(P)))&&(T=o.floating[_]||r.floating[g]);const N=S/2-E/2,I=T/2-m[g]/2-1,D=pl(f[v],I),j=pl(f[x],I),L=D,z=T-m[g]-j,F=T/2-m[g]/2+N,J=n_(L,F,z),$=!l.arrow&&ff(i)!=null&&F!==J&&r.reference[g]/2-(F<L?D:j)-m[g]/2<0,B=$?F<L?F-L:F-z:0;return{[y]:p[y]+B,data:{[y]:J,centerOffset:F-J-B,...$&&{alignmentOffset:B}},reset:$}}}),V4=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,s;const{placement:i,middlewareData:r,rects:a,initialPlacement:o,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...w}=$a(n,e);if((t=r.arrow)!=null&&t.alignmentOffset)return{};const v=Va(i),x=ml(o),_=Va(o)===o,S=await(l.isRTL==null?void 0:l.isRTL(u.floating)),E=p||(_||!m?[sx(o)]:M4(o)),P=g!=="none";!p&&P&&E.push(...L4(o,m,g,S));const T=[o,...E],N=await Op(e,w),I=[];let D=((s=r.flip)==null?void 0:s.overflows)||[];if(d&&I.push(N[v]),f){const F=D4(i,a,S);I.push(N[F[0]],N[F[1]])}if(D=[...D,{placement:i,overflows:I}],!I.every(F=>F<=0)){var j,L;const F=(((j=r.flip)==null?void 0:j.index)||0)+1,J=T[F];if(J)return{data:{index:F,overflows:D},reset:{placement:J}};let $=(L=D.filter(B=>B.overflows[0]<=0).sort((B,O)=>B.overflows[1]-O.overflows[1])[0])==null?void 0:L.placement;if(!$)switch(y){case"bestFit":{var z;const B=(z=D.filter(O=>{if(P){const H=ml(O.placement);return H===x||H==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(H=>H>0).reduce((H,ee)=>H+ee,0)]).sort((O,H)=>O[1]-H[1])[0])==null?void 0:z[0];B&&($=B);break}case"initialPlacement":$=o;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function Ik(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function Dk(n){return N4.some(e=>n[e]>=0)}const B4=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...i}=$a(n,e);switch(s){case"referenceHidden":{const r=await Op(e,{...i,elementContext:"reference"}),a=Ik(r,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Dk(a)}}}case"escaped":{const r=await Op(e,{...i,altBoundary:!0}),a=Ik(r,t.floating);return{data:{escapedOffsets:a,escaped:Dk(a)}}}default:return{}}}}};async function z4(n,e){const{placement:t,platform:s,elements:i}=n,r=await(s.isRTL==null?void 0:s.isRTL(i.floating)),a=Va(t),o=ff(t),l=ml(t)==="y",u=["left","top"].includes(a)?-1:1,d=r&&l?-1:1,f=$a(e,n);let{mainAxis:p,crossAxis:y,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof g=="number"&&(y=o==="end"?g*-1:g),l?{x:y*d,y:p*u}:{x:p*u,y:y*d}}const U4=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,s;const{x:i,y:r,placement:a,middlewareData:o}=e,l=await z4(e,n);return a===((t=o.offset)==null?void 0:t.placement)&&(s=o.arrow)!=null&&s.alignmentOffset?{}:{x:i+l.x,y:r+l.y,data:{...l,placement:a}}}}},H4=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:s,placement:i}=e,{mainAxis:r=!0,crossAxis:a=!1,limiter:o={fn:w=>{let{x:v,y:x}=w;return{x:v,y:x}}},...l}=$a(n,e),u={x:t,y:s},d=await Op(e,l),f=ml(Va(i)),p=qA(f);let y=u[p],g=u[f];if(r){const w=p==="y"?"top":"left",v=p==="y"?"bottom":"right",x=y+d[w],_=y-d[v];y=n_(x,y,_)}if(a){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=g+d[w],_=g-d[v];g=n_(x,g,_)}const m=o.fn({...e,[p]:y,[f]:g});return{...m,data:{x:m.x-t,y:m.y-s,enabled:{[p]:r,[f]:a}}}}}},W4=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:s,placement:i,rects:r,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=$a(n,e),d={x:t,y:s},f=ml(i),p=qA(f);let y=d[p],g=d[f];const m=$a(o,e),w=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const _=p==="y"?"height":"width",S=r.reference[p]-r.floating[_]+w.mainAxis,E=r.reference[p]+r.reference[_]-w.mainAxis;y<S?y=S:y>E&&(y=E)}if(u){var v,x;const _=p==="y"?"width":"height",S=["top","left"].includes(Va(i)),E=r.reference[f]-r.floating[_]+(S&&((v=a.offset)==null?void 0:v[f])||0)+(S?0:w.crossAxis),P=r.reference[f]+r.reference[_]+(S?0:((x=a.offset)==null?void 0:x[f])||0)-(S?w.crossAxis:0);g<E?g=E:g>P&&(g=P)}return{[p]:y,[f]:g}}}},q4=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,s;const{placement:i,rects:r,platform:a,elements:o}=e,{apply:l=()=>{},...u}=$a(n,e),d=await Op(e,u),f=Va(i),p=ff(i),y=ml(i)==="y",{width:g,height:m}=r.floating;let w,v;f==="top"||f==="bottom"?(w=f,v=p===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(v=f,w=p==="end"?"top":"bottom");const x=m-d.top-d.bottom,_=g-d.left-d.right,S=pl(m-d[w],x),E=pl(g-d[v],_),P=!e.middlewareData.shift;let T=S,N=E;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(N=_),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(T=x),P&&!p){const D=$s(d.left,0),j=$s(d.right,0),L=$s(d.top,0),z=$s(d.bottom,0);y?N=g-2*(D!==0||j!==0?D+j:$s(d.left,d.right)):T=m-2*(L!==0||z!==0?L+z:$s(d.top,d.bottom))}await l({...e,availableWidth:N,availableHeight:T});const I=await a.getDimensions(o.floating);return g!==I.width||m!==I.height?{reset:{rects:!0}}:{}}}};function pw(){return typeof window<"u"}function pf(n){return jR(n)?(n.nodeName||"").toLowerCase():"#document"}function Us(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Or(n){var e;return(e=(jR(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function jR(n){return pw()?n instanceof Node||n instanceof Us(n).Node:!1}function zi(n){return pw()?n instanceof Element||n instanceof Us(n).Element:!1}function Rr(n){return pw()?n instanceof HTMLElement||n instanceof Us(n).HTMLElement:!1}function Mk(n){return!pw()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Us(n).ShadowRoot}function Ug(n){const{overflow:e,overflowX:t,overflowY:s,display:i}=Ui(n);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!["inline","contents"].includes(i)}function G4(n){return["table","td","th"].includes(pf(n))}function mw(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function XA(n){const e=YA(),t=zi(n)?Ui(n):n;return["transform","translate","scale","rotate","perspective"].some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(t.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(t.contain||"").includes(s))}function K4(n){let e=gl(n);for(;Rr(e)&&!nf(e);){if(XA(e))return e;if(mw(e))return null;e=gl(e)}return null}function YA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function nf(n){return["html","body","#document"].includes(pf(n))}function Ui(n){return Us(n).getComputedStyle(n)}function gw(n){return zi(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function gl(n){if(pf(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Mk(n)&&n.host||Or(n);return Mk(e)?e.host:e}function LR(n){const e=gl(n);return nf(e)?n.ownerDocument?n.ownerDocument.body:n.body:Rr(e)&&Ug(e)?e:LR(e)}function Fp(n,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=LR(n),r=i===((s=n.ownerDocument)==null?void 0:s.body),a=Us(i);if(r){const o=i_(a);return e.concat(a,a.visualViewport||[],Ug(i)?i:[],o&&t?Fp(o):[])}return e.concat(i,Fp(i,[],t))}function i_(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function OR(n){const e=Ui(n);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const i=Rr(n),r=i?n.offsetWidth:t,a=i?n.offsetHeight:s,o=nx(t)!==r||nx(s)!==a;return o&&(t=r,s=a),{width:t,height:s,$:o}}function QA(n){return zi(n)?n:n.contextElement}function Ad(n){const e=QA(n);if(!Rr(e))return Pr(1);const t=e.getBoundingClientRect(),{width:s,height:i,$:r}=OR(e);let a=(r?nx(t.width):t.width)/s,o=(r?nx(t.height):t.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const X4=Pr(0);function FR(n){const e=Us(n);return!YA()||!e.visualViewport?X4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Y4(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Us(n)?!1:e}function wu(n,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),r=QA(n);let a=Pr(1);e&&(s?zi(s)&&(a=Ad(s)):a=Ad(n));const o=Y4(r,t,s)?FR(r):Pr(0);let l=(i.left+o.x)/a.x,u=(i.top+o.y)/a.y,d=i.width/a.x,f=i.height/a.y;if(r){const p=Us(r),y=s&&zi(s)?Us(s):s;let g=p,m=i_(g);for(;m&&s&&y!==g;){const w=Ad(m),v=m.getBoundingClientRect(),x=Ui(m),_=v.left+(m.clientLeft+parseFloat(x.paddingLeft))*w.x,S=v.top+(m.clientTop+parseFloat(x.paddingTop))*w.y;l*=w.x,u*=w.y,d*=w.x,f*=w.y,l+=_,u+=S,g=Us(m),m=i_(g)}}return ix({width:d,height:f,x:l,y:u})}function ZA(n,e){const t=gw(n).scrollLeft;return e?e.left+t:wu(Or(n)).left+t}function $R(n,e,t){t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=s.left+e.scrollLeft-(t?0:ZA(n,s)),r=s.top+e.scrollTop;return{x:i,y:r}}function Q4(n){let{elements:e,rect:t,offsetParent:s,strategy:i}=n;const r=i==="fixed",a=Or(s),o=e?mw(e.floating):!1;if(s===a||o&&r)return t;let l={scrollLeft:0,scrollTop:0},u=Pr(1);const d=Pr(0),f=Rr(s);if((f||!f&&!r)&&((pf(s)!=="body"||Ug(a))&&(l=gw(s)),Rr(s))){const y=wu(s);u=Ad(s),d.x=y.x+s.clientLeft,d.y=y.y+s.clientTop}const p=a&&!f&&!r?$R(a,l,!0):Pr(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+d.x+p.x,y:t.y*u.y-l.scrollTop*u.y+d.y+p.y}}function Z4(n){return Array.from(n.getClientRects())}function J4(n){const e=Or(n),t=gw(n),s=n.ownerDocument.body,i=$s(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),r=$s(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let a=-t.scrollLeft+ZA(n);const o=-t.scrollTop;return Ui(s).direction==="rtl"&&(a+=$s(e.clientWidth,s.clientWidth)-i),{width:i,height:r,x:a,y:o}}function eV(n,e){const t=Us(n),s=Or(n),i=t.visualViewport;let r=s.clientWidth,a=s.clientHeight,o=0,l=0;if(i){r=i.width,a=i.height;const u=YA();(!u||u&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:r,height:a,x:o,y:l}}function tV(n,e){const t=wu(n,!0,e==="fixed"),s=t.top+n.clientTop,i=t.left+n.clientLeft,r=Rr(n)?Ad(n):Pr(1),a=n.clientWidth*r.x,o=n.clientHeight*r.y,l=i*r.x,u=s*r.y;return{width:a,height:o,x:l,y:u}}function jk(n,e,t){let s;if(e==="viewport")s=eV(n,t);else if(e==="document")s=J4(Or(n));else if(zi(e))s=tV(e,t);else{const i=FR(n);s={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return ix(s)}function VR(n,e){const t=gl(n);return t===e||!zi(t)||nf(t)?!1:Ui(t).position==="fixed"||VR(t,e)}function nV(n,e){const t=e.get(n);if(t)return t;let s=Fp(n,[],!1).filter(o=>zi(o)&&pf(o)!=="body"),i=null;const r=Ui(n).position==="fixed";let a=r?gl(n):n;for(;zi(a)&&!nf(a);){const o=Ui(a),l=XA(a);!l&&o.position==="fixed"&&(i=null),(r?!l&&!i:!l&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Ug(a)&&!l&&VR(n,a))?s=s.filter(d=>d!==a):i=o,a=gl(a)}return e.set(n,s),s}function sV(n){let{element:e,boundary:t,rootBoundary:s,strategy:i}=n;const a=[...t==="clippingAncestors"?mw(e)?[]:nV(e,this._c):[].concat(t),s],o=a[0],l=a.reduce((u,d)=>{const f=jk(e,d,i);return u.top=$s(f.top,u.top),u.right=pl(f.right,u.right),u.bottom=pl(f.bottom,u.bottom),u.left=$s(f.left,u.left),u},jk(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function iV(n){const{width:e,height:t}=OR(n);return{width:e,height:t}}function rV(n,e,t){const s=Rr(e),i=Or(e),r=t==="fixed",a=wu(n,!0,r,e);let o={scrollLeft:0,scrollTop:0};const l=Pr(0);if(s||!s&&!r)if((pf(e)!=="body"||Ug(i))&&(o=gw(e)),s){const p=wu(e,!0,r,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&(l.x=ZA(i));const u=i&&!s&&!r?$R(i,o):Pr(0),d=a.left+o.scrollLeft-l.x-u.x,f=a.top+o.scrollTop-l.y-u.y;return{x:d,y:f,width:a.width,height:a.height}}function wb(n){return Ui(n).position==="static"}function Lk(n,e){if(!Rr(n)||Ui(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Or(n)===t&&(t=t.ownerDocument.body),t}function BR(n,e){const t=Us(n);if(mw(n))return t;if(!Rr(n)){let i=gl(n);for(;i&&!nf(i);){if(zi(i)&&!wb(i))return i;i=gl(i)}return t}let s=Lk(n,e);for(;s&&G4(s)&&wb(s);)s=Lk(s,e);return s&&nf(s)&&wb(s)&&!XA(s)?t:s||K4(n)||t}const aV=async function(n){const e=this.getOffsetParent||BR,t=this.getDimensions,s=await t(n.floating);return{reference:rV(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function oV(n){return Ui(n).direction==="rtl"}const lV={convertOffsetParentRelativeRectToViewportRelativeRect:Q4,getDocumentElement:Or,getClippingRect:sV,getOffsetParent:BR,getElementRects:aV,getClientRects:Z4,getDimensions:iV,getScale:Ad,isElement:zi,isRTL:oV};function zR(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function cV(n,e){let t=null,s;const i=Or(n);function r(){var o;clearTimeout(s),(o=t)==null||o.disconnect(),t=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),r();const u=n.getBoundingClientRect(),{left:d,top:f,width:p,height:y}=u;if(o||e(),!p||!y)return;const g=by(f),m=by(i.clientWidth-(d+p)),w=by(i.clientHeight-(f+y)),v=by(d),_={rootMargin:-g+"px "+-m+"px "+-w+"px "+-v+"px",threshold:$s(0,pl(1,l))||1};let S=!0;function E(P){const T=P[0].intersectionRatio;if(T!==l){if(!S)return a();T?a(!1,T):s=setTimeout(()=>{a(!1,1e-7)},1e3)}T===1&&!zR(u,n.getBoundingClientRect())&&a(),S=!1}try{t=new IntersectionObserver(E,{..._,root:i.ownerDocument})}catch{t=new IntersectionObserver(E,_)}t.observe(n)}return a(!0),r}function uV(n,e,t,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=s,u=QA(n),d=i||r?[...u?Fp(u):[],...Fp(e)]:[];d.forEach(v=>{i&&v.addEventListener("scroll",t,{passive:!0}),r&&v.addEventListener("resize",t)});const f=u&&o?cV(u,t):null;let p=-1,y=null;a&&(y=new ResizeObserver(v=>{let[x]=v;x&&x.target===u&&y&&(y.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var _;(_=y)==null||_.observe(e)})),t()}),u&&!l&&y.observe(u),y.observe(e));let g,m=l?wu(n):null;l&&w();function w(){const v=wu(n);m&&!zR(m,v)&&t(),m=v,g=requestAnimationFrame(w)}return t(),()=>{var v;d.forEach(x=>{i&&x.removeEventListener("scroll",t),r&&x.removeEventListener("resize",t)}),f==null||f(),(v=y)==null||v.disconnect(),y=null,l&&cancelAnimationFrame(g)}}const dV=U4,hV=H4,fV=V4,pV=q4,mV=B4,Ok=$4,gV=W4,yV=(n,e,t)=>{const s=new Map,i={platform:lV,...t},r={...i.platform,_c:s};return F4(n,e,{...i,platform:r})};var Ky=typeof document<"u"?C.useLayoutEffect:C.useEffect;function rx(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,s,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!rx(n[s],e[s]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,i[s]))return!1;for(s=t;s--!==0;){const r=i[s];if(!(r==="_owner"&&n.$$typeof)&&!rx(n[r],e[r]))return!1}return!0}return n!==n&&e!==e}function UR(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Fk(n,e){const t=UR(n);return Math.round(e*t)/t}function bb(n){const e=C.useRef(n);return Ky(()=>{e.current=n}),e}function vV(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:i,elements:{reference:r,floating:a}={},transform:o=!0,whileElementsMounted:l,open:u}=n,[d,f]=C.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,y]=C.useState(s);rx(p,s)||y(s);const[g,m]=C.useState(null),[w,v]=C.useState(null),x=C.useCallback(O=>{O!==P.current&&(P.current=O,m(O))},[]),_=C.useCallback(O=>{O!==T.current&&(T.current=O,v(O))},[]),S=r||g,E=a||w,P=C.useRef(null),T=C.useRef(null),N=C.useRef(d),I=l!=null,D=bb(l),j=bb(i),L=bb(u),z=C.useCallback(()=>{if(!P.current||!T.current)return;const O={placement:e,strategy:t,middleware:p};j.current&&(O.platform=j.current),yV(P.current,T.current,O).then(H=>{const ee={...H,isPositioned:L.current!==!1};F.current&&!rx(N.current,ee)&&(N.current=ee,Iu.flushSync(()=>{f(ee)}))})},[p,e,t,j,L]);Ky(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[u]);const F=C.useRef(!1);Ky(()=>(F.current=!0,()=>{F.current=!1}),[]),Ky(()=>{if(S&&(P.current=S),E&&(T.current=E),S&&E){if(D.current)return D.current(S,E,z);z()}},[S,E,z,D,I]);const J=C.useMemo(()=>({reference:P,floating:T,setReference:x,setFloating:_}),[x,_]),$=C.useMemo(()=>({reference:S,floating:E}),[S,E]),B=C.useMemo(()=>{const O={position:t,left:0,top:0};if(!$.floating)return O;const H=Fk($.floating,d.x),ee=Fk($.floating,d.y);return o?{...O,transform:"translate("+H+"px, "+ee+"px)",...UR($.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:H,top:ee}},[t,o,$.floating,d.x,d.y]);return C.useMemo(()=>({...d,update:z,refs:J,elements:$,floatingStyles:B}),[d,z,J,$,B])}const xV=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:s,padding:i}=typeof n=="function"?n(t):n;return s&&e(s)?s.current!=null?Ok({element:s.current,padding:i}).fn(t):{}:s?Ok({element:s,padding:i}).fn(t):{}}}},wV=(n,e)=>({...dV(n),options:[n,e]}),bV=(n,e)=>({...hV(n),options:[n,e]}),_V=(n,e)=>({...gV(n),options:[n,e]}),SV=(n,e)=>({...fV(n),options:[n,e]}),AV=(n,e)=>({...pV(n),options:[n,e]}),CV=(n,e)=>({...mV(n),options:[n,e]}),kV=(n,e)=>({...xV(n),options:[n,e]});var EV="Arrow",HR=C.forwardRef((n,e)=>{const{children:t,width:s=10,height:i=5,...r}=n;return h.jsx(be.svg,{...r,ref:e,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});HR.displayName=EV;var TV=HR;function WR(n){const[e,t]=C.useState(void 0);return Mn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const r=i[0];let a,o;if("borderBoxSize"in r){const l=r.borderBoxSize,u=Array.isArray(l)?l[0]:l;a=u.inlineSize,o=u.blockSize}else a=n.offsetWidth,o=n.offsetHeight;t({width:a,height:o})});return s.observe(n,{box:"border-box"}),()=>s.unobserve(n)}else t(void 0)},[n]),e}var JA="Popper",[qR,yw]=Lr(JA),[PV,GR]=qR(JA),KR=n=>{const{__scopePopper:e,children:t}=n,[s,i]=C.useState(null);return h.jsx(PV,{scope:e,anchor:s,onAnchorChange:i,children:t})};KR.displayName=JA;var XR="PopperAnchor",YR=C.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:s,...i}=n,r=GR(XR,t),a=C.useRef(null),o=rt(e,a);return C.useEffect(()=>{r.onAnchorChange((s==null?void 0:s.current)||a.current)}),s?null:h.jsx(be.div,{...i,ref:o})});YR.displayName=XR;var e1="PopperContent",[NV,RV]=qR(e1),QR=C.forwardRef((n,e)=>{var Q,Ve,Ct,We,Ie,Me;const{__scopePopper:t,side:s="bottom",sideOffset:i=0,align:r="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:y="optimized",onPlaced:g,...m}=n,w=GR(e1,t),[v,x]=C.useState(null),_=rt(e,Zt=>x(Zt)),[S,E]=C.useState(null),P=WR(S),T=(P==null?void 0:P.width)??0,N=(P==null?void 0:P.height)??0,I=s+(r!=="center"?"-"+r:""),D=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},j=Array.isArray(u)?u:[u],L=j.length>0,z={padding:D,boundary:j.filter(DV),altBoundary:L},{refs:F,floatingStyles:J,placement:$,isPositioned:B,middlewareData:O}=vV({strategy:"fixed",placement:I,whileElementsMounted:(...Zt)=>uV(...Zt,{animationFrame:y==="always"}),elements:{reference:w.anchor},middleware:[wV({mainAxis:i+N,alignmentAxis:a}),l&&bV({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?_V():void 0,...z}),l&&SV({...z}),AV({...z,apply:({elements:Zt,rects:Ln,availableWidth:Dl,availableHeight:Ha})=>{const{width:Wa,height:jw}=Ln.reference,Ou=Zt.floating.style;Ou.setProperty("--radix-popper-available-width",`${Dl}px`),Ou.setProperty("--radix-popper-available-height",`${Ha}px`),Ou.setProperty("--radix-popper-anchor-width",`${Wa}px`),Ou.setProperty("--radix-popper-anchor-height",`${jw}px`)}}),S&&kV({element:S,padding:o}),MV({arrowWidth:T,arrowHeight:N}),p&&CV({strategy:"referenceHidden",...z})]}),[H,ee]=eI($),de=xs(g);Mn(()=>{B&&(de==null||de())},[B,de]);const me=(Q=O.arrow)==null?void 0:Q.x,Ce=(Ve=O.arrow)==null?void 0:Ve.y,Je=((Ct=O.arrow)==null?void 0:Ct.centerOffset)!==0,[At,at]=C.useState();return Mn(()=>{v&&at(window.getComputedStyle(v).zIndex)},[v]),h.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:B?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:At,"--radix-popper-transform-origin":[(We=O.transformOrigin)==null?void 0:We.x,(Ie=O.transformOrigin)==null?void 0:Ie.y].join(" "),...((Me=O.hide)==null?void 0:Me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:h.jsx(NV,{scope:t,placedSide:H,onArrowChange:E,arrowX:me,arrowY:Ce,shouldHideArrow:Je,children:h.jsx(be.div,{"data-side":H,"data-align":ee,...m,ref:_,style:{...m.style,animation:B?void 0:"none"}})})})});QR.displayName=e1;var ZR="PopperArrow",IV={top:"bottom",right:"left",bottom:"top",left:"right"},JR=C.forwardRef(function(e,t){const{__scopePopper:s,...i}=e,r=RV(ZR,s),a=IV[r.placedSide];return h.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:h.jsx(TV,{...i,ref:t,style:{...i.style,display:"block"}})})});JR.displayName=ZR;function DV(n){return n!==null}var MV=n=>({name:"transformOrigin",options:n,fn(e){var w,v,x;const{placement:t,rects:s,middlewareData:i}=e,a=((w=i.arrow)==null?void 0:w.centerOffset)!==0,o=a?0:n.arrowWidth,l=a?0:n.arrowHeight,[u,d]=eI(t),f={start:"0%",center:"50%",end:"100%"}[d],p=(((v=i.arrow)==null?void 0:v.x)??0)+o/2,y=(((x=i.arrow)==null?void 0:x.y)??0)+l/2;let g="",m="";return u==="bottom"?(g=a?f:`${p}px`,m=`${-l}px`):u==="top"?(g=a?f:`${p}px`,m=`${s.floating.height+l}px`):u==="right"?(g=`${-l}px`,m=a?f:`${y}px`):u==="left"&&(g=`${s.floating.width+l}px`,m=a?f:`${y}px`),{data:{x:g,y:m}}}});function eI(n){const[e,t="center"]=n.split("-");return[e,t]}var jV=KR,tI=YR,nI=QR,sI=JR,[vw,z8]=Lr("Tooltip",[yw]),t1=yw(),iI="TooltipProvider",LV=700,$k="tooltip.open",[OV,rI]=vw(iI),aI=n=>{const{__scopeTooltip:e,delayDuration:t=LV,skipDelayDuration:s=300,disableHoverableContent:i=!1,children:r}=n,a=C.useRef(!0),o=C.useRef(!1),l=C.useRef(0);return C.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),h.jsx(OV,{scope:e,isOpenDelayedRef:a,delayDuration:t,onOpen:C.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:C.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,s)},[s]),isPointerInTransitRef:o,onPointerInTransitChange:C.useCallback(u=>{o.current=u},[]),disableHoverableContent:i,children:r})};aI.displayName=iI;var oI="Tooltip",[U8,xw]=vw(oI),r_="TooltipTrigger",FV=C.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,i=xw(r_,t),r=rI(r_,t),a=t1(t),o=C.useRef(null),l=rt(e,o,i.onTriggerChange),u=C.useRef(!1),d=C.useRef(!1),f=C.useCallback(()=>u.current=!1,[]);return C.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),h.jsx(tI,{asChild:!0,...a,children:h.jsx(be.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...s,ref:l,onPointerMove:fe(n.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!r.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:fe(n.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:fe(n.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:fe(n.onFocus,()=>{u.current||i.onOpen()}),onBlur:fe(n.onBlur,i.onClose),onClick:fe(n.onClick,i.onClose)})})});FV.displayName=r_;var $V="TooltipPortal",[H8,VV]=vw($V,{forceMount:void 0}),sf="TooltipContent",lI=C.forwardRef((n,e)=>{const t=VV(sf,n.__scopeTooltip),{forceMount:s=t.forceMount,side:i="top",...r}=n,a=xw(sf,n.__scopeTooltip);return h.jsx(Nl,{present:s||a.open,children:a.disableHoverableContent?h.jsx(cI,{side:i,...r,ref:e}):h.jsx(BV,{side:i,...r,ref:e})})}),BV=C.forwardRef((n,e)=>{const t=xw(sf,n.__scopeTooltip),s=rI(sf,n.__scopeTooltip),i=C.useRef(null),r=rt(e,i),[a,o]=C.useState(null),{trigger:l,onClose:u}=t,d=i.current,{onPointerInTransitChange:f}=s,p=C.useCallback(()=>{o(null),f(!1)},[f]),y=C.useCallback((g,m)=>{const w=g.currentTarget,v={x:g.clientX,y:g.clientY},x=qV(v,w.getBoundingClientRect()),_=GV(v,x),S=KV(m.getBoundingClientRect()),E=YV([..._,...S]);o(E),f(!0)},[f]);return C.useEffect(()=>()=>p(),[p]),C.useEffect(()=>{if(l&&d){const g=w=>y(w,d),m=w=>y(w,l);return l.addEventListener("pointerleave",g),d.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",m)}}},[l,d,y,p]),C.useEffect(()=>{if(a){const g=m=>{const w=m.target,v={x:m.clientX,y:m.clientY},x=(l==null?void 0:l.contains(w))||(d==null?void 0:d.contains(w)),_=!XV(v,a);x?p():_&&(p(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,d,a,u,p]),h.jsx(cI,{...n,ref:r})}),[zV,UV]=vw(oI,{isInside:!1}),HV=U$("TooltipContent"),cI=C.forwardRef((n,e)=>{const{__scopeTooltip:t,children:s,"aria-label":i,onEscapeKeyDown:r,onPointerDownOutside:a,...o}=n,l=xw(sf,t),u=t1(t),{onClose:d}=l;return C.useEffect(()=>(document.addEventListener($k,d),()=>document.removeEventListener($k,d)),[d]),C.useEffect(()=>{if(l.trigger){const f=p=>{const y=p.target;y!=null&&y.contains(l.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,d]),h.jsx(Vg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:h.jsxs(nI,{"data-state":l.stateAttribute,...u,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(HV,{children:s}),h.jsx(zV,{scope:t,isInside:!0,children:h.jsx(c3,{id:l.contentId,role:"tooltip",children:i||s})})]})})});lI.displayName=sf;var uI="TooltipArrow",WV=C.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,i=t1(t);return UV(uI,t).isInside?null:h.jsx(sI,{...i,...s,ref:e})});WV.displayName=uI;function qV(n,e){const t=Math.abs(e.top-n.y),s=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),r=Math.abs(e.left-n.x);switch(Math.min(t,s,i,r)){case r:return"left";case i:return"right";case t:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function GV(n,e,t=5){const s=[];switch(e){case"top":s.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":s.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":s.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":s.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return s}function KV(n){const{top:e,right:t,bottom:s,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:s},{x:i,y:s}]}function XV(n,e){const{x:t,y:s}=n;let i=!1;for(let r=0,a=e.length-1;r<e.length;a=r++){const o=e[r].x,l=e[r].y,u=e[a].x,d=e[a].y;l>s!=d>s&&t<(u-o)*(s-l)/(d-l)+o&&(i=!i)}return i}function YV(n){const e=n.slice();return e.sort((t,s)=>t.x<s.x?-1:t.x>s.x?1:t.y<s.y?-1:t.y>s.y?1:0),QV(e)}function QV(n){if(n.length<=1)return n.slice();const e=[];for(let s=0;s<n.length;s++){const i=n[s];for(;e.length>=2;){const r=e[e.length-1],a=e[e.length-2];if((r.x-a.x)*(i.y-a.y)>=(r.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let s=n.length-1;s>=0;s--){const i=n[s];for(;t.length>=2;){const r=t[t.length-1],a=t[t.length-2];if((r.x-a.x)*(i.y-a.y)>=(r.y-a.y)*(i.x-a.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var ZV=aI,dI=lI;const JV=ZV,eB=C.forwardRef(({className:n,sideOffset:e=4,...t},s)=>h.jsx(dI,{ref:s,sideOffset:e,className:Te("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...t}));eB.displayName=dI.displayName;const Le=C.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Te("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Le.displayName="Card";const ds=C.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Te("flex flex-col space-y-1.5 p-6",n),...e}));ds.displayName="CardHeader";const hs=C.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Te("text-2xl font-semibold leading-none tracking-tight",n),...e}));hs.displayName="CardTitle";const Vl=C.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Te("text-sm text-muted-foreground",n),...e}));Vl.displayName="CardDescription";const Oe=C.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Te("p-6 pt-0",n),...e}));Oe.displayName="CardContent";const tB=C.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Te("flex items-center p-6 pt-0",n),...e}));tB.displayName="CardFooter";const nB=zg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ve=C.forwardRef(({className:n,variant:e,size:t,asChild:s=!1,...i},r)=>{const a=s?B$:"button";return h.jsx(a,{className:Te(nB({variant:e,size:t,className:n})),ref:r,...i})});ve.displayName="Button";const rs=C.forwardRef(({className:n,type:e,...t},s)=>h.jsx("input",{type:e,className:Te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:s,...t}));rs.displayName="Input";var sB="Label",hI=C.forwardRef((n,e)=>h.jsx(be.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));hI.displayName=sB;var fI=hI;const iB=zg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),en=C.forwardRef(({className:n,...e},t)=>h.jsx(fI,{ref:t,className:Te(iB(),n),...e}));en.displayName=fI.displayName;var rB=C.createContext(void 0);function n1(n){const e=C.useContext(rB);return n||e||"ltr"}var _b="rovingFocusGroup.onEntryFocus",aB={bubbles:!1,cancelable:!0},ww="RovingFocusGroup",[a_,pI,oB]=BA(ww),[lB,mI]=Lr(ww,[oB]),[cB,uB]=lB(ww),gI=C.forwardRef((n,e)=>h.jsx(a_.Provider,{scope:n.__scopeRovingFocusGroup,children:h.jsx(a_.Slot,{scope:n.__scopeRovingFocusGroup,children:h.jsx(dB,{...n,ref:e})})}));gI.displayName=ww;var dB=C.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:i=!1,dir:r,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=n,p=C.useRef(null),y=rt(e,p),g=n1(r),[m=null,w]=vu({prop:a,defaultProp:o,onChange:l}),[v,x]=C.useState(!1),_=xs(u),S=pI(t),E=C.useRef(!1),[P,T]=C.useState(0);return C.useEffect(()=>{const N=p.current;if(N)return N.addEventListener(_b,_),()=>N.removeEventListener(_b,_)},[_]),h.jsx(cB,{scope:t,orientation:s,dir:g,loop:i,currentTabStopId:m,onItemFocus:C.useCallback(N=>w(N),[w]),onItemShiftTab:C.useCallback(()=>x(!0),[]),onFocusableItemAdd:C.useCallback(()=>T(N=>N+1),[]),onFocusableItemRemove:C.useCallback(()=>T(N=>N-1),[]),children:h.jsx(be.div,{tabIndex:v||P===0?-1:0,"data-orientation":s,...f,ref:y,style:{outline:"none",...n.style},onMouseDown:fe(n.onMouseDown,()=>{E.current=!0}),onFocus:fe(n.onFocus,N=>{const I=!E.current;if(N.target===N.currentTarget&&I&&!v){const D=new CustomEvent(_b,aB);if(N.currentTarget.dispatchEvent(D),!D.defaultPrevented){const j=S().filter($=>$.focusable),L=j.find($=>$.active),z=j.find($=>$.id===m),J=[L,z,...j].filter(Boolean).map($=>$.ref.current);xI(J,d)}}E.current=!1}),onBlur:fe(n.onBlur,()=>x(!1))})})}),yI="RovingFocusGroupItem",vI=C.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:i=!1,tabStopId:r,...a}=n,o=ul(),l=r||o,u=uB(yI,t),d=u.currentTabStopId===l,f=pI(t),{onFocusableItemAdd:p,onFocusableItemRemove:y}=u;return C.useEffect(()=>{if(s)return p(),()=>y()},[s,p,y]),h.jsx(a_.ItemSlot,{scope:t,id:l,focusable:s,active:i,children:h.jsx(be.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:fe(n.onMouseDown,g=>{s?u.onItemFocus(l):g.preventDefault()}),onFocus:fe(n.onFocus,()=>u.onItemFocus(l)),onKeyDown:fe(n.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const m=pB(g,u.orientation,u.dir);if(m!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let v=f().filter(x=>x.focusable).map(x=>x.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const x=v.indexOf(g.currentTarget);v=u.loop?mB(v,x+1):v.slice(x+1)}setTimeout(()=>xI(v))}})})})});vI.displayName=yI;var hB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fB(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function pB(n,e,t){const s=fB(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return hB[s]}function xI(n,e=!1){const t=document.activeElement;for(const s of n)if(s===t||(s.focus({preventScroll:e}),document.activeElement!==t))return}function mB(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var gB=gI,yB=vI,s1="Tabs",[vB,W8]=Lr(s1,[mI]),wI=mI(),[xB,i1]=vB(s1),bI=C.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,onValueChange:i,defaultValue:r,orientation:a="horizontal",dir:o,activationMode:l="automatic",...u}=n,d=n1(o),[f,p]=vu({prop:s,onChange:i,defaultProp:r});return h.jsx(xB,{scope:t,baseId:ul(),value:f,onValueChange:p,orientation:a,dir:d,activationMode:l,children:h.jsx(be.div,{dir:d,"data-orientation":a,...u,ref:e})})});bI.displayName=s1;var _I="TabsList",SI=C.forwardRef((n,e)=>{const{__scopeTabs:t,loop:s=!0,...i}=n,r=i1(_I,t),a=wI(t);return h.jsx(gB,{asChild:!0,...a,orientation:r.orientation,dir:r.dir,loop:s,children:h.jsx(be.div,{role:"tablist","aria-orientation":r.orientation,...i,ref:e})})});SI.displayName=_I;var AI="TabsTrigger",CI=C.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,disabled:i=!1,...r}=n,a=i1(AI,t),o=wI(t),l=TI(a.baseId,s),u=PI(a.baseId,s),d=s===a.value;return h.jsx(yB,{asChild:!0,...o,focusable:!i,active:d,children:h.jsx(be.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...r,ref:e,onMouseDown:fe(n.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?a.onValueChange(s):f.preventDefault()}),onKeyDown:fe(n.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(s)}),onFocus:fe(n.onFocus,()=>{const f=a.activationMode!=="manual";!d&&!i&&f&&a.onValueChange(s)})})})});CI.displayName=AI;var kI="TabsContent",EI=C.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,forceMount:i,children:r,...a}=n,o=i1(kI,t),l=TI(o.baseId,s),u=PI(o.baseId,s),d=s===o.value,f=C.useRef(d);return C.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),h.jsx(Nl,{present:i||d,children:({present:p})=>h.jsx(be.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:u,tabIndex:0,...a,ref:e,style:{...n.style,animationDuration:f.current?"0s":void 0},children:p&&r})})});EI.displayName=kI;function TI(n,e){return`${n}-trigger-${e}`}function PI(n,e){return`${n}-content-${e}`}var wB=bI,NI=SI,RI=CI,II=EI;const DI=wB,r1=C.forwardRef(({className:n,...e},t)=>h.jsx(NI,{ref:t,className:Te("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));r1.displayName=NI.displayName;const el=C.forwardRef(({className:n,...e},t)=>h.jsx(RI,{ref:t,className:Te("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));el.displayName=RI.displayName;const tl=C.forwardRef(({className:n,...e},t)=>h.jsx(II,{ref:t,className:Te("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));tl.displayName=II.displayName;class bB{constructor(){this.dbName="cortex-training-db",this.version=1,this.db=null}async init(){return new Promise((e,t)=>{const s=indexedDB.open(this.dbName,this.version);s.onerror=()=>t(s.error),s.onsuccess=()=>{this.db=s.result,e()},s.onupgradeneeded=i=>{const r=i.target.result;r.objectStoreNames.contains("threatReports")||r.createObjectStore("threatReports",{keyPath:"id"}),r.objectStoreNames.contains("useCases")||r.createObjectStore("useCases",{keyPath:"id"}).createIndex("threatReportId","threatReportId"),r.objectStoreNames.contains("trainingPaths")||r.createObjectStore("trainingPaths",{keyPath:"id"}).createIndex("useCaseId","useCaseId"),r.objectStoreNames.contains("validationItems")||r.createObjectStore("validationItems",{keyPath:"id"}),r.objectStoreNames.contains("progressTracking")||r.createObjectStore("progressTracking",{keyPath:"id"}).createIndex("trainingPathId","trainingPathId")}})}async getStore(e,t="readonly"){return this.db||await this.init(),this.db.transaction([e],t).objectStore(e)}async saveThreatReport(e){const t=await this.getStore("threatReports","readwrite");await new Promise((s,i)=>{const r=t.put(e);r.onsuccess=()=>s(void 0),r.onerror=()=>i(r.error)})}async getThreatReports(){const e=await this.getStore("threatReports");return new Promise((t,s)=>{const i=e.getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})}async saveUseCase(e){const t=await this.getStore("useCases","readwrite");await new Promise((s,i)=>{const r=t.put(e);r.onsuccess=()=>s(void 0),r.onerror=()=>i(r.error)})}async getUseCases(){const e=await this.getStore("useCases");return new Promise((t,s)=>{const i=e.getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})}async getUseCasesByThreatReport(e){const s=(await this.getStore("useCases")).index("threatReportId");return new Promise((i,r)=>{const a=s.getAll(e);a.onsuccess=()=>i(a.result),a.onerror=()=>r(a.error)})}async saveTrainingPath(e){const t=await this.getStore("trainingPaths","readwrite");await new Promise((s,i)=>{const r=t.put(e);r.onsuccess=()=>s(void 0),r.onerror=()=>i(r.error)})}async getTrainingPaths(){const e=await this.getStore("trainingPaths");return new Promise((t,s)=>{const i=e.getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})}async getTrainingPathByUseCase(e){const s=(await this.getStore("trainingPaths")).index("useCaseId");return new Promise((i,r)=>{const a=s.get(e);a.onsuccess=()=>i(a.result||null),a.onerror=()=>r(a.error)})}async saveValidationItem(e){const t=await this.getStore("validationItems","readwrite");await new Promise((s,i)=>{const r=t.put(e);r.onsuccess=()=>s(void 0),r.onerror=()=>i(r.error)})}async getValidationItems(){const e=await this.getStore("validationItems");return new Promise((t,s)=>{const i=e.getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})}async saveProgress(e){const t=await this.getStore("progressTracking","readwrite");await new Promise((s,i)=>{const r=t.put(e);r.onsuccess=()=>s(void 0),r.onerror=()=>i(r.error)})}async getProgressByTrainingPath(e){const s=(await this.getStore("progressTracking")).index("trainingPathId");return new Promise((i,r)=>{const a=s.getAll(e);a.onsuccess=()=>i(a.result),a.onerror=()=>r(a.error)})}async exportAllData(){const[e,t,s,i,r]=await Promise.all([this.getThreatReports(),this.getUseCases(),this.getTrainingPaths(),this.getValidationItems(),this.getAllProgress()]);return{threatReports:e,useCases:t,trainingPaths:s,validationItems:i,progressTracking:r,exportedAt:new Date,version:"1.0"}}async getAllProgress(){const e=await this.getStore("progressTracking");return new Promise((t,s)=>{const i=e.getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})}async clearAllData(){const e=["threatReports","useCases","trainingPaths","validationItems","progressTracking"];for(const t of e){const s=await this.getStore(t,"readwrite");await new Promise((i,r)=>{const a=s.clear();a.onsuccess=()=>i(void 0),a.onerror=()=>r(a.error)})}}}const fi=new bB;function _B(){return $g({queryKey:["threatReports"],queryFn:()=>fi.getThreatReports(),staleTime:1e3*60*5})}function SB(){const n=Pl();return Du({mutationFn:e=>fi.saveThreatReport(e),onSuccess:()=>{n.invalidateQueries({queryKey:["threatReports"]})}})}function AB(){return $g({queryKey:["useCases"],queryFn:()=>fi.getUseCases(),staleTime:1e3*60*5})}function MI(){const n=Pl();return Du({mutationFn:e=>fi.saveUseCase(e),onSuccess:()=>{n.invalidateQueries({queryKey:["useCases"]})}})}function a1(){return $g({queryKey:["trainingPaths"],queryFn:()=>fi.getTrainingPaths(),staleTime:1e3*60*5})}function jI(){const n=Pl();return Du({mutationFn:e=>fi.saveTrainingPath(e),onSuccess:()=>{n.invalidateQueries({queryKey:["trainingPaths"]})}})}function CB(){return $g({queryKey:["validationItems"],queryFn:()=>fi.getValidationItems(),staleTime:1e3*60*2})}function LI(){const n=Pl();return Du({mutationFn:e=>fi.saveValidationItem(e),onSuccess:()=>{n.invalidateQueries({queryKey:["validationItems"]})}})}function kB(n){return $g({queryKey:["progressTracking",n],queryFn:()=>n?fi.getProgressByTrainingPath(n):Promise.resolve([]),enabled:!!n,staleTime:1e3*60*2})}function EB(){const n=Pl();return Du({mutationFn:e=>fi.saveProgress(e),onSuccess:(e,t)=>{n.invalidateQueries({queryKey:["progressTracking",t.trainingPathId]})}})}function TB(){return Du({mutationFn:()=>fi.exportAllData()})}function PB(){const n=Pl();return Du({mutationFn:()=>fi.clearAllData(),onSuccess:()=>{n.invalidateQueries()}})}async function NB(n){var e,t,s,i,r,a,o,l;try{const u=`https://api.allorigins.win/get?url=${encodeURIComponent(n)}`,d=await fetch(u);if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const p=(await d.json()).contents,g=new DOMParser().parseFromString(p,"text/html"),m=((e=g.querySelector("title"))==null?void 0:e.textContent)||((t=g.querySelector("h1"))==null?void 0:t.textContent)||"Untitled Document";let w="";const v=["article",'[role="main"]',".content",".main-content",".post-content",".entry-content","main",".article-body"];for(const P of v){const T=g.querySelector(P);if(T){w=Vk(T);break}}if(!w){const P=g.querySelector("body");P&&(w=Vk(P))}const x=((s=g.querySelector('meta[name="author"]'))==null?void 0:s.getAttribute("content"))||((i=g.querySelector(".author"))==null?void 0:i.textContent)||void 0,_=((r=g.querySelector('meta[property="article:published_time"]'))==null?void 0:r.getAttribute("content"))||((a=g.querySelector('meta[name="publish-date"]'))==null?void 0:a.getAttribute("content"))||((o=g.querySelector("time"))==null?void 0:o.getAttribute("datetime"))||void 0,S=(l=g.querySelector('meta[name="keywords"]'))==null?void 0:l.getAttribute("content"),E=S?S.split(",").map(P=>P.trim()):void 0;return{title:m.trim(),content:w.trim(),url:n,author:x,publishedDate:_,tags:E}}catch(u){throw console.error("Error scraping URL:",u),new Error(`Failed to scrape URL: ${u instanceof Error?u.message:"Unknown error"}`)}}function Vk(n){n.querySelectorAll("script, style, nav, footer, header, .navigation, .sidebar").forEach(s=>s.remove());let t=n.textContent||"";return t=t.replace(/\s+/g," ").trim(),t=t.replace(/\b(Home|About|Contact|Privacy|Terms|Navigation|Menu|Search)\b/gi,""),t}const Hn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),o_=[.001,0,0,.001,0,0],Sb=1.35,Ls={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},so={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},OI="pdfjs_internal_editor_",xe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Fe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},RB={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Cn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Xy={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Lt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Hu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},bw={ERRORS:0,WARNINGS:1,INFOS:5},ax={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},_y={moveTo:0,lineTo:1,curveTo:2,closePath:3},IB={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let _w=bw.WARNINGS;function DB(n){Number.isInteger(n)&&(_w=n)}function MB(){return _w}function Sw(n){_w>=bw.INFOS&&console.log(`Info: ${n}`)}function we(n){_w>=bw.WARNINGS&&console.log(`Warning: ${n}`)}function st(n){throw new Error(n)}function Vt(n,e){n||st(e)}function jB(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function FI(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=VB(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return jB(s)?s:null}function $I(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&FI(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function De(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const ju=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class Bk extends ju{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Ab extends ju{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class l_ extends ju{constructor(e){super(e,"InvalidPDFException")}}class ox extends ju{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class LB extends ju{constructor(e){super(e,"FormatError")}}class yl extends ju{constructor(e){super(e,"AbortException")}}function VI(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&st("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),a=n.subarray(i,r);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function Hg(n){typeof n!="string"&&st("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function OB(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function FB(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function $B(){try{return new Function(""),!0}catch{return!1}}class wn{static get isLittleEndian(){return De(this,"isLittleEndian",FB())}static get isEvalSupported(){return De(this,"isEvalSupported",$B())}static get isOffscreenCanvasSupported(){return De(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return De(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return De(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return De(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Cb=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Da,Yy,c_;class he{static makeHexColor(e,t,s){return`#${Cb[e]}${Cb[t]}${Cb[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,s=0){const i=e[s],r=e[s+1];e[s]=i*t[0]+r*t[2]+t[4],e[s+1]=i*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const i=t[0],r=t[1],a=t[2],o=t[3],l=t[4],u=t[5];for(let d=0;d<6;d+=2){const f=e[s+d],p=e[s+d+1];e[s+d]=f*i+p*a+l,e[s+d+1]=f*r+p*o+u}}static applyInverseTransform(e,t){const s=e[0],i=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-s*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,s){const i=t[0],r=t[1],a=t[2],o=t[3],l=t[4],u=t[5],d=e[0],f=e[1],p=e[2],y=e[3];let g=i*d+l,m=g,w=i*p+l,v=w,x=o*f+u,_=x,S=o*y+u,E=S;if(r!==0||a!==0){const P=r*d,T=r*p,N=a*f,I=a*y;g+=N,v+=N,w+=I,m+=I,x+=P,E+=P,S+=T,_+=T}s[0]=Math.min(s[0],g,w,m,v),s[1]=Math.min(s[1],x,S,_,E),s[2]=Math.max(s[2],g,w,m,v),s[3]=Math.max(s[3],x,S,_,E)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],i=e[1],r=e[2],a=e[3],o=s**2+i**2,l=s*r+i*a,u=r**2+a**2,d=(o+u)/2,f=Math.sqrt(d**2-(o*u-l**2));t[0]=Math.sqrt(d+f||1),t[1]=Math.sqrt(d-f||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[s,r,i,a]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,i,r){r[0]=Math.min(r[0],e,s),r[1]=Math.min(r[1],t,i),r[2]=Math.max(r[2],e,s),r[3]=Math.max(r[3],t,i)}static bezierBoundingBox(e,t,s,i,r,a,o,l,u){u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,l),k(this,Da,c_).call(this,e,s,r,o,t,i,a,l,3*(-e+3*(s-r)+o),6*(e-2*s+r),3*(s-e),u),k(this,Da,c_).call(this,e,s,r,o,t,i,a,l,3*(-t+3*(i-a)+l),6*(t-2*i+a),3*(i-t),u)}}Da=new WeakSet,Yy=function(e,t,s,i,r,a,o,l,u,d){if(u<=0||u>=1)return;const f=1-u,p=u*u,y=p*u,g=f*(f*(f*e+3*u*t)+3*p*s)+y*i,m=f*(f*(f*r+3*u*a)+3*p*o)+y*l;d[0]=Math.min(d[0],g),d[1]=Math.min(d[1],m),d[2]=Math.max(d[2],g),d[3]=Math.max(d[3],m)},c_=function(e,t,s,i,r,a,o,l,u,d,f,p){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&k(this,Da,Yy).call(this,e,t,s,i,r,a,o,l,-f/d,p);return}const y=d**2-4*f*u;if(y<0)return;const g=Math.sqrt(y),m=2*u;k(this,Da,Yy).call(this,e,t,s,i,r,a,o,l,(-d+g)/m,p),k(this,Da,Yy).call(this,e,t,s,i,r,a,o,l,(-d-g)/m,p)},A(he,Da);function VB(n){return decodeURIComponent(escape(n))}let kb=null,zk=null;function BB(n){return kb||(kb=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,zk=new Map([["","t"]])),n.replaceAll(kb,(e,t,s)=>t?t.normalize("NFKC"):zk.get(s))}function BI(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),VI(n)}const o1="pdfjs_internal_id_";function zB(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,i,...r]=t;if(!n(s)&&!Number.isInteger(s)||!e(i))return!1;const a=r.length;let o=!0;switch(i.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const l of r)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function Wn(n,e,t){return Math.min(Math.max(n,e),t)}function zI(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(VI(n))}function UB(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Hg(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const Br="http://www.w3.org/2000/svg",Bl=class Bl{};q(Bl,"CSS",96),q(Bl,"PDF",72),q(Bl,"PDF_TO_CSS_UNITS",Bl.CSS/Bl.PDF);let vl=Bl;async function Wg(n,e="text"){if($f(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class qg{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:r=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=a,s*=t;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let d,f,p,y;switch(i%=360,i<0&&(i+=360),i){case 180:d=-1,f=0,p=0,y=1;break;case 90:d=0,f=1,p=1,y=0;break;case 270:d=0,f=-1,p=-1,y=0;break;case 0:d=1,f=0,p=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(p=-p,y=-y);let g,m,w,v;d===0?(g=Math.abs(u-e[1])*s+r,m=Math.abs(l-e[0])*s+a,w=(e[3]-e[1])*s,v=(e[2]-e[0])*s):(g=Math.abs(l-e[0])*s+r,m=Math.abs(u-e[1])*s+a,w=(e[2]-e[0])*s,v=(e[3]-e[1])*s),this.transform=[d*s,f*s,p*s,y*s,g-d*s*l-p*s*u,m-f*s*l-y*s*u],this.width=w,this.height=v}get rawDims(){const e=this.viewBox;return De(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new qg({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){const s=[e,t];return he.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];he.applyTransform(t,this.transform);const s=[e[2],e[3]];return he.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return he.applyInverseTransform(s,this.transform),s}}class l1 extends ju{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Aw(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function c1(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function HB(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function WB(n,e="document.pdf"){if(typeof n!="string")return e;if(Aw(n))return we('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const i=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},r=/\.pdf$/i,a=s.pathname.split("/").at(-1);if(r.test(a))return i(a);if(s.searchParams.size>0){const o=Array.from(s.searchParams.values()).reverse();for(const u of o)if(r.test(u))return i(u);const l=Array.from(s.searchParams.keys()).reverse();for(const u of l)if(r.test(u))return i(u)}if(s.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(l)return i(l[0])}return e}class Uk{constructor(){q(this,"started",Object.create(null));q(this,"times",[])}time(e){e in this.started&&we(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||we(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-i}ms
`);return e.join("")}}function $f(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Hi(n){n.preventDefault()}function Ot(n){n.preventDefault(),n.stopPropagation()}function qB(n){console.log("Deprecated API usage: "+n)}var am;class u1{static toDateObject(e){if(!e||typeof e!="string")return null;c(this,am)||b(this,am,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,am).exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,u==="-"?(a+=d,o+=f):u==="+"&&(a-=d,o-=f),new Date(Date.UTC(s,i,r,a,o,l))}}am=new WeakMap,A(u1,am);function GB(n,{scale:e=1,rotation:t=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new qg({viewBox:r,userUnit:1,scale:e,rotation:t})}function d1(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(we(`Not a valid color format: "${n}"`),[0,0,0])}function KB(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,d1(s))}e.remove()}function xt(n){const{a:e,b:t,c:s,d:i,e:r,f:a}=n.getTransform();return[e,t,s,i,r,a]}function Yi(n){const{a:e,b:t,c:s,d:i,e:r,f:a}=n.getTransform().invertSelf();return[e,t,s,i,r,a]}function bu(n,e,t=!1,s=!0){if(e instanceof qg){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:a}=n,o=wn.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${r}px`,d=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,f=o?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=d,a.height=f):(a.width=f,a.height=d)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Ir{constructor(){const{pixelRatio:e}=Ir;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,i,r=-1){let a=1/0,o=1/0,l=1/0;s=Ir.capPixels(s,r),s>0&&(a=Math.sqrt(s/(e*t))),i!==-1&&(o=i/e,l=i/t);const u=Math.min(a,o,l);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const u_=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var mo,ec,Qs,go,om,zd,lm,Px,UI,Xn,HI,WI,Vf,Qy;const Gr=class Gr{constructor(e){A(this,Xn);A(this,mo,null);A(this,ec,null);A(this,Qs);A(this,go,null);A(this,om,null);A(this,zd,null);b(this,Qs,e),c(Gr,lm)||b(Gr,lm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=b(this,mo,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,Qs)._uiManager._signal;e.addEventListener("contextmenu",Hi,{signal:t}),e.addEventListener("pointerdown",k(Gr,Px,UI),{signal:t});const s=b(this,go,document.createElement("div"));s.className="buttons",e.append(s);const i=c(this,Qs).toolbarPosition;if(i){const{style:r}=e,a=c(this,Qs)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return c(this,mo)}hide(){var e;c(this,mo).classList.add("hidden"),(e=c(this,ec))==null||e.hideDropdown()}show(){var e;c(this,mo).classList.remove("hidden"),(e=c(this,om))==null||e.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=c(this,Qs),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",c(Gr,lm)[e]),k(this,Xn,Vf).call(this,s),s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),c(this,go).append(s)}async addAltText(e){const t=await e.render();k(this,Xn,Vf).call(this,t),c(this,go).append(t,c(this,Xn,Qy)),b(this,om,e)}addColorPicker(e){b(this,ec,e);const t=e.renderButton();k(this,Xn,Vf).call(this,t),c(this,go).append(t,c(this,Xn,Qy))}async addEditSignatureButton(e){const t=b(this,zd,await e.renderEditButton(c(this,Qs)));k(this,Xn,Vf).call(this,t),c(this,go).append(t,c(this,Xn,Qy))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){c(this,zd)&&(c(this,zd).title=e)}remove(){var e;c(this,mo).remove(),(e=c(this,ec))==null||e.destroy(),b(this,ec,null)}};mo=new WeakMap,ec=new WeakMap,Qs=new WeakMap,go=new WeakMap,om=new WeakMap,zd=new WeakMap,lm=new WeakMap,Px=new WeakSet,UI=function(e){e.stopPropagation()},Xn=new WeakSet,HI=function(e){c(this,Qs)._focusEventsAllowed=!1,Ot(e)},WI=function(e){c(this,Qs)._focusEventsAllowed=!0,Ot(e)},Vf=function(e){const t=c(this,Qs)._uiManager._signal;e.addEventListener("focusin",k(this,Xn,HI).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",k(this,Xn,WI).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Hi,{signal:t})},Qy=function(){const e=document.createElement("div");return e.className="divider",e},A(Gr,Px),A(Gr,lm,null);let d_=Gr;var cm,tc,nc,Sl,qI,GI,KI;class XB{constructor(e){A(this,Sl);A(this,cm,null);A(this,tc,null);A(this,nc);b(this,nc,e)}show(e,t,s){const[i,r]=k(this,Sl,GI).call(this,t,s),{style:a}=c(this,tc)||b(this,tc,k(this,Sl,qI).call(this));e.append(c(this,tc)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,tc).remove()}}cm=new WeakMap,tc=new WeakMap,nc=new WeakMap,Sl=new WeakSet,qI=function(){const e=b(this,tc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Hi,{signal:c(this,nc)._signal});const t=b(this,cm,document.createElement("div"));return t.className="buttons",e.append(t),k(this,Sl,KI).call(this),e},GI=function(e,t){let s=0,i=0;for(const r of e){const a=r.y+r.height;if(a<s)continue;const o=r.x+(t?r.width:0);if(a>s){i=o,s=a;continue}t?o>i&&(i=o):o<i&&(i=o)}return[t?1-i:i,s]},KI=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=c(this,nc)._signal;e.addEventListener("contextmenu",Hi,{signal:s}),e.addEventListener("click",()=>{c(this,nc).highlightSelection("floating_button")},{signal:s}),c(this,cm).append(e)};function XI(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var Nx;class YB{constructor(){A(this,Nx,0)}get id(){return`${OI}${Jt(this,Nx)._++}`}}Nx=new WeakMap;var Ud,um,Pn,Hd,Zy;const F1=class F1{constructor(){A(this,Hd);A(this,Ud,BI());A(this,um,0);A(this,Pn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return De(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:s,size:i,type:r}=e;return k(this,Hd,Zy).call(this,`${t}_${s}_${i}_${r}`,e)}async getFromUrl(e){return k(this,Hd,Zy).call(this,e,e)}async getFromBlob(e,t){const s=await t;return k(this,Hd,Zy).call(this,e,s)}async getFromId(e){c(this,Pn)||b(this,Pn,new Map);const t=c(this,Pn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,Pn)||b(this,Pn,new Map);let s=c(this,Pn).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${c(this,Ud)}_${Jt(this,um)._++}`,refCounter:1,isSvg:!1},c(this,Pn).set(e,s),c(this,Pn).set(s.id,s),s}getSvgUrl(e){const t=c(this,Pn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;c(this,Pn)||b(this,Pn,new Map);const t=c(this,Pn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,Ud)}_`)}};Ud=new WeakMap,um=new WeakMap,Pn=new WeakMap,Hd=new WeakSet,Zy=async function(e,t){c(this,Pn)||b(this,Pn,new Map);let s=c(this,Pn).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${c(this,Ud)}_${Jt(this,um)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(s.url=t,i=await Wg(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=F1._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((u,d)=>{o.onload=()=>{s.bitmap=o,s.isSvg=!0,u()},a.onload=async()=>{const f=s.svgUrl=a.result;o.src=await r?`${f}#svgView(preserveAspectRatio(none))`:f},o.onerror=a.onerror=d});a.readAsDataURL(i),await l}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){we(i),s=null}return c(this,Pn).set(e,s),s&&c(this,Pn).set(s.id,s),s};let h_=F1;var Pt,yo,dm,vt;class QB{constructor(e=128){A(this,Pt,[]);A(this,yo,!1);A(this,dm);A(this,vt,-1);b(this,dm,e)}add({cmd:e,undo:t,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(i&&e(),c(this,yo))return;const l={cmd:e,undo:t,post:s,type:r};if(c(this,vt)===-1){c(this,Pt).length>0&&(c(this,Pt).length=0),b(this,vt,0),c(this,Pt).push(l);return}if(a&&c(this,Pt)[c(this,vt)].type===r){o&&(l.undo=c(this,Pt)[c(this,vt)].undo),c(this,Pt)[c(this,vt)]=l;return}const u=c(this,vt)+1;u===c(this,dm)?c(this,Pt).splice(0,1):(b(this,vt,u),u<c(this,Pt).length&&c(this,Pt).splice(u)),c(this,Pt).push(l)}undo(){if(c(this,vt)===-1)return;b(this,yo,!0);const{undo:e,post:t}=c(this,Pt)[c(this,vt)];e(),t==null||t(),b(this,yo,!1),b(this,vt,c(this,vt)-1)}redo(){if(c(this,vt)<c(this,Pt).length-1){b(this,vt,c(this,vt)+1),b(this,yo,!0);const{cmd:e,post:t}=c(this,Pt)[c(this,vt)];e(),t==null||t(),b(this,yo,!1)}}hasSomethingToUndo(){return c(this,vt)!==-1}hasSomethingToRedo(){return c(this,vt)<c(this,Pt).length-1}cleanType(e){if(c(this,vt)!==-1){for(let t=c(this,vt);t>=0;t--)if(c(this,Pt)[t].type!==e){c(this,Pt).splice(t+1,c(this,vt)-t),b(this,vt,t);return}c(this,Pt).length=0,b(this,vt,-1)}}destroy(){b(this,Pt,null)}}Pt=new WeakMap,yo=new WeakMap,dm=new WeakMap,vt=new WeakMap;var Rx,YI;class Gg{constructor(e){A(this,Rx);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=wn.platform;for(const[s,i,r={}]of e)for(const a of s){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:i,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(k(this,Rx,YI).call(this,t));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:a=[],checker:o=null}}=s;o&&!o(e,t)||(i.bind(e,...a,t)(),r||Ot(t))}}Rx=new WeakSet,YI=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Ix=class Ix{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return KB(e),De(this,"_colors",e)}convert(e){const t=d1(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((r,a)=>r===t[a]))return Ix._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?he.makeHexColor(...t):e}};q(Ix,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let f_=Ix;var Wd,_s,Wt,dn,qd,Zr,Gd,Zs,vo,xo,Kd,sc,rr,xi,ic,hm,fm,Xd,pm,ar,wo,Yd,bo,or,Dx,_o,mm,So,rc,ac,Ao,gm,tn,Ye,Jr,Co,oc,ym,vm,ko,lr,ea,xm,wm,Js,X,Jy,p_,QI,ZI,ev,JI,eD,tD,m_,nD,g_,y_,sD,On,zr,iD,rD,v_,aD,Bf,x_;const hd=class hd{constructor(e,t,s,i,r,a,o,l,u,d,f,p,y,g,m){A(this,X);A(this,Wd,new AbortController);A(this,_s,null);A(this,Wt,new Map);A(this,dn,new Map);A(this,qd,null);A(this,Zr,null);A(this,Gd,null);A(this,Zs,new QB);A(this,vo,null);A(this,xo,null);A(this,Kd,0);A(this,sc,new Set);A(this,rr,null);A(this,xi,null);A(this,ic,new Set);q(this,"_editorUndoBar",null);A(this,hm,!1);A(this,fm,!1);A(this,Xd,!1);A(this,pm,null);A(this,ar,null);A(this,wo,null);A(this,Yd,null);A(this,bo,!1);A(this,or,null);A(this,Dx,new YB);A(this,_o,!1);A(this,mm,!1);A(this,So,null);A(this,rc,null);A(this,ac,null);A(this,Ao,null);A(this,gm,null);A(this,tn,xe.NONE);A(this,Ye,new Set);A(this,Jr,null);A(this,Co,null);A(this,oc,null);A(this,ym,null);A(this,vm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,ko,[0,0]);A(this,lr,null);A(this,ea,null);A(this,xm,null);A(this,wm,null);A(this,Js,null);const w=this._signal=c(this,Wd).signal;b(this,ea,e),b(this,xm,t),b(this,wm,s),b(this,qd,i),b(this,Co,r),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:w}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),a._on("setpreference",this.onSetPreference.bind(this),{signal:w}),a._on("switchannotationeditorparams",v=>this.updateParams(v.type,v.value),{signal:w}),k(this,X,JI).call(this),k(this,X,sD).call(this),k(this,X,m_).call(this),b(this,Zr,o.annotationStorage),b(this,pm,o.filterFactory),b(this,oc,l),b(this,Yd,u||null),b(this,hm,d),b(this,fm,f),b(this,Xd,p),b(this,gm,y||null),this.viewParameters={realScale:vl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=m!==!1}static get _keyboardManager(){const e=hd.prototype,t=a=>c(a,ea).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),s=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return De(this,"_keyboardManager",new Gg([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&c(a,ea).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&c(a,ea).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,s,i,r,a,o,l;(e=c(this,Js))==null||e.resolve(),b(this,Js,null),(t=c(this,Wd))==null||t.abort(),b(this,Wd,null),this._signal=null;for(const u of c(this,dn).values())u.destroy();c(this,dn).clear(),c(this,Wt).clear(),c(this,ic).clear(),(s=c(this,Ao))==null||s.clear(),b(this,_s,null),c(this,Ye).clear(),c(this,Zs).destroy(),(i=c(this,qd))==null||i.destroy(),(r=c(this,Co))==null||r.destroy(),(a=c(this,or))==null||a.hide(),b(this,or,null),(o=c(this,ac))==null||o.destroy(),b(this,ac,null),c(this,ar)&&(clearTimeout(c(this,ar)),b(this,ar,null)),c(this,lr)&&(clearTimeout(c(this,lr)),b(this,lr,null)),(l=this._editorUndoBar)==null||l.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,gm)}get useNewAltTextFlow(){return c(this,fm)}get useNewAltTextWhenAddingImage(){return c(this,Xd)}get hcmFilter(){return De(this,"hcmFilter",c(this,oc)?c(this,pm).addHCMFilter(c(this,oc).foreground,c(this,oc).background):"none")}get direction(){return De(this,"direction",getComputedStyle(c(this,ea)).direction)}get highlightColors(){return De(this,"highlightColors",c(this,Yd)?new Map(c(this,Yd).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return De(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),b(this,xo,e)}setMainHighlightColorPicker(e){b(this,ac,e)}editAltText(e,t=!1){var s;(s=c(this,qd))==null||s.editAltText(this,e,t)}getSignature(e){var t;(t=c(this,Co))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return c(this,Co)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":b(this,Xd,t);break}}onPageChanging({pageNumber:e}){b(this,Kd,e-1)}focusMainContainer(){c(this,ea).focus()}findParent(e,t){for(const s of c(this,dn).values()){const{x:i,y:r,width:a,height:o}=s.div.getBoundingClientRect();if(e>=i&&e<=i+a&&t>=r&&t<=r+o)return s}return null}disableUserSelect(e=!1){c(this,xm).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,ic).add(e)}removeShouldRescale(e){c(this,ic).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*vl.PDF_TO_CSS_UNITS;for(const s of c(this,ic))s.onScaleChanging();(t=c(this,xo))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:a}=t,o=t.toString(),u=k(this,X,Jy).call(this,t).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;t.empty();const f=k(this,X,p_).call(this,u),p=c(this,tn)===xe.NONE,y=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:a,text:o}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(xe.HIGHLIGHT,y);return}y()}addToAnnotationStorage(e){!e.isEmpty()&&c(this,Zr)&&!c(this,Zr).has(e.id)&&c(this,Zr).setValue(e.id,e)}a11yAlert(e,t=null){const s=c(this,wm);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,c(this,bo)&&(b(this,bo,!1),k(this,X,ev).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,Ye))if(t.div.contains(e)){b(this,rc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,rc))return;const[e,t]=c(this,rc);b(this,rc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){k(this,X,m_).call(this),k(this,X,g_).call(this)}removeEditListeners(){k(this,X,nD).call(this),k(this,X,y_).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of c(this,xi))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of c(this,xi))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=c(this,_s))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of c(this,Ye)){const r=i.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const a of c(this,xi))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){we(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const l of s){const u=await i.deserialize(l);if(!u)return;r.push(u)}const a=()=>{for(const l of r)k(this,X,v_).call(this,l);k(this,X,x_).call(this,r)},o=()=>{for(const l of r)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(r){we(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,tn)!==xe.NONE&&!this.isEditorHandlingKeyboard&&hd._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,bo)&&(b(this,bo,!1),k(this,X,ev).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(k(this,X,eD).call(this),k(this,X,g_).call(this),k(this,X,On).call(this,{isEditing:c(this,tn)!==xe.NONE,isEmpty:k(this,X,Bf).call(this),hasSomethingToUndo:c(this,Zs).hasSomethingToUndo(),hasSomethingToRedo:c(this,Zs).hasSomethingToRedo(),hasSelectedEditor:!1})):(k(this,X,tD).call(this),k(this,X,y_).call(this),k(this,X,On).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,xi)){b(this,xi,e);for(const t of c(this,xi))k(this,X,zr).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,Dx).id}get currentLayer(){return c(this,dn).get(c(this,Kd))}getLayer(e){return c(this,dn).get(e)}get currentPageIndex(){return c(this,Kd)}addLayer(e){c(this,dn).set(e.pageIndex,e),c(this,_o)?e.enable():e.disable()}removeLayer(e){c(this,dn).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,i=!1){var r,a,o;if(c(this,tn)!==e&&!(c(this,Js)&&(await c(this,Js).promise,!c(this,Js)))){if(b(this,Js,Promise.withResolvers()),(r=c(this,xo))==null||r.commitOrRemove(),b(this,tn,e),e===xe.NONE){this.setEditingState(!1),k(this,X,rD).call(this),(a=this._editorUndoBar)==null||a.hide(),c(this,Js).resolve();return}e===xe.SIGNATURE&&await((o=c(this,Co))==null?void 0:o.loadSignatures()),this.setEditingState(!0),await k(this,X,iD).call(this),this.unselectAll();for(const l of c(this,dn).values())l.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),c(this,Js).resolve();return}for(const l of c(this,Wt).values())l.annotationElementId===t||l.id===t?(this.setSelected(l),i&&l.enterInEditMode()):l.unselect();c(this,Js).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==c(this,tn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){var s;if(c(this,xi)){switch(e){case Fe.CREATE:this.currentLayer.addNewEditor(t);return;case Fe.HIGHLIGHT_DEFAULT_COLOR:(s=c(this,ac))==null||s.updateColor(t);break;case Fe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,ym)||b(this,ym,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of c(this,Ye))i.updateParams(e,t);for(const i of c(this,xi))i.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var r;for(const a of c(this,Wt).values())a.editorType===e&&a.show(t);(((r=c(this,ym))==null?void 0:r.get(Fe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&k(this,X,zr).call(this,[[Fe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,mm)!==e){b(this,mm,e);for(const t of c(this,dn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of c(this,Wt).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return c(this,Wt).get(e)}addEditor(e){c(this,Wt).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(c(this,ar)&&clearTimeout(c(this,ar)),b(this,ar,setTimeout(()=>{this.focusMainContainer(),b(this,ar,null)},0))),c(this,Wt).delete(e.id),e.annotationElementId&&((t=c(this,Ao))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!c(this,sc).has(e.annotationElementId))&&((s=c(this,Zr))==null||s.remove(e.id))}addDeletedAnnotationElement(e){c(this,sc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,sc).has(e)}removeDeletedAnnotationElement(e){c(this,sc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,_s)!==e&&(b(this,_s,e),e&&k(this,X,zr).call(this,e.propertiesToUpdate))}updateUI(e){c(this,X,aD)===e&&k(this,X,zr).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){k(this,X,zr).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(c(this,Ye).has(e)){c(this,Ye).delete(e),e.unselect(),k(this,X,On).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Ye).add(e),e.select(),k(this,X,zr).call(this,e.propertiesToUpdate),k(this,X,On).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=c(this,xo))==null||t.commitOrRemove();for(const s of c(this,Ye))s!==e&&s.unselect();c(this,Ye).clear(),c(this,Ye).add(e),e.select(),k(this,X,zr).call(this,e.propertiesToUpdate),k(this,X,On).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,Ye).has(e)}get firstSelectedEditor(){return c(this,Ye).values().next().value}unselect(e){e.unselect(),c(this,Ye).delete(e),k(this,X,On).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Ye).size!==0}get isEnterHandled(){return c(this,Ye).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;c(this,Zs).undo(),k(this,X,On).call(this,{hasSomethingToUndo:c(this,Zs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:k(this,X,Bf).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){c(this,Zs).redo(),k(this,X,On).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,Zs).hasSomethingToRedo(),isEmpty:k(this,X,Bf).call(this)})}addCommands(e){c(this,Zs).add(e),k(this,X,On).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:k(this,X,Bf).call(this)})}cleanUndoStack(e){c(this,Zs).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...c(this,Ye)],s=()=>{var a;(a=this._editorUndoBar)==null||a.show(i,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},i=()=>{for(const a of t)k(this,X,v_).call(this,a)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=c(this,_s))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,_s)||this.hasSelection}selectAll(){for(const e of c(this,Ye))e.commit();k(this,X,x_).call(this,c(this,Wt).values())}unselectAll(){var e;if(!(c(this,_s)&&(c(this,_s).commitOrRemove(),c(this,tn)!==xe.NONE))&&!((e=c(this,xo))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of c(this,Ye))t.unselect();c(this,Ye).clear(),k(this,X,On).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;c(this,ko)[0]+=e,c(this,ko)[1]+=t;const[i,r]=c(this,ko),a=[...c(this,Ye)],o=1e3;c(this,lr)&&clearTimeout(c(this,lr)),b(this,lr,setTimeout(()=>{b(this,lr,null),c(this,ko)[0]=c(this,ko)[1]=0,this.addCommands({cmd:()=>{for(const l of a)c(this,Wt).has(l.id)&&(l.translateInPage(i,r),l.translationDone())},undo:()=>{for(const l of a)c(this,Wt).has(l.id)&&(l.translateInPage(-i,-r),l.translationDone())},mustExec:!1})},o));for(const l of a)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,rr,new Map);for(const e of c(this,Ye))c(this,rr).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,rr))return!1;this.disableUserSelect(!1);const e=c(this,rr);b(this,rr,null);let t=!1;for(const[{x:i,y:r,pageIndex:a},o]of e)o.newX=i,o.newY=r,o.newPageIndex=a,t||(t=i!==o.savedX||r!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const s=(i,r,a,o)=>{if(c(this,Wt).has(i.id)){const l=c(this,dn).get(o);l?i._setParentAndPosition(l,r,a):(i.pageIndex=o,i.x=r,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:a,newPageIndex:o}]of e)s(i,r,a,o)},undo:()=>{for(const[i,{savedX:r,savedY:a,savedPageIndex:o}]of e)s(i,r,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,rr))for(const s of c(this,rr).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,Ye).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,_s)===e}getActive(){return c(this,_s)}getMode(){return c(this,tn)}get imageManager(){return De(this,"imageManager",new h_)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,d=t.rangeCount;u<d;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,d,f,p)=>({x:(d-i)/a,y:1-(u+f-s)/r,width:p/a,height:f/r});break;case"180":o=(u,d,f,p)=>({x:1-(u+f-s)/r,y:1-(d+p-i)/a,width:f/r,height:p/a});break;case"270":o=(u,d,f,p)=>({x:1-(d+p-i)/a,y:(u-s)/r,width:p/a,height:f/r});break;default:o=(u,d,f,p)=>({x:(u-s)/r,y:(d-i)/a,width:f/r,height:p/a});break}const l=[];for(let u=0,d=t.rangeCount;u<d;u++){const f=t.getRangeAt(u);if(!f.collapsed)for(const{x:p,y,width:g,height:m}of f.getClientRects())g===0||m===0||l.push(o(p,y,g,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,Gd)||b(this,Gd,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,Gd))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=c(this,Gd))==null?void 0:i.get(e.data.id);if(!t)return;const s=c(this,Zr).getRawValue(t);s&&(c(this,tn)===xe.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var r;const i=(r=c(this,Ao))==null?void 0:r.get(e);i&&(i.setCanvas(t,s),c(this,Ao).delete(e))}addMissingCanvas(e,t){(c(this,Ao)||b(this,Ao,new Map)).set(e,t)}};Wd=new WeakMap,_s=new WeakMap,Wt=new WeakMap,dn=new WeakMap,qd=new WeakMap,Zr=new WeakMap,Gd=new WeakMap,Zs=new WeakMap,vo=new WeakMap,xo=new WeakMap,Kd=new WeakMap,sc=new WeakMap,rr=new WeakMap,xi=new WeakMap,ic=new WeakMap,hm=new WeakMap,fm=new WeakMap,Xd=new WeakMap,pm=new WeakMap,ar=new WeakMap,wo=new WeakMap,Yd=new WeakMap,bo=new WeakMap,or=new WeakMap,Dx=new WeakMap,_o=new WeakMap,mm=new WeakMap,So=new WeakMap,rc=new WeakMap,ac=new WeakMap,Ao=new WeakMap,gm=new WeakMap,tn=new WeakMap,Ye=new WeakMap,Jr=new WeakMap,Co=new WeakMap,oc=new WeakMap,ym=new WeakMap,vm=new WeakMap,ko=new WeakMap,lr=new WeakMap,ea=new WeakMap,xm=new WeakMap,wm=new WeakMap,Js=new WeakMap,X=new WeakSet,Jy=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},p_=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of c(this,dn).values())if(s.hasTextLayer(e))return s;return null},QI=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=k(this,X,Jy).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(c(this,or)||b(this,or,new XB(this)),c(this,or).show(s,i,this.direction==="ltr"))},ZI=function(){var r,a,o;const e=document.getSelection();if(!e||e.isCollapsed){c(this,Jr)&&((r=c(this,or))==null||r.hide(),b(this,Jr,null),k(this,X,On).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,Jr))return;const i=k(this,X,Jy).call(this,e).closest(".textLayer");if(!i){c(this,Jr)&&((a=c(this,or))==null||a.hide(),b(this,Jr,null),k(this,X,On).call(this,{hasSelectedText:!1}));return}if((o=c(this,or))==null||o.hide(),b(this,Jr,t),k(this,X,On).call(this,{hasSelectedText:!0}),!(c(this,tn)!==xe.HIGHLIGHT&&c(this,tn)!==xe.NONE)&&(c(this,tn)===xe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,bo,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=c(this,tn)===xe.HIGHLIGHT?k(this,X,p_).call(this,i):null;l==null||l.toggleDrawing();const u=new AbortController,d=this.combinedSignal(u),f=p=>{p.type==="pointerup"&&p.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),p.type==="pointerup"&&k(this,X,ev).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("blur",f,{signal:d})}},ev=function(e=""){c(this,tn)===xe.HIGHLIGHT?this.highlightSelection(e):c(this,hm)&&k(this,X,QI).call(this)},JI=function(){document.addEventListener("selectionchange",k(this,X,ZI).bind(this),{signal:this._signal})},eD=function(){if(c(this,wo))return;b(this,wo,new AbortController);const e=this.combinedSignal(c(this,wo));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},tD=function(){var e;(e=c(this,wo))==null||e.abort(),b(this,wo,null)},m_=function(){if(c(this,So))return;b(this,So,new AbortController);const e=this.combinedSignal(c(this,So));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},nD=function(){var e;(e=c(this,So))==null||e.abort(),b(this,So,null)},g_=function(){if(c(this,vo))return;b(this,vo,new AbortController);const e=this.combinedSignal(c(this,vo));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},y_=function(){var e;(e=c(this,vo))==null||e.abort(),b(this,vo,null)},sD=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},On=function(e){Object.entries(e).some(([s,i])=>c(this,vm)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,vm),e)}),c(this,tn)===xe.HIGHLIGHT&&e.hasSelectedEditor===!1&&k(this,X,zr).call(this,[[Fe.HIGHLIGHT_FREE,!0]]))},zr=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},iD=async function(){if(!c(this,_o)){b(this,_o,!0);const e=[];for(const t of c(this,dn).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,Wt).values())t.enable()}},rD=function(){if(this.unselectAll(),c(this,_o)){b(this,_o,!1);for(const e of c(this,dn).values())e.disable();for(const e of c(this,Wt).values())e.disable()}},v_=function(e){const t=c(this,dn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},aD=function(){let e=null;for(e of c(this,Ye));return e},Bf=function(){if(c(this,Wt).size===0)return!0;if(c(this,Wt).size===1)for(const e of c(this,Wt).values())return e.isEmpty();return!1},x_=function(e){for(const t of c(this,Ye))t.unselect();c(this,Ye).clear();for(const t of e)t.isEmpty()||(c(this,Ye).add(t),t.select());k(this,X,On).call(this,{hasSelectedEditor:this.hasSelection})},q(hd,"TRANSLATE_SMALL",1),q(hd,"TRANSLATE_BIG",10);let _u=hd;var nn,cr,wi,Qd,ur,Ss,Zd,dr,ls,ta,lc,hr,Eo,Oi,zf,tv;const Fn=class Fn{constructor(e){A(this,Oi);A(this,nn,null);A(this,cr,!1);A(this,wi,null);A(this,Qd,null);A(this,ur,null);A(this,Ss,null);A(this,Zd,!1);A(this,dr,null);A(this,ls,null);A(this,ta,null);A(this,lc,null);A(this,hr,!1);b(this,ls,e),b(this,hr,e._uiManager.useNewAltTextFlow),c(Fn,Eo)||b(Fn,Eo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Fn._l10n??(Fn._l10n=e)}async render(){const e=b(this,wi,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=b(this,Qd,document.createElement("span"));e.append(t),c(this,hr)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(Fn,Eo).missing),t.setAttribute("data-l10n-id",c(Fn,Eo)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=c(this,ls)._uiManager._signal;e.addEventListener("contextmenu",Hi,{signal:s}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),c(this,ls)._uiManager.editAltText(c(this,ls)),c(this,hr)&&c(this,ls)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Oi,zf)}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(b(this,Zd,!0),i(r))},{signal:s}),await k(this,Oi,tv).call(this),e}finish(){c(this,wi)&&(c(this,wi).focus({focusVisible:c(this,Zd)}),b(this,Zd,!1))}isEmpty(){return c(this,hr)?c(this,nn)===null:!c(this,nn)&&!c(this,cr)}hasData(){return c(this,hr)?c(this,nn)!==null||!!c(this,ta):this.isEmpty()}get guessedText(){return c(this,ta)}async setGuessedText(e){c(this,nn)===null&&(b(this,ta,e),b(this,lc,await Fn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),k(this,Oi,tv).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,hr)||c(this,nn)){(t=c(this,dr))==null||t.remove(),b(this,dr,null);return}if(!c(this,dr)){const s=b(this,dr,document.createElement("div"));s.className="noAltTextBadge",c(this,ls).div.append(s)}c(this,dr).classList.toggle("hidden",!e)}serialize(e){let t=c(this,nn);return!e&&c(this,ta)===t&&(t=c(this,lc)),{altText:t,decorative:c(this,cr),guessedText:c(this,ta),textWithDisclaimer:c(this,lc)}}get data(){return{altText:c(this,nn),decorative:c(this,cr)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(b(this,ta,s),b(this,lc,i)),!(c(this,nn)===e&&c(this,cr)===t)&&(r||(b(this,nn,e),b(this,cr,t)),k(this,Oi,tv).call(this))}toggle(e=!1){c(this,wi)&&(!e&&c(this,Ss)&&(clearTimeout(c(this,Ss)),b(this,Ss,null)),c(this,wi).disabled=!e)}shown(){c(this,ls)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Oi,zf)}})}destroy(){var e,t;(e=c(this,wi))==null||e.remove(),b(this,wi,null),b(this,Qd,null),b(this,ur,null),(t=c(this,dr))==null||t.remove(),b(this,dr,null)}};nn=new WeakMap,cr=new WeakMap,wi=new WeakMap,Qd=new WeakMap,ur=new WeakMap,Ss=new WeakMap,Zd=new WeakMap,dr=new WeakMap,ls=new WeakMap,ta=new WeakMap,lc=new WeakMap,hr=new WeakMap,Eo=new WeakMap,Oi=new WeakSet,zf=function(){return c(this,nn)&&"added"||c(this,nn)===null&&this.guessedText&&"review"||"missing"},tv=async function(){var i,r,a;const e=c(this,wi);if(!e)return;if(c(this,hr)){if(e.classList.toggle("done",!!c(this,nn)),e.setAttribute("data-l10n-id",c(Fn,Eo)[c(this,Oi,zf)]),(i=c(this,Qd))==null||i.setAttribute("data-l10n-id",c(Fn,Eo)[`${c(this,Oi,zf)}-label`]),!c(this,nn)){(r=c(this,ur))==null||r.remove();return}}else{if(!c(this,nn)&&!c(this,cr)){e.classList.remove("done"),(a=c(this,ur))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,ur);if(!t){b(this,ur,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,ls).id}`;const o=100,l=c(this,ls)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(c(this,Ss)),b(this,Ss,null)},{once:!0}),e.addEventListener("mouseenter",()=>{b(this,Ss,setTimeout(()=>{b(this,Ss,null),c(this,ur).classList.add("show"),c(this,ls)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;c(this,Ss)&&(clearTimeout(c(this,Ss)),b(this,Ss,null)),(u=c(this,ur))==null||u.classList.remove("show")},{signal:l})}c(this,cr)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,nn)),t.parentNode||e.append(t);const s=c(this,ls).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},A(Fn,Eo,null),q(Fn,"_l10n",null);let lx=Fn;var Jd,cc,bm,_m,Sm,Am,Cm,na,uc,sa,dc,ia,Al,oD,lD,cD;const $1=class $1{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:a=null,signal:o}){A(this,Al);A(this,Jd);A(this,cc,!1);A(this,bm,null);A(this,_m);A(this,Sm);A(this,Am);A(this,Cm);A(this,na,null);A(this,uc);A(this,sa,null);A(this,dc);A(this,ia,null);b(this,Jd,e),b(this,bm,s),b(this,_m,t),b(this,Sm,i),b(this,Am,r),b(this,Cm,a),b(this,dc,new AbortController),b(this,uc,AbortSignal.any([o,c(this,dc).signal])),e.addEventListener("touchstart",k(this,Al,oD).bind(this),{passive:!1,signal:c(this,uc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ir.pixelRatio}destroy(){var e,t;(e=c(this,dc))==null||e.abort(),b(this,dc,null),(t=c(this,na))==null||t.abort(),b(this,na,null)}};Jd=new WeakMap,cc=new WeakMap,bm=new WeakMap,_m=new WeakMap,Sm=new WeakMap,Am=new WeakMap,Cm=new WeakMap,na=new WeakMap,uc=new WeakMap,sa=new WeakMap,dc=new WeakMap,ia=new WeakMap,Al=new WeakSet,oD=function(e){var i,r,a;if((i=c(this,_m))!=null&&i.call(this))return;if(e.touches.length===1){if(c(this,na))return;const o=b(this,na,new AbortController),l=AbortSignal.any([c(this,uc),o.signal]),u=c(this,Jd),d={capture:!0,signal:l,passive:!1},f=p=>{var y;p.pointerType==="touch"&&((y=c(this,na))==null||y.abort(),b(this,na,null))};u.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(Ot(p),f(p))},d),u.addEventListener("pointerup",f,d),u.addEventListener("pointercancel",f,d);return}if(!c(this,ia)){b(this,ia,new AbortController);const o=AbortSignal.any([c(this,uc),c(this,ia).signal]),l=c(this,Jd),u={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",k(this,Al,lD).bind(this),u);const d=k(this,Al,cD).bind(this);l.addEventListener("touchend",d,u),l.addEventListener("touchcancel",d,u),u.capture=!0,l.addEventListener("pointerdown",Ot,u),l.addEventListener("pointermove",Ot,u),l.addEventListener("pointercancel",Ot,u),l.addEventListener("pointerup",Ot,u),(r=c(this,Sm))==null||r.call(this)}if(Ot(e),e.touches.length!==2||(a=c(this,bm))!=null&&a.call(this)){b(this,sa,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),b(this,sa,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},lD=function(e){var S;if(!c(this,sa)||e.touches.length!==2)return;Ot(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:r}=t,{screenX:a,screenY:o}=s,l=c(this,sa),{touch0X:u,touch0Y:d,touch1X:f,touch1Y:p}=l,y=f-u,g=p-d,m=a-i,w=o-r,v=Math.hypot(m,w)||1,x=Math.hypot(y,g)||1;if(!c(this,cc)&&Math.abs(x-v)<=$1.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=r,l.touch1X=a,l.touch1Y=o,!c(this,cc)){b(this,cc,!0);return}const _=[(i+a)/2,(r+o)/2];(S=c(this,Am))==null||S.call(this,_,x,v)},cD=function(e){var t;e.touches.length>=2||(c(this,ia)&&(c(this,ia).abort(),b(this,ia,null),(t=c(this,Cm))==null||t.call(this)),c(this,sa)&&(Ot(e),b(this,sa,null),b(this,cc,!1)))};let cx=$1;var hc,bi,pt,eh,To,km,fc,hn,pc,ra,Po,Em,mc,As,Tm,gc,aa,fr,th,nh,ei,yc,Pm,Mx,pe,w_,Nm,b_,nv,uD,dD,__,sv,S_,hD,fD,pD,A_,mD,C_,gD,yD,vD,k_,Uf;const ke=class ke{constructor(e){A(this,pe);A(this,hc,null);A(this,bi,null);A(this,pt,null);A(this,eh,!1);A(this,To,null);A(this,km,"");A(this,fc,!1);A(this,hn,null);A(this,pc,null);A(this,ra,null);A(this,Po,null);A(this,Em,"");A(this,mc,!1);A(this,As,null);A(this,Tm,!1);A(this,gc,!1);A(this,aa,!1);A(this,fr,null);A(this,th,0);A(this,nh,0);A(this,ei,null);A(this,yc,null);q(this,"isSelected",!1);q(this,"_isCopy",!1);q(this,"_editToolbar",null);q(this,"_initialOptions",Object.create(null));q(this,"_initialData",null);q(this,"_isVisible",!0);q(this,"_uiManager",null);q(this,"_focusEventsAllowed",!0);A(this,Pm,!1);A(this,Mx,ke._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ke.prototype._resizeWithKeyboard,t=_u.TRANSLATE_SMALL,s=_u.TRANSLATE_BIG;return De(this,"_resizerKeyboardManager",new Gg([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],ke.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return De(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new ZB({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ke._l10n??(ke._l10n=e),ke._l10nResizer||(ke._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ke._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ke._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){st("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Pm)}set _isDraggable(e){var t;b(this,Pm,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,Mx)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):k(this,pe,Uf).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,mc)?b(this,mc,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[r,a]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/r,this.y=(t+i)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,i]=this.parentDimensions;this.setAt(e*s,t*i,this.width*s,this.height*i),this._onTranslated()}translate(e,t){k(this,pe,w_).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,As)||b(this,As,[this.x,this.y,this.width,this.height]),k(this,pe,w_).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){c(this,As)||b(this,As,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,u]=this.getBaseTranslation();a+=l,o+=u;const{style:d}=s;d.left=`${(100*a).toFixed(2)}%`,d.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!c(this,As)&&(c(this,As)[0]!==this.x||c(this,As)[1]!==this.y)}get _hasBeenResized(){return!!c(this,As)&&(c(this,As)[2]!==this.width||c(this,As)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=ke,i=s/e,r=s/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:r,y:a,width:o,height:l}=this;if(o*=s,l*=i,r*=s,a*=i,this._mustFixPosition)switch(e){case 0:r=Wn(r,0,s-o),a=Wn(a,0,i-l);break;case 90:r=Wn(r,0,s-l),a=Wn(a,o,i);break;case 180:r=Wn(r,o,s),a=Wn(a,l,i);break;case 270:r=Wn(r,l,s),a=Wn(a,0,i-o);break}this.x=r/=s,this.y=a/=i;const[u,d]=this.getBaseTranslation();r+=u,a+=d,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return k(s=ke,Nm,b_).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return k(s=ke,Nm,b_).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*e/s).toFixed(2)}%`,c(this,fc)||(r.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,i=s.endsWith("%"),r=!c(this,fc)&&t.endsWith("%");if(i&&r)return;const[a,o]=this.parentDimensions;i||(e.width=`${(100*parseFloat(s)/a).toFixed(2)}%`),!c(this,fc)&&!r&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=c(this,pt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||c(this,gc))return this._editToolbar;this._editToolbar=new d_(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=c(this,pt))==null||e.destroy())}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return c(this,pt)||(lx.initialize(ke._l10n),b(this,pt,new lx(this)),c(this,hc)&&(c(this,pt).data=c(this,hc),b(this,hc,null))),c(this,pt)}get altTextData(){var e;return(e=c(this,pt))==null?void 0:e.data}set altTextData(e){c(this,pt)&&(c(this,pt).data=e)}get guessedAltText(){var e;return(e=c(this,pt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,pt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,pt))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,pt)&&!c(this,pt).isEmpty()}hasAltTextData(){var e;return((e=c(this,pt))==null?void 0:e.hasData())??!1}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=c(this,eh)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),k(this,pe,C_).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),XI(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,yc)||b(this,yc,new cx({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:k(this,pe,hD).bind(this),onPinching:k(this,pe,fD).bind(this),onPinchEnd:k(this,pe,pD).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=wn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(b(this,mc,!0),this._isDraggable){k(this,pe,mD).call(this,e);return}k(this,pe,A_).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,fr)&&clearTimeout(c(this,fr)),b(this,fr,setTimeout(()=>{var e;b(this,fr,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[r,a]=this.pageDimensions,[o,l]=this.pageTranslation,u=e/i,d=t/i,f=this.x*r,p=this.y*a,y=this.width*r,g=this.height*a;switch(s){case 0:return[f+u+o,a-p-d-g+l,f+u+y+o,a-p-d+l];case 90:return[f+d+o,a-p+u+l,f+d+g+o,a-p+u+y+l];case 180:return[f-u-y+o,a-p+d+l,f-u+o,a-p+d+g+l];case 270:return[f-d-g+o,a-p-u-y+l,f-d+o,a-p-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,r,a]=e,o=r-s,l=a-i;switch(this.rotation){case 0:return[s,t-a,o,l];case 90:return[s,t-i,l,o];case 180:return[r,t-i,o,l];case 270:return[r,t-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),b(this,gc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),b(this,gc,!1),!0):!1}isInEditMode(){return c(this,gc)}shouldGetKeyboardEvents(){return c(this,aa)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:a}=window;return t<a&&i>0&&e<r&&s>0}rebuild(){k(this,pe,C_).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){st("An editor must be serializable")}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId});i.rotation=e.rotation,b(i,hc,e.accessibilityData),i._isCopy=e.isCopy||!1;const[r,a]=i.pageDimensions,[o,l,u,d]=i.getRectInCurrentCoords(e.rect,a);return i.x=o/r,i.y=l/a,i.width=u/r,i.height=d/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=c(this,Po))==null||e.abort(),b(this,Po,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,fr)&&(clearTimeout(c(this,fr)),b(this,fr,null)),k(this,pe,Uf).call(this),this.removeEditToolbar(),c(this,ei)){for(const s of c(this,ei).values())clearTimeout(s);b(this,ei,null)}this.parent=null,(t=c(this,yc))==null||t.destroy(),b(this,yc,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(k(this,pe,uD).call(this),c(this,hn).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),b(this,ra,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,hn).children;if(!c(this,bi)){b(this,bi,Array.from(t));const a=k(this,pe,gD).bind(this),o=k(this,pe,yD).bind(this),l=this._uiManager._signal;for(const u of c(this,bi)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",k(this,pe,vD).bind(this,d),{signal:l}),u.setAttribute("data-l10n-id",ke._l10nResizer[d])}}const s=c(this,bi)[0];let i=0;for(const a of t){if(a===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(c(this,bi).length/4);if(r!==i){if(r<i)for(let o=0;o<i-r;o++)c(this,hn).append(c(this,hn).firstChild);else if(r>i)for(let o=0;o<r-i;o++)c(this,hn).firstChild.before(c(this,hn).lastChild);let a=0;for(const o of t){const u=c(this,bi)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",ke._l10nResizer[u])}}k(this,pe,k_).call(this,0),b(this,aa,!0),c(this,hn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,aa)&&k(this,pe,S_).call(this,c(this,Em),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){k(this,pe,Uf).call(this),this.div.focus()}select(){var e,t,s;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(s=c(this,pt))==null||s.toggleAltTextBadge(!1)}}unselect(){var e,t,s,i,r;this.isSelected&&(this.isSelected=!1,(e=c(this,hn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=c(this,pt))==null||r.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,Tm)}set isEditing(e){b(this,Tm,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){b(this,fc,!0);const s=e/t,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,ei)||b(this,ei,new Map);const{action:s}=e;let i=c(this,ei).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),c(this,ei).delete(s),c(this,ei).size===0&&b(this,ei,null)},ke._telemetryTimeout),c(this,ei).set(s,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),b(this,eh,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,eh,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};hc=new WeakMap,bi=new WeakMap,pt=new WeakMap,eh=new WeakMap,To=new WeakMap,km=new WeakMap,fc=new WeakMap,hn=new WeakMap,pc=new WeakMap,ra=new WeakMap,Po=new WeakMap,Em=new WeakMap,mc=new WeakMap,As=new WeakMap,Tm=new WeakMap,gc=new WeakMap,aa=new WeakMap,fr=new WeakMap,th=new WeakMap,nh=new WeakMap,ei=new WeakMap,yc=new WeakMap,Pm=new WeakMap,Mx=new WeakMap,pe=new WeakSet,w_=function([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Nm=new WeakSet,b_=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},nv=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},uD=function(){if(c(this,hn))return;b(this,hn,document.createElement("div")),c(this,hn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");c(this,hn).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",k(this,pe,dD).bind(this,s),{signal:t}),i.addEventListener("contextmenu",Hi,{signal:t}),i.tabIndex=-1}this.div.prepend(c(this,hn))},dD=function(e,t){var d;t.preventDefault();const{isMac:s}=wn.platform;if(t.button!==0||t.ctrlKey&&s)return;(d=c(this,pt))==null||d.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,b(this,pc,[t.screenX,t.screenY]);const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",k(this,pe,S_).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Ot,{passive:!1,signal:a}),window.addEventListener("contextmenu",Hi,{signal:a}),b(this,ra,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var f;r.abort(),this.parent.togglePointerEvents(!0),(f=c(this,pt))==null||f.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=l,k(this,pe,sv).call(this)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},__=function(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t;const[r,a]=this.parentDimensions;this.setDims(r*s,a*i),this.fixAndSetPosition(),this._onResized()},sv=function(){if(!c(this,ra))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=c(this,ra);b(this,ra,null);const r=this.x,a=this.y,o=this.width,l=this.height;r===e&&a===t&&o===s&&l===i||this.addCommands({cmd:k(this,pe,__).bind(this,r,a,o,l),undo:k(this,pe,__).bind(this,e,t,s,i),mustExec:!0})},S_=function(e,t){const[s,i]=this.parentDimensions,r=this.x,a=this.y,o=this.width,l=this.height,u=ke.MIN_SIZE/s,d=ke.MIN_SIZE/i,f=k(this,pe,nv).call(this,this.rotation),p=($,B)=>[f[0]*$+f[2]*B,f[1]*$+f[3]*B],y=k(this,pe,nv).call(this,360-this.rotation),g=($,B)=>[y[0]*$+y[2]*B,y[1]*$+y[3]*B];let m,w,v=!1,x=!1;switch(e){case"topLeft":v=!0,m=($,B)=>[0,0],w=($,B)=>[$,B];break;case"topMiddle":m=($,B)=>[$/2,0],w=($,B)=>[$/2,B];break;case"topRight":v=!0,m=($,B)=>[$,0],w=($,B)=>[0,B];break;case"middleRight":x=!0,m=($,B)=>[$,B/2],w=($,B)=>[0,B/2];break;case"bottomRight":v=!0,m=($,B)=>[$,B],w=($,B)=>[0,0];break;case"bottomMiddle":m=($,B)=>[$/2,B],w=($,B)=>[$/2,0];break;case"bottomLeft":v=!0,m=($,B)=>[0,B],w=($,B)=>[$,0];break;case"middleLeft":x=!0,m=($,B)=>[0,B/2],w=($,B)=>[$,B/2];break}const _=m(o,l),S=w(o,l);let E=p(...S);const P=ke._round(r+E[0]),T=ke._round(a+E[1]);let N=1,I=1,D,j;if(t.fromKeyboard)({deltaX:D,deltaY:j}=t);else{const{screenX:$,screenY:B}=t,[O,H]=c(this,pc);[D,j]=this.screenToPageTranslation($-O,B-H),c(this,pc)[0]=$,c(this,pc)[1]=B}if([D,j]=g(D/s,j/i),v){const $=Math.hypot(o,l);N=I=Math.max(Math.min(Math.hypot(S[0]-_[0]-D,S[1]-_[1]-j)/$,1/o,1/l),u/o,d/l)}else x?N=Wn(Math.abs(S[0]-_[0]-D),u,1)/o:I=Wn(Math.abs(S[1]-_[1]-j),d,1)/l;const L=ke._round(o*N),z=ke._round(l*I);E=p(...w(L,z));const F=P-E[0],J=T-E[1];c(this,As)||b(this,As,[this.x,this.y,this.width,this.height]),this.width=L,this.height=z,this.x=F,this.y=J,this.setDims(s*L,i*z),this.fixAndSetPosition(),this._onResizing()},hD=function(){var e;b(this,ra,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=c(this,pt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},fD=function(e,t,s){let r=.7*(s/t)+1-.7;if(r===1)return;const a=k(this,pe,nv).call(this,this.rotation),o=(P,T)=>[a[0]*P+a[2]*T,a[1]*P+a[3]*T],[l,u]=this.parentDimensions,d=this.x,f=this.y,p=this.width,y=this.height,g=ke.MIN_SIZE/l,m=ke.MIN_SIZE/u;r=Math.max(Math.min(r,1/p,1/y),g/p,m/y);const w=ke._round(p*r),v=ke._round(y*r);if(w===p&&v===y)return;c(this,As)||b(this,As,[d,f,p,y]);const x=o(p/2,y/2),_=ke._round(d+x[0]),S=ke._round(f+x[1]),E=o(w/2,v/2);this.x=_-E[0],this.y=S-E[1],this.width=w,this.height=v,this.setDims(l*w,u*v),this.fixAndSetPosition(),this._onResizing()},pD=function(){var e;(e=c(this,pt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),k(this,pe,sv).call(this)},A_=function(e){const{isMac:t}=wn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},mD=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:r},o=u=>{i.abort(),b(this,To,null),b(this,mc,!1),this._uiManager.endDragSession()||k(this,pe,A_).call(this,u),s&&this._onStopDragging()};t&&(b(this,th,e.clientX),b(this,nh,e.clientY),b(this,To,e.pointerId),b(this,km,e.pointerType),window.addEventListener("pointermove",u=>{s||(s=!0,this._onStartDragging());const{clientX:d,clientY:f,pointerId:p}=u;if(p!==c(this,To)){Ot(u);return}const[y,g]=this.screenToPageTranslation(d-c(this,th),f-c(this,nh));b(this,th,d),b(this,nh,f),this._uiManager.dragSelectedEditors(y,g)},a),window.addEventListener("touchmove",Ot,a),window.addEventListener("pointerdown",u=>{u.pointerType===c(this,km)&&(c(this,yc)||u.isPrimary)&&o(u),Ot(u)},a));const l=u=>{if(!c(this,To)||c(this,To)===u.pointerId){o(u);return}Ot(u)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})},C_=function(){if(c(this,Po)||!this.div)return;b(this,Po,new AbortController);const e=this._uiManager.combinedSignal(c(this,Po));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},gD=function(e){ke._resizerKeyboardManager.exec(this,e)},yD=function(e){var t;c(this,aa)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,hn)&&k(this,pe,Uf).call(this)},vD=function(e){b(this,Em,c(this,aa)?e:"")},k_=function(e){if(c(this,bi))for(const t of c(this,bi))t.tabIndex=e},Uf=function(){b(this,aa,!1),k(this,pe,k_).call(this,-1),k(this,pe,sv).call(this)},A(ke,Nm),q(ke,"_l10n",null),q(ke,"_l10nResizer",null),q(ke,"_borderLineWidth",-1),q(ke,"_colorManager",new f_),q(ke,"_zIndex",1),q(ke,"_telemetryTimeout",1e3);let ct=ke;class ZB extends ct{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Hk=3285377520,Xs=4294901760,Qi=65535;class xD{constructor(e){this.h1=e?e&4294967295:Hk,this.h2=e?e&4294967295:Hk}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let m=0,w=e.length;m<w;m++){const v=e.charCodeAt(m);v<=255?t[s++]=v:(t[s++]=v>>>8,t[s++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,a=new Uint32Array(t.buffer,0,i);let o=0,l=0,u=this.h1,d=this.h2;const f=3432918353,p=461845907,y=f&Qi,g=p&Qi;for(let m=0;m<i;m++)m&1?(o=a[m],o=o*f&Xs|o*y&Qi,o=o<<15|o>>>17,o=o*p&Xs|o*g&Qi,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=a[m],l=l*f&Xs|l*y&Qi,l=l<<15|l>>>17,l=l*p&Xs|l*g&Qi,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(o=0,r){case 3:o^=t[i*4+2]<<16;case 2:o^=t[i*4+1]<<8;case 1:o^=t[i*4],o=o*f&Xs|o*y&Qi,o=o<<15|o>>>17,o=o*p&Xs|o*g&Qi,i&1?u^=o:d^=o}this.h1=u,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Xs|e*36045&Qi,t=t*4283543511&Xs|((t<<16|e>>>16)*2950163797&Xs)>>>16,e^=t>>>1,e=e*444984403&Xs|e*60499&Qi,t=t*3301882366&Xs|((t<<16|e>>>16)*3120437893&Xs)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const E_=Object.freeze({map:null,hash:"",transfer:void 0});var vc,xc,fn,jx,wD;class h1{constructor(){A(this,jx);A(this,vc,!1);A(this,xc,null);A(this,fn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=c(this,fn).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return c(this,fn).get(e)}remove(e){if(c(this,fn).delete(e),c(this,fn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of c(this,fn).values())if(t instanceof ct)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=c(this,fn).get(e);let i=!1;if(s!==void 0)for(const[r,a]of Object.entries(t))s[r]!==a&&(i=!0,s[r]=a);else i=!0,c(this,fn).set(e,t);i&&k(this,jx,wD).call(this),t instanceof ct&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return c(this,fn).has(e)}get size(){return c(this,fn).size}resetModified(){c(this,vc)&&(b(this,vc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new bD(this)}get serializable(){if(c(this,fn).size===0)return E_;const e=new Map,t=new xD,s=[],i=Object.create(null);let r=!1;for(const[a,o]of c(this,fn)){const l=o instanceof ct?o.serialize(!1,i):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),r||(r=!!l.bitmap))}if(r)for(const a of e.values())a.bitmap&&s.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:E_}get editorStats(){let e=null;const t=new Map;for(const s of c(this,fn).values()){if(!(s instanceof ct))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:r}=i;t.has(r)||t.set(r,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const a=e[r]||(e[r]=new Map);for(const[o,l]of Object.entries(i)){if(o==="type")continue;let u=a.get(o);u||(u=new Map,a.set(o,u));const d=u.get(l)??0;u.set(l,d+1)}}for(const[s,i]of t)e[s]=i.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){b(this,xc,null)}get modifiedIds(){if(c(this,xc))return c(this,xc);const e=[];for(const t of c(this,fn).values())!(t instanceof ct)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return b(this,xc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return c(this,fn).entries()}}vc=new WeakMap,xc=new WeakMap,fn=new WeakMap,jx=new WeakSet,wD=function(){c(this,vc)||(b(this,vc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Rm;class bD extends h1{constructor(t){super();A(this,Rm);const{map:s,hash:i,transfer:r}=t.serializable,a=structuredClone(s,r?{transfer:r}:null);b(this,Rm,{map:a,hash:i,transfer:r})}get print(){st("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Rm)}get modifiedIds(){return De(this,"modifiedIds",{ids:new Set,hash:""})}}Rm=new WeakMap;var sh;class JB{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){A(this,sh,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,sh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||c(this,sh).has(e.loadedName))){if(Vt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:a}=e,o=new FontFace(i,r,a);this.addNativeFontFace(o);try{await o.load(),c(this,sh).add(i),s==null||s(e)}catch{we(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}st("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw we(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return De(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return De(this,"isSyncFontLoadingSupported",Hn||wn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Vt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return De(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(S,E){return S.charCodeAt(E)<<24|S.charCodeAt(E+1)<<16|S.charCodeAt(E+2)<<8|S.charCodeAt(E+3)&255}function i(S,E,P,T){const N=S.substring(0,E),I=S.substring(E+P);return N+T+I}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function d(S,E){if(++u>30){we("Load test font never loaded."),E();return}if(l.font="30px "+S,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(d.bind(null,S,E))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=i(p,976,f.length,f);const g=16,m=1482184792;let w=s(p,g);for(r=0,a=f.length-3;r<a;r+=4)w=w-m+s(f,r)|0;r<f.length&&(w=w-m+s(f+"XXX",r)|0),p=i(p,g,4,OB(w));const v=`url(data:font/opentype;base64,${btoa(p)});`,x=`@font-face {font-family:"${f}";src:${v}}`;this.insertRule(x);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const S of[e.loadedName,f]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=S,_.append(E)}this._document.body.append(_),d(f,()=>{_.remove(),t.complete()})}}sh=new WeakMap;class ez{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${zI(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(a){we(`getPathGenerator - ignoring character: "${a}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=r}}function tz(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Hn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function nz(n){if(Hn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Hg(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Sy(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const T_=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,sz=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",iz=zB.bind(null,T_,sz);var oa,Lx;class rz{constructor(){A(this,oa,new Map);A(this,Lx,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};c(this,Lx).then(()=>{for(const[i]of c(this,oa))i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){we("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}c(this,oa).set(t,i)}removeEventListener(e,t){const s=c(this,oa).get(t);s==null||s(),c(this,oa).delete(t)}terminate(){for(const[,e]of c(this,oa))e==null||e();c(this,oa).clear()}}oa=new WeakMap,Lx=new WeakMap;const Ay={DATA:1,ERROR:2},jt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Wk(){}function ss(n){if(n instanceof yl||n instanceof l_||n instanceof Bk||n instanceof ox||n instanceof Ab)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||st('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new yl(n.message);case"InvalidPDFException":return new l_(n.message);case"PasswordException":return new Bk(n.message,n.code);case"ResponseException":return new ox(n.message,n.status,n.missing);case"UnknownErrorException":return new Ab(n.message,n.details)}return new Ab(n.message,n.toString())}var ih,ui,_D,SD,AD,iv;class Hf{constructor(e,t,s){A(this,ui);A(this,ih,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",k(this,ui,_D).bind(this),{signal:c(this,ih).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(a){r.reject(a)}return r.promise}sendWithStream(e,t,s,i){const r=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:r,data:t,desiredSize:u.desiredSize},i),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[r].pullCall=d,l.postMessage({sourceName:a,targetName:o,stream:jt.PULL,streamId:r,desiredSize:u.desiredSize}),d.promise},cancel:u=>{Vt(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[r].cancelCall=d,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:jt.CANCEL,streamId:r,reason:ss(u)}),d.promise}},s)}destroy(){var e;(e=c(this,ih))==null||e.abort(),b(this,ih,null)}}ih=new WeakMap,ui=new WeakSet,_D=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){k(this,ui,AD).call(this,e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Ay.DATA)i.resolve(e.data);else if(e.callback===Ay.ERROR)i.reject(ss(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(a){r.postMessage({sourceName:s,targetName:i,callback:Ay.DATA,callbackId:e.callbackId,data:a})},function(a){r.postMessage({sourceName:s,targetName:i,callback:Ay.ERROR,callbackId:e.callbackId,reason:ss(a)})});return}if(e.streamId){k(this,ui,SD).call(this,e);return}t(e.data)},SD=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(u,d=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=d,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:jt.ENQUEUE,streamId:t,chunk:u},f)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:jt.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){Vt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:jt.ERROR,streamId:t,reason:ss(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){r.postMessage({sourceName:s,targetName:i,stream:jt.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:jt.START_COMPLETE,streamId:t,reason:ss(u)})})},AD=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case jt.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(ss(e.reason));break;case jt.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(ss(e.reason));break;case jt.PULL:if(!o){r.postMessage({sourceName:s,targetName:i,stream:jt.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||Wk).then(function(){r.postMessage({sourceName:s,targetName:i,stream:jt.PULL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:jt.PULL_COMPLETE,streamId:t,reason:ss(u)})});break;case jt.ENQUEUE:if(Vt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case jt.CLOSE:if(Vt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),k(this,ui,iv).call(this,a,t);break;case jt.ERROR:Vt(a,"error should have stream controller"),a.controller.error(ss(e.reason)),k(this,ui,iv).call(this,a,t);break;case jt.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(ss(e.reason)),k(this,ui,iv).call(this,a,t);break;case jt.CANCEL:if(!o)break;const l=ss(e.reason);Promise.try(o.onCancel||Wk,l).then(function(){r.postMessage({sourceName:s,targetName:i,stream:jt.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:jt.CANCEL_COMPLETE,streamId:t,reason:ss(u)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},iv=async function(e,t){var s,i,r;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(i=e.pullCall)==null?void 0:i.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var Im;class CD{constructor({enableHWA:e=!1}){A(this,Im,!1);b(this,Im,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!c(this,Im)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){st("Abstract method `_createCanvas` called.")}}Im=new WeakMap;class az extends CD{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class kD{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){st("Abstract method `_fetch` called.")}}class qk extends kD{async _fetch(e){const t=await Wg(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Hg(t)}}class ED{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,r){return"none"}destroy(e=!1){}}var wc,rh,la,ca,Nn,bc,_c,se,kn,Wf,Wu,rv,qu,TD,P_,Gu,qf,Gf,N_,Kf;class oz extends ED{constructor({docId:t,ownerDocument:s=globalThis.document}){super();A(this,se);A(this,wc);A(this,rh);A(this,la);A(this,ca);A(this,Nn);A(this,bc);A(this,_c,0);b(this,ca,t),b(this,Nn,s)}addFilter(t){if(!t)return"none";let s=c(this,se,kn).get(t);if(s)return s;const[i,r,a]=k(this,se,rv).call(this,t),o=t.length===1?i:`${i}${r}${a}`;if(s=c(this,se,kn).get(o),s)return c(this,se,kn).set(t,s),s;const l=`g_${c(this,ca)}_transfer_map_${Jt(this,_c)._++}`,u=k(this,se,qu).call(this,l);c(this,se,kn).set(t,u),c(this,se,kn).set(o,u);const d=k(this,se,Gu).call(this,l);return k(this,se,Gf).call(this,i,r,a,d),u}addHCMFilter(t,s){var g;const i=`${t}-${s}`,r="base";let a=c(this,se,Wf).get(r);if((a==null?void 0:a.key)===i||(a?((g=a.filter)==null||g.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},c(this,se,Wf).set(r,a)),!t||!s))return a.url;const o=k(this,se,Kf).call(this,t);t=he.makeHexColor(...o);const l=k(this,se,Kf).call(this,s);if(s=he.makeHexColor(...l),c(this,se,Wu).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return a.url;const u=new Array(256);for(let m=0;m<=255;m++){const w=m/255;u[m]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const d=u.join(","),f=`g_${c(this,ca)}_hcm_filter`,p=a.filter=k(this,se,Gu).call(this,f);k(this,se,Gf).call(this,d,d,d,p),k(this,se,P_).call(this,p);const y=(m,w)=>{const v=o[m]/255,x=l[m]/255,_=new Array(w+1);for(let S=0;S<=w;S++)_[S]=v+S/w*(x-v);return _.join(",")};return k(this,se,Gf).call(this,y(0,5),y(1,5),y(2,5),p),a.url=k(this,se,qu).call(this,f),a.url}addAlphaFilter(t){let s=c(this,se,kn).get(t);if(s)return s;const[i]=k(this,se,rv).call(this,[t]),r=`alpha_${i}`;if(s=c(this,se,kn).get(r),s)return c(this,se,kn).set(t,s),s;const a=`g_${c(this,ca)}_alpha_map_${Jt(this,_c)._++}`,o=k(this,se,qu).call(this,a);c(this,se,kn).set(t,o),c(this,se,kn).set(r,o);const l=k(this,se,Gu).call(this,a);return k(this,se,N_).call(this,i,l),o}addLuminosityFilter(t){let s=c(this,se,kn).get(t||"luminosity");if(s)return s;let i,r;if(t?([i]=k(this,se,rv).call(this,[t]),r=`luminosity_${i}`):r="luminosity",s=c(this,se,kn).get(r),s)return c(this,se,kn).set(t,s),s;const a=`g_${c(this,ca)}_luminosity_map_${Jt(this,_c)._++}`,o=k(this,se,qu).call(this,a);c(this,se,kn).set(t,o),c(this,se,kn).set(r,o);const l=k(this,se,Gu).call(this,a);return k(this,se,TD).call(this,l),t&&k(this,se,N_).call(this,i,l),o}addHighlightHCMFilter(t,s,i,r,a){var x;const o=`${s}-${i}-${r}-${a}`;let l=c(this,se,Wf).get(t);if((l==null?void 0:l.key)===o||(l?((x=l.filter)==null||x.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},c(this,se,Wf).set(t,l)),!s||!i))return l.url;const[u,d]=[s,i].map(k(this,se,Kf).bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[y,g]=[r,a].map(k(this,se,Kf).bind(this));p<f&&([f,p,y,g]=[p,f,g,y]),c(this,se,Wu).style.color="";const m=(_,S,E)=>{const P=new Array(256),T=(p-f)/E,N=_/255,I=(S-_)/(255*E);let D=0;for(let j=0;j<=E;j++){const L=Math.round(f+j*T),z=N+j*I;for(let F=D;F<=L;F++)P[F]=z;D=L+1}for(let j=D;j<256;j++)P[j]=P[D-1];return P.join(",")},w=`g_${c(this,ca)}_hcm_${t}_filter`,v=l.filter=k(this,se,Gu).call(this,w);return k(this,se,P_).call(this,v),k(this,se,Gf).call(this,m(y[0],g[0],5),m(y[1],g[1],5),m(y[2],g[2],5),v),l.url=k(this,se,qu).call(this,w),l.url}destroy(t=!1){var s,i,r,a;t&&((s=c(this,bc))!=null&&s.size)||((i=c(this,la))==null||i.parentNode.parentNode.remove(),b(this,la,null),(r=c(this,rh))==null||r.clear(),b(this,rh,null),(a=c(this,bc))==null||a.clear(),b(this,bc,null),b(this,_c,0))}}wc=new WeakMap,rh=new WeakMap,la=new WeakMap,ca=new WeakMap,Nn=new WeakMap,bc=new WeakMap,_c=new WeakMap,se=new WeakSet,kn=function(){return c(this,rh)||b(this,rh,new Map)},Wf=function(){return c(this,bc)||b(this,bc,new Map)},Wu=function(){if(!c(this,la)){const t=c(this,Nn).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=c(this,Nn).createElementNS(Br,"svg");i.setAttribute("width",0),i.setAttribute("height",0),b(this,la,c(this,Nn).createElementNS(Br,"defs")),t.append(i),i.append(c(this,la)),c(this,Nn).body.append(t)}return c(this,la)},rv=function(t){if(t.length===1){const u=t[0],d=new Array(256);for(let p=0;p<256;p++)d[p]=u[p]/255;const f=d.join(",");return[f,f,f]}const[s,i,r]=t,a=new Array(256),o=new Array(256),l=new Array(256);for(let u=0;u<256;u++)a[u]=s[u]/255,o[u]=i[u]/255,l[u]=r[u]/255;return[a.join(","),o.join(","),l.join(",")]},qu=function(t){if(c(this,wc)===void 0){b(this,wc,"");const s=c(this,Nn).URL;s!==c(this,Nn).baseURI&&(Aw(s)?we('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,wc,$I(s,"")))}return`url(${c(this,wc)}#${t})`},TD=function(t){const s=c(this,Nn).createElementNS(Br,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},P_=function(t){const s=c(this,Nn).createElementNS(Br,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},Gu=function(t){const s=c(this,Nn).createElementNS(Br,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),c(this,se,Wu).append(s),s},qf=function(t,s,i){const r=c(this,Nn).createElementNS(Br,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)},Gf=function(t,s,i,r){const a=c(this,Nn).createElementNS(Br,"feComponentTransfer");r.append(a),k(this,se,qf).call(this,a,"feFuncR",t),k(this,se,qf).call(this,a,"feFuncG",s),k(this,se,qf).call(this,a,"feFuncB",i)},N_=function(t,s){const i=c(this,Nn).createElementNS(Br,"feComponentTransfer");s.append(i),k(this,se,qf).call(this,i,"feFuncA",t)},Kf=function(t){return c(this,se,Wu).style.color=t,d1(getComputedStyle(c(this,se,Wu)).getPropertyValue("color"))};class PD{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){st("Abstract method `_fetch` called.")}}class Gk extends PD{async _fetch(e){const t=await Wg(e,"arraybuffer");return new Uint8Array(t)}}class ND{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){st("Abstract method `_fetch` called.")}}class Kk extends ND{async _fetch(e){const t=await Wg(e,"arraybuffer");return new Uint8Array(t)}}Hn&&we("Please use the `legacy` build in Node.js environments.");async function f1(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class lz extends ED{}class cz extends CD{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class uz extends kD{async _fetch(e){return f1(e)}}class dz extends PD{async _fetch(e){return f1(e)}}class hz extends ND{async _fetch(e){return f1(e)}}const yn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function R_(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),n.clip(i)}class p1{isModifyingCurrentTransform(){return!1}getPattern(){st("Abstract method `getPattern` called.")}}class fz extends p1{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let r;if(i===yn.STROKE||i===yn.FILL){const a=t.current.getClippedPathBoundingBox(i,xt(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,l),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),s=he.transform(s,[1,0,0,1,a[0],a[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),R_(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),r=e.createPattern(u.canvas,"no-repeat");const f=new DOMMatrix(s);r.setTransform(f)}else R_(e,this._bbox),r=this._createGradient(e);return r}}function Eb(n,e,t,s,i,r,a,o){const l=e.coords,u=e.colors,d=n.data,f=n.width*4;let p;l[t+1]>l[s+1]&&(p=t,t=s,s=p,p=r,r=a,a=p),l[s+1]>l[i+1]&&(p=s,s=i,i=p,p=a,a=o,o=p),l[t+1]>l[s+1]&&(p=t,t=s,s=p,p=r,r=a,a=p);const y=(l[t]+e.offsetX)*e.scaleX,g=(l[t+1]+e.offsetY)*e.scaleY,m=(l[s]+e.offsetX)*e.scaleX,w=(l[s+1]+e.offsetY)*e.scaleY,v=(l[i]+e.offsetX)*e.scaleX,x=(l[i+1]+e.offsetY)*e.scaleY;if(g>=x)return;const _=u[r],S=u[r+1],E=u[r+2],P=u[a],T=u[a+1],N=u[a+2],I=u[o],D=u[o+1],j=u[o+2],L=Math.round(g),z=Math.round(x);let F,J,$,B,O,H,ee,de;for(let me=L;me<=z;me++){if(me<w){const Q=me<g?0:(g-me)/(g-w);F=y-(y-m)*Q,J=_-(_-P)*Q,$=S-(S-T)*Q,B=E-(E-N)*Q}else{let Q;me>x?Q=1:w===x?Q=0:Q=(w-me)/(w-x),F=m-(m-v)*Q,J=P-(P-I)*Q,$=T-(T-D)*Q,B=N-(N-j)*Q}let Ce;me<g?Ce=0:me>x?Ce=1:Ce=(g-me)/(g-x),O=y-(y-v)*Ce,H=_-(_-I)*Ce,ee=S-(S-D)*Ce,de=E-(E-j)*Ce;const Je=Math.round(Math.min(F,O)),At=Math.round(Math.max(F,O));let at=f*me+Je*4;for(let Q=Je;Q<=At;Q++)Ce=(F-Q)/(F-O),Ce<0?Ce=0:Ce>1&&(Ce=1),d[at++]=J-(J-H)*Ce|0,d[at++]=$-($-ee)*Ce|0,d[at++]=B-(B-de)*Ce|0,d[at++]=255}}function pz(n,e,t){const s=e.coords,i=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(s.length/o)-1,u=o-1;for(r=0;r<l;r++){let d=r*o;for(let f=0;f<u;f++,d++)Eb(n,t,s[d],s[d+1],s[d+o],i[d],i[d+1],i[d+o]),Eb(n,t,s[d+o+1],s[d+1],s[d+o],i[d+o+1],i[d+1],i[d+o])}break;case"triangles":for(r=0,a=s.length;r<a;r+=3)Eb(n,t,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class mz extends p1{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,d=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),y=u/f,g=d/p,m={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/y,scaleY:1/g},w=f+2*2,v=p+2*2,x=s.getCanvas("mesh",w,v),_=x.context,S=_.createImageData(f,p);if(t){const P=S.data;for(let T=0,N=P.length;T<N;T+=4)P[T]=t[0],P[T+1]=t[1],P[T+2]=t[2],P[T+3]=255}for(const P of this._figures)pz(S,P,m);return _.putImageData(S,2,2),{canvas:x.canvas,offsetX:o-2*y,offsetY:l-2*g,scaleX:y,scaleY:g}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,i){R_(e,this._bbox);const r=new Float32Array(2);if(i===yn.SHADING)he.singularValueDecompose2dScale(xt(e),r);else if(this.matrix){he.singularValueDecompose2dScale(this.matrix,r);const[o,l]=r;he.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=o,r[1]*=l}else he.singularValueDecompose2dScale(t.baseTransform,r);const a=this._createMeshCanvas(r,i===yn.SHADING?null:this._background,t.cachedCanvases);return i!==yn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class gz extends p1{getPattern(){return"hotpink"}}function yz(n){switch(n[0]){case"RadialAxial":return new fz(n);case"Mesh":return new mz(n);case"Dummy":return new gz}throw new Error(`Unknown IR type: ${n[0]}`)}const Xk={COLORED:1,UNCOLORED:2},Ox=class Ox{constructor(e,t,s,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:i,tilingType:r,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),Sw("TilingType: "+r);const d=t[0],f=t[1],p=t[2],y=t[3],g=p-d,m=y-f,w=new Float32Array(2);he.singularValueDecompose2dScale(this.matrix,w);const[v,x]=w;he.singularValueDecompose2dScale(this.baseTransform,w);const _=v*w[0],S=x*w[1];let E=g,P=m,T=!1,N=!1;const I=Math.ceil(l*_),D=Math.ceil(u*S),j=Math.ceil(g*_),L=Math.ceil(m*S);I>=j?E=l:T=!0,D>=L?P=u:N=!0;const z=this.getSizeAndScale(E,this.ctx.canvas.width,_),F=this.getSizeAndScale(P,this.ctx.canvas.height,S),J=e.cachedCanvases.getCanvas("pattern",z.size,F.size),$=J.context,B=o.createCanvasGraphics($);if(B.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(B,i,a),$.translate(-z.scale*d,-F.scale*f),B.transform(z.scale,0,0,F.scale,0,0),$.save(),this.clipBbox(B,d,f,p,y),B.baseTransform=xt(B.ctx),B.executeOperatorList(s),B.endDrawing(),$.restore(),T||N){const O=J.canvas;T&&(E=l),N&&(P=u);const H=this.getSizeAndScale(E,this.ctx.canvas.width,_),ee=this.getSizeAndScale(P,this.ctx.canvas.height,S),de=H.size,me=ee.size,Ce=e.cachedCanvases.getCanvas("pattern-workaround",de,me),Je=Ce.context,At=T?Math.floor(g/l):0,at=N?Math.floor(m/u):0;for(let Q=0;Q<=At;Q++)for(let Ve=0;Ve<=at;Ve++)Je.drawImage(O,de*Q,me*Ve,de,me,0,0,de,me);return{canvas:Ce.canvas,scaleX:H.scale,scaleY:ee.scale,offsetX:d,offsetY:f}}return{canvas:J.canvas,scaleX:z.scale,scaleY:F.scale,offsetX:d,offsetY:f}}getSizeAndScale(e,t,s){const i=Math.max(Ox.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=i?r=i:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,i,r){const a=i-t,o=r-s;e.ctx.rect(t,s,a,o),he.axialAlignedBoundingBox([t,s,i,r],xt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,r=e.current;switch(t){case Xk.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;i.fillStyle=r.fillColor=a,i.strokeStyle=r.strokeColor=o;break;case Xk.UNCOLORED:i.fillStyle=i.strokeStyle=s,r.fillColor=r.strokeColor=s;break;default:throw new LB(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,i){let r=s;i!==yn.SHADING&&(r=he.transform(r,t.baseTransform),this.matrix&&(r=he.transform(r,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(r);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};q(Ox,"MAX_PATTERN_SIZE",3e3);let I_=Ox;function vz({src:n,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=wn.isLittleEndian?4278190080:255,[l,u]=a?[r,o]:[o,r],d=s>>3,f=s&7,p=n.length;t=new Uint32Array(t.buffer);let y=0;for(let g=0;g<i;g++){for(const w=e+d;e<w;e++){const v=e<p?n[e]:255;t[y++]=v&128?u:l,t[y++]=v&64?u:l,t[y++]=v&32?u:l,t[y++]=v&16?u:l,t[y++]=v&8?u:l,t[y++]=v&4?u:l,t[y++]=v&2?u:l,t[y++]=v&1?u:l}if(f===0)continue;const m=e<p?n[e++]:255;for(let w=0;w<f;w++)t[y++]=m&1<<7-w?u:l}return{srcPos:e,destPos:y}}const Yk=16,Qk=100,xz=15,Zk=10,fs=16,Tb=new DOMMatrix,Fs=new Float32Array(2),ud=new Float32Array([1/0,1/0,-1/0,-1/0]);function wz(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,i,r,a,o){e.transform(t,s,i,r,a,o),this.__originalTransform(t,s,i,r,a,o)},n.setTransform=function(t,s,i,r,a,o){e.setTransform(t,s,i,r,a,o),this.__originalSetTransform(t,s,i,r,a,o)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,i,r,a,o){e.bezierCurveTo(t,s,i,r,a,o),this.__originalBezierCurveTo(t,s,i,r,a,o)},n.rect=function(t,s,i,r){e.rect(t,s,i,r),this.__originalRect(t,s,i,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class bz{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Cy(n,e,t,s,i,r,a,o,l,u){const[d,f,p,y,g,m]=xt(n);if(f===0&&p===0){const x=a*d+g,_=Math.round(x),S=o*y+m,E=Math.round(S),P=(a+l)*d+g,T=Math.abs(Math.round(P)-_)||1,N=(o+u)*y+m,I=Math.abs(Math.round(N)-E)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(y),_,E),n.drawImage(e,t,s,i,r,0,0,T,I),n.setTransform(d,f,p,y,g,m),[T,I]}if(d===0&&y===0){const x=o*p+g,_=Math.round(x),S=a*f+m,E=Math.round(S),P=(o+u)*p+g,T=Math.abs(Math.round(P)-_)||1,N=(a+l)*f+m,I=Math.abs(Math.round(N)-E)||1;return n.setTransform(0,Math.sign(f),Math.sign(p),0,_,E),n.drawImage(e,t,s,i,r,0,0,I,T),n.setTransform(d,f,p,y,g,m),[I,T]}n.drawImage(e,t,s,i,r,a,o,l,u);const w=Math.hypot(d,f),v=Math.hypot(p,y);return[w*l,v*u]}class Jk{constructor(e,t){q(this,"alphaIsShape",!1);q(this,"fontSize",0);q(this,"fontSizeScale",1);q(this,"textMatrix",null);q(this,"textMatrixScale",1);q(this,"fontMatrix",o_);q(this,"leading",0);q(this,"x",0);q(this,"y",0);q(this,"lineX",0);q(this,"lineY",0);q(this,"charSpacing",0);q(this,"wordSpacing",0);q(this,"textHScale",1);q(this,"textRenderingMode",Cn.FILL);q(this,"textRise",0);q(this,"fillColor","#000000");q(this,"strokeColor","#000000");q(this,"patternFill",!1);q(this,"patternStroke",!1);q(this,"fillAlpha",1);q(this,"strokeAlpha",1);q(this,"lineWidth",1);q(this,"activeSMask",null);q(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=ud.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=yn.FILL,t=null){const s=this.minMax.slice();if(e===yn.STROKE){t||st("Stroke bounding box must include transform."),he.singularValueDecompose2dScale(t,Fs);const i=Fs[0]*this.lineWidth/2,r=Fs[1]*this.lineWidth/2;s[0]-=i,s[1]-=r,s[2]+=i,s[3]+=r}return s}updateClipFromPath(){const e=he.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(ud,0)}getClippedPathBoundingBox(e=yn.FILL,t=null){return he.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function eE(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%fs,r=(t-i)/fs,a=i===0?r:r+1,o=n.createImageData(s,fs);let l=0,u;const d=e.data,f=o.data;let p,y,g,m;if(e.kind===Xy.GRAYSCALE_1BPP){const w=d.byteLength,v=new Uint32Array(f.buffer,0,f.byteLength>>2),x=v.length,_=s+7>>3,S=4294967295,E=wn.isLittleEndian?4278190080:255;for(p=0;p<a;p++){for(g=p<r?fs:i,u=0,y=0;y<g;y++){const P=w-l;let T=0;const N=P>_?s:P*8-7,I=N&-8;let D=0,j=0;for(;T<I;T+=8)j=d[l++],v[u++]=j&128?S:E,v[u++]=j&64?S:E,v[u++]=j&32?S:E,v[u++]=j&16?S:E,v[u++]=j&8?S:E,v[u++]=j&4?S:E,v[u++]=j&2?S:E,v[u++]=j&1?S:E;for(;T<N;T++)D===0&&(j=d[l++],D=128),v[u++]=j&D?S:E,D>>=1}for(;u<x;)v[u++]=0;n.putImageData(o,0,p*fs)}}else if(e.kind===Xy.RGBA_32BPP){for(y=0,m=s*fs*4,p=0;p<r;p++)f.set(d.subarray(l,l+m)),l+=m,n.putImageData(o,0,y),y+=fs;p<a&&(m=s*i*4,f.set(d.subarray(l,l+m)),n.putImageData(o,0,y))}else if(e.kind===Xy.RGB_24BPP)for(g=fs,m=s*g,p=0;p<a;p++){for(p>=r&&(g=i,m=s*g),u=0,y=m;y--;)f[u++]=d[l++],f[u++]=d[l++],f[u++]=d[l++],f[u++]=255;n.putImageData(o,0,p*fs)}else throw new Error(`bad image kind: ${e.kind}`)}function tE(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%fs,r=(t-i)/fs,a=i===0?r:r+1,o=n.createImageData(s,fs);let l=0;const u=e.data,d=o.data;for(let f=0;f<a;f++){const p=f<r?fs:i;({srcPos:l}=vz({src:u,srcPos:l,dest:d,width:s,height:p,nonBlackColor:0})),n.putImageData(o,0,f*fs)}}function kf(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function ky(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function nE(n,e){if(e)return!0;he.singularValueDecompose2dScale(n,Fs);const t=Math.fround(Ir.pixelRatio*vl.PDF_TO_CSS_UNITS);return Fs[0]<=t&&Fs[1]<=t}const _z=["butt","round","square"],Sz=["miter","round","bevel"],Az={},sE={};var qi,D_,M_,j_;const V1=class V1{constructor(e,t,s,i,r,{optionalContentConfig:a,markedContentStack:o=null},l,u){A(this,qi);this.ctx=e,this.current=new Jk(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new bz(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,s){const l=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...xt(this.compositeCtx))}this.ctx.save(),ky(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=xt(this.ctx)}executeOperatorList(e,t,s,i){const r=e.argsArray,a=e.fnArray;let o=t||0;const l=r.length;if(l===o)return o;const u=l-o>Zk&&typeof s=="function",d=u?Date.now()+xz:0;let f=0;const p=this.commonObjs,y=this.objs;let g;for(;;){if(i!==void 0&&o===i.nextBreakPoint)return i.breakIt(o,s),o;if(g=a[o],g!==ax.dependency)this[g].apply(this,r[o]);else for(const m of r[o]){const w=m.startsWith("g_")?p:y;if(!w.has(m))return w.get(m,s),o}if(o++,o===l)return o;if(u&&++f>Zk){if(Date.now()>d)return s(),o;f=0}}}endDrawing(){k(this,qi,D_).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),k(this,qi,M_).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=s,l=i,u="prescale1",d,f;for(;r>2&&o>1||a>2&&l>1;){let p=o,y=l;r>2&&o>1&&(p=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/p),a>2&&l>1&&(y=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/y),d=this.cachedCanvases.getCanvas(u,p,y),f=d.context,f.clearRect(0,0,p,y),f.drawImage(e,0,0,o,l,0,0,p,y),e=d.canvas,o=p,l=y,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:i}=e,r=this.current.fillColor,a=this.current.patternFill,o=xt(t);let l,u,d,f;if((e.bitmap||e.data)&&e.count>1){const I=e.bitmap||e.data.buffer;u=JSON.stringify(a?o:[o.slice(0,4),r]),l=this._cachedBitmapsMap.get(I),l||(l=new Map,this._cachedBitmapsMap.set(I,l));const D=l.get(u);if(D&&!a){const j=Math.round(Math.min(o[0],o[2])+o[4]),L=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:D,offsetX:j,offsetY:L}}d=D}d||(f=this.cachedCanvases.getCanvas("maskCanvas",s,i),tE(f.context,e));let p=he.transform(o,[1/s,0,0,-1/i,0,0]);p=he.transform(p,[1,0,0,1,0,-i]);const y=ud.slice();he.axialAlignedBoundingBox([0,0,s,i],p,y);const[g,m,w,v]=y,x=Math.round(w-g)||1,_=Math.round(v-m)||1,S=this.cachedCanvases.getCanvas("fillCanvas",x,_),E=S.context,P=g,T=m;E.translate(-P,-T),E.transform(...p),d||(d=this._scaleImage(f.canvas,Yi(E)),d=d.img,l&&a&&l.set(u,d)),E.imageSmoothingEnabled=nE(xt(E),e.interpolate),Cy(E,d,0,0,d.width,d.height,0,0,s,i),E.globalCompositeOperation="source-in";const N=he.transform(Yi(E),[1,0,0,1,-P,-T]);return E.fillStyle=a?r.getPattern(t,this,N,yn.FILL):r,E.fillRect(0,0,s,i),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,S.canvas)),{canvas:S.canvas,offsetX:Math.round(P),offsetY:Math.round(T)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=_z[e]}setLineJoin(e){this.ctx.lineJoin=Sz[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx;const r=this.ctx=i.context;r.setTransform(this.suspendedCtx.getTransform()),kf(this.suspendedCtx,r),wz(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),kf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const r=i[0],a=i[1],o=i[2]-r,l=i[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,s,o,l,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,r,a,o,l,u,d,f){let p=e.canvas,y=l-d,g=u-f;if(a)if(y<0||g<0||y+s>p.width||g+i>p.height){const w=this.cachedCanvases.getCanvas("maskExtension",s,i),v=w.context;v.drawImage(p,-y,-g),v.globalCompositeOperation="destination-atop",v.fillStyle=a,v.fillRect(0,0,s,i),v.globalCompositeOperation="source-over",p=w.canvas,y=g=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(y,g,s,i),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(y,g,s,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const m=new Path2D;m.rect(l,u,s,i),t.clip(m),t.globalCompositeOperation="destination-in",t.drawImage(p,y,g,s,i,l,u,s,i),t.restore()}save(){this.inSMaskMode&&kf(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&kf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,i,r,a){this.ctx.transform(e,t,s,i,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){let[i]=t;if(!s){i||(i=t[0]=new Path2D),this[e](i);return}if(!(i instanceof Path2D)){const r=t[0]=new Path2D;for(let a=0,o=i.length;a<o;)switch(i[a++]){case _y.moveTo:r.moveTo(i[a++],i[a++]);break;case _y.lineTo:r.lineTo(i[a++],i[a++]);break;case _y.curveTo:r.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);break;case _y.closePath:r.closePath();break;default:we(`Unrecognized drawing path operator: ${i[a-1]}`);break}i=r}he.axialAlignedBoundingBox(s,xt(this.ctx),this.current.minMax),this[e](i)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const s=this.ctx,i=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const r=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=i.getPattern(s,this,Yi(s),yn.STROKE),r){const a=new Path2D;a.addPath(e,s.getTransform().invertSelf().multiplySelf(r)),e=a}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(yn.STROKE,xt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const s=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let a=!1;if(r){const l=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=i.getPattern(s,this,Yi(s),yn.FILL),l){const u=new Path2D;u.addPath(e,s.getTransform().invertSelf().multiplySelf(l)),e=u}a=!0}const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),a&&s.restore(),t&&this.consumePath(e,o)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=Az}eoClip(){this.pendingClip=sE}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const s=new Path2D,i=t.getTransform().invertSelf();for(const{transform:r,x:a,y:o,fontSize:l,path:u}of e)s.addPath(u,new DOMMatrix(r).preMultiplySelf(i).translate(a,o).scale(l,-l));t.clip(s),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var d;const s=this.commonObjs.get(e),i=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=s.fontMatrix||o_,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&we("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const r=s.loadedName||"sans-serif",a=((d=s.systemFontInfo)==null?void 0:d.css)||`"${r}", ${s.fallbackName}`;let o="normal";s.black?o="900":s.bold&&(o="bold");const l=s.italic?"italic":"normal";let u=t;t<Yk?u=Yk:t>Qk&&(u=Qk),this.current.fontSizeScale=t/u,this.ctx.font=`${l} ${o} ${u}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,i,r){const a=this.ctx,o=this.current,l=o.font,u=o.textRenderingMode,d=o.fontSize/o.fontSizeScale,f=u&Cn.FILL_STROKE_MASK,p=!!(u&Cn.ADD_TO_PATH_FLAG),y=o.patternFill&&!l.missingFile,g=o.patternStroke&&!l.missingFile;let m;if((l.disableFontFace||p||y||g)&&(m=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||y||g){a.save(),a.translate(t,s),a.scale(d,-d);let w;if((f===Cn.FILL||f===Cn.FILL_STROKE)&&(i?(w=a.getTransform(),a.setTransform(...i),a.fill(k(this,qi,j_).call(this,m,w,i))):a.fill(m)),f===Cn.STROKE||f===Cn.FILL_STROKE)if(r){w||(w=a.getTransform()),a.setTransform(...r);const{a:v,b:x,c:_,d:S}=w,E=he.inverseTransform(r),P=he.transform([v,x,_,S,0,0],E);he.singularValueDecompose2dScale(P,Fs),a.lineWidth*=Math.max(Fs[0],Fs[1])/d,a.stroke(k(this,qi,j_).call(this,m,w,r))}else a.lineWidth/=d,a.stroke(m);a.restore()}else(f===Cn.FILL||f===Cn.FILL_STROKE)&&a.fillText(e,t,s),(f===Cn.STROKE||f===Cn.FILL_STROKE)&&a.strokeText(e,t,s);p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:xt(a),x:t,y:s,fontSize:d,path:m})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return De(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const r=this.ctx,a=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,u=t.fontDirection,d=t.textHScale*u,f=e.length,p=s.vertical,y=p?1:-1,g=s.defaultVMetrics,m=i*t.fontMatrix[0],w=t.textRenderingMode===Cn.FILL&&!s.disableFontFace&&!t.patternFill;r.save(),t.textMatrix&&r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),u>0?r.scale(d,-1):r.scale(d,1);let v,x;if(t.patternFill){r.save();const T=t.fillColor.getPattern(r,this,Yi(r),yn.FILL);v=xt(r),r.restore(),r.fillStyle=T}if(t.patternStroke){r.save();const T=t.strokeColor.getPattern(r,this,Yi(r),yn.STROKE);x=xt(r),r.restore(),r.strokeStyle=T}let _=t.lineWidth;const S=t.textMatrixScale;if(S===0||_===0){const T=t.textRenderingMode&Cn.FILL_STROKE_MASK;(T===Cn.STROKE||T===Cn.FILL_STROKE)&&(_=this.getSinglePixelWidth())}else _/=S;if(a!==1&&(r.scale(a,a),_/=a),r.lineWidth=_,s.isInvalidPDFjsFont){const T=[];let N=0;for(const I of e)T.push(I.unicode),N+=I.width;r.fillText(T.join(""),0,0),t.x+=N*m*d,r.restore(),this.compose();return}let E=0,P;for(P=0;P<f;++P){const T=e[P];if(typeof T=="number"){E+=y*T*i/1e3;continue}let N=!1;const I=(T.isSpace?l:0)+o,D=T.fontChar,j=T.accent;let L,z,F=T.width;if(p){const $=T.vmetric||g,B=-(T.vmetric?$[1]:F*.5)*m,O=$[2]*m;F=$?-$[0]:F,L=B/a,z=(E+O)/a}else L=E/a,z=0;if(s.remeasure&&F>0){const $=r.measureText(D).width*1e3/i*a;if(F<$&&this.isFontSubpixelAAEnabled){const B=F/$;N=!0,r.save(),r.scale(B,1),L/=B}else F!==$&&(L+=(F-$)/2e3*i/a)}if(this.contentVisible&&(T.isInFont||s.missingFile)){if(w&&!j)r.fillText(D,L,z);else if(this.paintChar(D,L,z,v,x),j){const $=L+i*j.offset.x/a,B=z-i*j.offset.y/a;this.paintChar(j.fontChar,$,B,v,x)}}const J=p?F*m-I*u:F*m+I*u;E+=J,N&&r.restore()}p?t.y-=E:t.x+=E*d,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,i=s.font,r=s.fontSize,a=s.fontDirection,o=i.vertical?1:-1,l=s.charSpacing,u=s.wordSpacing,d=s.textHScale*a,f=s.fontMatrix||o_,p=e.length,y=s.textRenderingMode===Cn.INVISIBLE;let g,m,w,v;if(!(y||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),s.textMatrix&&t.transform(...s.textMatrix),t.translate(s.x,s.y+s.textRise),t.scale(d,a),g=0;g<p;++g){if(m=e[g],typeof m=="number"){v=o*m*r/1e3,this.ctx.translate(v,0),s.x+=v*d;continue}const x=(m.isSpace?u:0)+l,_=i.charProcOperatorList[m.operatorListId];_?this.contentVisible&&(this.save(),t.scale(r,r),t.transform(...f),this.executeOperatorList(_),this.restore()):we(`Type3 character "${m.operatorListId}" is not available.`);const S=[m.width,0];he.applyTransform(S,f),w=S[0]*r+x,t.translate(w,0),s.x+=w*d}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,i,r,a){const o=new Path2D;o.rect(s,i,r-s,a-i),this.ctx.clip(o),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=this.baseTransform||xt(this.ctx),i={createCanvasGraphics:r=>new V1(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new I_(e,this.ctx,i,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=yz(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,Yi(t),yn.SHADING);const i=Yi(t);if(i){const{width:r,height:a}=t.canvas,o=ud.slice();he.axialAlignedBoundingBox([0,0,r,a],i,o);const[l,u,d,f]=o;this.ctx.fillRect(l,u,d-l,f-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){st("Should not call beginInlineImage")}beginImageData(){st("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=xt(this.ctx),t)){he.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[s,i,r,a]=t,o=new Path2D;o.rect(s,i,r-s,a-i),this.ctx.clip(o),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Sw("TODO: Support non-isolated groups."),e.knockout&&we("Knockout groups not supported.");const s=xt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=ud.slice();he.axialAlignedBoundingBox(e.bbox,xt(t),i);const r=[0,0,t.canvas.width,t.canvas.height];i=he.intersect(i,r)||[0,0,0,0];const a=Math.floor(i[0]),o=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-a,1),u=Math.max(Math.ceil(i[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,u]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,l,u),p=f.context;p.translate(-a,-o),p.transform(...s);let y=new Path2D;const[g,m,w,v]=e.bbox;if(y.rect(g,m,w-g,v-m),e.matrix){const x=new Path2D;x.addPath(y,new DOMMatrix(e.matrix)),y=x}p.clip(y),e.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),kf(t,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=xt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=ud.slice();he.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i,r),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,s,i,r){if(k(this,qi,D_).call(this),ky(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o,he.singularValueDecompose2dScale(xt(this.ctx),Fs);const{viewportScale:l}=this,u=Math.ceil(a*this.outputScaleX*l),d=Math.ceil(o*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(u,d);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(Fs[0],0,0,-Fs[1],0,o*Fs[1]),ky(this.ctx)}else{ky(this.ctx),this.endPath();const l=new Path2D;l.rect(t[0],t[1],a,o),this.ctx.clip(l)}}this.current=new Jk(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),k(this,qi,M_).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,i=this._createMaskCanvas(e),r=i.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(r,i.offsetX,i.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,i=0,r,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const l=xt(o);o.transform(t,s,i,r,0,0);const u=this._createMaskCanvas(e);o.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let d=0,f=a.length;d<f;d+=2){const p=he.transform(l,[t,s,i,r,a[d],a[d+1]]);o.drawImage(u.canvas,p[4],p[5])}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const r of e){const{data:a,width:o,height:l,transform:u}=r,d=this.cachedCanvases.getCanvas("maskCanvas",o,l),f=d.context;f.save();const p=this.getObject(a,r);tE(f,p),f.globalCompositeOperation="source-in",f.fillStyle=i?s.getPattern(f,this,Yi(t),yn.FILL):s,f.fillRect(0,0,o,l),f.restore(),t.save(),t.transform(...u),t.scale(1,-1),Cy(t,d.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){we("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,i){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){we("Dependent image isn't ready yet");return}const a=r.width,o=r.height,l=[];for(let u=0,d=i.length;u<d;u+=2)l.push({transform:[t,0,0,s,i[u],i[u+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,i),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,i=this.ctx;this.save();const{filter:r}=i;r!=="none"&&r!==""&&(i.filter="none"),i.scale(1/t,-1/s);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const u=this.cachedCanvases.getCanvas("inlineImage",t,s).context;eE(u,e),a=this.applyTransferMapsToCanvas(u)}const o=this._scaleImage(a,Yi(i));i.imageSmoothingEnabled=nE(xt(i),e.interpolate),Cy(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const r=e.width,a=e.height,l=this.cachedCanvases.getCanvas("inlineImage",r,a).context;eE(l,e),i=this.applyTransferMapsToCanvas(l)}for(const r of t)s.save(),s.transform(...r.transform),s.scale(1,-1),Cy(s,i,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(s||(this.pendingClip===sE?i.clip(e,"evenodd"):i.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=xt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:r}=this.ctx.getTransform();let a,o;if(s===0&&i===0){const l=Math.abs(t),u=Math.abs(r);if(l===u)if(e===0)a=o=1/l;else{const d=l*e;a=o=d<1?1/d:1}else if(e===0)a=1/l,o=1/u;else{const d=l*e,f=u*e;a=d<1?1/d:1,o=f<1?1/f:1}}else{const l=Math.abs(t*r-s*i),u=Math.hypot(t,s),d=Math.hypot(i,r);if(e===0)a=d/l,o=u/l;else{const f=e*l;a=d>f?d/f:1,o=u>f?u/f:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:i}}=this,[r,a]=this.getScaleForStroking();if(r===a){s.lineWidth=(i||1)*r,s.stroke(e);return}const o=s.getLineDash();t&&s.save(),s.scale(r,a),Tb.a=1/r,Tb.d=1/a;const l=new Path2D;if(l.addPath(e,Tb),o.length>0){const u=Math.max(r,a);s.setLineDash(o.map(d=>d/u)),s.lineDashOffset/=u}s.lineWidth=i||1,s.stroke(l),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};qi=new WeakSet,D_=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},M_=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},j_=function(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i};let Cd=V1;for(const n in ax)Cd.prototype[n]!==void 0&&(Cd.prototype[ax[n]]=Cd.prototype[n]);var Dm,Mm;class Sr{static get workerPort(){return c(this,Dm)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");b(this,Dm,e)}static get workerSrc(){return c(this,Mm)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");b(this,Mm,e)}}Dm=new WeakMap,Mm=new WeakMap,A(Sr,Dm,null),A(Sr,Mm,"");var ah,jm;class Cz{constructor({parsedData:e,rawData:t}){A(this,ah);A(this,jm);b(this,ah,e),b(this,jm,t)}getRaw(){return c(this,jm)}get(e){return c(this,ah).get(e)??null}[Symbol.iterator](){return c(this,ah).entries()}}ah=new WeakMap,jm=new WeakMap;const Ku=Symbol("INTERNAL");var Lm,Om,Fm,oh;class kz{constructor(e,{name:t,intent:s,usage:i,rbGroups:r}){A(this,Lm,!1);A(this,Om,!1);A(this,Fm,!1);A(this,oh,!0);b(this,Lm,!!(e&Ls.DISPLAY)),b(this,Om,!!(e&Ls.PRINT)),this.name=t,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(c(this,Fm))return c(this,oh);if(!c(this,oh))return!1;const{print:e,view:t}=this.usage;return c(this,Lm)?(t==null?void 0:t.viewState)!=="OFF":c(this,Om)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==Ku&&st("Internal method `_setVisible` called."),b(this,Fm,s),b(this,oh,t)}}Lm=new WeakMap,Om=new WeakMap,Fm=new WeakMap,oh=new WeakMap;var No,et,lh,ch,$m,L_;class Ez{constructor(e,t=Ls.DISPLAY){A(this,$m);A(this,No,null);A(this,et,new Map);A(this,lh,null);A(this,ch,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,b(this,ch,e.order);for(const s of e.groups)c(this,et).set(s.id,new kz(t,s));if(e.baseState==="OFF")for(const s of c(this,et).values())s._setVisible(Ku,!1);for(const s of e.on)c(this,et).get(s)._setVisible(Ku,!0);for(const s of e.off)c(this,et).get(s)._setVisible(Ku,!1);b(this,lh,this.getHash())}}isVisible(e){if(c(this,et).size===0)return!0;if(!e)return Sw("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,et).has(e.id)?c(this,et).get(e.id).visible:(we(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return k(this,$m,L_).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,et).has(t))return we(`Optional content group not found: ${t}`),!0;if(c(this,et).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,et).has(t))return we(`Optional content group not found: ${t}`),!0;if(!c(this,et).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,et).has(t))return we(`Optional content group not found: ${t}`),!0;if(!c(this,et).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,et).has(t))return we(`Optional content group not found: ${t}`),!0;if(c(this,et).get(t).visible)return!1}return!0}return we(`Unknown optional content policy ${e.policy}.`),!0}return we(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var r;const i=c(this,et).get(e);if(!i){we(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==e&&((r=c(this,et).get(o))==null||r._setVisible(Ku,!1,!0));i._setVisible(Ku,!!t,!0),b(this,No,null)}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=c(this,et).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!r.visible,t);break}}b(this,No,null)}get hasInitialVisibility(){return c(this,lh)===null||this.getHash()===c(this,lh)}getOrder(){return c(this,et).size?c(this,ch)?c(this,ch).slice():[...c(this,et).keys()]:null}getGroup(e){return c(this,et).get(e)||null}getHash(){if(c(this,No)!==null)return c(this,No);const e=new xD;for(const[t,s]of c(this,et))e.update(`${t}:${s.visible}`);return b(this,No,e.hexdigest())}[Symbol.iterator](){return c(this,et).entries()}}No=new WeakMap,et=new WeakMap,lh=new WeakMap,ch=new WeakMap,$m=new WeakSet,L_=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const r=e[i];let a;if(Array.isArray(r))a=k(this,$m,L_).call(this,r);else if(c(this,et).has(r))a=c(this,et).get(r).visible;else return we(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return s==="And"};class Tz{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Vt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(r==null?void 0:r.length)>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});Vt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,i,r;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Vt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Pz(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new Nz(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class Pz{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=c1(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Nz{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Rz(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let d=o(t);return d=unescape(d),d=l(d),d=u(d),r(d)}if(t=a(n),t){const d=u(t);return r(d)}if(t=s("filename","i").exec(n),t){t=t[1];let d=o(t);return d=u(d),r(d)}function s(d,f){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function i(d,f){if(d){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(d,{fatal:!0}),y=Hg(f);f=p.decode(y),e=!1}catch{}}return f}function r(d){return e&&/[\x80-\xff]/.test(d)&&(d=i("utf-8",d),e&&(d=i("iso-8859-1",d))),d}function a(d){const f=[];let p;const y=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=y.exec(d))!==null;){let[,m,w,v]=p;if(m=parseInt(m,10),m in f){if(m===0)break;continue}f[m]=[w,v]}const g=[];for(let m=0;m<f.length&&m in f;++m){let[w,v]=f[m];v=o(v),w&&(v=unescape(v),m===0&&(v=l(v))),g.push(v)}return g.join("")}function o(d){if(d.startsWith('"')){const f=d.slice(1).split('\\"');for(let p=0;p<f.length;++p){const y=f[p].indexOf('"');y!==-1&&(f[p]=f[p].slice(0,y),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}d=f.join('"')}return d}function l(d){const f=d.indexOf("'");if(f===-1)return d;const p=d.slice(0,f),g=d.slice(f+1).replace(/^[^']*'/,"");return i(p,g)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,y,g){if(y==="q"||y==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,w){return String.fromCharCode(parseInt(w,16))}),i(p,g);try{g=atob(g)}catch{}return i(p,g)})}return""}function RD(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function Cw(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function ID({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function DD(n){const e=n.get("Content-Disposition");if(e){let t=Rz(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(c1(t))return t}return null}function Kg(n,e){return new ox(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function MD(n){return n===200||n===206}function jD(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function LD(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(we(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Iz{constructor(e){q(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=RD(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Vt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Dz(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new Mz(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class Dz{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,jD(s,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=Cw(r.url),!MD(r.status))throw Kg(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:o,suggestedLength:l}=ID({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=DD(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new yl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:LD(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class Mz{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${s-1}`);const a=i.url;fetch(a,jD(r,this._withCredentials,this._abortController)).then(o=>{const l=Cw(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!MD(o.status))throw Kg(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:LD(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Pb=200,Nb=206;function jz(n){const e=n.response;return typeof e!="string"?e:Hg(e).buffer}class Lz{constructor({url:e,httpHeaders:t,withCredentials:s}){q(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=RD(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,a]of this.headers)t.setRequestHeader(r,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Nb):i.expectedStatus=Pb,t.responseType="arraybuffer",Vt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var i;const s=this.pendingRequests[e];s&&((i=s.onProgress)==null||i.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||Pb;if(!(r===Pb&&s.expectedStatus===Nb)&&r!==s.expectedStatus){s.onError(i.status);return}const o=jz(i);if(r===Nb){const l=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?s.onDone({begin:parseInt(u[1],10),chunk:o}):(we('Missing or invalid "Content-Range" header.'),s.onError(0))}else o?s.onDone({begin:0,chunk:o}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Oz{constructor(e){this._source=e,this._manager=new Lz(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Vt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Fz(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new $z(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class Fz{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Cw(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...u]=o.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:a}=ID({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=DD(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Kg(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class $z{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Cw((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Kg(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Vz=/^[a-z][a-z0-9\-+.]+:/i;function Bz(n){if(Vz.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class zz{constructor(e){this.source=e,this.url=Bz(e.url),Vt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Vt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Uz(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new Hz(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class Uz{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Kg(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new yl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Hz{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ef=Symbol("INITIAL_DATA");var Cs,Vm,O_;class OD{constructor(){A(this,Vm);A(this,Cs,Object.create(null))}get(e,t=null){if(t){const i=k(this,Vm,O_).call(this,e);return i.promise.then(()=>t(i.data)),null}const s=c(this,Cs)[e];if(!s||s.data===Ef)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=c(this,Cs)[e];return!!t&&t.data!==Ef}delete(e){const t=c(this,Cs)[e];return!t||t.data===Ef?!1:(delete c(this,Cs)[e],!0)}resolve(e,t=null){const s=k(this,Vm,O_).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in c(this,Cs)){const{data:s}=c(this,Cs)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}b(this,Cs,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,Cs)){const{data:t}=c(this,Cs)[e];t!==Ef&&(yield[e,t])}}}Cs=new WeakMap,Vm=new WeakSet,O_=function(e){var t;return(t=c(this,Cs))[e]||(t[e]={...Promise.withResolvers(),data:Ef})};const Wz=1e5,iE=30;var sT,Ro,cs,Bm,zm,Sc,ua,Um,Hm,Ac,uh,dh,Io,hh,Wm,fh,Cc,qm,Gm,ph,kc,Km,Do,mh,za,FD,$D,F_,Ws,av,$_,VD,BD;const Ut=class Ut{constructor({textContentSource:e,container:t,viewport:s}){A(this,za);A(this,Ro,Promise.withResolvers());A(this,cs,null);A(this,Bm,!1);A(this,zm,!!((sT=globalThis.FontInspector)!=null&&sT.enabled));A(this,Sc,null);A(this,ua,null);A(this,Um,0);A(this,Hm,0);A(this,Ac,null);A(this,uh,null);A(this,dh,0);A(this,Io,0);A(this,hh,Object.create(null));A(this,Wm,[]);A(this,fh,null);A(this,Cc,[]);A(this,qm,new WeakMap);A(this,Gm,null);var l;if(e instanceof ReadableStream)b(this,fh,e);else if(typeof e=="object")b(this,fh,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,cs,b(this,uh,t)),b(this,Io,s.scale*Ir.pixelRatio),b(this,dh,s.rotation),b(this,ua,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:a,pageY:o}=s.rawDims;b(this,Gm,[1,0,0,-1,-a,o+r]),b(this,Hm,i),b(this,Um,r),k(l=Ut,Ws,VD).call(l),bu(t,s),c(this,Ro).promise.finally(()=>{c(Ut,mh).delete(this),b(this,ua,null),b(this,hh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=wn.platform;return De(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,Ac).read().then(({value:t,done:s})=>{if(s){c(this,Ro).resolve();return}c(this,Sc)??b(this,Sc,t.lang),Object.assign(c(this,hh),t.styles),k(this,za,FD).call(this,t.items),e()},c(this,Ro).reject)};return b(this,Ac,c(this,fh).getReader()),c(Ut,mh).add(this),e(),c(this,Ro).promise}update({viewport:e,onBefore:t=null}){var r;const s=e.scale*Ir.pixelRatio,i=e.rotation;if(i!==c(this,dh)&&(t==null||t(),b(this,dh,i),bu(c(this,uh),{rotation:i})),s!==c(this,Io)){t==null||t(),b(this,Io,s);const a={div:null,properties:null,ctx:k(r=Ut,Ws,av).call(r,c(this,Sc))};for(const o of c(this,Cc))a.properties=c(this,qm).get(o),a.div=o,k(this,za,F_).call(this,a)}}cancel(){var t;const e=new yl("TextLayer task cancelled.");(t=c(this,Ac))==null||t.cancel(e).catch(()=>{}),b(this,Ac,null),c(this,Ro).reject(e)}get textDivs(){return c(this,Cc)}get textContentItemsStr(){return c(this,Wm)}static cleanup(){if(!(c(this,mh).size>0)){c(this,ph).clear();for(const{canvas:e}of c(this,kc).values())e.remove();c(this,kc).clear()}}};Ro=new WeakMap,cs=new WeakMap,Bm=new WeakMap,zm=new WeakMap,Sc=new WeakMap,ua=new WeakMap,Um=new WeakMap,Hm=new WeakMap,Ac=new WeakMap,uh=new WeakMap,dh=new WeakMap,Io=new WeakMap,hh=new WeakMap,Wm=new WeakMap,fh=new WeakMap,Cc=new WeakMap,qm=new WeakMap,Gm=new WeakMap,ph=new WeakMap,kc=new WeakMap,Km=new WeakMap,Do=new WeakMap,mh=new WeakMap,za=new WeakSet,FD=function(e){var i,r;if(c(this,Bm))return;(r=c(this,ua)).ctx??(r.ctx=k(i=Ut,Ws,av).call(i,c(this,Sc)));const t=c(this,Cc),s=c(this,Wm);for(const a of e){if(t.length>Wz){we("Ignoring additional textDivs for performance reasons."),b(this,Bm,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=c(this,cs);b(this,cs,document.createElement("span")),c(this,cs).classList.add("markedContent"),a.id!==null&&c(this,cs).setAttribute("id",`${a.id}`),o.append(c(this,cs))}else a.type==="endMarkedContent"&&b(this,cs,c(this,cs).parentNode);continue}s.push(a.str),k(this,za,$D).call(this,a)}},$D=function(e){var m;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,Cc).push(t);const i=he.transform(c(this,Gm),e.transform);let r=Math.atan2(i[1],i[0]);const a=c(this,hh)[e.fontName];a.vertical&&(r+=Math.PI/2);let o=c(this,zm)&&a.fontSubstitution||a.fontFamily;o=Ut.fontFamilyMap.get(o)||o;const l=Math.hypot(i[2],i[3]),u=l*k(m=Ut,Ws,BD).call(m,o,a,c(this,Sc));let d,f;r===0?(d=i[4],f=i[5]-u):(d=i[4]+u*Math.sin(r),f=i[5]-u*Math.cos(r));const p="calc(var(--total-scale-factor) *",y=t.style;c(this,cs)===c(this,uh)?(y.left=`${(100*d/c(this,Hm)).toFixed(2)}%`,y.top=`${(100*f/c(this,Um)).toFixed(2)}%`):(y.left=`${p}${d.toFixed(2)}px)`,y.top=`${p}${f.toFixed(2)}px)`),y.fontSize=`${p}${(c(Ut,Do)*l).toFixed(2)}px)`,y.fontFamily=o,s.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,zm)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let g=!1;if(e.str.length>1)g=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);w!==v&&Math.max(w,v)/Math.min(w,v)>1.5&&(g=!0)}if(g&&(s.canvasWidth=a.vertical?e.height:e.width),c(this,qm).set(t,s),c(this,ua).div=t,c(this,ua).properties=s,k(this,za,F_).call(this,c(this,ua)),s.hasText&&c(this,cs).append(t),s.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),c(this,cs).append(w)}},F_=function(e){var o;const{div:t,properties:s,ctx:i}=e,{style:r}=t;let a="";if(c(Ut,Do)>1&&(a=`scale(${1/c(Ut,Do)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=r,{canvasWidth:u,fontSize:d}=s;k(o=Ut,Ws,$_).call(o,i,d*c(this,Io),l);const{width:f}=i.measureText(t.textContent);f>0&&(a=`scaleX(${u*c(this,Io)/f}) ${a}`)}s.angle!==0&&(a=`rotate(${s.angle}deg) ${a}`),a.length>0&&(r.transform=a)},Ws=new WeakSet,av=function(e=null){let t=c(this,kc).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,kc).set(e,t),c(this,Km).set(t,{size:0,family:""})}return t},$_=function(e,t,s){const i=c(this,Km).get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)},VD=function(){if(c(this,Do)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),b(this,Do,e.getBoundingClientRect().height),e.remove()},BD=function(e,t,s){const i=c(this,ph).get(e);if(i)return i;const r=k(this,Ws,av).call(this,s);r.canvas.width=r.canvas.height=iE,k(this,Ws,$_).call(this,r,iE,e);const a=r.measureText(""),o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let u=.8;return o?u=o/(o+l):(wn.platform.isFirefox&&we("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),c(this,ph).set(e,u),u},A(Ut,Ws),A(Ut,ph,new Map),A(Ut,kc,new Map),A(Ut,Km,new WeakMap),A(Ut,Do,null),A(Ut,mh,new Set);let $p=Ut;class Vp{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(r){var l;if(!r)return;let a=null;const o=r.name;if(o==="#text")a=r.value;else if(Vp.shouldBuildText(o))(l=r==null?void 0:r.attributes)!=null&&l.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&t.push({str:a}),!!r.children)for(const u of r.children)i(u)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const qz=100;function zD(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new V_,{docId:t}=e,s=n.url?tz(n.url):null,i=n.data?nz(n.data):null,r=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,l=n.range instanceof UD?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let d=n.worker instanceof Bp?n.worker:null;const f=n.verbosity,p=typeof n.docBaseUrl=="string"&&!Aw(n.docBaseUrl)?n.docBaseUrl:null,y=Sy(n.cMapUrl),g=n.cMapPacked!==!1,m=n.CMapReaderFactory||(Hn?uz:qk),w=Sy(n.iccUrl),v=Sy(n.standardFontDataUrl),x=n.StandardFontDataFactory||(Hn?dz:Gk),_=Sy(n.wasmUrl),S=n.WasmFactory||(Hn?hz:Kk),E=n.stopAtErrors!==!0,P=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,T=n.isEvalSupported!==!1,N=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Hn,I=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Hn&&(wn.platform.isFirefox||!globalThis.chrome),D=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,j=typeof n.disableFontFace=="boolean"?n.disableFontFace:Hn,L=n.fontExtraProperties===!0,z=n.enableXfa===!0,F=n.ownerDocument||globalThis.document,J=n.disableRange===!0,$=n.disableStream===!0,B=n.disableAutoFetch===!0,O=n.pdfBug===!0,H=n.CanvasFactory||(Hn?cz:az),ee=n.FilterFactory||(Hn?lz:oz),de=n.enableHWA===!0,me=n.useWasm!==!1,Ce=l?l.length:n.length??NaN,Je=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Hn&&!j,At=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(m===qk&&x===Gk&&S===Kk&&y&&v&&_&&$f(y,document.baseURI)&&$f(v,document.baseURI)&&$f(_,document.baseURI)),at=null;DB(f);const Q={canvasFactory:new H({ownerDocument:F,enableHWA:de}),filterFactory:new ee({docId:t,ownerDocument:F}),cMapReaderFactory:At?null:new m({baseUrl:y,isCompressed:g}),standardFontDataFactory:At?null:new x({baseUrl:v}),wasmFactory:At?null:new S({baseUrl:_})};d||(d=Bp.create({verbosity:f,port:Sr.workerPort}),e._worker=d);const Ve={docId:t,apiVersion:"5.3.93",data:i,password:o,disableAutoFetch:B,rangeChunkSize:u,length:Ce,docBaseUrl:p,enableXfa:z,evaluatorOptions:{maxImageSize:P,disableFontFace:j,ignoreErrors:E,isEvalSupported:T,isOffscreenCanvasSupported:N,isImageDecoderSupported:I,canvasMaxAreaInBytes:D,fontExtraProperties:L,useSystemFonts:Je,useWasm:me,useWorkerFetch:At,cMapUrl:y,iccUrl:w,standardFontDataUrl:v,wasmUrl:_}},Ct={ownerDocument:F,pdfBug:O,styleElement:at,loadingParams:{disableAutoFetch:B,enableXfa:z}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const We=d.messageHandler.sendWithPromise("GetDocRequest",Ve,i?[i.buffer]:null);let Ie;if(l)Ie=new Tz(l,{disableRange:J,disableStream:$});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Me=$f(s)?Iz:Hn?zz:Oz;Ie=new Me({url:s,length:Ce,httpHeaders:r,withCredentials:a,rangeChunkSize:u,disableRange:J,disableStream:$})}return We.then(Me=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Zt=new Hf(t,Me,d.port),Ln=new Xz(Zt,e,Ie,Ct,Q);e._transport=Ln,Zt.send("Ready",null)})}).catch(e._capability.reject),e}var Fx;const $x=class $x{constructor(){q(this,"_capability",Promise.withResolvers());q(this,"_transport",null);q(this,"_worker",null);q(this,"docId",`d${Jt($x,Fx)._++}`);q(this,"destroyed",!1);q(this,"onPassword",null);q(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Fx=new WeakMap,A($x,Fx,0);let V_=$x;var Ec,Xm,Ym,Qm,Zm;class UD{constructor(e,t,s=!1,i=null){A(this,Ec,Promise.withResolvers());A(this,Xm,[]);A(this,Ym,[]);A(this,Qm,[]);A(this,Zm,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i}addRangeListener(e){c(this,Zm).push(e)}addProgressListener(e){c(this,Qm).push(e)}addProgressiveReadListener(e){c(this,Ym).push(e)}addProgressiveDoneListener(e){c(this,Xm).push(e)}onDataRange(e,t){for(const s of c(this,Zm))s(e,t)}onDataProgress(e,t){c(this,Ec).promise.then(()=>{for(const s of c(this,Qm))s(e,t)})}onDataProgressiveRead(e){c(this,Ec).promise.then(()=>{for(const t of c(this,Ym))t(e)})}onDataProgressiveDone(){c(this,Ec).promise.then(()=>{for(const e of c(this,Xm))e()})}transportReady(){c(this,Ec).resolve()}requestDataRange(e,t){st("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Ec=new WeakMap,Xm=new WeakMap,Ym=new WeakMap,Qm=new WeakMap,Zm=new WeakMap;class Gz{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return De(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var da,Tc,Xf;class Kz{constructor(e,t,s,i=!1){A(this,Tc);A(this,da,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new Uk:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new OD,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new qg({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return De(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:i=so.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:d=null,isEditing:f=!1}){var S,E;(S=this._stats)==null||S.time("Overall");const p=this._transport.getRenderingIntent(s,i,d,f),{renderingIntent:y,cacheKey:g}=p;b(this,da,!1),o||(o=this._transport.getOptionalContentConfig(y));let m=this._intentStates.get(g);m||(m=Object.create(null),this._intentStates.set(g,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const w=!!(y&Ls.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(E=this._stats)==null||E.time("Page Request"),this._pumpOperatorList(p));const v=P=>{var T;m.renderTasks.delete(x),w&&b(this,da,!0),k(this,Tc,Xf).call(this),P?(x.capability.reject(P),this._abortOperatorList({intentState:m,reason:P instanceof Error?P:new Error(P)})):x.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(T=globalThis.Stats)!=null&&T.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},x=new B_({callback:v,params:{canvasContext:e,viewport:t,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:u});(m.renderTasks||(m.renderTasks=new Set)).add(x);const _=x.task;return Promise.all([m.displayReadyCapability.promise,o]).then(([P,T])=>{var N;if(this.destroyed){v();return}if((N=this._stats)==null||N.time("Rendering"),!(T.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");x.initializeGraphics({transparency:P,optionalContentConfig:T}),x.operatorListChanged()}).catch(v),_}getOperatorList({intent:e="display",annotationMode:t=so.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var u;function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,s,i,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Vp.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function r(){a.read().then(function({value:l,done:u}){if(u){s(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),r()},i)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),b(this,da,!1),Promise.all(e)}cleanup(e=!1){b(this,da,!0);const t=k(this,Tc,Xf).call(this);return e&&t&&this._stats&&(this._stats=new Uk),t}_startRenderPage(e,t){var i,r;const s=this._intentStates.get(t);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&k(this,Tc,Xf).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:a}=s,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},a).getReader(),u=this._intentStates.get(t);u.streamReader=l;const d=()=>{l.read().then(({value:f,done:p})=>{if(p){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,u),d())},f=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const p of u.renderTasks)p.operatorListChanged();k(this,Tc,Xf).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(f);else if(u.opListReadCapability)u.opListReadCapability.reject(f);else throw f}})};d()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof l1){let i=qz;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new yl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}da=new WeakMap,Tc=new WeakSet,Xf=function(){if(!c(this,da)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,da,!1),!0};var Mo,_i,ha,Pc,Vx,Nc,Rc,Yn,ov,HD,WD,Yf,gh,lv;const ft=class ft{constructor({name:e=null,port:t=null,verbosity:s=MB()}={}){A(this,Yn);A(this,Mo,Promise.withResolvers());A(this,_i,null);A(this,ha,null);A(this,Pc,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(c(ft,Rc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");c(ft,Rc).set(t,this),k(this,Yn,HD).call(this,t)}else k(this,Yn,WD).call(this)}get promise(){return c(this,Mo).promise}get port(){return c(this,ha)}get messageHandler(){return c(this,_i)}destroy(){var e,t;this.destroyed=!0,(e=c(this,Pc))==null||e.terminate(),b(this,Pc,null),c(ft,Rc).delete(c(this,ha)),b(this,ha,null),(t=c(this,_i))==null||t.destroy(),b(this,_i,null)}static create(e){const t=c(this,Rc).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ft(e)}static get workerSrc(){if(Sr.workerSrc)return Sr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return De(this,"_setupFakeWorkerGlobal",(async()=>c(this,gh,lv)?c(this,gh,lv):(await import(this.workerSrc)).WorkerMessageHandler)())}};Mo=new WeakMap,_i=new WeakMap,ha=new WeakMap,Pc=new WeakMap,Vx=new WeakMap,Nc=new WeakMap,Rc=new WeakMap,Yn=new WeakSet,ov=function(){c(this,Mo).resolve(),c(this,_i).send("configure",{verbosity:this.verbosity})},HD=function(e){b(this,ha,e),b(this,_i,new Hf("main","worker",e)),c(this,_i).on("ready",()=>{}),k(this,Yn,ov).call(this)},WD=function(){if(c(ft,Nc)||c(ft,gh,lv)){k(this,Yn,Yf).call(this);return}let{workerSrc:e}=ft;try{ft._isSameOrigin(window.location,e)||(e=ft._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Hf("main","worker",t),i=()=>{r.abort(),s.destroy(),t.terminate(),this.destroyed?c(this,Mo).reject(new Error("Worker was destroyed")):k(this,Yn,Yf).call(this)},r=new AbortController;t.addEventListener("error",()=>{c(this,Pc)||i()},{signal:r.signal}),s.on("test",o=>{if(r.abort(),this.destroyed||!o){i();return}b(this,_i,s),b(this,ha,t),b(this,Pc,t),k(this,Yn,ov).call(this)}),s.on("ready",o=>{if(r.abort(),this.destroyed){i();return}try{a()}catch{k(this,Yn,Yf).call(this)}});const a=()=>{const o=new Uint8Array;s.send("test",o,[o.buffer])};a();return}catch{Sw("The worker has been disabled.")}k(this,Yn,Yf).call(this)},Yf=function(){c(ft,Nc)||(we("Setting up fake worker."),b(ft,Nc,!0)),ft._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){c(this,Mo).reject(new Error("Worker was destroyed"));return}const t=new rz;b(this,ha,t);const s=`fake${Jt(ft,Vx)._++}`,i=new Hf(s+"_worker",s,t);e.setup(i,t),b(this,_i,new Hf(s,s+"_worker",t)),k(this,Yn,ov).call(this)}).catch(e=>{c(this,Mo).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},gh=new WeakSet,lv=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},A(ft,gh),A(ft,Vx,0),A(ft,Nc,!1),A(ft,Rc,new WeakMap),Hn&&(b(ft,Nc,!0),Sr.workerSrc||(Sr.workerSrc="./pdf.worker.mjs")),ft._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const i=new URL(t,s);return s.origin===i.origin},ft._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},ft.fromPort=e=>{if(qB("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ft.create(e)};let Bp=ft;var fa,pr,yh,vh,pa,Ic,Qf;class Xz{constructor(e,t,s,i,r){A(this,Ic);A(this,fa,new Map);A(this,pr,new Map);A(this,yh,new Map);A(this,vh,new Map);A(this,pa,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new OD,this.fontLoader=new JB({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return De(this,"annotationStorage",new h1)}getRenderingIntent(e,t=so.ENABLE,s=null,i=!1,r=!1){let a=Ls.DISPLAY,o=E_;switch(e){case"any":a=Ls.ANY;break;case"display":break;case"print":a=Ls.PRINT;break;default:we(`getRenderingIntent - invalid intent: ${e}`)}const l=a&Ls.PRINT&&s instanceof bD?s:this.annotationStorage;switch(t){case so.DISABLE:a+=Ls.ANNOTATIONS_DISABLE;break;case so.ENABLE:break;case so.ENABLE_FORMS:a+=Ls.ANNOTATIONS_FORMS;break;case so.ENABLE_STORAGE:a+=Ls.ANNOTATIONS_STORAGE,o=l.serializable;break;default:we(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(a+=Ls.IS_EDITING),r&&(a+=Ls.OPLIST);const{ids:u,hash:d}=l.modifiedIds,f=[a,o.hash,d];return{renderingIntent:a,cacheKey:f.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=c(this,pa))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of c(this,pr).values())e.push(i._destroy());c(this,pr).clear(),c(this,yh).clear(),c(this,vh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),c(this,fa).clear(),this.filterFactory.destroy(),$p.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new yl("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{Vt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){i.close();return}Vt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async s=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:a}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:a}}),e.on("GetRangeReader",(s,i)=>{Vt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){i.close();return}Vt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{r.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new Gz(s,this))}),e.on("DocException",s=>{t._capability.reject(ss(s))}),e.on("PasswordRequest",s=>{b(this,pa,Promise.withResolvers());try{if(!t.onPassword)throw ss(s);const i=r=>{r instanceof Error?c(this,pa).reject(r):c(this,pa).resolve({password:r})};t.onPassword(i,s.code)}catch(i){c(this,pa).reject(i)}return c(this,pa).promise}),e.on("DataLoaded",s=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;c(this,pr).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,r])=>{var a;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in r){const d=r.error;we(`Error during font loading: ${d}`),this.commonObjs.resolve(s,d);break}const o=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,l=new ez(r,o);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(s,l)});break;case"CopyLocalImage":const{imageRef:u}=r;Vt(u,"The imageRef must be defined.");for(const d of c(this,pr).values())for(const[,f]of d.objs)if((f==null?void 0:f.ref)===u)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,r,a])=>{var l;if(this.destroyed)return;const o=c(this,pr).get(i);if(!o.objs.has(s)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(r){case"Image":case"Pattern":o.objs.resolve(s,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&we("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=c(this,yh).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&c(this,vh).set(r.refStr,e);const a=new Kz(t,r,this,this._params.pdfBug);return c(this,pr).set(t,a),a});return c(this,yh).set(t,i),i}getPageIndex(e){return T_(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return k(this,Ic,Qf).call(this,"GetFieldObjects")}hasJSActions(){return k(this,Ic,Qf).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return k(this,Ic,Qf).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return k(this,Ic,Qf).call(this,"GetOptionalContentConfig").then(t=>new Ez(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,fa).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>{var r,a;return{info:i[0],metadata:i[1]?new Cz(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return c(this,fa).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,pr).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,fa).clear(),this.filterFactory.destroy(!0),$p.cleanup()}}cachedPageNumber(e){if(!T_(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,vh).get(t)??null}}fa=new WeakMap,pr=new WeakMap,yh=new WeakMap,vh=new WeakMap,pa=new WeakMap,Ic=new WeakSet,Qf=function(e,t=null){const s=c(this,fa).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return c(this,fa).set(e,i),i};var jo;class Yz{constructor(e){A(this,jo,null);q(this,"onContinue",null);q(this,"onError",null);b(this,jo,e)}get promise(){return c(this,jo).capability.promise}cancel(e=0){c(this,jo).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,jo).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(this,jo);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}jo=new WeakMap;var Lo,Dc;const zl=class zl{constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:f=!1,pageColors:p=null}){A(this,Lo,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Yz(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,l;if(this.cancelled)return;if(this._canvas){if(c(zl,Dc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(zl,Dc).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:r,background:a}=this.params;this.gfx=new Cd(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var s,i,r;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),c(this,Lo)&&(window.cancelAnimationFrame(c(this,Lo)),b(this,Lo,null)),c(zl,Dc).delete(this._canvas),e||(e=new l1(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(r=(i=this.task).onError)==null||r.call(i,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,Lo,window.requestAnimationFrame(()=>{b(this,Lo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(zl,Dc).delete(this._canvas),this.callback())))}};Lo=new WeakMap,Dc=new WeakMap,A(zl,Dc,new WeakSet);let B_=zl;const Qz="5.3.93",Zz="cbeef3233";function rE(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Tf(n){return Math.max(0,Math.min(255,255*n))}class aE{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Tf(e),[e,e,e]}static G_HTML([e]){const t=rE(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(Tf)}static RGB_HTML(e){return`#${e.map(rE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[Tf(1-Math.min(1,e+i)),Tf(1-Math.min(1,s+i)),Tf(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,r=1-t,a=1-s,o=Math.min(i,r,a);return["CMYK",i,r,a,o]}}class Jz{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){st("Abstract method `_createSVG` called.")}}class ux extends Jz{_createSVG(e){return document.createElementNS(Br,e)}}class qD{static setupStorage(e,t,s,i,r){const a=i.getValue(t,{value:null});switch(s.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),r==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(a.value===s.attributes.xfaOn?e.setAttribute("checked",!0):a.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",o=>{i.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),r==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of s.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:r}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[l,u]of Object.entries(a))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}o&&r.addLinkAttributes(e,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(e,a.dataId,t,s)}static render(e){var f,p;const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,r=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:r,linkService:s});const o=r!=="richText",l=e.div;if(l.append(a),e.viewport){const y=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=y}o&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const y=document.createTextNode(i.value);a.append(y),o&&Vp.shouldBuildText(i.name)&&u.push(y)}return{textDivs:u}}const d=[[i,-1,a]];for(;d.length>0;){const[y,g,m]=d.at(-1);if(g+1===y.children.length){d.pop();continue}const w=y.children[++d.at(-1)[1]];if(w===null)continue;const{name:v}=w;if(v==="#text"){const _=document.createTextNode(w.value);u.push(_),m.append(_);continue}const x=(f=w==null?void 0:w.attributes)!=null&&f.xmlns?document.createElementNS(w.attributes.xmlns,v):document.createElement(v);if(m.append(x),w.attributes&&this.setAttributes({html:x,element:w,storage:t,intent:r,linkService:s}),((p=w.children)==null?void 0:p.length)>0)d.push([w,-1,x]);else if(w.value){const _=document.createTextNode(w.value);o&&Vp.shouldBuildText(v)&&u.push(_),x.append(_)}}for(const y of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const eU=9,Su=new WeakSet;class oE{static create(e){switch(e.data.annotationType){case Lt.LINK:return new GD(e);case Lt.TEXT:return new tU(e);case Lt.WIDGET:switch(e.data.fieldType){case"Tx":return new nU(e);case"Btn":return e.data.radioButton?new YD(e):e.data.checkBox?new iU(e):new rU(e);case"Ch":return new aU(e);case"Sig":return new sU(e)}return new Lu(e);case Lt.POPUP:return new U_(e);case Lt.FREETEXT:return new tM(e);case Lt.LINE:return new lU(e);case Lt.SQUARE:return new cU(e);case Lt.CIRCLE:return new uU(e);case Lt.POLYLINE:return new nM(e);case Lt.CARET:return new hU(e);case Lt.INK:return new m1(e);case Lt.POLYGON:return new dU(e);case Lt.HIGHLIGHT:return new sM(e);case Lt.UNDERLINE:return new fU(e);case Lt.SQUIGGLY:return new pU(e);case Lt.STRIKEOUT:return new mU(e);case Lt.STAMP:return new iM(e);case Lt.FILEATTACHMENT:return new gU(e);default:return new Dt(e)}}}var Mc,xh,wh,Jm,z_;const B1=class B1{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){A(this,Jm);A(this,Mc,null);A(this,xh,!1);A(this,wh,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return B1._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;c(this,Mc)||b(this,Mc,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&k(this,Jm,z_).call(this,t),(s=c(this,wh))==null||s.popup.updateEdited(e)}resetEdited(){var e;c(this,Mc)&&(k(this,Jm,z_).call(this,c(this,Mc).rect),(e=c(this,wh))==null||e.popup.resetEdited(),b(this,Mc,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof Lu||(r.tabIndex=0);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof U_){const{rotation:m}=t;return!t.hasOwnCanvas&&m!==0&&this.setRotation(m,r),r}const{width:o,height:l}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const m=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(m>0||w>0){const x=`calc(${m}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;a.borderRadius=x}else if(this instanceof YD){const x=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;a.borderRadius=x}switch(t.borderStyle.style){case Hu.SOLID:a.borderStyle="solid";break;case Hu.DASHED:a.borderStyle="dashed";break;case Hu.BEVELED:we("Unimplemented border style: beveled");break;case Hu.INSET:we("Unimplemented border style: inset");break;case Hu.UNDERLINE:a.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(b(this,xh,!0),a.borderColor=he.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):a.borderWidth=0}const u=he.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:d,pageHeight:f,pageX:p,pageY:y}=i.rawDims;a.left=`${100*(u[0]-p)/d}%`,a.top=`${100*(u[1]-y)/f}%`;const{rotation:g}=t;return t.hasOwnCanvas||g===0?(a.width=`${100*o/d}%`,a.height=`${100*l/f}%`):this.setRotation(g,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:a}=this;e%180!==0&&([r,a]=[a,r]),t.style.width=`${100*r/s}%`,t.style.height=`${100*a/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const r=i.detail[t],a=r[0],o=r.slice(1);i.target.style[s]=aE[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[s]:aE[`${a}_rgb`](o)})};return De(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||s[i];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,r]of Object.entries(t)){const a=s[i];if(a){const o={detail:{[i]:r},target:e};a(o),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,r]=this.data.rect.map(m=>Math.fround(m));if(e.length===8){const[m,w,v,x]=e.subarray(2,6);if(i===m&&r===w&&t===v&&s===x)return}const{style:a}=this.container;let o;if(c(this,xh)){const{borderColor:m,borderWidth:w}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const l=i-t,u=r-s,{svgFactory:d}=this,f=d.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const p=d.createElement("defs");f.append(p);const y=d.createElement("clipPath"),g=`clippath_${this.data.id}`;y.setAttribute("id",g),y.setAttribute("clipPathUnits","objectBoundingBox"),p.append(y);for(let m=2,w=e.length;m<w;m+=8){const v=e[m],x=e[m+1],_=e[m+2],S=e[m+3],E=d.createElement("rect"),P=(_-t)/l,T=(r-x)/u,N=(v-_)/l,I=(x-S)/u;E.setAttribute("x",P),E.setAttribute("y",T),E.setAttribute("width",N),E.setAttribute("height",I),y.append(E),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${T}" width="${N}" height="${I}"/>`)}c(this,xh)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(f),this.container.style.clipPath=`url(#${g})`}_createPopup(){const{data:e}=this,t=b(this,wh,new U_({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){st("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:a,exportValues:o}of i){if(r===-1||a===t)continue;const l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!Su.has(u)){we(`_getElementsByName - element not allowed: ${a}`);continue}s.push({id:a,exportValue:l,domElement:u})}return s}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,a=i.getAttribute("data-element-id");a!==t&&Su.has(i)&&s.push({id:a,exportValue:r,domElement:i})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Mc=new WeakMap,xh=new WeakMap,wh=new WeakMap,Jm=new WeakSet,z_=function(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:l}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-o)/r}%`,t.top=`${100*(a-e[3]+l)/a}%`,i===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(i)};let Dt=B1;var Vs,Ll,KD,XD;class GD extends Dt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});A(this,Vs);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(s.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action),r=!0):t.attachment?(k(this,Vs,KD).call(this,i,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(k(this,Vs,XD).call(this,i,t.setOCGState),r=!0):t.dest?(this._bindLink(i,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&k(this,Vs,Ll).call(this)}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),k(this,Vs,Ll).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const a=i.get(r);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),k(this,Vs,Ll).call(this)}_bindResetFormAction(t,s){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),k(this,Vs,Ll).call(this),!this._fieldObjects){we('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var f;i==null||i();const{fields:r,refs:a,include:o}=s,l=[];if(r.length!==0||a.length!==0){const p=new Set(a);for(const y of r){const g=this._fieldObjects[y]||[];for(const{id:m}of g)p.add(m)}for(const y of Object.values(this._fieldObjects))for(const g of y)p.has(g.id)===o&&l.push(g)}else for(const p of Object.values(this._fieldObjects))l.push(...p);const u=this.annotationStorage,d=[];for(const p of l){const{id:y}=p;switch(d.push(y),p.type){case"text":{const m=p.defaultValue||"";u.setValue(y,{value:m});break}case"checkbox":case"radiobutton":{const m=p.defaultValue===p.exportValues;u.setValue(y,{value:m});break}case"combobox":case"listbox":{const m=p.defaultValue||"";u.setValue(y,{value:m});break}default:continue}const g=document.querySelector(`[data-element-id="${y}"]`);if(g){if(!Su.has(g)){we(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}Vs=new WeakSet,Ll=function(){this.container.setAttribute("data-internal-link","")},KD=function(t,s,i=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,i),!1},k(this,Vs,Ll).call(this)},XD=function(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),k(this,Vs,Ll).call(this)};class tU extends Dt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Lu extends Dt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return wn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,r){s.includes("mouse")?e.addEventListener(s,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(s,a=>{var o;if(s==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(a)}}))})}_setEventListeners(e,t,s,i){var r,a,o;for(const[l,u]of s)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,i),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":he.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||eU,r=e.style;let a;const o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),d=Math.round(u/(Sb*i))||1,f=u/d;a=Math.min(i,l(f/Sb))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(i,l(u/Sb))}r.fontSize=`calc(${a}px * var(--total-scale-factor))`,r.color=he.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class nU extends Lu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const r=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=s),r.setValue(a.id,{[i]:s})}render(){var i,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Su.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const f=this.data.dateFormat||this.data.timeFormat;f&&(s.title=f),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",y=>{e.setValue(t,{value:y.target.value}),this.setPropertyOnSiblings(s,"value",y.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",y=>{const g=this.data.defaultFieldValue??"";s.value=d.userValue=g,d.formattedValue=null});let p=y=>{const{formattedValue:g}=d;g!=null&&(y.target.value=g),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",g=>{var w;if(d.focused)return;const{target:m}=g;d.userValue&&(m.value=d.userValue),d.lastCommittedValue=m.value,d.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const m={value(w){d.userValue=w.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),w.target.value=d.userValue},formattedValue(w){const{formattedValue:v}=w.detail;d.formattedValue=v,v!=null&&w.target!==document.activeElement&&(w.target.value=v),e.setValue(t,{formattedValue:v})},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var S;const{charLimit:v}=w.detail,{target:x}=w;if(v===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",v);let _=d.userValue;!_||_.length<=v||(_=_.slice(0,v),x.value=d.userValue=_,e.setValue(t,{value:_}),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(m,g)}),s.addEventListener("keydown",g=>{var v;d.commitKey=1;let m=-1;if(g.key==="Escape"?m=0:g.key==="Enter"&&!this.data.multiLine?m=2:g.key==="Tab"&&(d.commitKey=3),m===-1)return;const{value:w}=g.target;d.lastCommittedValue!==w&&(d.lastCommittedValue=w,d.userValue=w,(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:m,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const y=p;p=null,s.addEventListener("blur",g=>{var w,v;if(!d.focused||!g.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(d.focused=!1);const{value:m}=g.target;d.userValue=m,d.lastCommittedValue!==m&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:d.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),y(g)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",g=>{var P;d.lastCommittedValue=null;const{data:m,target:w}=g,{value:v,selectionStart:x,selectionEnd:_}=w;let S=x,E=_;switch(g.inputType){case"deleteWordBackward":{const T=v.substring(0,x).match(/\w*[^\w]*$/);T&&(S-=T[0].length);break}case"deleteWordForward":{const T=v.substring(x).match(/^[^\w]*\w*/);T&&(E+=T[0].length);break}case"deleteContentBackward":x===_&&(S-=1);break;case"deleteContentForward":x===_&&(E+=1);break}g.preventDefault(),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,change:m||"",willCommit:!1,selStart:S,selEnd:E}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(p&&s.addEventListener("blur",p),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class sU extends Lu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class iU extends Lu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Su.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,s)){const d=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=d),e.setValue(u.id,{value:d})}e.setValue(s,{value:l})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class YD extends Lu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const a of this._getElementsByName(t.fieldName,s))e.setValue(a.id,{value:!1});const r=document.createElement("input");if(Su.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,s))e.setValue(u.id,{value:!1});e.setValue(s,{value:l})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;r.addEventListener("updatefromsandbox",o=>{const l={value:u=>{const d=a===u.detail.value;for(const f of this._getElementsByName(u.target.name)){const p=d&&f.id===s;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class rU extends GD{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class aU extends Lu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Su.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",d=>{const f=this.data.defaultFieldValue;for(const p of i.options)p.selected=p.value===f});for(const d of this.data.options){const f=document.createElement("option");f.textContent=d.displayValue,f.value=d.exportValue,s.value.includes(d.exportValue)&&(f.setAttribute("selected",!0),r=!1),i.append(f)}let a=null;if(r){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),i.prepend(d),a=()=>{d.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const o=d=>{const f=d?"value":"textContent",{options:p,multiple:y}=i;return y?Array.prototype.filter.call(p,g=>g.selected).map(g=>g[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let l=o(!1);const u=d=>{const f=d.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",d=>{const f={value(p){a==null||a();const y=p.detail.value,g=new Set(Array.isArray(y)?y:[y]);for(const m of i.options)m.selected=g.has(m.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(p){i.multiple=!0},remove(p){const y=i.options,g=p.detail.remove;y[g].selected=!1,i.remove(g),y.length>0&&Array.prototype.findIndex.call(y,w=>w.selected)===-1&&(y[0].selected=!0),e.setValue(t,{value:o(!0),items:u(p)}),l=o(!1)},clear(p){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(p){const{index:y,displayValue:g,exportValue:m}=p.detail.insert,w=i.children[y],v=document.createElement("option");v.textContent=g,v.value=m,w?w.before(v):i.append(v),e.setValue(t,{value:o(!0),items:u(p)}),l=o(!1)},items(p){const{items:y}=p.detail;for(;i.length!==0;)i.remove(0);for(const g of y){const{displayValue:m,exportValue:w}=g,v=document.createElement("option");v.textContent=m,v.value=w,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(p)}),l=o(!1)},indices(p){const y=new Set(p.detail.indices);for(const g of p.target.options)g.selected=y.has(g.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,d)}),i.addEventListener("input",d=>{var y;const f=o(!0),p=o(!1);e.setValue(t,{value:f}),d.preventDefault(),(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):i.addEventListener("input",function(d){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class U_ extends Dt{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:Dt._hasPopupData(t)}),this.elements=s,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new oU({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${o1}${i}`).join(",")),this.container}}var bh,Bx,zx,_h,Sh,Et,ma,jc,eg,tg,Ah,ga,Si,ya,ng,va,sg,Lc,Oc,it,cv,H_,QD,ZD,JD,eM,uv,dv,W_;class oU{constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:r,contentsObj:a,richText:o,parent:l,rect:u,parentRect:d,open:f}){A(this,it);A(this,bh,k(this,it,JD).bind(this));A(this,Bx,k(this,it,W_).bind(this));A(this,zx,k(this,it,dv).bind(this));A(this,_h,k(this,it,uv).bind(this));A(this,Sh,null);A(this,Et,null);A(this,ma,null);A(this,jc,null);A(this,eg,null);A(this,tg,null);A(this,Ah,null);A(this,ga,!1);A(this,Si,null);A(this,ya,null);A(this,ng,null);A(this,va,null);A(this,sg,null);A(this,Lc,null);A(this,Oc,!1);var p;b(this,Et,e),b(this,sg,i),b(this,ma,a),b(this,va,o),b(this,tg,l),b(this,Sh,t),b(this,ng,u),b(this,Ah,d),b(this,eg,s),b(this,jc,u1.toDateObject(r)),this.trigger=s.flatMap(y=>y.getElementsToTriggerPopup());for(const y of this.trigger)y.addEventListener("click",c(this,_h)),y.addEventListener("mouseenter",c(this,zx)),y.addEventListener("mouseleave",c(this,Bx)),y.classList.add("popupTriggerArea");for(const y of s)(p=y.container)==null||p.addEventListener("keydown",c(this,bh));c(this,Et).hidden=!0,f&&k(this,it,uv).call(this)}render(){if(c(this,Si))return;const e=b(this,Si,document.createElement("div"));if(e.className="popup",c(this,Sh)){const r=e.style.outlineColor=he.makeHexColor(...c(this,Sh));e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=c(this,sg),e.append(t),c(this,jc)){const r=document.createElement("time");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,jc).valueOf()})),r.dateTime=c(this,jc).toISOString(),t.append(r)}const i=c(this,it,cv);if(i)qD.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(c(this,ma));e.append(r)}c(this,Et).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let r=0,a=i.length;r<a;++r){const o=i[r];s.append(document.createTextNode(o)),r<a-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;c(this,Lc)||b(this,Lc,{contentsObj:c(this,ma),richText:c(this,va)}),e&&b(this,ya,null),t&&(b(this,va,k(this,it,ZD).call(this,t)),b(this,ma,null)),(s=c(this,Si))==null||s.remove(),b(this,Si,null)}resetEdited(){var e;c(this,Lc)&&({contentsObj:Jt(this,ma)._,richText:Jt(this,va)._}=c(this,Lc),b(this,Lc,null),(e=c(this,Si))==null||e.remove(),b(this,Si,null),b(this,ya,null))}forceHide(){b(this,Oc,this.isVisible),c(this,Oc)&&(c(this,Et).hidden=!0)}maybeShow(){c(this,Oc)&&(c(this,Si)||k(this,it,dv).call(this),b(this,Oc,!1),c(this,Et).hidden=!1)}get isVisible(){return c(this,Et).hidden===!1}}bh=new WeakMap,Bx=new WeakMap,zx=new WeakMap,_h=new WeakMap,Sh=new WeakMap,Et=new WeakMap,ma=new WeakMap,jc=new WeakMap,eg=new WeakMap,tg=new WeakMap,Ah=new WeakMap,ga=new WeakMap,Si=new WeakMap,ya=new WeakMap,ng=new WeakMap,va=new WeakMap,sg=new WeakMap,Lc=new WeakMap,Oc=new WeakMap,it=new WeakSet,cv=function(){const e=c(this,va),t=c(this,ma);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,va).html||null},H_=function(){var e,t,s;return((s=(t=(e=c(this,it,cv))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},QD=function(){var e,t,s;return((s=(t=(e=c(this,it,cv))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},ZD=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:c(this,it,QD),fontSize:c(this,it,H_)?`calc(${c(this,it,H_)}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return s},JD=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,ga))&&k(this,it,uv).call(this)},eM=function(){if(c(this,ya)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:r}}}=c(this,tg);let a=!!c(this,Ah),o=a?c(this,Ah):c(this,ng);for(const g of c(this,eg))if(!o||he.intersect(g.data.rect,o)!==null){o=g.data.rect,a=!0;break}const l=he.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),d=a?o[2]-o[0]+5:0,f=l[0]+d,p=l[1];b(this,ya,[100*(f-i)/t,100*(p-r)/s]);const{style:y}=c(this,Et);y.left=`${c(this,ya)[0]}%`,y.top=`${c(this,ya)[1]}%`},uv=function(){b(this,ga,!c(this,ga)),c(this,ga)?(k(this,it,dv).call(this),c(this,Et).addEventListener("click",c(this,_h)),c(this,Et).addEventListener("keydown",c(this,bh))):(k(this,it,W_).call(this),c(this,Et).removeEventListener("click",c(this,_h)),c(this,Et).removeEventListener("keydown",c(this,bh)))},dv=function(){c(this,Si)||this.render(),this.isVisible?c(this,ga)&&c(this,Et).classList.add("focused"):(k(this,it,eM).call(this),c(this,Et).hidden=!1,c(this,Et).style.zIndex=parseInt(c(this,Et).style.zIndex)+1e3)},W_=function(){c(this,Et).classList.remove("focused"),!(c(this,ga)||!this.isVisible)&&(c(this,Et).hidden=!0,c(this,Et).style.zIndex=parseInt(c(this,Et).style.zIndex)-1e3)};class tM extends Dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=xe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ig;class lU extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,ig,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),a=b(this,ig,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,ig)}addHighlightArea(){this.container.classList.add("highlightArea")}}ig=new WeakMap;var rg;class cU extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,rg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),a=t.borderStyle.width,o=b(this,rg,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",s-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,rg)}addHighlightArea(){this.container.classList.add("highlightArea")}}rg=new WeakMap;var ag;class uU extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,ag,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),a=t.borderStyle.width,o=b(this,ag,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",s/2),o.setAttribute("cy",i/2),o.setAttribute("rx",s/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,ag)}addHighlightArea(){this.container.classList.add("highlightArea")}}ag=new WeakMap;var og;class nM extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,og,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:i,popupRef:r},width:a,height:o}=this;if(!s)return this.container;const l=this.svgFactory.create(a,o,!0);let u=[];for(let f=0,p=s.length;f<p;f+=2){const y=s[f]-t[0],g=t[3]-s[f+1];u.push(`${y},${g}`)}u=u.join(" ");const d=b(this,og,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,og)}addHighlightArea(){this.container.classList.add("highlightArea")}}og=new WeakMap;class dU extends nM{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class hU extends Dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var lg,Fc,cg,q_;class m1 extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,cg);A(this,lg,null);A(this,Fc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?xe.HIGHLIGHT:xe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:i,borderStyle:r,popupRef:a}}=this,{transform:o,width:l,height:u}=k(this,cg,q_).call(this,s,t),d=this.svgFactory.create(l,u,!0),f=b(this,lg,this.svgFactory.createElement("svg:g"));d.append(f),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",o);for(let p=0,y=i.length;p<y;p++){const g=this.svgFactory.createElement(this.svgElementName);c(this,Fc).push(g),g.setAttribute("points",i[p].join(",")),f.append(g)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:i,rect:r}=t,a=c(this,lg);if(s>=0&&a.setAttribute("stroke-width",s||1),i)for(let o=0,l=c(this,Fc).length;o<l;o++)c(this,Fc)[o].setAttribute("points",i[o].join(","));if(r){const{transform:o,width:l,height:u}=k(this,cg,q_).call(this,this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return c(this,Fc)}addHighlightArea(){this.container.classList.add("highlightArea")}}lg=new WeakMap,Fc=new WeakMap,cg=new WeakSet,q_=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class sM extends Dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=xe.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class fU extends Dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class pU extends Dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class mU extends Dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class iM extends Dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=xe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ug,dg,G_;class gU extends Dt{constructor(t){var i;super(t,{isRenderable:!0});A(this,dg);A(this,ug,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",k(this,dg,G_).bind(this)),b(this,ug,i);const{isMac:r}=wn.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&k(this,dg,G_).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return c(this,ug)}addHighlightArea(){this.container.classList.add("highlightArea")}}ug=new WeakMap,dg=new WeakSet,G_=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var hg,$c,Oo,fg,Cl,X_,Y_;const z1=class z1{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:a,structTreeLayer:o}){A(this,Cl);A(this,hg,null);A(this,$c,null);A(this,Oo,new Map);A(this,fg,null);this.div=e,b(this,hg,t),b(this,$c,s),b(this,fg,o||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return c(this,Oo).size>0}async render(e){var a;const{annotations:t}=e,s=this.div;bu(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new ux,annotationStorage:e.annotationStorage||new h1,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const l=o.annotationType===Lt.POPUP;if(l){const f=i.get(o.id);if(!f)continue;r.elements=f}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;r.data=o;const u=oE.create(r);if(!u.isRenderable)continue;if(!l&&o.popupRef){const f=i.get(o.popupRef);f?f.push(u):i.set(o.popupRef,[u])}const d=u.render();o.hidden&&(d.style.visibility="hidden"),await k(this,Cl,X_).call(this,d,o.id,r.elements),u._isEditable&&(c(this,Oo).set(u.data.id,u),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(u))}k(this,Cl,Y_).call(this)}async addLinkAnnotations(e,t){const s={data:null,layer:this.div,linkService:t,svgFactory:new ux,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=z1._defaultBorderStyle),s.data=i;const r=oE.create(s);if(!r.isRenderable)continue;const a=r.render();await k(this,Cl,X_).call(this,a,i.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,bu(t,{rotation:e.rotation}),k(this,Cl,Y_).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,Oo).values())}getEditableAnnotation(e){return c(this,Oo).get(e)}static get _defaultBorderStyle(){return De(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Hu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};hg=new WeakMap,$c=new WeakMap,Oo=new WeakMap,fg=new WeakMap,Cl=new WeakSet,X_=async function(e,t,s){var o,l;const i=e.firstChild||e,r=i.id=`${o1}${t}`,a=await((o=c(this,fg))==null?void 0:o.getAriaAttributes(r));if(a)for(const[u,d]of a)i.setAttribute(u,d);s?s.at(-1).container.after(e):(this.div.append(e),(l=c(this,hg))==null||l.moveElementInDOM(this.div,e,i,!1))},Y_=function(){var t;if(!c(this,$c))return;const e=this.div;for(const[s,i]of c(this,$c)){const r=e.querySelector(`[data-annotation-id="${s}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):r.append(i);const o=c(this,Oo).get(s);o&&(o._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,r.id,i),o._hasNoCanvas=!1):o.canvas=i)}c(this,$c).clear()};let K_=z1;const Ey=/\r\n?|\n/g;var Ai,ks,pg,Vc,Es,Bt,rM,aM,oM,hv,Ma,fv,pv,lM,Z_,cM;const ot=class ot extends ct{constructor(t){super({...t,name:"freeTextEditor"});A(this,Bt);A(this,Ai);A(this,ks,"");A(this,pg,`${this.id}-editor`);A(this,Vc,null);A(this,Es);b(this,Ai,t.color||ot._defaultColor||ct._defaultLineColor),b(this,Es,t.fontSize||ot._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=ot.prototype,s=a=>a.isEmpty(),i=_u.TRANSLATE_SMALL,r=_u.TRANSLATE_BIG;return De(this,"_keyboardManager",new Gg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(t,s){ct.initialize(t,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case Fe.FREETEXT_SIZE:ot._defaultFontSize=s;break;case Fe.FREETEXT_COLOR:ot._defaultColor=s;break}}updateParams(t,s){switch(t){case Fe.FREETEXT_SIZE:k(this,Bt,rM).call(this,s);break;case Fe.FREETEXT_COLOR:k(this,Bt,aM).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Fe.FREETEXT_SIZE,ot._defaultFontSize],[Fe.FREETEXT_COLOR,ot._defaultColor||ct._defaultLineColor]]}get propertiesToUpdate(){return[[Fe.FREETEXT_SIZE,c(this,Es)],[Fe.FREETEXT_COLOR,c(this,Ai)]]}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-ot._internalPadding*t,-(ot._internalPadding+c(this,Es))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,Vc,new AbortController);const t=this._uiManager.combinedSignal(c(this,Vc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,pg)),this._isDraggable=!0,(t=c(this,Vc))==null||t.abort(),b(this,Vc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,ks),s=b(this,ks,k(this,Bt,oM).call(this).trimEnd());if(t===s)return;const i=r=>{if(b(this,ks,r),!r){this.remove();return}k(this,Bt,pv).call(this),this._uiManager.rebuild(this),k(this,Bt,hv).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(t)},mustExec:!1}),k(this,Bt,hv).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ot._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,pg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${c(this,Es)}px * var(--total-scale-factor))`,i.color=c(this,Ai),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[d,f]=this.pageDimensions,[p,y]=this.pageTranslation;let g,m;switch(this.rotation){case 0:g=t+(o[0]-p)/d,m=s+this.height-(o[1]-y)/f;break;case 90:g=t+(o[0]-p)/d,m=s-(o[1]-y)/f,[l,u]=[u,-l];break;case 180:g=t-this.width+(o[0]-p)/d,m=s-(o[1]-y)/f,[l,u]=[-l,-u];break;case 270:g=t+(o[0]-p-this.height*f)/d,m=s+(o[1]-y-this.width*d)/f,[l,u]=[-u,l];break}this.setAt(g*r,m*a,l,u)}else this._moveAfterPaste(t,s);k(this,Bt,pv).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var g,m,w;const s=t.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=k(g=ot,Ma,Z_).call(g,s.getData("text")||"").replaceAll(Ey,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:u}=o,d=[],f=[];if(l.nodeType===Node.TEXT_NODE){const v=l.parentElement;if(f.push(l.nodeValue.slice(u).replaceAll(Ey,"")),v!==this.editorDiv){let x=d;for(const _ of this.editorDiv.childNodes){if(_===v){x=f;continue}x.push(k(m=ot,Ma,fv).call(m,_))}}d.push(l.nodeValue.slice(0,u).replaceAll(Ey,""))}else if(l===this.editorDiv){let v=d,x=0;for(const _ of this.editorDiv.childNodes)x++===u&&(v=f),v.push(k(w=ot,Ma,fv).call(w,_))}b(this,ks,`${d.join(`
`)}${r}${f.join(`
`)}`),k(this,Bt,pv).call(this);const p=new Range;let y=Math.sumPrecise(d.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const x=v.nodeValue.length;if(y<=x){p.setStart(v,y),p.setEnd(v,y);break}y-=x}a.removeAllRanges(),a.addRange(p)}get contentDiv(){return this.editorDiv}static async deserialize(t,s,i){var o;let r=null;if(t instanceof tM){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:f,id:p,popupRef:y},textContent:g,textPosition:m,parent:{page:{pageNumber:w}}}=t;if(!g||g.length===0)return null;r=t={annotationType:xe.FREETEXT,color:Array.from(u),fontSize:l,value:g.join(`
`),position:m,pageIndex:w-1,rect:d.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:y}}const a=await super.deserialize(t,s,i);return b(a,Es,t.fontSize),b(a,Ai,he.makeHexColor(...t.color)),b(a,ks,k(o=ot,Ma,Z_).call(o,t.value)),a._initialData=r,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=ot._internalPadding*this.parentScale,i=this.getRect(s,s),r=ct._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,Ai)),a={annotationType:xe.FREETEXT,color:r,fontSize:c(this,Es),value:k(this,Bt,lM).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(a.isCopy=!0,a):this.annotationElementId&&!k(this,Bt,cM).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:i}=s;i.fontSize=`calc(${c(this,Es)}px * var(--total-scale-factor))`,i.color=c(this,Ai),s.replaceChildren();for(const a of c(this,ks).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),s.append(o)}const r=ot._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:c(this,ks)}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ai=new WeakMap,ks=new WeakMap,pg=new WeakMap,Vc=new WeakMap,Es=new WeakMap,Bt=new WeakSet,rM=function(t){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-c(this,Es))*this.parentScale),b(this,Es,r),k(this,Bt,hv).call(this)},i=c(this,Es);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},aM=function(t){const s=r=>{b(this,Ai,this.editorDiv.style.color=r)},i=c(this,Ai);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},oM=function(){var i;const t=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(k(i=ot,Ma,fv).call(i,r)),s=r);return t.join(`
`)},hv=function(){const[t,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/s):(this.width=i.height/t,this.height=i.width/s),this.fixAndSetPosition()},Ma=new WeakSet,fv=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Ey,"")},pv=function(){if(this.editorDiv.replaceChildren(),!!c(this,ks))for(const t of c(this,ks).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},lM=function(){return c(this,ks).replaceAll(""," ")},Z_=function(t){return t.replaceAll(" ","")},cM=function(t){const{value:s,fontSize:i,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==s||t.fontSize!==i||t.color.some((o,l)=>o!==r[l])||t.pageIndex!==a},A(ot,Ma),q(ot,"_freeTextDefaultContent",""),q(ot,"_internalPadding",0),q(ot,"_defaultColor",null),q(ot,"_defaultFontSize",10),q(ot,"_type","freetext"),q(ot,"_editorType",xe.FREETEXT);let Q_=ot;class ie{toSVGPath(){st("Abstract method `toSVGPath` must be implemented.")}get box(){st("Abstract getter `box` must be implemented.")}serialize(e,t){st("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,r,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o]*i,a[o+1]=s+e[o+1]*r;return a}static _rescaleAndSwap(e,t,s,i,r,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o+1]*i,a[o+1]=s+e[o]*r;return a}static _translate(e,t,s,i){i||(i=new Float32Array(e.length));for(let r=0,a=e.length;r<a;r+=2)i[r]=t+e[r],i[r+1]=s+e[r+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,r){switch(r){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,r,a){return[(e+5*s)/6,(t+5*i)/6,(5*s+r)/6,(5*i+a)/6,(s+r)/2,(i+a)/2]}}q(ie,"PRECISION",1e-4);var Ts,Ci,Ch,kh,mr,Ne,Bc,zc,mg,gg,Eh,Th,Fo,yg,Ux,Hx,Qt,Zf,uM,dM,hM,fM,pM,mM;const Kr=class Kr{constructor({x:e,y:t},s,i,r,a,o=0){A(this,Qt);A(this,Ts);A(this,Ci,[]);A(this,Ch);A(this,kh);A(this,mr,[]);A(this,Ne,new Float32Array(18));A(this,Bc);A(this,zc);A(this,mg);A(this,gg);A(this,Eh);A(this,Th);A(this,Fo,[]);b(this,Ts,s),b(this,Th,r*i),b(this,kh,a),c(this,Ne).set([NaN,NaN,NaN,NaN,e,t],6),b(this,Ch,o),b(this,gg,c(Kr,yg)*i),b(this,mg,c(Kr,Hx)*i),b(this,Eh,i),c(this,Fo).push(e,t)}isEmpty(){return isNaN(c(this,Ne)[8])}add({x:e,y:t}){var I;b(this,Bc,e),b(this,zc,t);const[s,i,r,a]=c(this,Ts);let[o,l,u,d]=c(this,Ne).subarray(8,12);const f=e-u,p=t-d,y=Math.hypot(f,p);if(y<c(this,mg))return!1;const g=y-c(this,gg),m=g/y,w=m*f,v=m*p;let x=o,_=l;o=u,l=d,u+=w,d+=v,(I=c(this,Fo))==null||I.push(e,t);const S=-v/g,E=w/g,P=S*c(this,Th),T=E*c(this,Th);return c(this,Ne).set(c(this,Ne).subarray(2,8),0),c(this,Ne).set([u+P,d+T],4),c(this,Ne).set(c(this,Ne).subarray(14,18),12),c(this,Ne).set([u-P,d-T],16),isNaN(c(this,Ne)[6])?(c(this,mr).length===0&&(c(this,Ne).set([o+P,l+T],2),c(this,mr).push(NaN,NaN,NaN,NaN,(o+P-s)/r,(l+T-i)/a),c(this,Ne).set([o-P,l-T],14),c(this,Ci).push(NaN,NaN,NaN,NaN,(o-P-s)/r,(l-T-i)/a)),c(this,Ne).set([x,_,o,l,u,d],6),!this.isEmpty()):(c(this,Ne).set([x,_,o,l,u,d],6),Math.abs(Math.atan2(_-l,x-o)-Math.atan2(v,w))<Math.PI/2?([o,l,u,d]=c(this,Ne).subarray(2,6),c(this,mr).push(NaN,NaN,NaN,NaN,((o+u)/2-s)/r,((l+d)/2-i)/a),[o,l,x,_]=c(this,Ne).subarray(14,18),c(this,Ci).push(NaN,NaN,NaN,NaN,((x+o)/2-s)/r,((_+l)/2-i)/a),!0):([x,_,o,l,u,d]=c(this,Ne).subarray(0,6),c(this,mr).push(((x+5*o)/6-s)/r,((_+5*l)/6-i)/a,((5*o+u)/6-s)/r,((5*l+d)/6-i)/a,((o+u)/2-s)/r,((l+d)/2-i)/a),[u,d,o,l,x,_]=c(this,Ne).subarray(12,18),c(this,Ci).push(((x+5*o)/6-s)/r,((_+5*l)/6-i)/a,((5*o+u)/6-s)/r,((5*l+d)/6-i)/a,((o+u)/2-s)/r,((l+d)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,mr),t=c(this,Ci);if(isNaN(c(this,Ne)[6])&&!this.isEmpty())return k(this,Qt,uM).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);k(this,Qt,hM).call(this,s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return k(this,Qt,dM).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,i,r,a){return new gM(e,t,s,i,r,a)}getOutlines(){var f;const e=c(this,mr),t=c(this,Ci),s=c(this,Ne),[i,r,a,o]=c(this,Ts),l=new Float32Array((((f=c(this,Fo))==null?void 0:f.length)??0)+2);for(let p=0,y=l.length-2;p<y;p+=2)l[p]=(c(this,Fo)[p]-i)/a,l[p+1]=(c(this,Fo)[p+1]-r)/o;if(l[l.length-2]=(c(this,Bc)-i)/a,l[l.length-1]=(c(this,zc)-r)/o,isNaN(s[6])&&!this.isEmpty())return k(this,Qt,fM).call(this,l);const u=new Float32Array(c(this,mr).length+24+c(this,Ci).length);let d=e.length;for(let p=0;p<d;p+=2){if(isNaN(e[p])){u[p]=u[p+1]=NaN;continue}u[p]=e[p],u[p+1]=e[p+1]}d=k(this,Qt,mM).call(this,u,d);for(let p=t.length-6;p>=6;p-=6)for(let y=0;y<6;y+=2){if(isNaN(t[p+y])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=t[p+y],u[d+1]=t[p+y+1],d+=2}return k(this,Qt,pM).call(this,u,d),this.newFreeDrawOutline(u,l,c(this,Ts),c(this,Eh),c(this,Ch),c(this,kh))}};Ts=new WeakMap,Ci=new WeakMap,Ch=new WeakMap,kh=new WeakMap,mr=new WeakMap,Ne=new WeakMap,Bc=new WeakMap,zc=new WeakMap,mg=new WeakMap,gg=new WeakMap,Eh=new WeakMap,Th=new WeakMap,Fo=new WeakMap,yg=new WeakMap,Ux=new WeakMap,Hx=new WeakMap,Qt=new WeakSet,Zf=function(){const e=c(this,Ne).subarray(4,6),t=c(this,Ne).subarray(16,18),[s,i,r,a]=c(this,Ts);return[(c(this,Bc)+(e[0]-t[0])/2-s)/r,(c(this,zc)+(e[1]-t[1])/2-i)/a,(c(this,Bc)+(t[0]-e[0])/2-s)/r,(c(this,zc)+(t[1]-e[1])/2-i)/a]},uM=function(){const[e,t,s,i]=c(this,Ts),[r,a,o,l]=k(this,Qt,Zf).call(this);return`M${(c(this,Ne)[2]-e)/s} ${(c(this,Ne)[3]-t)/i} L${(c(this,Ne)[4]-e)/s} ${(c(this,Ne)[5]-t)/i} L${r} ${a} L${o} ${l} L${(c(this,Ne)[16]-e)/s} ${(c(this,Ne)[17]-t)/i} L${(c(this,Ne)[14]-e)/s} ${(c(this,Ne)[15]-t)/i} Z`},dM=function(e){const t=c(this,Ci);e.push(`L${t[4]} ${t[5]} Z`)},hM=function(e){const[t,s,i,r]=c(this,Ts),a=c(this,Ne).subarray(4,6),o=c(this,Ne).subarray(16,18),[l,u,d,f]=k(this,Qt,Zf).call(this);e.push(`L${(a[0]-t)/i} ${(a[1]-s)/r} L${l} ${u} L${d} ${f} L${(o[0]-t)/i} ${(o[1]-s)/r}`)},fM=function(e){const t=c(this,Ne),[s,i,r,a]=c(this,Ts),[o,l,u,d]=k(this,Qt,Zf).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-s)/r,(t[3]-i)/a,NaN,NaN,NaN,NaN,(t[4]-s)/r,(t[5]-i)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(t[16]-s)/r,(t[17]-i)/a,NaN,NaN,NaN,NaN,(t[14]-s)/r,(t[15]-i)/a],0),this.newFreeDrawOutline(f,e,c(this,Ts),c(this,Eh),c(this,Ch),c(this,kh))},pM=function(e,t){const s=c(this,Ci);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},mM=function(e,t){const s=c(this,Ne).subarray(4,6),i=c(this,Ne).subarray(16,18),[r,a,o,l]=c(this,Ts),[u,d,f,p]=k(this,Qt,Zf).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-r)/o,(s[1]-a)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(i[0]-r)/o,(i[1]-a)/l],t),t+=24},A(Kr,yg,8),A(Kr,Ux,2),A(Kr,Hx,c(Kr,yg)+c(Kr,Ux));let dx=Kr;var Ph,Uc,xa,vg,Ps,xg,Nt,Wx,yM;class gM extends ie{constructor(t,s,i,r,a,o){super();A(this,Wx);A(this,Ph);A(this,Uc,new Float32Array(4));A(this,xa);A(this,vg);A(this,Ps);A(this,xg);A(this,Nt);b(this,Nt,t),b(this,Ps,s),b(this,Ph,i),b(this,xg,r),b(this,xa,a),b(this,vg,o),this.lastPoint=[NaN,NaN],k(this,Wx,yM).call(this,o);const[l,u,d,f]=c(this,Uc);for(let p=0,y=t.length;p<y;p+=2)t[p]=(t[p]-l)/d,t[p+1]=(t[p+1]-u)/f;for(let p=0,y=s.length;p<y;p+=2)s[p]=(s[p]-l)/d,s[p+1]=(s[p+1]-u)/f}toSVGPath(){const t=[`M${c(this,Nt)[4]} ${c(this,Nt)[5]}`];for(let s=6,i=c(this,Nt).length;s<i;s+=6){if(isNaN(c(this,Nt)[s])){t.push(`L${c(this,Nt)[s+4]} ${c(this,Nt)[s+5]}`);continue}t.push(`C${c(this,Nt)[s]} ${c(this,Nt)[s+1]} ${c(this,Nt)[s+2]} ${c(this,Nt)[s+3]} ${c(this,Nt)[s+4]} ${c(this,Nt)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,i,r],a){const o=i-t,l=r-s;let u,d;switch(a){case 0:u=ie._rescale(c(this,Nt),t,r,o,-l),d=ie._rescale(c(this,Ps),t,r,o,-l);break;case 90:u=ie._rescaleAndSwap(c(this,Nt),t,s,o,l),d=ie._rescaleAndSwap(c(this,Ps),t,s,o,l);break;case 180:u=ie._rescale(c(this,Nt),i,s,-o,l),d=ie._rescale(c(this,Ps),i,s,-o,l);break;case 270:u=ie._rescaleAndSwap(c(this,Nt),i,r,-o,-l),d=ie._rescaleAndSwap(c(this,Ps),i,r,-o,-l);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return c(this,Uc)}newOutliner(t,s,i,r,a,o=0){return new dx(t,s,i,r,a,o)}getNewOutline(t,s){const[i,r,a,o]=c(this,Uc),[l,u,d,f]=c(this,Ph),p=a*d,y=o*f,g=i*d+l,m=r*f+u,w=this.newOutliner({x:c(this,Ps)[0]*p+g,y:c(this,Ps)[1]*y+m},c(this,Ph),c(this,xg),t,c(this,vg),s??c(this,xa));for(let v=2;v<c(this,Ps).length;v+=2)w.add({x:c(this,Ps)[v]*p+g,y:c(this,Ps)[v+1]*y+m});return w.getOutlines()}}Ph=new WeakMap,Uc=new WeakMap,xa=new WeakMap,vg=new WeakMap,Ps=new WeakMap,xg=new WeakMap,Nt=new WeakMap,Wx=new WeakSet,yM=function(t){const s=c(this,Nt);let i=s[4],r=s[5];const a=[i,r,i,r];let o=i,l=r;const u=t?Math.max:Math.min;for(let f=6,p=s.length;f<p;f+=6){const y=s[f+4],g=s[f+5];if(isNaN(s[f]))he.pointBoundingBox(y,g,a),l<g?(o=y,l=g):l===g&&(o=u(o,y));else{const m=[1/0,1/0,-1/0,-1/0];he.bezierBoundingBox(i,r,...s.slice(f,f+6),m),he.rectBoundingBox(...m,a),l<m[3]?(o=m[2],l=m[3]):l===m[3]&&(o=u(o,m[2]))}i=y,r=g}const d=c(this,Uc);d[0]=a[0]-c(this,xa),d[1]=a[1]-c(this,xa),d[2]=a[2]-a[0]+2*c(this,xa),d[3]=a[3]-a[1]+2*c(this,xa),this.lastPoint=[o,l]};var wg,bg,$o,ki,Zn,vM,mv,xM,wM,eS;class J_{constructor(e,t=0,s=0,i=!0){A(this,Zn);A(this,wg);A(this,bg);A(this,$o,[]);A(this,ki,[]);const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:g,y:m,width:w,height:v}of e){const x=Math.floor((g-t)/o)*o,_=Math.ceil((g+w+t)/o)*o,S=Math.floor((m-t)/o)*o,E=Math.ceil((m+v+t)/o)*o,P=[x,S,E,!0],T=[_,S,E,!1];c(this,$o).push(P,T),he.rectBoundingBox(x,S,_,E,r)}const l=r[2]-r[0]+2*s,u=r[3]-r[1]+2*s,d=r[0]-s,f=r[1]-s,p=c(this,$o).at(i?-1:-2),y=[p[0],p[2]];for(const g of c(this,$o)){const[m,w,v]=g;g[0]=(m-d)/l,g[1]=(w-f)/u,g[2]=(v-f)/u}b(this,wg,new Float32Array([d,f,l,u])),b(this,bg,y)}getOutlines(){c(this,$o).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of c(this,$o))t[3]?(e.push(...k(this,Zn,eS).call(this,t)),k(this,Zn,xM).call(this,t)):(k(this,Zn,wM).call(this,t),e.push(...k(this,Zn,eS).call(this,t)));return k(this,Zn,vM).call(this,e)}}wg=new WeakMap,bg=new WeakMap,$o=new WeakMap,ki=new WeakMap,Zn=new WeakSet,vM=function(e){const t=[],s=new Set;for(const a of e){const[o,l,u]=a;t.push([o,l,a],[o,u,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],u=t[a+1][2];l.push(u),u.push(l),s.add(l),s.add(u)}const i=[];let r;for(;s.size>0;){const a=s.values().next().value;let[o,l,u,d,f]=a;s.delete(a);let p=o,y=l;for(r=[o,u],i.push(r);;){let g;if(s.has(d))g=d;else if(s.has(f))g=f;else break;s.delete(g),[o,l,u,d,f]=g,p!==o&&(r.push(p,y,o,y===l?l:u),p=o),y=y===l?u:l}r.push(p,y)}return new yU(i,c(this,wg),c(this,bg))},mv=function(e){const t=c(this,ki);let s=0,i=t.length-1;for(;s<=i;){const r=s+i>>1,a=t[r][0];if(a===e)return r;a<e?s=r+1:i=r-1}return i+1},xM=function([,e,t]){const s=k(this,Zn,mv).call(this,e);c(this,ki).splice(s,0,[e,t])},wM=function([,e,t]){const s=k(this,Zn,mv).call(this,e);for(let i=s;i<c(this,ki).length;i++){const[r,a]=c(this,ki)[i];if(r!==e)break;if(r===e&&a===t){c(this,ki).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,a]=c(this,ki)[i];if(r!==e)break;if(r===e&&a===t){c(this,ki).splice(i,1);return}}},eS=function(e){const[t,s,i]=e,r=[[t,s,i]],a=k(this,Zn,mv).call(this,i);for(let o=0;o<a;o++){const[l,u]=c(this,ki)[o];for(let d=0,f=r.length;d<f;d++){const[,p,y]=r[d];if(!(u<=p||y<=l)){if(p>=l){if(y>u)r[d][1]=u;else{if(f===1)return[];r.splice(d,1),d--,f--}continue}r[d][2]=l,y>u&&r.push([t,u,y])}}}return r};var _g,Nh;class yU extends ie{constructor(t,s,i){super();A(this,_g);A(this,Nh);b(this,Nh,t),b(this,_g,s),this.lastPoint=i}toSVGPath(){const t=[];for(const s of c(this,Nh)){let[i,r]=s;t.push(`M${i} ${r}`);for(let a=2;a<s.length;a+=2){const o=s[a],l=s[a+1];o===i?(t.push(`V${l}`),r=l):l===r&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,s,i,r],a){const o=[],l=i-t,u=r-s;for(const d of c(this,Nh)){const f=new Array(d.length);for(let p=0;p<d.length;p+=2)f[p]=t+d[p]*l,f[p+1]=r-d[p+1]*u;o.push(f)}return o}get box(){return c(this,_g)}get classNamesForOutlining(){return["highlightOutline"]}}_g=new WeakMap,Nh=new WeakMap;class tS extends dx{newFreeDrawOutline(e,t,s,i,r,a){return new vU(e,t,s,i,r,a)}}class vU extends gM{newOutliner(e,t,s,i,r,a=0){return new tS(e,t,s,i,r,a)}}var Ns,Hc,Rh,qt,Sg,Ih,wa,Ag,Vo,Ei,Dh,Cg,nt,nS,sS,iS,Ol,bM,Qa;const is=class is{constructor({editor:e=null,uiManager:t=null}){A(this,nt);A(this,Ns,null);A(this,Hc,null);A(this,Rh);A(this,qt,null);A(this,Sg,!1);A(this,Ih,!1);A(this,wa,null);A(this,Ag);A(this,Vo,null);A(this,Ei,null);A(this,Dh);var s,i;e?(b(this,Ih,!1),b(this,Dh,Fe.HIGHLIGHT_COLOR),b(this,wa,e)):(b(this,Ih,!0),b(this,Dh,Fe.HIGHLIGHT_DEFAULT_COLOR)),b(this,Ei,(e==null?void 0:e._uiManager)||t),b(this,Ag,c(this,Ei)._eventBus),b(this,Rh,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((i=c(this,Ei))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),c(is,Cg)||b(is,Cg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return De(this,"_keyboardManager",new Gg([[["Escape","mac+Escape"],is.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],is.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],is.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],is.prototype._moveToPrevious],[["Home","mac+Home"],is.prototype._moveToBeginning],[["End","mac+End"],is.prototype._moveToEnd]]))}renderButton(){const e=b(this,Ns,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",c(this,wa)&&(e.ariaControls=`${c(this,wa).id}_colorpicker_dropdown`);const t=c(this,Ei)._signal;e.addEventListener("click",k(this,nt,Ol).bind(this),{signal:t}),e.addEventListener("keydown",k(this,nt,iS).bind(this),{signal:t});const s=b(this,Hc,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=c(this,Rh),e.append(s),e}renderMainDropdown(){const e=b(this,qt,k(this,nt,nS).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===c(this,Ns)){k(this,nt,Ol).call(this,e);return}const t=e.target.getAttribute("data-color");t&&k(this,nt,sS).call(this,t,e)}_moveToNext(e){var t,s;if(!c(this,nt,Qa)){k(this,nt,Ol).call(this,e);return}if(e.target===c(this,Ns)){(t=c(this,qt).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=c(this,qt))==null?void 0:t.firstChild)||e.target===c(this,Ns)){c(this,nt,Qa)&&this._hideDropdownFromKeyboard();return}c(this,nt,Qa)||k(this,nt,Ol).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!c(this,nt,Qa)){k(this,nt,Ol).call(this,e);return}(t=c(this,qt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,nt,Qa)){k(this,nt,Ol).call(this,e);return}(t=c(this,qt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,qt))==null||e.classList.add("hidden"),c(this,Ns).ariaExpanded="false",(t=c(this,Vo))==null||t.abort(),b(this,Vo,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,Ih)){if(!c(this,nt,Qa)){(e=c(this,wa))==null||e.unselect();return}this.hideDropdown(),c(this,Ns).focus({preventScroll:!0,focusVisible:c(this,Sg)})}}updateColor(e){if(c(this,Hc)&&(c(this,Hc).style.backgroundColor=e),!c(this,qt))return;const t=c(this,Ei).highlightColors.values();for(const s of c(this,qt).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=c(this,Ns))==null||e.remove(),b(this,Ns,null),b(this,Hc,null),(t=c(this,qt))==null||t.remove(),b(this,qt,null)}};Ns=new WeakMap,Hc=new WeakMap,Rh=new WeakMap,qt=new WeakMap,Sg=new WeakMap,Ih=new WeakMap,wa=new WeakMap,Ag=new WeakMap,Vo=new WeakMap,Ei=new WeakMap,Dh=new WeakMap,Cg=new WeakMap,nt=new WeakSet,nS=function(){const e=document.createElement("div"),t=c(this,Ei)._signal;e.addEventListener("contextmenu",Hi,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),c(this,wa)&&(e.id=`${c(this,wa).id}_colorpicker_dropdown`);for(const[s,i]of c(this,Ei).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",c(is,Cg)[s]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=i,r.ariaSelected=i===c(this,Rh),r.addEventListener("click",k(this,nt,sS).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",k(this,nt,iS).bind(this),{signal:t}),e},sS=function(e,t){t.stopPropagation(),c(this,Ag).dispatch("switchannotationeditorparams",{source:this,type:c(this,Dh),value:e})},iS=function(e){is._keyboardManager.exec(this,e)},Ol=function(e){if(c(this,nt,Qa)){this.hideDropdown();return}if(b(this,Sg,e.detail===0),c(this,Vo)||(b(this,Vo,new AbortController),window.addEventListener("pointerdown",k(this,nt,bM).bind(this),{signal:c(this,Ei).combinedSignal(c(this,Vo))})),c(this,Ns).ariaExpanded="true",c(this,qt)){c(this,qt).classList.remove("hidden");return}const t=b(this,qt,k(this,nt,nS).call(this));c(this,Ns).append(t)},bM=function(e){var t;(t=c(this,qt))!=null&&t.contains(e.target)||this.hideDropdown()},Qa=function(){return c(this,qt)&&!c(this,qt).classList.contains("hidden")},A(is,Cg,null);let hx=is;var Mh,kg,ba,Wc,Eg,us,Tg,Pg,qc,ti,Rs,pn,jh,_a,Rn,Lh,ni,Ng,_e,rS,gv,_M,SM,AM,aS,Fl,oi,Xu,CM,yv,Jf,kM,EM,TM,PM,NM;const qe=class qe extends ct{constructor(t){super({...t,name:"highlightEditor"});A(this,_e);A(this,Mh,null);A(this,kg,0);A(this,ba);A(this,Wc,null);A(this,Eg,null);A(this,us,null);A(this,Tg,null);A(this,Pg,0);A(this,qc,null);A(this,ti,null);A(this,Rs,null);A(this,pn,!1);A(this,jh,null);A(this,_a);A(this,Rn,null);A(this,Lh,"");A(this,ni);A(this,Ng,"");this.color=t.color||qe._defaultColor,b(this,ni,t.thickness||qe._defaultThickness),b(this,_a,t.opacity||qe._defaultOpacity),b(this,ba,t.boxes||null),b(this,Ng,t.methodOfCreation||""),b(this,Lh,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(b(this,pn,!0),k(this,_e,gv).call(this,t),k(this,_e,Fl).call(this)):c(this,ba)&&(b(this,Mh,t.anchorNode),b(this,kg,t.anchorOffset),b(this,Tg,t.focusNode),b(this,Pg,t.focusOffset),k(this,_e,rS).call(this),k(this,_e,Fl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=qe.prototype;return De(this,"_keyboardManager",new Gg([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,pn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,ni),methodOfCreation:c(this,Ng)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var i;ct.initialize(t,s),qe._defaultColor||(qe._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case Fe.HIGHLIGHT_DEFAULT_COLOR:qe._defaultColor=s;break;case Fe.HIGHLIGHT_THICKNESS:qe._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return c(this,jh)}updateParams(t,s){switch(t){case Fe.HIGHLIGHT_COLOR:k(this,_e,_M).call(this,s);break;case Fe.HIGHLIGHT_THICKNESS:k(this,_e,SM).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Fe.HIGHLIGHT_DEFAULT_COLOR,qe._defaultColor],[Fe.HIGHLIGHT_THICKNESS,qe._defaultThickness]]}get propertiesToUpdate(){return[[Fe.HIGHLIGHT_COLOR,this.color||qe._defaultColor],[Fe.HIGHLIGHT_THICKNESS,c(this,ni)||qe._defaultThickness],[Fe.HIGHLIGHT_FREE,c(this,pn)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",b(this,Eg,new hx({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(k(this,_e,Jf).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,k(this,_e,Jf).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){k(this,_e,aS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,_e,Fl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?k(this,_e,aS).call(this):t&&(k(this,_e,Fl).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var r,a,o;const{drawLayer:s}=this.parent;let i;c(this,pn)?(t=(t-this.rotation+360)%360,i=k(r=qe,oi,Xu).call(r,c(this,ti).box,t)):i=k(a=qe,oi,Xu).call(a,[this.x,this.y,this.width,this.height],t),s.updateProperties(c(this,Rs),{bbox:i,root:{"data-main-rotation":t}}),s.updateProperties(c(this,Rn),{bbox:k(o=qe,oi,Xu).call(o,c(this,us).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();c(this,Lh)&&(t.setAttribute("aria-label",c(this,Lh)),t.setAttribute("role","mark")),c(this,pn)?t.classList.add("free"):this.div.addEventListener("keydown",k(this,_e,CM).bind(this),{signal:this._uiManager._signal});const s=b(this,qc,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=c(this,Wc);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),XI(this,c(this,qc),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Rn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,Rn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:k(this,_e,yv).call(this,!0);break;case 1:case 3:k(this,_e,yv).call(this,!1);break}}select(){var t;super.select(),c(this,Rn)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Rn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),c(this,Rn)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,Rn),{rootClass:{selected:!1}}),c(this,pn)||k(this,_e,yv).call(this,!1))}get _mustFixPosition(){return!c(this,pn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(c(this,Rs),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(c(this,Rn),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:i,x:r,y:a}){const{x:o,y:l,width:u,height:d}=i.getBoundingClientRect(),f=new AbortController,p=t.combinedSignal(f),y=g=>{f.abort(),k(this,oi,PM).call(this,t,g)};window.addEventListener("blur",y,{signal:p}),window.addEventListener("pointerup",y,{signal:p}),window.addEventListener("pointerdown",Ot,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",Hi,{signal:p}),i.addEventListener("pointermove",k(this,oi,TM).bind(this,t),{signal:p}),this._freeHighlight=new tS({x:r,y:a},[o,l,u,d],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,i){var m,w,v,x;let r=null;if(t instanceof sM){const{data:{quadPoints:_,rect:S,rotation:E,id:P,color:T,opacity:N,popupRef:I},parent:{page:{pageNumber:D}}}=t;r=t={annotationType:xe.HIGHLIGHT,color:Array.from(T),opacity:N,quadPoints:_,boxes:null,pageIndex:D-1,rect:S.slice(0),rotation:E,annotationElementId:P,id:P,deleted:!1,popupRef:I}}else if(t instanceof m1){const{data:{inkLists:_,rect:S,rotation:E,id:P,color:T,borderStyle:{rawWidth:N},popupRef:I},parent:{page:{pageNumber:D}}}=t;r=t={annotationType:xe.HIGHLIGHT,color:Array.from(T),thickness:N,inkLists:_,boxes:null,pageIndex:D-1,rect:S.slice(0),rotation:E,annotationElementId:P,id:P,deleted:!1,popupRef:I}}const{color:a,quadPoints:o,inkLists:l,opacity:u}=t,d=await super.deserialize(t,s,i);d.color=he.makeHexColor(...a),b(d,_a,u||1),l&&b(d,ni,t.thickness),d._initialData=r;const[f,p]=d.pageDimensions,[y,g]=d.pageTranslation;if(o){const _=b(d,ba,[]);for(let S=0;S<o.length;S+=8)_.push({x:(o[S]-y)/f,y:1-(o[S+1]-g)/p,width:(o[S+2]-o[S])/f,height:(o[S+1]-o[S+5])/p});k(m=d,_e,rS).call(m),k(w=d,_e,Fl).call(w),d.rotate(d.rotation)}else if(l){b(d,pn,!0);const _=l[0],S={x:_[0]-y,y:p-(_[1]-g)},E=new tS(S,[0,0,f,p],1,c(d,ni)/2,!0,.001);for(let N=0,I=_.length;N<I;N+=2)S.x=_[N]-y,S.y=p-(_[N+1]-g),E.add(S);const{id:P,clipPathId:T}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);k(v=d,_e,gv).call(v,{highlightOutlines:E.getOutlines(),highlightId:P,clipPathId:T}),k(x=d,_e,Fl).call(x),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),i=ct._colorManager.convert(this.color),r={annotationType:xe.HIGHLIGHT,color:i,opacity:c(this,_a),thickness:c(this,ni),quadPoints:k(this,_e,kM).call(this),outlines:k(this,_e,EM).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:k(this,_e,Jf).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!k(this,_e,NM).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Mh=new WeakMap,kg=new WeakMap,ba=new WeakMap,Wc=new WeakMap,Eg=new WeakMap,us=new WeakMap,Tg=new WeakMap,Pg=new WeakMap,qc=new WeakMap,ti=new WeakMap,Rs=new WeakMap,pn=new WeakMap,jh=new WeakMap,_a=new WeakMap,Rn=new WeakMap,Lh=new WeakMap,ni=new WeakMap,Ng=new WeakMap,_e=new WeakSet,rS=function(){const t=new J_(c(this,ba),.001);b(this,ti,t.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,ti).box;const s=new J_(c(this,ba),.0025,.001,this._uiManager.direction==="ltr");b(this,us,s.getOutlines());const{lastPoint:i}=c(this,us);b(this,jh,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},gv=function({highlightOutlines:t,highlightId:s,clipPathId:i}){var f,p;if(b(this,ti,t),b(this,us,t.getNewOutline(c(this,ni)/2+1.5,.0025)),s>=0)b(this,Rs,s),b(this,Wc,i),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),b(this,Rn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,us).box,path:{d:c(this,us).toSVGPath()}},!0));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,Rs),{bbox:k(f=qe,oi,Xu).call(f,c(this,ti).box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,Rn),{bbox:k(p=qe,oi,Xu).call(p,c(this,us).box,y),path:{d:c(this,us).toSVGPath()}})}const[a,o,l,u]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=u;break;case 90:{const[y,g]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*g/y,this.height=u*y/g;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=u;break;case 270:{const[y,g]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*g/y,this.height=u*y/g;break}}const{lastPoint:d}=c(this,us);b(this,jh,[(d[0]-a)/l,(d[1]-o)/u])},_M=function(t){const s=(a,o)=>{var l,u;this.color=a,b(this,_a,o),(l=this.parent)==null||l.drawLayer.updateProperties(c(this,Rs),{root:{fill:a,"fill-opacity":o}}),(u=c(this,Eg))==null||u.updateColor(a)},i=this.color,r=c(this,_a);this.addCommands({cmd:s.bind(this,t,qe._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},SM=function(t){const s=c(this,ni),i=r=>{b(this,ni,r),k(this,_e,AM).call(this,r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},AM=function(t){if(!c(this,pn))return;k(this,_e,gv).call(this,{highlightOutlines:c(this,ti).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)},aS=function(){c(this,Rs)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Rs)),b(this,Rs,null),this.parent.drawLayer.remove(c(this,Rn)),b(this,Rn,null))},Fl=function(t=this.parent){c(this,Rs)===null&&({id:Jt(this,Rs)._,clipPathId:Jt(this,Wc)._}=t.drawLayer.draw({bbox:c(this,ti).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":c(this,_a)},rootClass:{highlight:!0,free:c(this,pn)},path:{d:c(this,ti).toSVGPath()}},!1,!0),b(this,Rn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,pn)},bbox:c(this,us).box,path:{d:c(this,us).toSVGPath()}},c(this,pn))),c(this,qc)&&(c(this,qc).style.clipPath=c(this,Wc)))},oi=new WeakSet,Xu=function([t,s,i,r],a){switch(a){case 90:return[1-s-r,t,r,i];case 180:return[1-t-i,1-s-r,i,r];case 270:return[s,1-t-i,r,i]}return[t,s,i,r]},CM=function(t){qe._keyboardManager.exec(this,t)},yv=function(t){if(!c(this,Mh))return;const s=window.getSelection();t?s.setPosition(c(this,Mh),c(this,kg)):s.setPosition(c(this,Tg),c(this,Pg))},Jf=function(){return c(this,pn)?this.rotation:0},kM=function(){if(c(this,pn))return null;const[t,s]=this.pageDimensions,[i,r]=this.pageTranslation,a=c(this,ba),o=new Float32Array(a.length*8);let l=0;for(const{x:u,y:d,width:f,height:p}of a){const y=u*t+i,g=(1-d)*s+r;o[l]=o[l+4]=y,o[l+1]=o[l+3]=g,o[l+2]=o[l+6]=y+f*t,o[l+5]=o[l+7]=g-p*s,l+=8}return o},EM=function(t){return c(this,ti).serialize(t,k(this,_e,Jf).call(this))},TM=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},PM=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},NM=function(t){const{color:s}=this._initialData;return t.color.some((i,r)=>i!==s[r])},A(qe,oi),q(qe,"_defaultColor",null),q(qe,"_defaultOpacity",1),q(qe,"_defaultThickness",12),q(qe,"_type","highlight"),q(qe,"_editorType",xe.HIGHLIGHT),q(qe,"_freeHighlightId",-1),q(qe,"_freeHighlight",null),q(qe,"_freeHighlightClipId","");let fx=qe;var Gc;class RM{constructor(){A(this,Gc,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){c(this,Gc)[e]=t}toSVGProperties(){const e=c(this,Gc);return b(this,Gc,Object.create(null)),{root:e}}reset(){b(this,Gc,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){st("Not implemented")}}Gc=new WeakMap;var Is,Oh,sn,Kc,Xc,Bo,zo,Uo,Yc,ze,oS,lS,cS,ep,IM,vv,tp,Yu;const ae=class ae extends ct{constructor(t){super(t);A(this,ze);A(this,Is,null);A(this,Oh);q(this,"_drawId",null);b(this,Oh,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(k(this,ze,oS).call(this,t),k(this,ze,ep).call(this))}static _mergeSVGProperties(t,s){const i=new Set(Object.keys(t));for(const[r,a]of Object.entries(s))i.has(r)?Object.assign(t[r],a):t[r]=a;return t}static getDefaultDrawingOptions(t){st("Not implemented")}static get typesMap(){st("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(c(ae,sn).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,s[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,s[r]]);return t}_updateProperty(t,s,i){const r=this._drawingOptions,a=r[s],o=l=>{var d;r.updateProperty(s,l);const u=c(this,Is).updateProperty(s,l);u&&k(this,ze,tp).call(this,u),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties(c(this,Is).getPathResizingSVGProperties(k(this,ze,vv).call(this)),{bbox:k(this,ze,Yu).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties(c(this,Is).getPathResizedSVGProperties(k(this,ze,vv).call(this)),{bbox:k(this,ze,Yu).call(this)}))}_onTranslating(t,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:k(this,ze,Yu).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties(c(this,Is).getPathTranslatedSVGProperties(k(this,ze,vv).call(this),this.parentDimensions),{bbox:k(this,ze,Yu).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,Oh)&&(b(this,Oh,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){k(this,ze,cS).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,ze,ep).call(this),k(this,ze,tp).call(this,c(this,Is).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),k(this,ze,cS).call(this)):t&&(this._uiManager.addShouldRescale(this),k(this,ze,ep).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties({bbox:k(this,ze,Yu).call(this)},c(this,Is).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&k(this,ze,tp).call(this,c(this,Is).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),i}static createDrawerInstance(t,s,i,r,a){st("Not implemented")}static startDrawing(t,s,i,r){var w;const{target:a,offsetX:o,offsetY:l,pointerId:u,pointerType:d}=r;if(c(ae,zo)&&c(ae,zo)!==d)return;const{viewport:{rotation:f}}=t,{width:p,height:y}=a.getBoundingClientRect(),g=b(ae,Kc,new AbortController),m=t.combinedSignal(g);if(c(ae,Bo)||b(ae,Bo,u),c(ae,zo)??b(ae,zo,d),window.addEventListener("pointerup",v=>{var x;c(ae,Bo)===v.pointerId?this._endDraw(v):(x=c(ae,Uo))==null||x.delete(v.pointerId)},{signal:m}),window.addEventListener("pointercancel",v=>{var x;c(ae,Bo)===v.pointerId?this._currentParent.endDrawingSession():(x=c(ae,Uo))==null||x.delete(v.pointerId)},{signal:m}),window.addEventListener("pointerdown",v=>{c(ae,zo)===v.pointerType&&((c(ae,Uo)||b(ae,Uo,new Set)).add(v.pointerId),c(ae,sn).isCancellable()&&(c(ae,sn).removeLastElement(),c(ae,sn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Hi,{signal:m}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),a.addEventListener("touchmove",v=>{v.timeStamp===c(ae,Yc)&&Ot(v)},{signal:m}),t.toggleDrawing(),(w=s._editorUndoBar)==null||w.hide(),c(ae,sn)){t.drawLayer.updateProperties(this._currentDrawId,c(ae,sn).startNew(o,l,p,y,f));return}s.updateUIForDefaultProperties(this),b(ae,sn,this.createDrawerInstance(o,l,p,y,f)),b(ae,Xc,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(c(ae,Xc).toSVGProperties(),c(ae,sn).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(b(ae,Yc,-1),!c(ae,sn))return;const{offsetX:s,offsetY:i,pointerId:r}=t;if(c(ae,Bo)===r){if(((a=c(ae,Uo))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(ae,sn).add(s,i)),b(ae,Yc,t.timeStamp),Ot(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,b(ae,sn,null),b(ae,Xc,null),b(ae,zo,null),b(ae,Yc,NaN)),c(ae,Kc)&&(c(ae,Kc).abort(),b(ae,Kc,null),b(ae,Bo,NaN),b(ae,Uo,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,c(ae,sn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=c(ae,sn),r=this._currentDrawId,a=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(a))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:Fe.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(Fe.DRAW_STEP),!c(ae,sn).isEmpty()){const{pageDimensions:[i,r],scale:a}=s,o=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(ae,sn).getOutlines(i*a,r*a,a,this._INNER_MARGIN),drawingOptions:c(ae,Xc),mustBeCommitted:!t});return this._cleanup(!0),o}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,i,r,a,o){st("Not implemented")}static async deserialize(t,s,i){var f,p;const{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:l}}=s.viewport,u=this.deserializeDraw(o,l,r,a,this._INNER_MARGIN,t),d=await super.deserialize(t,s,i);return d.createDrawingOptions(t),k(f=d,ze,oS).call(f,{drawOutlines:u}),k(p=d,ze,ep).call(p),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[s,i]=this.pageTranslation,[r,a]=this.pageDimensions;return c(this,Is).serialize([s,i,r,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Is=new WeakMap,Oh=new WeakMap,sn=new WeakMap,Kc=new WeakMap,Xc=new WeakMap,Bo=new WeakMap,zo=new WeakMap,Uo=new WeakMap,Yc=new WeakMap,ze=new WeakSet,oS=function({drawOutlines:t,drawId:s,drawingOptions:i}){b(this,Is,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=k(this,ze,lS).call(this,t,this.parent),k(this,ze,tp).call(this,t.box)},lS=function(t,s){const{id:i}=s.drawLayer.draw(ae._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},cS=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},ep=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=k(this,ze,lS).call(this,c(this,Is),t)}},IM=function([t,s,i,r]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[s,1-t,i*(o/a),r*(a/o)];case 180:return[1-t,1-s,i,r];case 270:return[1-s,t,i*(o/a),r*(a/o)];default:return[t,s,i,r]}},vv=function(){const{x:t,y:s,width:i,height:r,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-s,t,i*(a/o),r*(o/a)];case 180:return[1-t,1-s,i,r];case 270:return[s,1-t,i*(a/o),r*(o/a)];default:return[t,s,i,r]}},tp=function(t){if([this.x,this.y,this.width,this.height]=k(this,ze,IM).call(this,t),this.div){this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)}this._onResized()},Yu=function(){const{x:t,y:s,width:i,height:r,rotation:a,parentRotation:o,parentDimensions:[l,u]}=this;switch((a*4+o)/90){case 1:return[1-s-r,t,r,i];case 2:return[1-t-i,1-s-r,i,r];case 3:return[s,1-t-i,r,i];case 4:return[t,s-i*(l/u),r*(u/l),i*(l/u)];case 5:return[1-s,t,i*(l/u),r*(u/l)];case 6:return[1-t-r*(u/l),1-s,r*(u/l),i*(l/u)];case 7:return[s-i*(l/u),1-t-r*(u/l),i*(l/u),r*(u/l)];case 8:return[t-i,s-r,i,r];case 9:return[1-s,t-i,r,i];case 10:return[1-t,1-s,i,r];case 11:return[s-r,1-t,r,i];case 12:return[t-r*(u/l),s,r*(u/l),i*(l/u)];case 13:return[1-s-i*(l/u),t-r*(u/l),i*(l/u),r*(u/l)];case 14:return[1-t,1-s-i*(l/u),r*(u/l),i*(l/u)];case 15:return[s,1-t,i*(l/u),r*(u/l)];default:return[t,s,i,r]}},q(ae,"_currentDrawId",-1),q(ae,"_currentParent",null),A(ae,sn,null),A(ae,Kc,null),A(ae,Xc,null),A(ae,Bo,NaN),A(ae,zo,null),A(ae,Uo,null),A(ae,Yc,NaN),q(ae,"_INNER_MARGIN",3);let px=ae;var gr,rn,an,Qc,Fh,Bn,mn,si,Zc,Jc,eu,$h,xv;class xU{constructor(e,t,s,i,r,a){A(this,$h);A(this,gr,new Float64Array(6));A(this,rn);A(this,an);A(this,Qc);A(this,Fh);A(this,Bn);A(this,mn,"");A(this,si,0);A(this,Zc,new Xg);A(this,Jc);A(this,eu);b(this,Jc,s),b(this,eu,i),b(this,Qc,r),b(this,Fh,a),[e,t]=k(this,$h,xv).call(this,e,t);const o=b(this,rn,[NaN,NaN,NaN,NaN,e,t]);b(this,Bn,[e,t]),b(this,an,[{line:o,points:c(this,Bn)}]),c(this,gr).set(o,0)}updateProperty(e,t){e==="stroke-width"&&b(this,Fh,t)}isEmpty(){return!c(this,an)||c(this,an).length===0}isCancellable(){return c(this,Bn).length<=10}add(e,t){[e,t]=k(this,$h,xv).call(this,e,t);const[s,i,r,a]=c(this,gr).subarray(2,6),o=e-r,l=t-a;return Math.hypot(c(this,Jc)*o,c(this,eu)*l)<=2?null:(c(this,Bn).push(e,t),isNaN(s)?(c(this,gr).set([r,a,e,t],2),c(this,rn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(c(this,gr)[0])&&c(this,rn).splice(6,6),c(this,gr).set([s,i,r,a,e,t],0),c(this,rn).push(...ie.createBezierPoints(s,i,r,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(c(this,Bn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,r){b(this,Jc,s),b(this,eu,i),b(this,Qc,r),[e,t]=k(this,$h,xv).call(this,e,t);const a=b(this,rn,[NaN,NaN,NaN,NaN,e,t]);b(this,Bn,[e,t]);const o=c(this,an).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),c(this,an).push({line:a,points:c(this,Bn)}),c(this,gr).set(a,0),b(this,si,0),this.toSVGPath(),null}getLastElement(){return c(this,an).at(-1)}setLastElement(e){return c(this,an)?(c(this,an).push(e),b(this,rn,e.line),b(this,Bn,e.points),b(this,si,0),{path:{d:this.toSVGPath()}}):c(this,Zc).setLastElement(e)}removeLastElement(){if(!c(this,an))return c(this,Zc).removeLastElement();c(this,an).pop(),b(this,mn,"");for(let e=0,t=c(this,an).length;e<t;e++){const{line:s,points:i}=c(this,an)[e];b(this,rn,s),b(this,Bn,i),b(this,si,0),this.toSVGPath()}return{path:{d:c(this,mn)}}}toSVGPath(){const e=ie.svgRound(c(this,rn)[4]),t=ie.svgRound(c(this,rn)[5]);if(c(this,Bn).length===2)return b(this,mn,`${c(this,mn)} M ${e} ${t} Z`),c(this,mn);if(c(this,Bn).length<=6){const i=c(this,mn).lastIndexOf("M");b(this,mn,`${c(this,mn).slice(0,i)} M ${e} ${t}`),b(this,si,6)}if(c(this,Bn).length===4){const i=ie.svgRound(c(this,rn)[10]),r=ie.svgRound(c(this,rn)[11]);return b(this,mn,`${c(this,mn)} L ${i} ${r}`),b(this,si,12),c(this,mn)}const s=[];c(this,si)===0&&(s.push(`M ${e} ${t}`),b(this,si,6));for(let i=c(this,si),r=c(this,rn).length;i<r;i+=6){const[a,o,l,u,d,f]=c(this,rn).slice(i,i+6).map(ie.svgRound);s.push(`C${a} ${o} ${l} ${u} ${d} ${f}`)}return b(this,mn,c(this,mn)+s.join(" ")),b(this,si,c(this,rn).length),c(this,mn)}getOutlines(e,t,s,i){const r=c(this,an).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),c(this,Zc).build(c(this,an),e,t,s,c(this,Qc),c(this,Fh),i),b(this,gr,null),b(this,rn,null),b(this,an,null),b(this,mn,null),c(this,Zc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}gr=new WeakMap,rn=new WeakMap,an=new WeakMap,Qc=new WeakMap,Fh=new WeakMap,Bn=new WeakMap,mn=new WeakMap,si=new WeakMap,Zc=new WeakMap,Jc=new WeakMap,eu=new WeakMap,$h=new WeakSet,xv=function(e,t){return ie._normalizePoint(e,t,c(this,Jc),c(this,eu),c(this,Qc))};var zn,Rg,Ig,Ds,yr,vr,Vh,Bh,tu,vn,Ur,DM,MM,jM;class Xg extends ie{constructor(){super(...arguments);A(this,vn);A(this,zn);A(this,Rg,0);A(this,Ig);A(this,Ds);A(this,yr);A(this,vr);A(this,Vh);A(this,Bh);A(this,tu)}build(t,s,i,r,a,o,l){b(this,yr,s),b(this,vr,i),b(this,Vh,r),b(this,Bh,a),b(this,tu,o),b(this,Ig,l??0),b(this,Ds,t),k(this,vn,MM).call(this)}get thickness(){return c(this,tu)}setLastElement(t){return c(this,Ds).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,Ds).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of c(this,Ds)){if(t.push(`M${ie.svgRound(s[4])} ${ie.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${ie.svgRound(s[10])} ${ie.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[a,o,l,u,d,f]=s.subarray(i,i+6).map(ie.svgRound);t.push(`C${a} ${o} ${l} ${u} ${d} ${f}`)}}return t.join("")}serialize([t,s,i,r],a){const o=[],l=[],[u,d,f,p]=k(this,vn,DM).call(this);let y,g,m,w,v,x,_,S,E;switch(c(this,Bh)){case 0:E=ie._rescale,y=t,g=s+r,m=i,w=-r,v=t+u*i,x=s+(1-d-p)*r,_=t+(u+f)*i,S=s+(1-d)*r;break;case 90:E=ie._rescaleAndSwap,y=t,g=s,m=i,w=r,v=t+d*i,x=s+u*r,_=t+(d+p)*i,S=s+(u+f)*r;break;case 180:E=ie._rescale,y=t+i,g=s,m=-i,w=r,v=t+(1-u-f)*i,x=s+d*r,_=t+(1-u)*i,S=s+(d+p)*r;break;case 270:E=ie._rescaleAndSwap,y=t+i,g=s+r,m=-i,w=-r,v=t+(1-d-p)*i,x=s+(1-u-f)*r,_=t+(1-d)*i,S=s+(1-u)*r;break}for(const{line:P,points:T}of c(this,Ds))o.push(E(P,y,g,m,w,a?new Array(P.length):null)),l.push(E(T,y,g,m,w,a?new Array(T.length):null));return{lines:o,points:l,rect:[v,x,_,S]}}static deserialize(t,s,i,r,a,{paths:{lines:o,points:l},rotation:u,thickness:d}){const f=[];let p,y,g,m,w;switch(u){case 0:w=ie._rescale,p=-t/i,y=s/r+1,g=1/i,m=-1/r;break;case 90:w=ie._rescaleAndSwap,p=-s/r,y=-t/i,g=1/r,m=1/i;break;case 180:w=ie._rescale,p=t/i+1,y=-s/r,g=-1/i,m=1/r;break;case 270:w=ie._rescaleAndSwap,p=s/r+1,y=t/i+1,g=-1/r,m=-1/i;break}if(!o){o=[];for(const x of l){const _=x.length;if(_===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(_===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const S=new Float32Array(3*(_-2));o.push(S);let[E,P,T,N]=x.subarray(0,4);S.set([NaN,NaN,NaN,NaN,E,P],0);for(let I=4;I<_;I+=2){const D=x[I],j=x[I+1];S.set(ie.createBezierPoints(E,P,T,N,D,j),(I-2)*3),[E,P,T,N]=[T,N,D,j]}}}for(let x=0,_=o.length;x<_;x++)f.push({line:w(o[x].map(S=>S??NaN),p,y,g,m),points:w(l[x].map(S=>S??NaN),p,y,g,m)});const v=new this.prototype.constructor;return v.build(f,i,r,1,u,d,a),v}get box(){return c(this,zn)}updateProperty(t,s){return t==="stroke-width"?k(this,vn,jM).call(this,s):null}updateParentDimensions([t,s],i){const[r,a]=k(this,vn,Ur).call(this);b(this,yr,t),b(this,vr,s),b(this,Vh,i);const[o,l]=k(this,vn,Ur).call(this),u=o-r,d=l-a,f=c(this,zn);return f[0]-=u,f[1]-=d,f[2]+=2*u,f[3]+=2*d,f}updateRotation(t){return b(this,Rg,t),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,zn).map(ie.svgRound).join(" ")}get defaultProperties(){const[t,s]=c(this,zn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=c(this,zn);let i=0,r=0,a=0,o=0,l=0,u=0;switch(c(this,Rg)){case 90:r=s/t,a=-t/s,l=t;break;case 180:i=-1,o=-1,l=t,u=s;break;case 270:r=-s/t,a=t/s,u=s;break;default:return""}return`matrix(${i} ${r} ${a} ${o} ${ie.svgRound(l)} ${ie.svgRound(u)})`}getPathResizingSVGProperties([t,s,i,r]){const[a,o]=k(this,vn,Ur).call(this),[l,u,d,f]=c(this,zn);if(Math.abs(d-a)<=ie.PRECISION||Math.abs(f-o)<=ie.PRECISION){const w=t+i/2-(l+d/2),v=s+r/2-(u+f/2);return{path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(s)}`,transform:`${this.rotationTransform} translate(${w} ${v})`}}}const p=(i-2*a)/(d-2*a),y=(r-2*o)/(f-2*o),g=d/i,m=f/r;return{path:{"transform-origin":`${ie.svgRound(l)} ${ie.svgRound(u)}`,transform:`${this.rotationTransform} scale(${g} ${m}) translate(${ie.svgRound(a)} ${ie.svgRound(o)}) scale(${p} ${y}) translate(${ie.svgRound(-a)} ${ie.svgRound(-o)})`}}}getPathResizedSVGProperties([t,s,i,r]){const[a,o]=k(this,vn,Ur).call(this),l=c(this,zn),[u,d,f,p]=l;if(l[0]=t,l[1]=s,l[2]=i,l[3]=r,Math.abs(f-a)<=ie.PRECISION||Math.abs(p-o)<=ie.PRECISION){const v=t+i/2-(u+f/2),x=s+r/2-(d+p/2);for(const{line:_,points:S}of c(this,Ds))ie._translate(_,v,x,_),ie._translate(S,v,x,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(i-2*a)/(f-2*a),g=(r-2*o)/(p-2*o),m=-y*(u+a)+t+a,w=-g*(d+o)+s+o;if(y!==1||g!==1||m!==0||w!==0)for(const{line:v,points:x}of c(this,Ds))ie._rescale(v,m,w,y,g,v),ie._rescale(x,m,w,y,g,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],i){const[r,a]=i,o=c(this,zn),l=t-o[0],u=s-o[1];if(c(this,yr)===r&&c(this,vr)===a)for(const{line:d,points:f}of c(this,Ds))ie._translate(d,l,u,d),ie._translate(f,l,u,f);else{const d=c(this,yr)/r,f=c(this,vr)/a;b(this,yr,r),b(this,vr,a);for(const{line:p,points:y}of c(this,Ds))ie._rescale(p,l,u,d,f,p),ie._rescale(y,l,u,d,f,y);o[2]*=d,o[3]*=f}return o[0]=t,o[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(s)}`}}}get defaultSVGProperties(){const t=c(this,zn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ie.svgRound(t[0])} ${ie.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}zn=new WeakMap,Rg=new WeakMap,Ig=new WeakMap,Ds=new WeakMap,yr=new WeakMap,vr=new WeakMap,Vh=new WeakMap,Bh=new WeakMap,tu=new WeakMap,vn=new WeakSet,Ur=function(t=c(this,tu)){const s=c(this,Ig)+t/2*c(this,Vh);return c(this,Bh)%180===0?[s/c(this,yr),s/c(this,vr)]:[s/c(this,vr),s/c(this,yr)]},DM=function(){const[t,s,i,r]=c(this,zn),[a,o]=k(this,vn,Ur).call(this,0);return[t+a,s+o,i-2*a,r-2*o]},MM=function(){const t=b(this,zn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of c(this,Ds)){if(r.length<=12){for(let l=4,u=r.length;l<u;l+=6)he.pointBoundingBox(r[l],r[l+1],t);continue}let a=r[4],o=r[5];for(let l=6,u=r.length;l<u;l+=6){const[d,f,p,y,g,m]=r.subarray(l,l+6);he.bezierBoundingBox(a,o,d,f,p,y,g,m,t),a=g,o=m}}const[s,i]=k(this,vn,Ur).call(this);t[0]=Wn(t[0]-s,0,1),t[1]=Wn(t[1]-i,0,1),t[2]=Wn(t[2]+s,0,1),t[3]=Wn(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},jM=function(t){const[s,i]=k(this,vn,Ur).call(this);b(this,tu,t);const[r,a]=k(this,vn,Ur).call(this),[o,l]=[r-s,a-i],u=c(this,zn);return u[0]-=o,u[1]-=l,u[2]+=2*o,u[3]+=2*l,u};class kw extends RM{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ct._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new kw(this._viewParameters);return e.updateAll(this),e}}var qx,LM;const fd=class fd extends px{constructor(t){super({...t,name:"inkEditor"});A(this,qx);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){ct.initialize(t,s),this._defaultDrawingOptions=new kw(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return De(this,"typesMap",new Map([[Fe.INK_THICKNESS,"stroke-width"],[Fe.INK_COLOR,"stroke"],[Fe.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,i,r,a){return new xU(t,s,i,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,i,r,a,o){return Xg.deserialize(t,s,i,r,a,o)}static async deserialize(t,s,i){let r=null;if(t instanceof m1){const{data:{inkLists:o,rect:l,rotation:u,id:d,color:f,opacity:p,borderStyle:{rawWidth:y},popupRef:g},parent:{page:{pageNumber:m}}}=t;r=t={annotationType:xe.INK,color:Array.from(f),thickness:y,opacity:p,paths:{points:o},boxes:null,pageIndex:m-1,rect:l.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:g}}const a=await super.deserialize(t,s,i);return a._initialData=r,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:i}){this._drawingOptions=fd.getDefaultDrawingOptions({stroke:he.makeHexColor(...t),"stroke-width":s,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,u={annotationType:xe.INK,color:ct._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:s,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(u.isCopy=!0,u):this.annotationElementId&&!k(this,qx,LM).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){const{points:s,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s}),null}};qx=new WeakSet,LM=function(t){const{color:s,thickness:i,opacity:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((o,l)=>o!==s[l])||t.thickness!==i||t.opacity!==r||t.pageIndex!==a},q(fd,"_type","ink"),q(fd,"_editorType",xe.INK),q(fd,"_defaultDrawingOptions",null);let uS=fd;class dS extends Xg{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Ty=8,Pf=3;var nu,Xe,hS,Ti,OM,FM,fS,wv,$M,VM,BM,pS,mS,zM;class Ta{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:i},r,a,o,l){let u=new OffscreenCanvas(1,1),d=u.getContext("2d",{alpha:!1});const f=200,p=d.font=`${s} ${i} ${f}px ${t}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:g,actualBoundingBoxAscent:m,actualBoundingBoxDescent:w,fontBoundingBoxAscent:v,fontBoundingBoxDescent:x,width:_}=d.measureText(e),S=1.5,E=Math.ceil(Math.max(Math.abs(y)+Math.abs(g)||0,_)*S),P=Math.ceil(Math.max(Math.abs(m)+Math.abs(w)||f,Math.abs(v)+Math.abs(x)||f)*S);u=new OffscreenCanvas(E,P),d=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=p,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,E,P),d.fillStyle="black",d.fillText(e,E*(S-1)/2,P*(3-S)/2);const T=k(this,Xe,pS).call(this,d.getImageData(0,0,E,P).data),N=k(this,Xe,BM).call(this,T),I=k(this,Xe,mS).call(this,N),D=k(this,Xe,fS).call(this,T,E,P,I);return this.processDrawnLines({lines:{curves:D,width:E,height:P},pageWidth:r,pageHeight:a,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,s,i,r){const[a,o,l]=k(this,Xe,zM).call(this,e),[u,d]=k(this,Xe,VM).call(this,a,o,l,Math.hypot(o,l)*c(this,nu).sigmaSFactor,c(this,nu).sigmaR,c(this,nu).kernelSize),f=k(this,Xe,mS).call(this,d),p=k(this,Xe,fS).call(this,u,o,l,f);return this.processDrawnLines({lines:{curves:p,width:o,height:l},pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:a,areContours:o}){i%180!==0&&([t,s]=[s,t]);const{curves:l,width:u,height:d}=e,f=e.thickness??0,p=[],y=Math.min(t/u,s/d),g=y/t,m=y/s,w=[];for(const{points:x}of l){const _=a?k(this,Xe,$M).call(this,x):x;if(!_)continue;w.push(_);const S=_.length,E=new Float32Array(S),P=new Float32Array(3*(S===2?2:S-2));if(p.push({line:P,points:E}),S===2){E[0]=_[0]*g,E[1]=_[1]*m,P.set([NaN,NaN,NaN,NaN,E[0],E[1]],0);continue}let[T,N,I,D]=_;T*=g,N*=m,I*=g,D*=m,E.set([T,N,I,D],0),P.set([NaN,NaN,NaN,NaN,T,N],0);for(let j=4;j<S;j+=2){const L=E[j]=_[j]*g,z=E[j+1]=_[j+1]*m;P.set(ie.createBezierPoints(T,N,I,D,L,z),(j-2)*3),[T,N,I,D]=[I,D,L,z]}}if(p.length===0)return null;const v=o?new dS:new Xg;return v.build(p,t,s,1,i,o?0:f,r),{outline:v,newCurves:w,areContours:o,thickness:f,width:u,height:d}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:i,height:r}){let a=1/0,o=-1/0,l=0;for(const _ of e){l+=_.length;for(let S=2,E=_.length;S<E;S++){const P=_[S]-_[S-2];a=Math.min(a,P),o=Math.max(o,P)}}let u;a>=-128&&o<=127?u=Int8Array:a>=-32768&&o<=32767?u=Int16Array:u=Int32Array;const d=e.length,f=Ty+Pf*d,p=new Uint32Array(f);let y=0;p[y++]=f*Uint32Array.BYTES_PER_ELEMENT+(l-2*d)*u.BYTES_PER_ELEMENT,p[y++]=0,p[y++]=i,p[y++]=r,p[y++]=t?0:1,p[y++]=Math.max(0,Math.floor(s??0)),p[y++]=d,p[y++]=u.BYTES_PER_ELEMENT;for(const _ of e)p[y++]=_.length-2,p[y++]=_[0],p[y++]=_[1];const g=new CompressionStream("deflate-raw"),m=g.writable.getWriter();await m.ready,m.write(p);const w=u.prototype.constructor;for(const _ of e){const S=new w(_.length-2);for(let E=2,P=_.length;E<P;E++)S[E-2]=_[E]-_[E-2];m.write(S)}m.close();const v=await new Response(g.readable).arrayBuffer(),x=new Uint8Array(v);return zI(x)}static async decompressSignature(e){try{const t=UB(e),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),r=i.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let a=null,o=0;for await(const _ of s)a||(a=new Uint8Array(new Uint32Array(_.buffer,0,4)[0])),a.set(_,o),o+=_.length;const l=new Uint32Array(a.buffer,0,a.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const d=l[2],f=l[3],p=l[4]===0,y=l[5],g=l[6],m=l[7],w=[],v=(Ty+Pf*g)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(m){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(a.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(a.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(a.buffer,v);break}o=0;for(let _=0;_<g;_++){const S=l[Pf*_+Ty],E=new Float32Array(S+2);w.push(E);for(let P=0;P<Pf-1;P++)E[P]=l[Pf*_+Ty+P+1];for(let P=0;P<S;P++)E[P+2]=E[P]+x[o++]}return{areContours:p,thickness:y,outlines:w,width:d,height:f}}catch(t){return we(`decompressSignature: ${t}`),null}}}nu=new WeakMap,Xe=new WeakSet,hS=function(e,t,s,i){return s-=e,i-=t,s===0?i>0?0:4:s===1?i+6:2-i},Ti=new WeakMap,OM=function(e,t,s,i,r,a,o){const l=k(this,Xe,hS).call(this,s,i,r,a);for(let u=0;u<8;u++){const d=(-u+l-o+16)%8,f=c(this,Ti)[2*d],p=c(this,Ti)[2*d+1];if(e[(s+f)*t+(i+p)]!==0)return d}return-1},FM=function(e,t,s,i,r,a,o){const l=k(this,Xe,hS).call(this,s,i,r,a);for(let u=0;u<8;u++){const d=(u+l+o+16)%8,f=c(this,Ti)[2*d],p=c(this,Ti)[2*d+1];if(e[(s+f)*t+(i+p)]!==0)return d}return-1},fS=function(e,t,s,i){const r=e.length,a=new Int32Array(r);for(let d=0;d<r;d++)a[d]=e[d]<=i?1:0;for(let d=1;d<s-1;d++)a[d*t]=a[d*t+t-1]=0;for(let d=0;d<t;d++)a[d]=a[t*s-1-d]=0;let o=1,l;const u=[];for(let d=1;d<s-1;d++){l=1;for(let f=1;f<t-1;f++){const p=d*t+f,y=a[p];if(y===0)continue;let g=d,m=f;if(y===1&&a[p-1]===0)o+=1,m-=1;else if(y>=1&&a[p+1]===0)o+=1,m+=1,y>1&&(l=y);else{y!==1&&(l=Math.abs(y));continue}const w=[f,d],v=m===f+1,x={isHole:v,points:w,id:o,parent:0};u.push(x);let _;for(const j of u)if(j.id===l){_=j;break}_?_.isHole?x.parent=v?_.parent:l:x.parent=v?l:_.parent:x.parent=v?l:0;const S=k(this,Xe,OM).call(this,a,t,d,f,g,m,0);if(S===-1){a[p]=-o,a[p]!==1&&(l=Math.abs(a[p]));continue}let E=c(this,Ti)[2*S],P=c(this,Ti)[2*S+1];const T=d+E,N=f+P;g=T,m=N;let I=d,D=f;for(;;){const j=k(this,Xe,FM).call(this,a,t,I,D,g,m,1);E=c(this,Ti)[2*j],P=c(this,Ti)[2*j+1];const L=I+E,z=D+P;w.push(z,L);const F=I*t+D;if(a[F+1]===0?a[F]=-o:a[F]===1&&(a[F]=o),L===d&&z===f&&I===T&&D===N){a[p]!==1&&(l=Math.abs(a[p]));break}else g=I,m=D,I=L,D=z}}}return u},wv=function(e,t,s,i){if(s-t<=4){for(let T=t;T<s-2;T+=2)i.push(e[T],e[T+1]);return}const r=e[t],a=e[t+1],o=e[s-4]-r,l=e[s-3]-a,u=Math.hypot(o,l),d=o/u,f=l/u,p=d*a-f*r,y=l/o,g=1/u,m=Math.atan(y),w=Math.cos(m),v=Math.sin(m),x=g*(Math.abs(w)+Math.abs(v)),_=g*(1-x+x**2),S=Math.max(Math.atan(Math.abs(v+w)*_),Math.atan(Math.abs(v-w)*_));let E=0,P=t;for(let T=t+2;T<s-2;T+=2){const N=Math.abs(p-d*e[T+1]+f*e[T]);N>E&&(P=T,E=N)}E>(u*S)**2?(k(this,Xe,wv).call(this,e,t,P+2,i),k(this,Xe,wv).call(this,e,P,s,i)):i.push(r,a)},$M=function(e){const t=[],s=e.length;return k(this,Xe,wv).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},VM=function(e,t,s,i,r,a){const o=new Float32Array(a**2),l=-2*i**2,u=a>>1;for(let m=0;m<a;m++){const w=(m-u)**2;for(let v=0;v<a;v++)o[m*a+v]=Math.exp((w+(v-u)**2)/l)}const d=new Float32Array(256),f=-2*r**2;for(let m=0;m<256;m++)d[m]=Math.exp(m**2/f);const p=e.length,y=new Uint8Array(p),g=new Uint32Array(256);for(let m=0;m<s;m++)for(let w=0;w<t;w++){const v=m*t+w,x=e[v];let _=0,S=0;for(let P=0;P<a;P++){const T=m+P-u;if(!(T<0||T>=s))for(let N=0;N<a;N++){const I=w+N-u;if(I<0||I>=t)continue;const D=e[T*t+I],j=o[P*a+N]*d[Math.abs(D-x)];_+=D*j,S+=j}}const E=y[v]=Math.round(_/S);g[E]++}return[y,g]},BM=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},pS=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let i=-1/0,r=1/0;for(let o=0,l=s.length;o<l;o++){if(e[(o<<2)+3]===0){i=s[o]=255;continue}const d=s[o]=e[o<<2];d>i&&(i=d),d<r&&(r=d)}const a=255/(i-r);for(let o=0;o<t;o++)s[o]=(s[o]-r)*a;return s},mS=function(e){let t,s=-1/0,i=-1/0;const r=e.findIndex(l=>l!==0);let a=r,o=r;for(t=r;t<256;t++){const l=e[t];l>s&&(t-a>i&&(i=t-a,o=t-1),s=l,a=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t},zM=function(e){const t=e,{width:s,height:i}=e,{maxDim:r}=c(this,nu);let a=s,o=i;if(s>r||i>r){let p=s,y=i,g=Math.log2(Math.max(s,i)/r);const m=Math.floor(g);g=g===m?m-1:m;for(let v=0;v<g;v++){a=Math.ceil(p/2),o=Math.ceil(y/2);const x=new OffscreenCanvas(a,o);x.getContext("2d").drawImage(e,0,0,p,y,0,0,a,o),p=a,y=o,e!==t&&e.close(),e=x.transferToImageBitmap()}const w=Math.min(r/a,r/o);a=Math.round(a*w),o=Math.round(o*w)}const u=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,a,o);const d=u.getImageData(0,0,a,o).data;return[k(this,Xe,pS).call(this,d),a,o]},A(Ta,Xe),A(Ta,nu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),A(Ta,Ti,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class g1 extends RM{constructor(){super(),super.updateProperties({fill:ct._defaultLineColor,"stroke-width":0})}clone(){const e=new g1;return e.updateAll(this),e}}class y1 extends kw{constructor(e){super(e),super.updateProperties({stroke:ct._defaultLineColor,"stroke-width":1})}clone(){const e=new y1(this._viewParameters);return e.updateAll(this),e}}var Ho,xr,Wo,su;const ws=class ws extends px{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});A(this,Ho,!1);A(this,xr,null);A(this,Wo,null);A(this,su,null);this._willKeepAspectRatio=!0,b(this,Wo,t.signatureData||null),b(this,xr,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){ct.initialize(t,s),this._defaultDrawingOptions=new g1,this._defaultDrawnSignatureOptions=new y1(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return De(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,xr)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(c(this,Wo)){const{lines:r,mustSmooth:a,areContours:o,description:l,uuid:u,heightInPage:d}=c(this,Wo),{rawDims:{pageWidth:f,pageHeight:p},rotation:y}=this.parent.viewport,g=Ta.processDrawnLines({lines:r,pageWidth:f,pageHeight:p,rotation:y,innerMargin:ws._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(g,d,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return i&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){b(this,su,t),this.addEditToolbar()}getUuid(){return c(this,su)}get description(){return c(this,xr)}set description(t){b(this,xr,t),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:i,width:r,height:a}=c(this,Wo),o=Math.max(r,a),l=Ta.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:i,width:r,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,i,r){const{x:a,y:o}=this,{outline:l}=b(this,Wo,t);b(this,Ho,l instanceof dS),this.description=i,this.div.setAttribute("data-l10n-args",JSON.stringify({description:i}));let u;c(this,Ho)?u=ws.getDefaultDrawingOptions():(u=ws._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[d,f]=this.parentDimensions,[,p]=this.pageDimensions;let y=s/p;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(d*this.width,f*this.height),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return Ta.process(t,s,i,r,ws._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:i,pageHeight:r},rotation:a}=this.parent.viewport;return Ta.extractContoursFromText(t,s,i,r,a,ws._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return Ta.processDrawnLines({lines:t,pageWidth:s,pageHeight:i,rotation:r,innerMargin:ws._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=ws.getDefaultDrawingOptions():(this._drawingOptions=ws._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:i,rect:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o={annotationType:xe.SIGNATURE,isSignature:!0,areContours:c(this,Ho),color:[0,0,0],thickness:c(this,Ho)?0:a,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.paths={lines:s,points:i},o.uuid=c(this,su),o.isCopy=!0):o.lines=s,c(this,xr)&&(o.accessibilityData={type:"Figure",alt:c(this,xr)}),o}static deserializeDraw(t,s,i,r,a,o){return o.areContours?dS.deserialize(t,s,i,r,a,o):Xg.deserialize(t,s,i,r,a,o)}static async deserialize(t,s,i){var a;const r=await super.deserialize(t,s,i);return b(r,Ho,t.areContours),b(r,xr,((a=t.accessibilityData)==null?void 0:a.alt)||""),b(r,su,t.uuid),r}};Ho=new WeakMap,xr=new WeakMap,Wo=new WeakMap,su=new WeakMap,q(ws,"_type","signature"),q(ws,"_editorType",xe.SIGNATURE),q(ws,"_defaultDrawingOptions",null);let gS=ws;var mt,on,qo,Sa,Go,zh,Aa,iu,wr,Ms,Uh,Ue,np,sp,bv,_v,Sv,vS,Av,UM;class yS extends ct{constructor(t){super({...t,name:"stampEditor"});A(this,Ue);A(this,mt,null);A(this,on,null);A(this,qo,null);A(this,Sa,null);A(this,Go,null);A(this,zh,"");A(this,Aa,null);A(this,iu,!1);A(this,wr,null);A(this,Ms,!1);A(this,Uh,!1);b(this,Sa,t.bitmapUrl),b(this,Go,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){ct.initialize(t,s)}static isHandlingMimeForPasting(t){return u_.includes(t)}static paste(t,s){s.pasteEditor({mode:xe.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:r,width:a,height:o,channels:r.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;c(this,on)&&(b(this,mt,null),this._uiManager.imageManager.deleteId(c(this,on)),(t=c(this,Aa))==null||t.remove(),b(this,Aa,null),c(this,wr)&&(clearTimeout(c(this,wr)),b(this,wr,null))),super.remove()}rebuild(){if(!this.parent){c(this,on)&&k(this,Ue,bv).call(this);return}super.rebuild(),this.div!==null&&(c(this,on)&&c(this,Aa)===null&&k(this,Ue,bv).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(c(this,qo)||c(this,mt)||c(this,Sa)||c(this,Go)||c(this,on)||c(this,iu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),c(this,iu)||(c(this,mt)?k(this,Ue,_v).call(this):k(this,Ue,bv).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(b(this,on,i),r&&b(this,mt,r),b(this,iu,!1),k(this,Ue,_v).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,wr)!==null&&clearTimeout(c(this,wr)),b(this,wr,setTimeout(()=>{b(this,wr,null),k(this,Ue,vS).call(this)},200))}copyCanvas(t,s,i=!1){var y;t||(t=224);const{width:r,height:a}=c(this,mt),o=new Ir;let l=c(this,mt),u=r,d=a,f=null;if(s){if(r>s||a>s){const N=Math.min(s/r,s/a);u=Math.floor(r*N),d=Math.floor(a*N)}f=document.createElement("canvas");const g=f.width=Math.ceil(u*o.sx),m=f.height=Math.ceil(d*o.sy);c(this,Ms)||(l=k(this,Ue,Sv).call(this,g,m));const w=f.getContext("2d");w.filter=this._uiManager.hcmFilter;let v="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":(y=window.matchMedia)!=null&&y.call(window,"(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",x="#42414d");const _=15,S=_*o.sx,E=_*o.sy,P=new OffscreenCanvas(S*2,E*2),T=P.getContext("2d");T.fillStyle=v,T.fillRect(0,0,S*2,E*2),T.fillStyle=x,T.fillRect(0,0,S,E),T.fillRect(S,E,S,E),w.fillStyle=w.createPattern(P,"repeat"),w.fillRect(0,0,g,m),w.drawImage(l,0,0,l.width,l.height,0,0,g,m)}let p=null;if(i){let g,m;if(o.symmetric&&l.width<t&&l.height<t)g=l.width,m=l.height;else if(l=c(this,mt),r>t||a>t){const x=Math.min(t/r,t/a);g=Math.floor(r*x),m=Math.floor(a*x),c(this,Ms)||(l=k(this,Ue,Sv).call(this,g,m))}const v=new OffscreenCanvas(g,m).getContext("2d",{willReadFrequently:!0});v.drawImage(l,0,0,l.width,l.height,0,0,g,m),p={width:g,height:m,data:v.getImageData(0,0,g,m).data}}return{canvas:f,width:u,height:d,imageData:p}}static async deserialize(t,s,i){var w;let r=null,a=!1;if(t instanceof iM){const{data:{rect:v,rotation:x,id:_,structParent:S,popupRef:E},container:P,parent:{page:{pageNumber:T}},canvas:N}=t;let I,D;N?(delete t.canvas,{id:I,bitmap:D}=i.imageManager.getFromCanvas(P.id,N),N.remove()):(a=!0,t._hasNoCanvas=!0);const j=((w=await s._structTree.getAriaAttributes(`${o1}${_}`))==null?void 0:w.get("aria-label"))||"";r=t={annotationType:xe.STAMP,bitmapId:I,bitmap:D,pageIndex:T-1,rect:v.slice(0),rotation:x,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:j},isSvg:!1,structParent:S,popupRef:E}}const o=await super.deserialize(t,s,i),{rect:l,bitmap:u,bitmapUrl:d,bitmapId:f,isSvg:p,accessibilityData:y}=t;a?(i.addMissingCanvas(t.id,o),b(o,iu,!0)):f&&i.imageManager.isValidId(f)?(b(o,on,f),u&&b(o,mt,u)):b(o,Sa,d),b(o,Ms,p);const[g,m]=o.pageDimensions;return o.width=(l[2]-l[0])/g,o.height=(l[3]-l[1])/m,y&&(o.altTextData=y),o._initialData=r,b(o,Uh,!!r),o}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:xe.STAMP,bitmapId:c(this,on),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,Ms),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=k(this,Ue,Av).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=k(this,Ue,UM).call(this,i);if(l.isSame)return null;l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,s===null)return i;s.stamps||(s.stamps=new Map);const o=c(this,Ms)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(c(this,on)))s.stamps.set(c(this,on),{area:o,serialized:i}),i.bitmap=k(this,Ue,Av).call(this,!1);else if(c(this,Ms)){const l=s.stamps.get(c(this,on));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=k(this,Ue,Av).call(this,!1))}return i}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}mt=new WeakMap,on=new WeakMap,qo=new WeakMap,Sa=new WeakMap,Go=new WeakMap,zh=new WeakMap,Aa=new WeakMap,iu=new WeakMap,wr=new WeakMap,Ms=new WeakMap,Uh=new WeakMap,Ue=new WeakSet,np=function(t,s=!1){if(!t){this.remove();return}b(this,mt,t.bitmap),s||(b(this,on,t.id),b(this,Ms,t.isSvg)),t.file&&b(this,zh,t.file.name),k(this,Ue,_v).call(this)},sp=function(){if(b(this,qo,null),this._uiManager.enableWaiting(!1),!!c(this,Aa)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,mt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,mt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},bv=function(){if(c(this,on)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,on)).then(i=>k(this,Ue,np).call(this,i,!0)).finally(()=>k(this,Ue,sp).call(this));return}if(c(this,Sa)){const i=c(this,Sa);b(this,Sa,null),this._uiManager.enableWaiting(!0),b(this,qo,this._uiManager.imageManager.getFromUrl(i).then(r=>k(this,Ue,np).call(this,r)).finally(()=>k(this,Ue,sp).call(this)));return}if(c(this,Go)){const i=c(this,Go);b(this,Go,null),this._uiManager.enableWaiting(!0),b(this,qo,this._uiManager.imageManager.getFromFile(i).then(r=>k(this,Ue,np).call(this,r)).finally(()=>k(this,Ue,sp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=u_.join(",");const s=this._uiManager._signal;b(this,qo,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),k(this,Ue,np).call(this,r)}i()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>k(this,Ue,sp).call(this))),t.click()},_v=function(){var f;const{div:t}=this;let{width:s,height:i}=c(this,mt);const[r,a]=this.pageDimensions,o=.75;if(this.width)s=this.width*r,i=this.height*a;else if(s>o*r||i>o*a){const p=Math.min(o*r/s,o*a/i);s*=p,i*=p}const[l,u]=this.parentDimensions;this.setDims(s*l/r,i*u/a),this._uiManager.enableWaiting(!1);const d=b(this,Aa,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=s/r,this.height=i/a,(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),k(this,Ue,vS).call(this),c(this,Uh)||(this.parent.addUndoableEditor(this),b(this,Uh,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,zh)&&this.div.setAttribute("aria-description",c(this,zh)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Sv=function(t,s){const{width:i,height:r}=c(this,mt);let a=i,o=r,l=c(this,mt);for(;a>2*t||o>2*s;){const u=a,d=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*s&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const f=new OffscreenCanvas(a,o);f.getContext("2d").drawImage(l,0,0,u,d,0,0,a,o),l=f.transferToImageBitmap()}return l},vS=function(){const[t,s]=this.parentDimensions,{width:i,height:r}=this,a=new Ir,o=Math.ceil(i*t*a.sx),l=Math.ceil(r*s*a.sy),u=c(this,Aa);if(!u||u.width===o&&u.height===l)return;u.width=o,u.height=l;const d=c(this,Ms)?c(this,mt):k(this,Ue,Sv).call(this,o,l),f=u.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(d,0,0,d.width,d.height,0,0,o,l)},Av=function(t){if(t){if(c(this,Ms)){const r=this._uiManager.imageManager.getSvgUrl(c(this,on));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=c(this,mt),s.getContext("2d").drawImage(c(this,mt),0,0),s.toDataURL()}if(c(this,Ms)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*vl.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*vl.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(c(this,mt),0,0,c(this,mt).width,c(this,mt).height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(c(this,mt))},UM=function(t){var o;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===s,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}},q(yS,"_type","stamp"),q(yS,"_editorType",xe.STAMP);var ru,Hh,br,Ko,Ca,js,Xo,Wh,au,Pi,ka,ln,Ea,Yo,qh,ue,Qo,gt,HM,Zi,wS,bS,Cv;const gi=class gi{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:a,drawLayer:o,textLayer:l,viewport:u,l10n:d}){A(this,gt);A(this,ru);A(this,Hh,!1);A(this,br,null);A(this,Ko,null);A(this,Ca,null);A(this,js,new Map);A(this,Xo,!1);A(this,Wh,!1);A(this,au,!1);A(this,Pi,null);A(this,ka,null);A(this,ln,null);A(this,Ea,null);A(this,Yo,null);A(this,qh,-1);A(this,ue);const f=[...c(gi,Qo).values()];if(!gi._initialized){gi._initialized=!0;for(const p of f)p.initialize(d,e)}e.registerEditorTypes(f),b(this,ue,e),this.pageIndex=t,this.div=s,b(this,ru,r),b(this,br,a),this.viewport=u,b(this,ln,l),this.drawLayer=o,this._structTree=i,c(this,ue).addLayer(this)}get isEmpty(){return c(this,js).size===0}get isInvisible(){return this.isEmpty&&c(this,ue).getMode()===xe.NONE}updateToolbar(e){c(this,ue).updateToolbar(e)}updateMode(e=c(this,ue).getMode()){switch(k(this,gt,Cv).call(this),e){case xe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case xe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case xe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of c(gi,Qo).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,ln))==null?void 0:t.div)}setEditingState(e){c(this,ue).setEditingState(e)}addCommands(e){c(this,ue).addCommands(e)}cleanUndoStack(e){c(this,ue).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,br))==null||t.div.classList.toggle("disabled",!e)}async enable(){var s;b(this,au,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(s=c(this,Yo))==null||s.abort(),b(this,Yo,null);const e=new Set;for(const i of c(this,js).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(c(this,ue).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!c(this,br)){b(this,au,!1);return}const t=c(this,br).getEditableAnnotations();for(const i of t){if(i.hide(),c(this,ue).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}b(this,au,!1)}disable(){var i;if(b(this,Wh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),c(this,ln)&&!c(this,Yo)){b(this,Yo,new AbortController);const r=c(this,ue).combinedSignal(c(this,Yo));c(this,ln).div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:u,timeStamp:d}=a,f=c(this,qh);if(d-f>500){b(this,qh,d);return}b(this,qh,-1);const{classList:p}=this.div;p.toggle("getElements",!0);const y=document.elementsFromPoint(l,u);if(p.toggle("getElements",!1),!this.div.contains(y[0]))return;let g;const m=new RegExp(`^${OI}[0-9]+$`);for(const v of y)if(m.test(v.id)){g=v.id;break}if(!g)return;const w=c(this,js).get(g);(w==null?void 0:w.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),w.dblclick())},{signal:r,capture:!0})}const e=new Map,t=new Map;for(const r of c(this,js).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(c(this,br)){const r=c(this,br).getEditableAnnotations();for(const a of r){const{id:o}=a.data;if(c(this,ue).isDeletedAnnotationElement(o))continue;let l=t.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=e.get(o),l&&(c(this,ue).addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}k(this,gt,Cv).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of c(gi,Qo).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,Wh,!1)}getEditableAnnotation(e){var t;return((t=c(this,br))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,ue).getActive()!==e&&c(this,ue).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,ln))!=null&&e.div&&!c(this,Ea)){b(this,Ea,new AbortController);const t=c(this,ue).combinedSignal(c(this,Ea));c(this,ln).div.addEventListener("pointerdown",k(this,gt,HM).bind(this),{signal:t}),c(this,ln).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,ln))!=null&&e.div&&c(this,Ea)&&(c(this,Ea).abort(),b(this,Ea,null),c(this,ln).div.classList.remove("highlighting"))}enableClick(){if(c(this,Ko))return;b(this,Ko,new AbortController);const e=c(this,ue).combinedSignal(c(this,Ko));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=c(this,Ko))==null||e.abort(),b(this,Ko,null)}attach(e){c(this,js).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,ue).isDeletedAnnotationElement(t)&&c(this,ue).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,js).delete(e.id),(t=c(this,ru))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,Wh)&&e.annotationElementId&&c(this,ue).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,ue).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,ue).addDeletedAnnotationElement(e.annotationElementId),ct.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,ue).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!c(this,au)),c(this,ue).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,Ca)&&(e._focusEventsAllowed=!1,b(this,Ca,setTimeout(()=>{b(this,Ca,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,ue)._signal}),t.focus())},0))),e._structTreeParentId=(s=c(this,ru))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return c(this,ue).getId()}combinedSignal(e){return c(this,ue).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,gt,Zi))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await c(this,ue).updateMode(e.mode);const{offsetX:s,offsetY:i}=k(this,gt,bS).call(this),r=this.getNextId(),a=k(this,gt,wS).call(this,{parent:this,id:r,x:s,y:i,uiManager:c(this,ue),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=c(gi,Qo).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,ue)))||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),r=k(this,gt,wS).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:c(this,ue),isCentered:t,...s});return r&&this.add(r),r}addNewEditor(e={}){this.createAndAddNewEditor(k(this,gt,bS).call(this),!0,e)}setSelected(e){c(this,ue).setSelected(e)}toggleSelected(e){c(this,ue).toggleSelected(e)}unselect(e){c(this,ue).unselect(e)}pointerup(e){var i;const{isMac:t}=wn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!c(this,Xo)||(b(this,Xo,!1),(i=c(this,gt,Zi))!=null&&i.isDrawer&&c(this,gt,Zi).supportMultipleDrawings))return;if(!c(this,Hh)){b(this,Hh,!0);return}const s=c(this,ue).getMode();if(s===xe.STAMP||s===xe.SIGNATURE){c(this,ue).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(c(this,ue).getMode()===xe.HIGHLIGHT&&this.enableTextSelection(),c(this,Xo)){b(this,Xo,!1);return}const{isMac:t}=wn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(b(this,Xo,!0),(i=c(this,gt,Zi))!=null&&i.isDrawer){this.startDrawingSession(e);return}const s=c(this,ue).getActive();b(this,Hh,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),c(this,Pi)){c(this,gt,Zi).startDrawing(this,c(this,ue),!1,e);return}c(this,ue).setCurrentDrawingSession(this),b(this,Pi,new AbortController);const t=c(this,ue).combinedSignal(c(this,Pi));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(b(this,ka,null),this.commitOrRemove())},{signal:t}),c(this,gt,Zi).startDrawing(this,c(this,ue),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&b(this,ka,t);return}c(this,ka)&&setTimeout(()=>{var t;(t=c(this,ka))==null||t.focus(),b(this,ka,null)},0)}endDrawingSession(e=!1){return c(this,Pi)?(c(this,ue).setCurrentDrawingSession(null),c(this,Pi).abort(),b(this,Pi,null),b(this,ka,null),c(this,gt,Zi).endDrawing(e)):null}findNewParent(e,t,s){const i=c(this,ue).findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return c(this,Pi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,Pi)&&c(this,gt,Zi).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=c(this,ue).getActive())==null?void 0:e.parent)===this&&(c(this,ue).commitOrRemove(),c(this,ue).setActiveEditor(null)),c(this,Ca)&&(clearTimeout(c(this,Ca)),b(this,Ca,null));for(const s of c(this,js).values())(t=c(this,ru))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,c(this,js).clear(),c(this,ue).removeLayer(this)}render({viewport:e}){this.viewport=e,bu(this.div,e);for(const t of c(this,ue).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,ue).commitOrRemove(),k(this,gt,Cv).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,bu(this.div,{rotation:s}),t!==s)for(const i of c(this,js).values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,ue).viewParameters.realScale}};ru=new WeakMap,Hh=new WeakMap,br=new WeakMap,Ko=new WeakMap,Ca=new WeakMap,js=new WeakMap,Xo=new WeakMap,Wh=new WeakMap,au=new WeakMap,Pi=new WeakMap,ka=new WeakMap,ln=new WeakMap,Ea=new WeakMap,Yo=new WeakMap,qh=new WeakMap,ue=new WeakMap,Qo=new WeakMap,gt=new WeakSet,HM=function(e){c(this,ue).unselectAll();const{target:t}=e;if(t===c(this,ln).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,ln).div.contains(t)){const{isMac:s}=wn.platform;if(e.button!==0||e.ctrlKey&&s)return;c(this,ue).showAllEditors("highlight",!0,!0),c(this,ln).div.classList.add("free"),this.toggleDrawing(),fx.startHighlighting(this,c(this,ue).direction==="ltr",{target:c(this,ln).div,x:e.x,y:e.y}),c(this,ln).div.addEventListener("pointerup",()=>{c(this,ln).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,ue)._signal}),e.preventDefault()}},Zi=function(){return c(gi,Qo).get(c(this,ue).getMode())},wS=function(e){const t=c(this,gt,Zi);return t?new t.prototype.constructor(e):null},bS=function(){const{x:e,y:t,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+s),l=Math.min(window.innerHeight,t+i),u=(r+o)/2-e,d=(a+l)/2-t,[f,p]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:f,offsetY:p}},Cv=function(){for(const e of c(this,js).values())e.isEmpty()&&e.remove()},q(gi,"_initialized",!1),A(gi,Qo,new Map([Q_,uS,yS,fx,gS].map(e=>[e._editorType,e])));let xS=gi;var Ni,Un,ou,Dg,Gx,WM,jr,SS,qM,AS;const Ht=class Ht{constructor({pageIndex:e}){A(this,jr);A(this,Ni,null);A(this,Un,new Map);A(this,ou,new Map);this.pageIndex=e}setParent(e){if(!c(this,Ni)){b(this,Ni,e);return}if(c(this,Ni)!==e){if(c(this,Un).size>0)for(const t of c(this,Un).values())t.remove(),e.append(t);b(this,Ni,e)}}static get _svgFactory(){return De(this,"_svgFactory",new ux)}draw(e,t=!1,s=!1){const i=Jt(Ht,Dg)._++,r=k(this,jr,SS).call(this),a=Ht._svgFactory.createElement("defs");r.append(a);const o=Ht._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&c(this,ou).set(i,o);const u=s?k(this,jr,qM).call(this,a,l):null,d=Ht._svgFactory.createElement("use");return r.append(d),d.setAttribute("href",`#${l}`),this.updateProperties(r,e),c(this,Un).set(i,r),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,t){const s=Jt(Ht,Dg)._++,i=k(this,jr,SS).call(this),r=Ht._svgFactory.createElement("defs");i.append(r);const a=Ht._svgFactory.createElement("path");r.append(a);const o=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const f=Ht._svgFactory.createElement("mask");r.append(f),l=`mask_p${this.pageIndex}_${s}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");const p=Ht._svgFactory.createElement("rect");f.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const y=Ht._svgFactory.createElement("use");f.append(y),y.setAttribute("href",`#${o}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const u=Ht._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${o}`),l&&u.setAttribute("mask",`url(#${l})`);const d=u.cloneNode();return i.append(d),u.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(i,e),c(this,Un).set(s,i),s}finalizeDraw(e,t){c(this,ou).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:s,bbox:i,rootClass:r,path:a}=t,o=typeof e=="number"?c(this,Un).get(e):e;if(o){if(s&&k(this,jr,AS).call(this,o,s),i&&k(l=Ht,Gx,WM).call(l,o,i),r){const{classList:u}=o;for(const[d,f]of Object.entries(r))u.toggle(d,f)}if(a){const d=o.firstChild.firstChild;k(this,jr,AS).call(this,d,a)}}}updateParent(e,t){if(t===this)return;const s=c(this,Un).get(e);s&&(c(t,Ni).append(s),c(this,Un).delete(e),c(t,Un).set(e,s))}remove(e){c(this,ou).delete(e),c(this,Ni)!==null&&(c(this,Un).get(e).remove(),c(this,Un).delete(e))}destroy(){b(this,Ni,null);for(const e of c(this,Un).values())e.remove();c(this,Un).clear(),c(this,ou).clear()}};Ni=new WeakMap,Un=new WeakMap,ou=new WeakMap,Dg=new WeakMap,Gx=new WeakSet,WM=function(e,[t,s,i,r]){const{style:a}=e;a.top=`${100*s}%`,a.left=`${100*t}%`,a.width=`${100*i}%`,a.height=`${100*r}%`},jr=new WeakSet,SS=function(){const e=Ht._svgFactory.create(1,1,!0);return c(this,Ni).append(e),e.setAttribute("aria-hidden",!0),e},qM=function(e,t){const s=Ht._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=Ht._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i},AS=function(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)},A(Ht,Gx),A(Ht,Dg,0);let _S=Ht;globalThis._pdfjsTestingUtils={HighlightOutliner:J_};globalThis.pdfjsLib={AbortException:yl,AnnotationEditorLayer:xS,AnnotationEditorParamsType:Fe,AnnotationEditorType:xe,AnnotationEditorUIManager:_u,AnnotationLayer:K_,AnnotationMode:so,AnnotationType:Lt,build:Zz,ColorPicker:hx,createValidAbsoluteUrl:FI,DOMSVGFactory:ux,DrawLayer:_S,FeatureTest:wn,fetchData:Wg,getDocument:zD,getFilenameFromUrl:HB,getPdfFilenameFromUrl:WB,getUuid:BI,getXfaPageViewport:GB,GlobalWorkerOptions:Sr,ImageKind:Xy,InvalidPDFException:l_,isDataScheme:Aw,isPdfFile:c1,isValidExplicitDest:iz,MathClamp:Wn,noContextMenu:Hi,normalizeUnicode:BB,OPS:ax,OutputScale:Ir,PasswordResponses:IB,PDFDataRangeTransport:UD,PDFDateString:u1,PDFWorker:Bp,PermissionFlag:RB,PixelsPerInch:vl,RenderingCancelledException:l1,ResponseException:ox,setLayerDimensions:bu,shadow:De,SignatureExtractor:Ta,stopEvent:Ot,SupportedImageMimeTypes:u_,TextLayer:$p,TouchManager:cx,updateUrlHash:$I,Util:he,VerbosityLevel:bw,version:Qz,XfaLayer:qD};Sr.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";async function wU(n){var e,t,s,i;try{const r=await n.arrayBuffer(),a=new Uint8Array(r),o=await zD({data:a}).promise,l=await o.getMetadata();let u="";for(let d=1;d<=o.numPages;d++){const y=(await(await o.getPage(d)).getTextContent()).items.map(g=>g.str).join(" ").trim();y&&(u+=y+`

`)}return{text:u.trim(),metadata:{title:((e=l.info)==null?void 0:e.Title)||void 0,author:((t=l.info)==null?void 0:t.Author)||void 0,subject:((s=l.info)==null?void 0:s.Subject)||void 0,creator:((i=l.info)==null?void 0:i.Creator)||void 0,pages:o.numPages}}}catch(r){throw console.error("Error parsing PDF:",r),new Error(`Failed to parse PDF: ${r instanceof Error?r.message:"Unknown error"}`)}}var v1={};const GM=[{id:"unit42",name:"Unit 42",description:"Latest threat intelligence from Palo Alto Networks",icon:"fas fa-shield-alt",endpoint:"https://unit42.paloaltonetworks.com/feed/",requiresAuth:!1},{id:"cisa",name:"CISA Alerts",description:"Government cybersecurity advisories and alerts",icon:"fas fa-flag-usa",endpoint:"https://www.cisa.gov/uscert/ncas/alerts.xml",requiresAuth:!1},{id:"recordedfuture",name:"Recorded Future",description:"Real-time threat intelligence",icon:"fas fa-eye",requiresAuth:!0},{id:"wiz",name:"Wiz Security",description:"Cloud security threat reports",icon:"fas fa-cloud",requiresAuth:!0},{id:"datadog",name:"Datadog Security",description:"Application and infrastructure security insights",icon:"fas fa-dog",requiresAuth:!0}];async function bU(n){const e=GM.find(t=>t.id===n);if(!e)throw new Error(`Unknown threat feed: ${n}`);try{switch(n){case"unit42":return await _U();case"cisa":return await SU();case"recordedfuture":return await AU();case"wiz":return await CU();case"datadog":return await kU();default:throw new Error(`Feed ${n} not implemented`)}}catch(t){throw console.error(`Error fetching ${n} feed:`,t),new Error(`Failed to fetch ${e.name} feed: ${t instanceof Error?t.message:"Unknown error"}`)}}async function _U(){return[{id:"unit42-1",title:"New Ransomware Campaign Targeting Healthcare",description:"Analysis of a sophisticated ransomware operation targeting healthcare organizations with advanced lateral movement techniques.",url:"https://unit42.paloaltonetworks.com/healthcare-ransomware-2024/",publishedDate:new Date("2024-01-15"),severity:"critical",tags:["ransomware","healthcare","lateral-movement"],source:"unit42"},{id:"unit42-2",title:"Cloud Misconfigurations in Enterprise Environments",description:"Common cloud security misconfigurations and their exploitation by threat actors.",url:"https://unit42.paloaltonetworks.com/cloud-misconfig-2024/",publishedDate:new Date("2024-01-10"),severity:"high",tags:["cloud","misconfiguration","aws","azure"],source:"unit42"}]}async function SU(){return[{id:"cisa-1",title:"CISA Alert: Critical Vulnerability in Network Devices",description:"CISA urges organizations to patch critical vulnerabilities in widely-used network infrastructure devices.",url:"https://www.cisa.gov/news-events/alerts/2024/01/15",publishedDate:new Date("2024-01-15"),severity:"critical",tags:["vulnerability","network-devices","patch"],source:"cisa"}]}async function AU(){if(!(v1.RECORDED_FUTURE_API_KEY||void 0))throw new Error("Recorded Future API key not configured");return[{id:"rf-1",title:"Emerging APT Group Activity",description:"New advanced persistent threat group identified targeting financial institutions.",url:"https://recordedfuture.com/threat-intel/apt-financial-2024",publishedDate:new Date("2024-01-14"),severity:"high",tags:["apt","financial","espionage"],source:"recordedfuture"}]}async function CU(){if(!(v1.WIZ_API_KEY||void 0))throw new Error("Wiz API key not configured");return[{id:"wiz-1",title:"Container Escape Techniques in Kubernetes",description:"Analysis of container escape vectors and mitigation strategies in Kubernetes environments.",url:"https://wiz.io/blog/kubernetes-container-escape-2024",publishedDate:new Date("2024-01-12"),severity:"high",tags:["kubernetes","container-security","escape"],source:"wiz"}]}async function kU(){if(!(v1.DATADOG_API_KEY||void 0))throw new Error("Datadog API key not configured");return[{id:"datadog-1",title:"Application Layer DDoS Attacks",description:"Detection and mitigation of sophisticated application layer DDoS attacks.",url:"https://datadog.com/blog/app-layer-ddos-2024",publishedDate:new Date("2024-01-11"),severity:"medium",tags:["ddos","application-security","mitigation"],source:"datadog"}]}var Yg=n=>n.type==="checkbox",ql=n=>n instanceof Date,Kn=n=>n==null;const KM=n=>typeof n=="object";var It=n=>!Kn(n)&&!Array.isArray(n)&&KM(n)&&!ql(n),EU=n=>It(n)&&n.target?Yg(n.target)?n.target.checked:n.target.value:n,TU=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,PU=(n,e)=>n.has(TU(e)),NU=n=>{const e=n.constructor&&n.constructor.prototype;return It(e)&&e.hasOwnProperty("isPrototypeOf")},x1=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function En(n){let e;const t=Array.isArray(n),s=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(n instanceof Set)e=new Set(n);else if(!(x1&&(n instanceof Blob||s))&&(t||It(n)))if(e=t?[]:{},!t&&!NU(n))e=n;else for(const i in n)n.hasOwnProperty(i)&&(e[i]=En(n[i]));else return n;return e}var Ew=n=>Array.isArray(n)?n.filter(Boolean):[],Ft=n=>n===void 0,oe=(n,e,t)=>{if(!e||!It(n))return t;const s=Ew(e.split(/[,[\].]+?/)).reduce((i,r)=>Kn(i)?i:i[r],n);return Ft(s)||s===n?Ft(n[e])?t:n[e]:s},er=n=>typeof n=="boolean",w1=n=>/^\w*$/.test(n),XM=n=>Ew(n.replace(/["|']|\]/g,"").split(/\.|\[/)),tt=(n,e,t)=>{let s=-1;const i=w1(e)?[e]:XM(e),r=i.length,a=r-1;for(;++s<r;){const o=i[s];let l=t;if(s!==a){const u=n[o];l=It(u)||Array.isArray(u)?u:isNaN(+i[s+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;n[o]=l,n=n[o]}};const lE={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Mi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},$r={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Gt.createContext(null);var RU=(n,e,t,s=!0)=>{const i={defaultValues:e._defaultValues};for(const r in n)Object.defineProperty(i,r,{get:()=>{const a=r;return e._proxyFormState[a]!==Mi.all&&(e._proxyFormState[a]=!s||Mi.all),n[a]}});return i},kr=n=>typeof n=="string",IU=(n,e,t,s,i)=>kr(n)?(s&&e.watch.add(n),oe(t,n,i)):Array.isArray(n)?n.map(r=>(s&&e.watch.add(r),oe(t,r))):(s&&(e.watchAll=!0),t),YM=(n,e,t,s,i)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[s]:i||!0}}:{},yp=n=>Array.isArray(n)?n:[n],cE=()=>{let n=[];return{get observers(){return n},next:i=>{for(const r of n)r.next&&r.next(i)},subscribe:i=>(n.push(i),{unsubscribe:()=>{n=n.filter(r=>r!==i)}}),unsubscribe:()=>{n=[]}}},CS=n=>Kn(n)||!KM(n);function io(n,e){if(CS(n)||CS(e))return n===e;if(ql(n)&&ql(e))return n.getTime()===e.getTime();const t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(const i of t){const r=n[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=e[i];if(ql(r)&&ql(a)||It(r)&&It(a)||Array.isArray(r)&&Array.isArray(a)?!io(r,a):r!==a)return!1}}return!0}var qn=n=>It(n)&&!Object.keys(n).length,b1=n=>n.type==="file",ji=n=>typeof n=="function",mx=n=>{if(!x1)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},QM=n=>n.type==="select-multiple",_1=n=>n.type==="radio",DU=n=>_1(n)||Yg(n),Rb=n=>mx(n)&&n.isConnected;function MU(n,e){const t=e.slice(0,-1).length;let s=0;for(;s<t;)n=Ft(n)?s++:n[e[s++]];return n}function jU(n){for(const e in n)if(n.hasOwnProperty(e)&&!Ft(n[e]))return!1;return!0}function zt(n,e){const t=Array.isArray(e)?e:w1(e)?[e]:XM(e),s=t.length===1?n:MU(n,t),i=t.length-1,r=t[i];return s&&delete s[r],i!==0&&(It(s)&&qn(s)||Array.isArray(s)&&jU(s))&&zt(n,t.slice(0,-1)),n}var ZM=n=>{for(const e in n)if(ji(n[e]))return!0;return!1};function gx(n,e={}){const t=Array.isArray(n);if(It(n)||t)for(const s in n)Array.isArray(n[s])||It(n[s])&&!ZM(n[s])?(e[s]=Array.isArray(n[s])?[]:{},gx(n[s],e[s])):Kn(n[s])||(e[s]=!0);return e}function JM(n,e,t){const s=Array.isArray(n);if(It(n)||s)for(const i in n)Array.isArray(n[i])||It(n[i])&&!ZM(n[i])?Ft(e)||CS(t[i])?t[i]=Array.isArray(n[i])?gx(n[i],[]):{...gx(n[i])}:JM(n[i],Kn(e)?{}:e[i],t[i]):t[i]=!io(n[i],e[i]);return t}var Nf=(n,e)=>JM(n,e,gx(e));const uE={value:!1,isValid:!1},dE={value:!0,isValid:!0};var e2=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!Ft(n[0].attributes.value)?Ft(n[0].value)||n[0].value===""?dE:{value:n[0].value,isValid:!0}:dE:uE}return uE},t2=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:s})=>Ft(n)?n:e?n===""?NaN:n&&+n:t&&kr(n)?new Date(n):s?s(n):n;const hE={isValid:!1,value:null};var n2=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,hE):hE;function fE(n){const e=n.ref;return b1(e)?e.files:_1(e)?n2(n.refs).value:QM(e)?[...e.selectedOptions].map(({value:t})=>t):Yg(e)?e2(n.refs).value:t2(Ft(e.value)?n.ref.value:e.value,n)}var LU=(n,e,t,s)=>{const i={};for(const r of n){const a=oe(e,r);a&&tt(i,r,a._f)}return{criteriaMode:t,names:[...n],fields:i,shouldUseNativeValidation:s}},yx=n=>n instanceof RegExp,Rf=n=>Ft(n)?n:yx(n)?n.source:It(n)?yx(n.value)?n.value.source:n.value:n,pE=n=>({isOnSubmit:!n||n===Mi.onSubmit,isOnBlur:n===Mi.onBlur,isOnChange:n===Mi.onChange,isOnAll:n===Mi.all,isOnTouch:n===Mi.onTouched});const mE="AsyncFunction";var OU=n=>!!n&&!!n.validate&&!!(ji(n.validate)&&n.validate.constructor.name===mE||It(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===mE)),FU=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),gE=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(s=>n.startsWith(s)&&/^\.\w+/.test(n.slice(s.length))));const vp=(n,e,t,s)=>{for(const i of t||Object.keys(n)){const r=oe(n,i);if(r){const{_f:a,...o}=r;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],i)&&!s)return!0;if(a.ref&&e(a.ref,a.name)&&!s)return!0;if(vp(o,e))break}else if(It(o)&&vp(o,e))break}}};function yE(n,e,t){const s=oe(n,t);if(s||w1(t))return{error:s,name:t};const i=t.split(".");for(;i.length;){const r=i.join("."),a=oe(e,r),o=oe(n,r);if(a&&!Array.isArray(a)&&t!==r)return{name:t};if(o&&o.type)return{name:r,error:o};i.pop()}return{name:t}}var $U=(n,e,t,s)=>{t(n);const{name:i,...r}=n;return qn(r)||Object.keys(r).length>=Object.keys(e).length||Object.keys(r).find(a=>e[a]===(!s||Mi.all))},VU=(n,e,t)=>!n||!e||n===e||yp(n).some(s=>s&&(t?s===e:s.startsWith(e)||e.startsWith(s))),BU=(n,e,t,s,i)=>i.isOnAll?!1:!t&&i.isOnTouch?!(e||n):(t?s.isOnBlur:i.isOnBlur)?!n:(t?s.isOnChange:i.isOnChange)?n:!0,zU=(n,e)=>!Ew(oe(n,e)).length&&zt(n,e),UU=(n,e,t)=>{const s=yp(oe(n,t));return tt(s,"root",e[t]),tt(n,t,s),n},kv=n=>kr(n);function vE(n,e,t="validate"){if(kv(n)||Array.isArray(n)&&n.every(kv)||er(n)&&!n)return{type:t,message:kv(n)?n:"",ref:e}}var $u=n=>It(n)&&!yx(n)?n:{value:n,message:""},xE=async(n,e,t,s,i,r)=>{const{ref:a,refs:o,required:l,maxLength:u,minLength:d,min:f,max:p,pattern:y,validate:g,name:m,valueAsNumber:w,mount:v}=n._f,x=oe(t,m);if(!v||e.has(m))return{};const _=o?o[0]:a,S=L=>{i&&_.reportValidity&&(_.setCustomValidity(er(L)?"":L||""),_.reportValidity())},E={},P=_1(a),T=Yg(a),N=P||T,I=(w||b1(a))&&Ft(a.value)&&Ft(x)||mx(a)&&a.value===""||x===""||Array.isArray(x)&&!x.length,D=YM.bind(null,m,s,E),j=(L,z,F,J=$r.maxLength,$=$r.minLength)=>{const B=L?z:F;E[m]={type:L?J:$,message:B,ref:a,...D(L?J:$,B)}};if(r?!Array.isArray(x)||!x.length:l&&(!N&&(I||Kn(x))||er(x)&&!x||T&&!e2(o).isValid||P&&!n2(o).isValid)){const{value:L,message:z}=kv(l)?{value:!!l,message:l}:$u(l);if(L&&(E[m]={type:$r.required,message:z,ref:_,...D($r.required,z)},!s))return S(z),E}if(!I&&(!Kn(f)||!Kn(p))){let L,z;const F=$u(p),J=$u(f);if(!Kn(x)&&!isNaN(x)){const $=a.valueAsNumber||x&&+x;Kn(F.value)||(L=$>F.value),Kn(J.value)||(z=$<J.value)}else{const $=a.valueAsDate||new Date(x),B=ee=>new Date(new Date().toDateString()+" "+ee),O=a.type=="time",H=a.type=="week";kr(F.value)&&x&&(L=O?B(x)>B(F.value):H?x>F.value:$>new Date(F.value)),kr(J.value)&&x&&(z=O?B(x)<B(J.value):H?x<J.value:$<new Date(J.value))}if((L||z)&&(j(!!L,F.message,J.message,$r.max,$r.min),!s))return S(E[m].message),E}if((u||d)&&!I&&(kr(x)||r&&Array.isArray(x))){const L=$u(u),z=$u(d),F=!Kn(L.value)&&x.length>+L.value,J=!Kn(z.value)&&x.length<+z.value;if((F||J)&&(j(F,L.message,z.message),!s))return S(E[m].message),E}if(y&&!I&&kr(x)){const{value:L,message:z}=$u(y);if(yx(L)&&!x.match(L)&&(E[m]={type:$r.pattern,message:z,ref:a,...D($r.pattern,z)},!s))return S(z),E}if(g){if(ji(g)){const L=await g(x,t),z=vE(L,_);if(z&&(E[m]={...z,...D($r.validate,z.message)},!s))return S(z.message),E}else if(It(g)){let L={};for(const z in g){if(!qn(L)&&!s)break;const F=vE(await g[z](x,t),_,z);F&&(L={...F,...D(z,F.message)},S(F.message),s&&(E[m]=L))}if(!qn(L)&&(E[m]={ref:_,...L},!s))return E}}return S(!0),E};const HU={mode:Mi.onSubmit,reValidateMode:Mi.onChange,shouldFocusError:!0};function WU(n={}){let e={...HU,...n},t={submitCount:0,isDirty:!1,isLoading:ji(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const s={};let i=It(e.defaultValues)||It(e.values)?En(e.values||e.defaultValues)||{}:{},r=e.shouldUnregister?{}:En(i),a={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const p={array:cE(),state:cE()},y=pE(e.mode),g=pE(e.reValidateMode),m=e.criteriaMode===Mi.all,w=R=>M=>{clearTimeout(u),u=setTimeout(R,M)},v=async R=>{if(!e.disabled&&(d.isValid||f.isValid||R)){const M=e.resolver?qn((await I()).errors):await j(s,!0);M!==t.isValid&&p.state.next({isValid:M})}},x=(R,M)=>{!e.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((R||Array.from(o.mount)).forEach(V=>{V&&(M?tt(t.validatingFields,V,M):zt(t.validatingFields,V))}),p.state.next({validatingFields:t.validatingFields,isValidating:!qn(t.validatingFields)}))},_=(R,M=[],V,ne,Y=!0,K=!0)=>{if(ne&&V&&!e.disabled){if(a.action=!0,K&&Array.isArray(oe(s,R))){const le=V(oe(s,R),ne.argA,ne.argB);Y&&tt(s,R,le)}if(K&&Array.isArray(oe(t.errors,R))){const le=V(oe(t.errors,R),ne.argA,ne.argB);Y&&tt(t.errors,R,le),zU(t.errors,R)}if((d.touchedFields||f.touchedFields)&&K&&Array.isArray(oe(t.touchedFields,R))){const le=V(oe(t.touchedFields,R),ne.argA,ne.argB);Y&&tt(t.touchedFields,R,le)}(d.dirtyFields||f.dirtyFields)&&(t.dirtyFields=Nf(i,r)),p.state.next({name:R,isDirty:z(R,M),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else tt(r,R,M)},S=(R,M)=>{tt(t.errors,R,M),p.state.next({errors:t.errors})},E=R=>{t.errors=R,p.state.next({errors:t.errors,isValid:!1})},P=(R,M,V,ne)=>{const Y=oe(s,R);if(Y){const K=oe(r,R,Ft(V)?oe(i,R):V);Ft(K)||ne&&ne.defaultChecked||M?tt(r,R,M?K:fE(Y._f)):$(R,K),a.mount&&v()}},T=(R,M,V,ne,Y)=>{let K=!1,le=!1;const He={name:R};if(!e.disabled){if(!V||ne){(d.isDirty||f.isDirty)&&(le=t.isDirty,t.isDirty=He.isDirty=z(),K=le!==He.isDirty);const Mt=io(oe(i,R),M);le=!!oe(t.dirtyFields,R),Mt?zt(t.dirtyFields,R):tt(t.dirtyFields,R,!0),He.dirtyFields=t.dirtyFields,K=K||(d.dirtyFields||f.dirtyFields)&&le!==!Mt}if(V){const Mt=oe(t.touchedFields,R);Mt||(tt(t.touchedFields,R,V),He.touchedFields=t.touchedFields,K=K||(d.touchedFields||f.touchedFields)&&Mt!==V)}K&&Y&&p.state.next(He)}return K?He:{}},N=(R,M,V,ne)=>{const Y=oe(t.errors,R),K=(d.isValid||f.isValid)&&er(M)&&t.isValid!==M;if(e.delayError&&V?(l=w(()=>S(R,V)),l(e.delayError)):(clearTimeout(u),l=null,V?tt(t.errors,R,V):zt(t.errors,R)),(V?!io(Y,V):Y)||!qn(ne)||K){const le={...ne,...K&&er(M)?{isValid:M}:{},errors:t.errors,name:R};t={...t,...le},p.state.next(le)}},I=async R=>{x(R,!0);const M=await e.resolver(r,e.context,LU(R||o.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return x(R),M},D=async R=>{const{errors:M}=await I(R);if(R)for(const V of R){const ne=oe(M,V);ne?tt(t.errors,V,ne):zt(t.errors,V)}else t.errors=M;return M},j=async(R,M,V={valid:!0})=>{for(const ne in R){const Y=R[ne];if(Y){const{_f:K,...le}=Y;if(K){const He=o.array.has(K.name),Mt=Y._f&&OU(Y._f);Mt&&d.validatingFields&&x([ne],!0);const _n=await xE(Y,o.disabled,r,m,e.shouldUseNativeValidation&&!M,He);if(Mt&&d.validatingFields&&x([ne]),_n[K.name]&&(V.valid=!1,M))break;!M&&(oe(_n,K.name)?He?UU(t.errors,_n,K.name):tt(t.errors,K.name,_n[K.name]):zt(t.errors,K.name))}!qn(le)&&await j(le,M,V)}}return V.valid},L=()=>{for(const R of o.unMount){const M=oe(s,R);M&&(M._f.refs?M._f.refs.every(V=>!Rb(V)):!Rb(M._f.ref))&&Ct(R)}o.unMount=new Set},z=(R,M)=>!e.disabled&&(R&&M&&tt(r,R,M),!io(me(),i)),F=(R,M,V)=>IU(R,o,{...a.mount?r:Ft(M)?i:kr(R)?{[R]:M}:M},V,M),J=R=>Ew(oe(a.mount?r:i,R,e.shouldUnregister?oe(i,R,[]):[])),$=(R,M,V={})=>{const ne=oe(s,R);let Y=M;if(ne){const K=ne._f;K&&(!K.disabled&&tt(r,R,t2(M,K)),Y=mx(K.ref)&&Kn(M)?"":M,QM(K.ref)?[...K.ref.options].forEach(le=>le.selected=Y.includes(le.value)):K.refs?Yg(K.ref)?K.refs.length>1?K.refs.forEach(le=>(!le.defaultChecked||!le.disabled)&&(le.checked=Array.isArray(Y)?!!Y.find(He=>He===le.value):Y===le.value)):K.refs[0]&&(K.refs[0].checked=!!Y):K.refs.forEach(le=>le.checked=le.value===Y):b1(K.ref)?K.ref.value="":(K.ref.value=Y,K.ref.type||p.state.next({name:R,values:En(r)})))}(V.shouldDirty||V.shouldTouch)&&T(R,Y,V.shouldTouch,V.shouldDirty,!0),V.shouldValidate&&de(R)},B=(R,M,V)=>{for(const ne in M){const Y=M[ne],K=`${R}.${ne}`,le=oe(s,K);(o.array.has(R)||It(Y)||le&&!le._f)&&!ql(Y)?B(K,Y,V):$(K,Y,V)}},O=(R,M,V={})=>{const ne=oe(s,R),Y=o.array.has(R),K=En(M);tt(r,R,K),Y?(p.array.next({name:R,values:En(r)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&V.shouldDirty&&p.state.next({name:R,dirtyFields:Nf(i,r),isDirty:z(R,K)})):ne&&!ne._f&&!Kn(K)?B(R,K,V):$(R,K,V),gE(R,o)&&p.state.next({...t}),p.state.next({name:a.mount?R:void 0,values:En(r)})},H=async R=>{a.mount=!0;const M=R.target;let V=M.name,ne=!0;const Y=oe(s,V),K=le=>{ne=Number.isNaN(le)||ql(le)&&isNaN(le.getTime())||io(le,oe(r,V,le))};if(Y){let le,He;const Mt=M.type?fE(Y._f):EU(R),_n=R.type===lE.BLUR||R.type===lE.FOCUS_OUT,qj=!FU(Y._f)&&!e.resolver&&!oe(t.errors,V)&&!Y._f.deps||BU(_n,oe(t.touchedFields,V),t.isSubmitted,g,y),Lw=gE(V,o,_n);tt(r,V,Mt),_n?(Y._f.onBlur&&Y._f.onBlur(R),l&&l(0)):Y._f.onChange&&Y._f.onChange(R);const Ow=T(V,Mt,_n),Gj=!qn(Ow)||Lw;if(!_n&&p.state.next({name:V,type:R.type,values:En(r)}),qj)return(d.isValid||f.isValid)&&(e.mode==="onBlur"?_n&&v():_n||v()),Gj&&p.state.next({name:V,...Lw?{}:Ow});if(!_n&&Lw&&p.state.next({...t}),e.resolver){const{errors:H1}=await I([V]);if(K(Mt),ne){const Kj=yE(t.errors,s,V),W1=yE(H1,s,Kj.name||V);le=W1.error,V=W1.name,He=qn(H1)}}else x([V],!0),le=(await xE(Y,o.disabled,r,m,e.shouldUseNativeValidation))[V],x([V]),K(Mt),ne&&(le?He=!1:(d.isValid||f.isValid)&&(He=await j(s,!0)));ne&&(Y._f.deps&&de(Y._f.deps),N(V,He,le,Ow))}},ee=(R,M)=>{if(oe(t.errors,M)&&R.focus)return R.focus(),1},de=async(R,M={})=>{let V,ne;const Y=yp(R);if(e.resolver){const K=await D(Ft(R)?R:Y);V=qn(K),ne=R?!Y.some(le=>oe(K,le)):V}else R?(ne=(await Promise.all(Y.map(async K=>{const le=oe(s,K);return await j(le&&le._f?{[K]:le}:le)}))).every(Boolean),!(!ne&&!t.isValid)&&v()):ne=V=await j(s);return p.state.next({...!kr(R)||(d.isValid||f.isValid)&&V!==t.isValid?{}:{name:R},...e.resolver||!R?{isValid:V}:{},errors:t.errors}),M.shouldFocus&&!ne&&vp(s,ee,R?Y:o.mount),ne},me=R=>{const M={...a.mount?r:i};return Ft(R)?M:kr(R)?oe(M,R):R.map(V=>oe(M,V))},Ce=(R,M)=>({invalid:!!oe((M||t).errors,R),isDirty:!!oe((M||t).dirtyFields,R),error:oe((M||t).errors,R),isValidating:!!oe(t.validatingFields,R),isTouched:!!oe((M||t).touchedFields,R)}),Je=R=>{R&&yp(R).forEach(M=>zt(t.errors,M)),p.state.next({errors:R?t.errors:{}})},At=(R,M,V)=>{const ne=(oe(s,R,{_f:{}})._f||{}).ref,Y=oe(t.errors,R)||{},{ref:K,message:le,type:He,...Mt}=Y;tt(t.errors,R,{...Mt,...M,ref:ne}),p.state.next({name:R,errors:t.errors,isValid:!1}),V&&V.shouldFocus&&ne&&ne.focus&&ne.focus()},at=(R,M)=>ji(R)?p.state.subscribe({next:V=>R(F(void 0,M),V)}):F(R,M,!0),Q=R=>p.state.subscribe({next:M=>{VU(R.name,M.name,R.exact)&&$U(M,R.formState||d,Ou,R.reRenderRoot)&&R.callback({values:{...r},...t,...M})}}).unsubscribe,Ve=R=>(a.mount=!0,f={...f,...R.formState},Q({...R,formState:f})),Ct=(R,M={})=>{for(const V of R?yp(R):o.mount)o.mount.delete(V),o.array.delete(V),M.keepValue||(zt(s,V),zt(r,V)),!M.keepError&&zt(t.errors,V),!M.keepDirty&&zt(t.dirtyFields,V),!M.keepTouched&&zt(t.touchedFields,V),!M.keepIsValidating&&zt(t.validatingFields,V),!e.shouldUnregister&&!M.keepDefaultValue&&zt(i,V);p.state.next({values:En(r)}),p.state.next({...t,...M.keepDirty?{isDirty:z()}:{}}),!M.keepIsValid&&v()},We=({disabled:R,name:M})=>{(er(R)&&a.mount||R||o.disabled.has(M))&&(R?o.disabled.add(M):o.disabled.delete(M))},Ie=(R,M={})=>{let V=oe(s,R);const ne=er(M.disabled)||er(e.disabled);return tt(s,R,{...V||{},_f:{...V&&V._f?V._f:{ref:{name:R}},name:R,mount:!0,...M}}),o.mount.add(R),V?We({disabled:er(M.disabled)?M.disabled:e.disabled,name:R}):P(R,!0,M.value),{...ne?{disabled:M.disabled||e.disabled}:{},...e.progressive?{required:!!M.required,min:Rf(M.min),max:Rf(M.max),minLength:Rf(M.minLength),maxLength:Rf(M.maxLength),pattern:Rf(M.pattern)}:{},name:R,onChange:H,onBlur:H,ref:Y=>{if(Y){Ie(R,M),V=oe(s,R);const K=Ft(Y.value)&&Y.querySelectorAll&&Y.querySelectorAll("input,select,textarea")[0]||Y,le=DU(K),He=V._f.refs||[];if(le?He.find(Mt=>Mt===K):K===V._f.ref)return;tt(s,R,{_f:{...V._f,...le?{refs:[...He.filter(Rb),K,...Array.isArray(oe(i,R))?[{}]:[]],ref:{type:K.type,name:R}}:{ref:K}}}),P(R,!1,void 0,K)}else V=oe(s,R,{}),V._f&&(V._f.mount=!1),(e.shouldUnregister||M.shouldUnregister)&&!(PU(o.array,R)&&a.action)&&o.unMount.add(R)}}},Me=()=>e.shouldFocusError&&vp(s,ee,o.mount),Zt=R=>{er(R)&&(p.state.next({disabled:R}),vp(s,(M,V)=>{const ne=oe(s,V);ne&&(M.disabled=ne._f.disabled||R,Array.isArray(ne._f.refs)&&ne._f.refs.forEach(Y=>{Y.disabled=ne._f.disabled||R}))},0,!1))},Ln=(R,M)=>async V=>{let ne;V&&(V.preventDefault&&V.preventDefault(),V.persist&&V.persist());let Y=En(r);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:K,values:le}=await I();t.errors=K,Y=le}else await j(s);if(o.disabled.size)for(const K of o.disabled)tt(Y,K,void 0);if(zt(t.errors,"root"),qn(t.errors)){p.state.next({errors:{}});try{await R(Y,V)}catch(K){ne=K}}else M&&await M({...t.errors},V),Me(),setTimeout(Me);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:qn(t.errors)&&!ne,submitCount:t.submitCount+1,errors:t.errors}),ne)throw ne},Dl=(R,M={})=>{oe(s,R)&&(Ft(M.defaultValue)?O(R,En(oe(i,R))):(O(R,M.defaultValue),tt(i,R,En(M.defaultValue))),M.keepTouched||zt(t.touchedFields,R),M.keepDirty||(zt(t.dirtyFields,R),t.isDirty=M.defaultValue?z(R,En(oe(i,R))):z()),M.keepError||(zt(t.errors,R),d.isValid&&v()),p.state.next({...t}))},Ha=(R,M={})=>{const V=R?En(R):i,ne=En(V),Y=qn(R),K=Y?i:ne;if(M.keepDefaultValues||(i=V),!M.keepValues){if(M.keepDirtyValues){const le=new Set([...o.mount,...Object.keys(Nf(i,r))]);for(const He of Array.from(le))oe(t.dirtyFields,He)?tt(K,He,oe(r,He)):O(He,oe(K,He))}else{if(x1&&Ft(R))for(const le of o.mount){const He=oe(s,le);if(He&&He._f){const Mt=Array.isArray(He._f.refs)?He._f.refs[0]:He._f.ref;if(mx(Mt)){const _n=Mt.closest("form");if(_n){_n.reset();break}}}}for(const le of o.mount)O(le,oe(K,le))}r=En(K),p.array.next({values:{...K}}),p.state.next({values:{...K}})}o={mount:M.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!d.isValid||!!M.keepIsValid||!!M.keepDirtyValues,a.watch=!!e.shouldUnregister,p.state.next({submitCount:M.keepSubmitCount?t.submitCount:0,isDirty:Y?!1:M.keepDirty?t.isDirty:!!(M.keepDefaultValues&&!io(R,i)),isSubmitted:M.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:Y?{}:M.keepDirtyValues?M.keepDefaultValues&&r?Nf(i,r):t.dirtyFields:M.keepDefaultValues&&R?Nf(i,R):M.keepDirty?t.dirtyFields:{},touchedFields:M.keepTouched?t.touchedFields:{},errors:M.keepErrors?t.errors:{},isSubmitSuccessful:M.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Wa=(R,M)=>Ha(ji(R)?R(r):R,M),jw=(R,M={})=>{const V=oe(s,R),ne=V&&V._f;if(ne){const Y=ne.refs?ne.refs[0]:ne.ref;Y.focus&&(Y.focus(),M.shouldSelect&&ji(Y.select)&&Y.select())}},Ou=R=>{t={...t,...R}},U1={control:{register:Ie,unregister:Ct,getFieldState:Ce,handleSubmit:Ln,setError:At,_subscribe:Q,_runSchema:I,_getWatch:F,_getDirty:z,_setValid:v,_setFieldArray:_,_setDisabledField:We,_setErrors:E,_getFieldArray:J,_reset:Ha,_resetDefaultValues:()=>ji(e.defaultValues)&&e.defaultValues().then(R=>{Wa(R,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:L,_disableForm:Zt,_subjects:p,_proxyFormState:d,get _fields(){return s},get _formValues(){return r},get _state(){return a},set _state(R){a=R},get _defaultValues(){return i},get _names(){return o},set _names(R){o=R},get _formState(){return t},get _options(){return e},set _options(R){e={...e,...R}}},subscribe:Ve,trigger:de,register:Ie,handleSubmit:Ln,watch:at,setValue:O,getValues:me,reset:Wa,resetField:Dl,clearErrors:Je,unregister:Ct,setError:At,setFocus:jw,getFieldState:Ce};return{...U1,formControl:U1}}function qU(n={}){const e=Gt.useRef(void 0),t=Gt.useRef(void 0),[s,i]=Gt.useState({isDirty:!1,isValidating:!1,isLoading:ji(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,defaultValues:ji(n.defaultValues)?void 0:n.defaultValues});e.current||(e.current={...n.formControl?n.formControl:WU(n),formState:s},n.formControl&&n.defaultValues&&!ji(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions));const r=e.current.control;return r._options=n,Gt.useLayoutEffect(()=>r._subscribe({formState:r._proxyFormState,callback:()=>i({...r._formState}),reRenderRoot:!0}),[r]),Gt.useEffect(()=>r._disableForm(n.disabled),[r,n.disabled]),Gt.useEffect(()=>{if(r._proxyFormState.isDirty){const a=r._getDirty();a!==s.isDirty&&r._subjects.state.next({isDirty:a})}},[r,s.isDirty]),Gt.useEffect(()=>{n.values&&!io(n.values,t.current)?(r._reset(n.values,r._options.resetOptions),t.current=n.values,i(a=>({...a}))):r._resetDefaultValues()},[n.values,r]),Gt.useEffect(()=>{n.errors&&!qn(n.errors)&&r._setErrors(n.errors)},[n.errors,r]),Gt.useEffect(()=>{r._state.mount||(r._setValid(),r._state.mount=!0),r._state.watch&&(r._state.watch=!1,r._subjects.state.next({...r._formState})),r._removeUnmounted()}),Gt.useEffect(()=>{n.shouldUnregister&&r._subjects.state.next({values:r._getWatch()})},[n.shouldUnregister,r]),e.current.formState=RU(s,r),e.current}const wE=(n,e,t)=>{if(n&&"reportValidity"in n){const s=oe(t,e);n.setCustomValidity(s&&s.message||""),n.reportValidity()}},s2=(n,e)=>{for(const t in e.fields){const s=e.fields[t];s&&s.ref&&"reportValidity"in s.ref?wE(s.ref,t,n):s.refs&&s.refs.forEach(i=>wE(i,t,n))}},GU=(n,e)=>{e.shouldUseNativeValidation&&s2(n,e);const t={};for(const s in n){const i=oe(e.fields,s),r=Object.assign(n[s]||{},{ref:i&&i.ref});if(KU(e.names||Object.keys(n),s)){const a=Object.assign({},oe(t,s));tt(a,"root",r),tt(t,s,a)}else tt(t,s,r)}return t},KU=(n,e)=>n.some(t=>t.startsWith(e+"."));var XU=function(n,e){for(var t={};n.length;){var s=n[0],i=s.code,r=s.message,a=s.path.join(".");if(!t[a])if("unionErrors"in s){var o=s.unionErrors[0].errors[0];t[a]={message:o.message,type:o.code}}else t[a]={message:r,type:i};if("unionErrors"in s&&s.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return n.push(f)})}),e){var l=t[a].types,u=l&&l[s.code];t[a]=YM(a,e,t,i,u?[].concat(u,s.message):s.message)}n.shift()}return t},YU=function(n,e,t){return t===void 0&&(t={}),function(s,i,r){try{return Promise.resolve(function(a,o){try{var l=Promise.resolve(n[t.mode==="sync"?"parse":"parseAsync"](s,e)).then(function(u){return r.shouldUseNativeValidation&&s2({},r),{errors:{},values:t.raw?s:u}})}catch(u){return o(u)}return l&&l.then?l.then(void 0,o):l}(0,function(a){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(a))return{values:{},errors:GU(XU(a.errors,!r.shouldUseNativeValidation&&r.criteriaMode==="all"),r)};throw a}))}catch(a){return Promise.reject(a)}}},$e;(function(n){n.assertEqual=i=>i;function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const r={};for(const a of i)r[a]=a;return r},n.getValidEnumValues=i=>{const r=n.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of r)a[o]=i[o];return n.objectValues(a)},n.objectValues=i=>n.objectKeys(i).map(function(r){return i[r]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const r=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&r.push(a);return r},n.find=(i,r)=>{for(const a of i)if(r(a))return a},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function s(i,r=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(r)}n.joinValues=s,n.jsonStringifyReplacer=(i,r)=>typeof r=="bigint"?r.toString():r})($e||($e={}));var kS;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(kS||(kS={}));const te=$e.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Yr=n=>{switch(typeof n){case"undefined":return te.undefined;case"string":return te.string;case"number":return isNaN(n)?te.nan:te.number;case"boolean":return te.boolean;case"function":return te.function;case"bigint":return te.bigint;case"symbol":return te.symbol;case"object":return Array.isArray(n)?te.array:n===null?te.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?te.promise:typeof Map<"u"&&n instanceof Map?te.map:typeof Set<"u"&&n instanceof Set?te.set:typeof Date<"u"&&n instanceof Date?te.date:te.object;default:return te.unknown}},U=$e.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),QU=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Hs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(r){return r.message},s={_errors:[]},i=r=>{for(const a of r.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)s._errors.push(t(a));else{let o=s,l=0;for(;l<a.path.length;){const u=a.path[l];l===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(t(a))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return i(this),s}static assert(e){if(!(e instanceof Hs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,$e.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):s.push(e(i));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}Hs.create=n=>new Hs(n);const rf=(n,e)=>{let t;switch(n.code){case U.invalid_type:n.received===te.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case U.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,$e.jsonStringifyReplacer)}`;break;case U.unrecognized_keys:t=`Unrecognized key(s) in object: ${$e.joinValues(n.keys,", ")}`;break;case U.invalid_union:t="Invalid input";break;case U.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${$e.joinValues(n.options)}`;break;case U.invalid_enum_value:t=`Invalid enum value. Expected ${$e.joinValues(n.options)}, received '${n.received}'`;break;case U.invalid_arguments:t="Invalid function arguments";break;case U.invalid_return_type:t="Invalid function return type";break;case U.invalid_date:t="Invalid date";break;case U.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:$e.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case U.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case U.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case U.custom:t="Invalid input";break;case U.invalid_intersection_types:t="Intersection results could not be merged";break;case U.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case U.not_finite:t="Number must be finite";break;default:t=e.defaultError,$e.assertNever(n)}return{message:t}};let i2=rf;function ZU(n){i2=n}function vx(){return i2}const xx=n=>{const{data:e,path:t,errorMaps:s,issueData:i}=n,r=[...t,...i.path||[]],a={...i,path:r};if(i.message!==void 0)return{...i,path:r,message:i.message};let o="";const l=s.filter(u=>!!u).slice().reverse();for(const u of l)o=u(a,{data:e,defaultError:o}).message;return{...i,path:r,message:o}},JU=[];function Z(n,e){const t=vx(),s=xx({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===rf?void 0:rf].filter(i=>!!i)});n.common.issues.push(s)}class jn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const i of t){if(i.status==="aborted")return ye;i.status==="dirty"&&e.dirty(),s.push(i.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const i of t){const r=await i.key,a=await i.value;s.push({key:r,value:a})}return jn.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const i of t){const{key:r,value:a}=i;if(r.status==="aborted"||a.status==="aborted")return ye;r.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(s[r.value]=a.value)}return{status:e.value,value:s}}}const ye=Object.freeze({status:"aborted"}),dd=n=>({status:"dirty",value:n}),Jn=n=>({status:"valid",value:n}),ES=n=>n.status==="aborted",TS=n=>n.status==="dirty",Au=n=>n.status==="valid",zp=n=>typeof Promise<"u"&&n instanceof Promise;function wx(n,e,t,s){if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function r2(n,e,t,s,i){if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var ce;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ce||(ce={}));var ip,rp;class Dr{constructor(e,t,s,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const bE=(n,e)=>{if(Au(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Hs(n.common.issues);return this._error=t,this._error}}};function Se(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:i}=n;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,o)=>{var l,u;const{message:d}=n;return a.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:(l=d??s)!==null&&l!==void 0?l:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(u=d??t)!==null&&u!==void 0?u:o.defaultError}},description:i}}class Ee{get description(){return this._def.description}_getType(e){return Yr(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Yr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new jn,ctx:{common:e.parent.common,data:e.data,parsedType:Yr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(zp(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const i={common:{issues:[],async:(s=t==null?void 0:t.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yr(e)},r=this._parseSync({data:e,path:i.path,parent:i});return bE(i,r)}"~validate"(e){var t,s;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yr(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:i});return Au(r)?{value:r.value}:{issues:i.common.issues}}catch(r){!((s=(t=r==null?void 0:r.message)===null||t===void 0?void 0:t.toLowerCase())===null||s===void 0)&&s.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(r=>Au(r)?{value:r.value}:{issues:i.common.issues})}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yr(e)},i=this._parse({data:e,path:s.path,parent:s}),r=await(zp(i)?i:Promise.resolve(i));return bE(s,r)}refine(e,t){const s=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,r)=>{const a=e(i),o=()=>r.addIssue({code:U.custom,...s(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,t){return this._refinement((s,i)=>e(s)?!0:(i.addIssue(typeof t=="function"?t(s,i):t),!1))}_refinement(e){return new Wi({schema:this,typeName:ge.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Nr.create(this,this._def)}nullable(){return _l.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Vi.create(this)}promise(){return of.create(this,this._def)}or(e){return qp.create([this,e],this._def)}and(e){return Gp.create(this,e,this._def)}transform(e){return new Wi({...Se(this._def),schema:this,typeName:ge.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Zp({...Se(this._def),innerType:this,defaultValue:t,typeName:ge.ZodDefault})}brand(){return new S1({typeName:ge.ZodBranded,type:this,...Se(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Jp({...Se(this._def),innerType:this,catchValue:t,typeName:ge.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Qg.create(this,e)}readonly(){return em.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const eH=/^c[^\s-]{8,}$/i,tH=/^[0-9a-z]+$/,nH=/^[0-9A-HJKMNP-TV-Z]{26}$/i,sH=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,iH=/^[a-z0-9_-]{21}$/i,rH=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,aH=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,oH=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,lH="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ib;const cH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,uH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,dH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,hH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,fH=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,pH=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,a2="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",mH=new RegExp(`^${a2}$`);function o2(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function gH(n){return new RegExp(`^${o2(n)}$`)}function l2(n){let e=`${a2}T${o2(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function yH(n,e){return!!((e==="v4"||!e)&&cH.test(n)||(e==="v6"||!e)&&dH.test(n))}function vH(n,e){if(!rH.test(n))return!1;try{const[t]=n.split("."),s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(s));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function xH(n,e){return!!((e==="v4"||!e)&&uH.test(n)||(e==="v6"||!e)&&hH.test(n))}class Li extends Ee{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==te.string){const r=this._getOrReturnCtx(e);return Z(r,{code:U.invalid_type,expected:te.string,received:r.parsedType}),ye}const s=new jn;let i;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(i=this._getOrReturnCtx(e,i),Z(i,{code:U.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="max")e.data.length>r.value&&(i=this._getOrReturnCtx(e,i),Z(i,{code:U.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="length"){const a=e.data.length>r.value,o=e.data.length<r.value;(a||o)&&(i=this._getOrReturnCtx(e,i),a?Z(i,{code:U.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):o&&Z(i,{code:U.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),s.dirty())}else if(r.kind==="email")oH.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"email",code:U.invalid_string,message:r.message}),s.dirty());else if(r.kind==="emoji")Ib||(Ib=new RegExp(lH,"u")),Ib.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"emoji",code:U.invalid_string,message:r.message}),s.dirty());else if(r.kind==="uuid")sH.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"uuid",code:U.invalid_string,message:r.message}),s.dirty());else if(r.kind==="nanoid")iH.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"nanoid",code:U.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid")eH.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"cuid",code:U.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid2")tH.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"cuid2",code:U.invalid_string,message:r.message}),s.dirty());else if(r.kind==="ulid")nH.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"ulid",code:U.invalid_string,message:r.message}),s.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Z(i,{validation:"url",code:U.invalid_string,message:r.message}),s.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"regex",code:U.invalid_string,message:r.message}),s.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(i=this._getOrReturnCtx(e,i),Z(i,{code:U.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),s.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(i=this._getOrReturnCtx(e,i),Z(i,{code:U.invalid_string,validation:{startsWith:r.value},message:r.message}),s.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(i=this._getOrReturnCtx(e,i),Z(i,{code:U.invalid_string,validation:{endsWith:r.value},message:r.message}),s.dirty()):r.kind==="datetime"?l2(r).test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{code:U.invalid_string,validation:"datetime",message:r.message}),s.dirty()):r.kind==="date"?mH.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{code:U.invalid_string,validation:"date",message:r.message}),s.dirty()):r.kind==="time"?gH(r).test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{code:U.invalid_string,validation:"time",message:r.message}),s.dirty()):r.kind==="duration"?aH.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"duration",code:U.invalid_string,message:r.message}),s.dirty()):r.kind==="ip"?yH(e.data,r.version)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"ip",code:U.invalid_string,message:r.message}),s.dirty()):r.kind==="jwt"?vH(e.data,r.alg)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"jwt",code:U.invalid_string,message:r.message}),s.dirty()):r.kind==="cidr"?xH(e.data,r.version)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"cidr",code:U.invalid_string,message:r.message}),s.dirty()):r.kind==="base64"?fH.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"base64",code:U.invalid_string,message:r.message}),s.dirty()):r.kind==="base64url"?pH.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"base64url",code:U.invalid_string,message:r.message}),s.dirty()):$e.assertNever(r);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(i=>e.test(i),{validation:t,code:U.invalid_string,...ce.errToObj(s)})}_addCheck(e){return new Li({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ce.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ce.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ce.errToObj(e)})}datetime(e){var t,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...ce.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ce.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ce.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...ce.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ce.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ce.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ce.errToObj(t)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new Li({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Li({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Li({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Li.create=n=>{var e;return new Li({checks:[],typeName:ge.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Se(n)})};function wH(n,e){const t=(n.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,i=t>s?t:s,r=parseInt(n.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return r%a/Math.pow(10,i)}class xl extends Ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==te.number){const r=this._getOrReturnCtx(e);return Z(r,{code:U.invalid_type,expected:te.number,received:r.parsedType}),ye}let s;const i=new jn;for(const r of this._def.checks)r.kind==="int"?$e.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),Z(s,{code:U.invalid_type,expected:"integer",received:"float",message:r.message}),i.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),Z(s,{code:U.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),Z(s,{code:U.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):r.kind==="multipleOf"?wH(e.data,r.value)!==0&&(s=this._getOrReturnCtx(e,s),Z(s,{code:U.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),Z(s,{code:U.not_finite,message:r.message}),i.dirty()):$e.assertNever(r);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,s,i){return new xl({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:ce.toString(i)}]})}_addCheck(e){return new xl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&$e.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}xl.create=n=>new xl({checks:[],typeName:ge.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Se(n)});class wl extends Ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==te.bigint)return this._getInvalidInput(e);let s;const i=new jn;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),Z(s,{code:U.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),Z(s,{code:U.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),Z(s,{code:U.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):$e.assertNever(r);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Z(t,{code:U.invalid_type,expected:te.bigint,received:t.parsedType}),ye}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,s,i){return new wl({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:ce.toString(i)}]})}_addCheck(e){return new wl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}wl.create=n=>{var e;return new wl({checks:[],typeName:ge.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Se(n)})};class Up extends Ee{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==te.boolean){const s=this._getOrReturnCtx(e);return Z(s,{code:U.invalid_type,expected:te.boolean,received:s.parsedType}),ye}return Jn(e.data)}}Up.create=n=>new Up({typeName:ge.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Se(n)});class Cu extends Ee{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==te.date){const r=this._getOrReturnCtx(e);return Z(r,{code:U.invalid_type,expected:te.date,received:r.parsedType}),ye}if(isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return Z(r,{code:U.invalid_date}),ye}const s=new jn;let i;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(i=this._getOrReturnCtx(e,i),Z(i,{code:U.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),s.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(i=this._getOrReturnCtx(e,i),Z(i,{code:U.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),s.dirty()):$e.assertNever(r);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Cu({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Cu.create=n=>new Cu({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:ge.ZodDate,...Se(n)});class bx extends Ee{_parse(e){if(this._getType(e)!==te.symbol){const s=this._getOrReturnCtx(e);return Z(s,{code:U.invalid_type,expected:te.symbol,received:s.parsedType}),ye}return Jn(e.data)}}bx.create=n=>new bx({typeName:ge.ZodSymbol,...Se(n)});class Hp extends Ee{_parse(e){if(this._getType(e)!==te.undefined){const s=this._getOrReturnCtx(e);return Z(s,{code:U.invalid_type,expected:te.undefined,received:s.parsedType}),ye}return Jn(e.data)}}Hp.create=n=>new Hp({typeName:ge.ZodUndefined,...Se(n)});class Wp extends Ee{_parse(e){if(this._getType(e)!==te.null){const s=this._getOrReturnCtx(e);return Z(s,{code:U.invalid_type,expected:te.null,received:s.parsedType}),ye}return Jn(e.data)}}Wp.create=n=>new Wp({typeName:ge.ZodNull,...Se(n)});class af extends Ee{constructor(){super(...arguments),this._any=!0}_parse(e){return Jn(e.data)}}af.create=n=>new af({typeName:ge.ZodAny,...Se(n)});class uu extends Ee{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Jn(e.data)}}uu.create=n=>new uu({typeName:ge.ZodUnknown,...Se(n)});class Ba extends Ee{_parse(e){const t=this._getOrReturnCtx(e);return Z(t,{code:U.invalid_type,expected:te.never,received:t.parsedType}),ye}}Ba.create=n=>new Ba({typeName:ge.ZodNever,...Se(n)});class _x extends Ee{_parse(e){if(this._getType(e)!==te.undefined){const s=this._getOrReturnCtx(e);return Z(s,{code:U.invalid_type,expected:te.void,received:s.parsedType}),ye}return Jn(e.data)}}_x.create=n=>new _x({typeName:ge.ZodVoid,...Se(n)});class Vi extends Ee{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),i=this._def;if(t.parsedType!==te.array)return Z(t,{code:U.invalid_type,expected:te.array,received:t.parsedType}),ye;if(i.exactLength!==null){const a=t.data.length>i.exactLength.value,o=t.data.length<i.exactLength.value;(a||o)&&(Z(t,{code:a?U.too_big:U.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),s.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(Z(t,{code:U.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),s.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(Z(t,{code:U.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((a,o)=>i.type._parseAsync(new Dr(t,a,t.path,o)))).then(a=>jn.mergeArray(s,a));const r=[...t.data].map((a,o)=>i.type._parseSync(new Dr(t,a,t.path,o)));return jn.mergeArray(s,r)}get element(){return this._def.type}min(e,t){return new Vi({...this._def,minLength:{value:e,message:ce.toString(t)}})}max(e,t){return new Vi({...this._def,maxLength:{value:e,message:ce.toString(t)}})}length(e,t){return new Vi({...this._def,exactLength:{value:e,message:ce.toString(t)}})}nonempty(e){return this.min(1,e)}}Vi.create=(n,e)=>new Vi({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ge.ZodArray,...Se(e)});function Qu(n){if(n instanceof wt){const e={};for(const t in n.shape){const s=n.shape[t];e[t]=Nr.create(Qu(s))}return new wt({...n._def,shape:()=>e})}else return n instanceof Vi?new Vi({...n._def,type:Qu(n.element)}):n instanceof Nr?Nr.create(Qu(n.unwrap())):n instanceof _l?_l.create(Qu(n.unwrap())):n instanceof Mr?Mr.create(n.items.map(e=>Qu(e))):n}class wt extends Ee{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=$e.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==te.object){const u=this._getOrReturnCtx(e);return Z(u,{code:U.invalid_type,expected:te.object,received:u.parsedType}),ye}const{status:s,ctx:i}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Ba&&this._def.unknownKeys==="strip"))for(const u in i.data)a.includes(u)||o.push(u);const l=[];for(const u of a){const d=r[u],f=i.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Dr(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Ba){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)l.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")o.length>0&&(Z(i,{code:U.unrecognized_keys,keys:o}),s.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const f=i.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Dr(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const f=await d.key,p=await d.value;u.push({key:f,value:p,alwaysSet:d.alwaysSet})}return u}).then(u=>jn.mergeObjectSync(s,u)):jn.mergeObjectSync(s,l)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new wt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var i,r,a,o;const l=(a=(r=(i=this._def).errorMap)===null||r===void 0?void 0:r.call(i,t,s).message)!==null&&a!==void 0?a:s.defaultError;return t.code==="unrecognized_keys"?{message:(o=ce.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new wt({...this._def,unknownKeys:"strip"})}passthrough(){return new wt({...this._def,unknownKeys:"passthrough"})}extend(e){return new wt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new wt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ge.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new wt({...this._def,catchall:e})}pick(e){const t={};return $e.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new wt({...this._def,shape:()=>t})}omit(e){const t={};return $e.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new wt({...this._def,shape:()=>t})}deepPartial(){return Qu(this)}partial(e){const t={};return $e.objectKeys(this.shape).forEach(s=>{const i=this.shape[s];e&&!e[s]?t[s]=i:t[s]=i.optional()}),new wt({...this._def,shape:()=>t})}required(e){const t={};return $e.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let r=this.shape[s];for(;r instanceof Nr;)r=r._def.innerType;t[s]=r}}),new wt({...this._def,shape:()=>t})}keyof(){return c2($e.objectKeys(this.shape))}}wt.create=(n,e)=>new wt({shape:()=>n,unknownKeys:"strip",catchall:Ba.create(),typeName:ge.ZodObject,...Se(e)});wt.strictCreate=(n,e)=>new wt({shape:()=>n,unknownKeys:"strict",catchall:Ba.create(),typeName:ge.ZodObject,...Se(e)});wt.lazycreate=(n,e)=>new wt({shape:n,unknownKeys:"strip",catchall:Ba.create(),typeName:ge.ZodObject,...Se(e)});class qp extends Ee{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function i(r){for(const o of r)if(o.result.status==="valid")return o.result;for(const o of r)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const a=r.map(o=>new Hs(o.ctx.common.issues));return Z(t,{code:U.invalid_union,unionErrors:a}),ye}if(t.common.async)return Promise.all(s.map(async r=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await r._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(i);{let r;const a=[];for(const l of s){const u={...t,common:{...t.common,issues:[]},parent:null},d=l._parseSync({data:t.data,path:t.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!r&&(r={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(r)return t.common.issues.push(...r.ctx.common.issues),r.result;const o=a.map(l=>new Hs(l));return Z(t,{code:U.invalid_union,unionErrors:o}),ye}}get options(){return this._def.options}}qp.create=(n,e)=>new qp({options:n,typeName:ge.ZodUnion,...Se(e)});const Hr=n=>n instanceof Xp?Hr(n.schema):n instanceof Wi?Hr(n.innerType()):n instanceof Yp?[n.value]:n instanceof bl?n.options:n instanceof Qp?$e.objectValues(n.enum):n instanceof Zp?Hr(n._def.innerType):n instanceof Hp?[void 0]:n instanceof Wp?[null]:n instanceof Nr?[void 0,...Hr(n.unwrap())]:n instanceof _l?[null,...Hr(n.unwrap())]:n instanceof S1||n instanceof em?Hr(n.unwrap()):n instanceof Jp?Hr(n._def.innerType):[];class Tw extends Ee{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==te.object)return Z(t,{code:U.invalid_type,expected:te.object,received:t.parsedType}),ye;const s=this.discriminator,i=t.data[s],r=this.optionsMap.get(i);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):(Z(t,{code:U.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),ye)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const i=new Map;for(const r of t){const a=Hr(r.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,r)}}return new Tw({typeName:ge.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...Se(s)})}}function PS(n,e){const t=Yr(n),s=Yr(e);if(n===e)return{valid:!0,data:n};if(t===te.object&&s===te.object){const i=$e.objectKeys(e),r=$e.objectKeys(n).filter(o=>i.indexOf(o)!==-1),a={...n,...e};for(const o of r){const l=PS(n[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(t===te.array&&s===te.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let r=0;r<n.length;r++){const a=n[r],o=e[r],l=PS(a,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return t===te.date&&s===te.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Gp extends Ee{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),i=(r,a)=>{if(ES(r)||ES(a))return ye;const o=PS(r.value,a.value);return o.valid?((TS(r)||TS(a))&&t.dirty(),{status:t.value,value:o.data}):(Z(s,{code:U.invalid_intersection_types}),ye)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([r,a])=>i(r,a)):i(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Gp.create=(n,e,t)=>new Gp({left:n,right:e,typeName:ge.ZodIntersection,...Se(t)});class Mr extends Ee{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==te.array)return Z(s,{code:U.invalid_type,expected:te.array,received:s.parsedType}),ye;if(s.data.length<this._def.items.length)return Z(s,{code:U.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ye;!this._def.rest&&s.data.length>this._def.items.length&&(Z(s,{code:U.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...s.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new Dr(s,a,s.path,o)):null}).filter(a=>!!a);return s.common.async?Promise.all(r).then(a=>jn.mergeArray(t,a)):jn.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new Mr({...this._def,rest:e})}}Mr.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Mr({items:n,typeName:ge.ZodTuple,rest:null,...Se(e)})};class Kp extends Ee{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==te.object)return Z(s,{code:U.invalid_type,expected:te.object,received:s.parsedType}),ye;const i=[],r=this._def.keyType,a=this._def.valueType;for(const o in s.data)i.push({key:r._parse(new Dr(s,o,s.path,o)),value:a._parse(new Dr(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?jn.mergeObjectAsync(t,i):jn.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof Ee?new Kp({keyType:e,valueType:t,typeName:ge.ZodRecord,...Se(s)}):new Kp({keyType:Li.create(),valueType:e,typeName:ge.ZodRecord,...Se(t)})}}class Sx extends Ee{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==te.map)return Z(s,{code:U.invalid_type,expected:te.map,received:s.parsedType}),ye;const i=this._def.keyType,r=this._def.valueType,a=[...s.data.entries()].map(([o,l],u)=>({key:i._parse(new Dr(s,o,s.path,[u,"key"])),value:r._parse(new Dr(s,l,s.path,[u,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return ye;(u.status==="dirty"||d.status==="dirty")&&t.dirty(),o.set(u.value,d.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const l of a){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return ye;(u.status==="dirty"||d.status==="dirty")&&t.dirty(),o.set(u.value,d.value)}return{status:t.value,value:o}}}}Sx.create=(n,e,t)=>new Sx({valueType:e,keyType:n,typeName:ge.ZodMap,...Se(t)});class ku extends Ee{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==te.set)return Z(s,{code:U.invalid_type,expected:te.set,received:s.parsedType}),ye;const i=this._def;i.minSize!==null&&s.data.size<i.minSize.value&&(Z(s,{code:U.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&s.data.size>i.maxSize.value&&(Z(s,{code:U.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const r=this._def.valueType;function a(l){const u=new Set;for(const d of l){if(d.status==="aborted")return ye;d.status==="dirty"&&t.dirty(),u.add(d.value)}return{status:t.value,value:u}}const o=[...s.data.values()].map((l,u)=>r._parse(new Dr(s,l,s.path,u)));return s.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,t){return new ku({...this._def,minSize:{value:e,message:ce.toString(t)}})}max(e,t){return new ku({...this._def,maxSize:{value:e,message:ce.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ku.create=(n,e)=>new ku({valueType:n,minSize:null,maxSize:null,typeName:ge.ZodSet,...Se(e)});class kd extends Ee{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==te.function)return Z(t,{code:U.invalid_type,expected:te.function,received:t.parsedType}),ye;function s(o,l){return xx({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,vx(),rf].filter(u=>!!u),issueData:{code:U.invalid_arguments,argumentsError:l}})}function i(o,l){return xx({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,vx(),rf].filter(u=>!!u),issueData:{code:U.invalid_return_type,returnTypeError:l}})}const r={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof of){const o=this;return Jn(async function(...l){const u=new Hs([]),d=await o._def.args.parseAsync(l,r).catch(y=>{throw u.addIssue(s(l,y)),u}),f=await Reflect.apply(a,this,d);return await o._def.returns._def.type.parseAsync(f,r).catch(y=>{throw u.addIssue(i(f,y)),u})})}else{const o=this;return Jn(function(...l){const u=o._def.args.safeParse(l,r);if(!u.success)throw new Hs([s(l,u.error)]);const d=Reflect.apply(a,this,u.data),f=o._def.returns.safeParse(d,r);if(!f.success)throw new Hs([i(d,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new kd({...this._def,args:Mr.create(e).rest(uu.create())})}returns(e){return new kd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new kd({args:e||Mr.create([]).rest(uu.create()),returns:t||uu.create(),typeName:ge.ZodFunction,...Se(s)})}}class Xp extends Ee{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Xp.create=(n,e)=>new Xp({getter:n,typeName:ge.ZodLazy,...Se(e)});class Yp extends Ee{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Z(t,{received:t.data,code:U.invalid_literal,expected:this._def.value}),ye}return{status:"valid",value:e.data}}get value(){return this._def.value}}Yp.create=(n,e)=>new Yp({value:n,typeName:ge.ZodLiteral,...Se(e)});function c2(n,e){return new bl({values:n,typeName:ge.ZodEnum,...Se(e)})}class bl extends Ee{constructor(){super(...arguments),ip.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return Z(t,{expected:$e.joinValues(s),received:t.parsedType,code:U.invalid_type}),ye}if(wx(this,ip)||r2(this,ip,new Set(this._def.values)),!wx(this,ip).has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return Z(t,{received:t.data,code:U.invalid_enum_value,options:s}),ye}return Jn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return bl.create(e,{...this._def,...t})}exclude(e,t=this._def){return bl.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}ip=new WeakMap;bl.create=c2;class Qp extends Ee{constructor(){super(...arguments),rp.set(this,void 0)}_parse(e){const t=$e.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==te.string&&s.parsedType!==te.number){const i=$e.objectValues(t);return Z(s,{expected:$e.joinValues(i),received:s.parsedType,code:U.invalid_type}),ye}if(wx(this,rp)||r2(this,rp,new Set($e.getValidEnumValues(this._def.values))),!wx(this,rp).has(e.data)){const i=$e.objectValues(t);return Z(s,{received:s.data,code:U.invalid_enum_value,options:i}),ye}return Jn(e.data)}get enum(){return this._def.values}}rp=new WeakMap;Qp.create=(n,e)=>new Qp({values:n,typeName:ge.ZodNativeEnum,...Se(e)});class of extends Ee{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==te.promise&&t.common.async===!1)return Z(t,{code:U.invalid_type,expected:te.promise,received:t.parsedType}),ye;const s=t.parsedType===te.promise?t.data:Promise.resolve(t.data);return Jn(s.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}of.create=(n,e)=>new of({type:n,typeName:ge.ZodPromise,...Se(e)});class Wi extends Ee{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ge.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),i=this._def.effect||null,r={addIssue:a=>{Z(s,a),a.fatal?t.abort():t.dirty()},get path(){return s.path}};if(r.addIssue=r.addIssue.bind(r),i.type==="preprocess"){const a=i.transform(s.data,r);if(s.common.async)return Promise.resolve(a).then(async o=>{if(t.value==="aborted")return ye;const l=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return l.status==="aborted"?ye:l.status==="dirty"||t.value==="dirty"?dd(l.value):l});{if(t.value==="aborted")return ye;const o=this._def.schema._parseSync({data:a,path:s.path,parent:s});return o.status==="aborted"?ye:o.status==="dirty"||t.value==="dirty"?dd(o.value):o}}if(i.type==="refinement"){const a=o=>{const l=i.refinement(o,r);if(s.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?ye:(o.status==="dirty"&&t.dirty(),a(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?ye:(o.status==="dirty"&&t.dirty(),a(o.value).then(()=>({status:t.value,value:o.value}))))}if(i.type==="transform")if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Au(a))return a;const o=i.transform(a.value,r);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>Au(a)?Promise.resolve(i.transform(a.value,r)).then(o=>({status:t.value,value:o})):a);$e.assertNever(i)}}Wi.create=(n,e,t)=>new Wi({schema:n,typeName:ge.ZodEffects,effect:e,...Se(t)});Wi.createWithPreprocess=(n,e,t)=>new Wi({schema:e,effect:{type:"preprocess",transform:n},typeName:ge.ZodEffects,...Se(t)});class Nr extends Ee{_parse(e){return this._getType(e)===te.undefined?Jn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Nr.create=(n,e)=>new Nr({innerType:n,typeName:ge.ZodOptional,...Se(e)});class _l extends Ee{_parse(e){return this._getType(e)===te.null?Jn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_l.create=(n,e)=>new _l({innerType:n,typeName:ge.ZodNullable,...Se(e)});class Zp extends Ee{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===te.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Zp.create=(n,e)=>new Zp({innerType:n,typeName:ge.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Se(e)});class Jp extends Ee{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return zp(i)?i.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Hs(s.common.issues)},input:s.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Hs(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Jp.create=(n,e)=>new Jp({innerType:n,typeName:ge.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Se(e)});class Ax extends Ee{_parse(e){if(this._getType(e)!==te.nan){const s=this._getOrReturnCtx(e);return Z(s,{code:U.invalid_type,expected:te.nan,received:s.parsedType}),ye}return{status:"valid",value:e.data}}}Ax.create=n=>new Ax({typeName:ge.ZodNaN,...Se(n)});const bH=Symbol("zod_brand");class S1 extends Ee{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class Qg extends Ee{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?ye:r.status==="dirty"?(t.dirty(),dd(r.value)):this._def.out._parseAsync({data:r.value,path:s.path,parent:s})})();{const i=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?ye:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:s.path,parent:s})}}static create(e,t){return new Qg({in:e,out:t,typeName:ge.ZodPipeline})}}class em extends Ee{_parse(e){const t=this._def.innerType._parse(e),s=i=>(Au(i)&&(i.value=Object.freeze(i.value)),i);return zp(t)?t.then(i=>s(i)):s(t)}unwrap(){return this._def.innerType}}em.create=(n,e)=>new em({innerType:n,typeName:ge.ZodReadonly,...Se(e)});function _E(n,e){const t=typeof n=="function"?n(e):typeof n=="string"?{message:n}:n;return typeof t=="string"?{message:t}:t}function u2(n,e={},t){return n?af.create().superRefine((s,i)=>{var r,a;const o=n(s);if(o instanceof Promise)return o.then(l=>{var u,d;if(!l){const f=_E(e,s),p=(d=(u=f.fatal)!==null&&u!==void 0?u:t)!==null&&d!==void 0?d:!0;i.addIssue({code:"custom",...f,fatal:p})}});if(!o){const l=_E(e,s),u=(a=(r=l.fatal)!==null&&r!==void 0?r:t)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...l,fatal:u})}}):af.create()}const _H={object:wt.lazycreate};var ge;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ge||(ge={}));const SH=(n,e={message:`Input not instance of ${n.name}`})=>u2(t=>t instanceof n,e),d2=Li.create,h2=xl.create,AH=Ax.create,CH=wl.create,f2=Up.create,kH=Cu.create,EH=bx.create,TH=Hp.create,PH=Wp.create,NH=af.create,RH=uu.create,IH=Ba.create,DH=_x.create,MH=Vi.create,jH=wt.create,LH=wt.strictCreate,OH=qp.create,FH=Tw.create,$H=Gp.create,VH=Mr.create,BH=Kp.create,zH=Sx.create,UH=ku.create,HH=kd.create,WH=Xp.create,qH=Yp.create,GH=bl.create,KH=Qp.create,XH=of.create,SE=Wi.create,YH=Nr.create,QH=_l.create,ZH=Wi.createWithPreprocess,JH=Qg.create,e5=()=>d2().optional(),t5=()=>h2().optional(),n5=()=>f2().optional(),s5={string:n=>Li.create({...n,coerce:!0}),number:n=>xl.create({...n,coerce:!0}),boolean:n=>Up.create({...n,coerce:!0}),bigint:n=>wl.create({...n,coerce:!0}),date:n=>Cu.create({...n,coerce:!0})},i5=ye;var G=Object.freeze({__proto__:null,defaultErrorMap:rf,setErrorMap:ZU,getErrorMap:vx,makeIssue:xx,EMPTY_PATH:JU,addIssueToContext:Z,ParseStatus:jn,INVALID:ye,DIRTY:dd,OK:Jn,isAborted:ES,isDirty:TS,isValid:Au,isAsync:zp,get util(){return $e},get objectUtil(){return kS},ZodParsedType:te,getParsedType:Yr,ZodType:Ee,datetimeRegex:l2,ZodString:Li,ZodNumber:xl,ZodBigInt:wl,ZodBoolean:Up,ZodDate:Cu,ZodSymbol:bx,ZodUndefined:Hp,ZodNull:Wp,ZodAny:af,ZodUnknown:uu,ZodNever:Ba,ZodVoid:_x,ZodArray:Vi,ZodObject:wt,ZodUnion:qp,ZodDiscriminatedUnion:Tw,ZodIntersection:Gp,ZodTuple:Mr,ZodRecord:Kp,ZodMap:Sx,ZodSet:ku,ZodFunction:kd,ZodLazy:Xp,ZodLiteral:Yp,ZodEnum:bl,ZodNativeEnum:Qp,ZodPromise:of,ZodEffects:Wi,ZodTransformer:Wi,ZodOptional:Nr,ZodNullable:_l,ZodDefault:Zp,ZodCatch:Jp,ZodNaN:Ax,BRAND:bH,ZodBranded:S1,ZodPipeline:Qg,ZodReadonly:em,custom:u2,Schema:Ee,ZodSchema:Ee,late:_H,get ZodFirstPartyTypeKind(){return ge},coerce:s5,any:NH,array:MH,bigint:CH,boolean:f2,date:kH,discriminatedUnion:FH,effect:SE,enum:GH,function:HH,instanceof:SH,intersection:$H,lazy:WH,literal:qH,map:zH,nan:AH,nativeEnum:KH,never:IH,null:PH,nullable:QH,number:h2,object:jH,oboolean:n5,onumber:t5,optional:YH,ostring:e5,pipeline:JH,preprocess:ZH,promise:XH,record:BH,set:UH,strictObject:LH,string:d2,symbol:EH,transformer:SE,tuple:VH,undefined:TH,union:OH,unknown:RH,void:DH,NEVER:i5,ZodIssueCode:U,quotelessJson:QU,ZodError:Hs});const Ed=C.forwardRef(({className:n,...e},t)=>h.jsx("textarea",{className:Te("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...e}));Ed.displayName="Textarea";function AE(n,[e,t]){return Math.min(t,Math.max(e,n))}var Db=0;function p2(){C.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??CE()),document.body.insertAdjacentElement("beforeend",n[1]??CE()),Db++,()=>{Db===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Db--}},[])}function CE(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Mb="focusScope.autoFocusOnMount",jb="focusScope.autoFocusOnUnmount",kE={bubbles:!1,cancelable:!0},r5="FocusScope",A1=C.forwardRef((n,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:r,...a}=n,[o,l]=C.useState(null),u=xs(i),d=xs(r),f=C.useRef(null),p=rt(e,m=>l(m)),y=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(s){let m=function(_){if(y.paused||!o)return;const S=_.target;o.contains(S)?f.current=S:Za(f.current,{select:!0})},w=function(_){if(y.paused||!o)return;const S=_.relatedTarget;S!==null&&(o.contains(S)||Za(f.current,{select:!0}))},v=function(_){if(document.activeElement===document.body)for(const E of _)E.removedNodes.length>0&&Za(o)};document.addEventListener("focusin",m),document.addEventListener("focusout",w);const x=new MutationObserver(v);return o&&x.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",w),x.disconnect()}}},[s,o,y.paused]),C.useEffect(()=>{if(o){TE.add(y);const m=document.activeElement;if(!o.contains(m)){const v=new CustomEvent(Mb,kE);o.addEventListener(Mb,u),o.dispatchEvent(v),v.defaultPrevented||(a5(d5(m2(o)),{select:!0}),document.activeElement===m&&Za(o))}return()=>{o.removeEventListener(Mb,u),setTimeout(()=>{const v=new CustomEvent(jb,kE);o.addEventListener(jb,d),o.dispatchEvent(v),v.defaultPrevented||Za(m??document.body,{select:!0}),o.removeEventListener(jb,d),TE.remove(y)},0)}}},[o,u,d,y]);const g=C.useCallback(m=>{if(!t&&!s||y.paused)return;const w=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(w&&v){const x=m.currentTarget,[_,S]=o5(x);_&&S?!m.shiftKey&&v===S?(m.preventDefault(),t&&Za(_,{select:!0})):m.shiftKey&&v===_&&(m.preventDefault(),t&&Za(S,{select:!0})):v===x&&m.preventDefault()}},[t,s,y.paused]);return h.jsx(be.div,{tabIndex:-1,...a,ref:p,onKeyDown:g})});A1.displayName=r5;function a5(n,{select:e=!1}={}){const t=document.activeElement;for(const s of n)if(Za(s,{select:e}),document.activeElement!==t)return}function o5(n){const e=m2(n),t=EE(e,n),s=EE(e.reverse(),n);return[t,s]}function m2(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function EE(n,e){for(const t of n)if(!l5(t,{upTo:e}))return t}function l5(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function c5(n){return n instanceof HTMLInputElement&&"select"in n}function Za(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&c5(n)&&e&&n.select()}}var TE=u5();function u5(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=PE(n,e),n.unshift(e)},remove(e){var t;n=PE(n,e),(t=n[0])==null||t.resume()}}}function PE(n,e){const t=[...n],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function d5(n){return n.filter(e=>e.tagName!=="A")}function g2(n){const e=C.useRef({value:n,previous:n});return C.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var h5=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Vu=new WeakMap,Py=new WeakMap,Ny={},Lb=0,y2=function(n){return n&&(n.host||y2(n.parentNode))},f5=function(n,e){return e.map(function(t){if(n.contains(t))return t;var s=y2(t);return s&&n.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},p5=function(n,e,t,s){var i=f5(e,Array.isArray(n)?n:[n]);Ny[t]||(Ny[t]=new WeakMap);var r=Ny[t],a=[],o=new Set,l=new Set(i),u=function(f){!f||o.has(f)||(o.add(f),u(f.parentNode))};i.forEach(u);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(o.has(p))d(p);else try{var y=p.getAttribute(s),g=y!==null&&y!=="false",m=(Vu.get(p)||0)+1,w=(r.get(p)||0)+1;Vu.set(p,m),r.set(p,w),a.push(p),m===1&&g&&Py.set(p,!0),w===1&&p.setAttribute(t,"true"),g||p.setAttribute(s,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return d(e),o.clear(),Lb++,function(){a.forEach(function(f){var p=Vu.get(f)-1,y=r.get(f)-1;Vu.set(f,p),r.set(f,y),p||(Py.has(f)||f.removeAttribute(s),Py.delete(f)),y||f.removeAttribute(t)}),Lb--,Lb||(Vu=new WeakMap,Vu=new WeakMap,Py=new WeakMap,Ny={})}},v2=function(n,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(n)?n:[n]),i=h5(n);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live]"))),p5(s,i,t,"aria-hidden")):function(){return null}},Ar=function(){return Ar=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ar.apply(this,arguments)};function x2(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t}function m5(n,e,t){if(t||arguments.length===2)for(var s=0,i=e.length,r;s<i;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return n.concat(r||Array.prototype.slice.call(e))}var Ev="right-scroll-bar-position",Tv="width-before-scroll-bar",g5="with-scroll-bars-hidden",y5="--removed-body-scroll-bar-size";function Ob(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function v5(n,e){var t=C.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(s){var i=t.value;i!==s&&(t.value=s,t.callback(s,i))}}}})[0];return t.callback=e,t.facade}var x5=typeof window<"u"?C.useLayoutEffect:C.useEffect,NE=new WeakMap;function w5(n,e){var t=v5(null,function(s){return n.forEach(function(i){return Ob(i,s)})});return x5(function(){var s=NE.get(t);if(s){var i=new Set(s),r=new Set(n),a=t.current;i.forEach(function(o){r.has(o)||Ob(o,null)}),r.forEach(function(o){i.has(o)||Ob(o,a)})}NE.set(t,n)},[n]),t}function b5(n){return n}function _5(n,e){e===void 0&&(e=b5);var t=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(r){var a=e(r,s);return t.push(a),function(){t=t.filter(function(o){return o!==a})}},assignSyncMedium:function(r){for(s=!0;t.length;){var a=t;t=[],a.forEach(r)}t={push:function(o){return r(o)},filter:function(){return t}}},assignMedium:function(r){s=!0;var a=[];if(t.length){var o=t;t=[],o.forEach(r),a=t}var l=function(){var d=a;a=[],d.forEach(r)},u=function(){return Promise.resolve().then(l)};u(),t={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),t}}}};return i}function S5(n){n===void 0&&(n={});var e=_5(null);return e.options=Ar({async:!0,ssr:!1},n),e}var w2=function(n){var e=n.sideCar,t=x2(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return C.createElement(s,Ar({},t))};w2.isSideCarExport=!0;function A5(n,e){return n.useMedium(e),w2}var b2=S5(),Fb=function(){},Pw=C.forwardRef(function(n,e){var t=C.useRef(null),s=C.useState({onScrollCapture:Fb,onWheelCapture:Fb,onTouchMoveCapture:Fb}),i=s[0],r=s[1],a=n.forwardProps,o=n.children,l=n.className,u=n.removeScrollBar,d=n.enabled,f=n.shards,p=n.sideCar,y=n.noIsolation,g=n.inert,m=n.allowPinchZoom,w=n.as,v=w===void 0?"div":w,x=n.gapMode,_=x2(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=p,E=w5([t,e]),P=Ar(Ar({},_),i);return C.createElement(C.Fragment,null,d&&C.createElement(S,{sideCar:b2,removeScrollBar:u,shards:f,noIsolation:y,inert:g,setCallbacks:r,allowPinchZoom:!!m,lockRef:t,gapMode:x}),a?C.cloneElement(C.Children.only(o),Ar(Ar({},P),{ref:E})):C.createElement(v,Ar({},P,{className:l,ref:E}),o))});Pw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Pw.classNames={fullWidth:Tv,zeroRight:Ev};var C5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function k5(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=C5();return e&&n.setAttribute("nonce",e),n}function E5(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function T5(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var P5=function(){var n=0,e=null;return{add:function(t){n==0&&(e=k5())&&(E5(e,t),T5(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},N5=function(){var n=P5();return function(e,t){C.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},_2=function(){var n=N5(),e=function(t){var s=t.styles,i=t.dynamic;return n(s,i),null};return e},R5={left:0,top:0,right:0,gap:0},$b=function(n){return parseInt(n||"",10)||0},I5=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],s=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[$b(t),$b(s),$b(i)]},D5=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return R5;var e=I5(n),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},M5=_2(),Td="data-scroll-locked",j5=function(n,e,t,s){var i=n.left,r=n.top,a=n.right,o=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(g5,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(o,"px ").concat(s,`;
  }
  body[`).concat(Td,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(o,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ev,` {
    right: `).concat(o,"px ").concat(s,`;
  }
  
  .`).concat(Tv,` {
    margin-right: `).concat(o,"px ").concat(s,`;
  }
  
  .`).concat(Ev," .").concat(Ev,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Tv," .").concat(Tv,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Td,`] {
    `).concat(y5,": ").concat(o,`px;
  }
`)},RE=function(){var n=parseInt(document.body.getAttribute(Td)||"0",10);return isFinite(n)?n:0},L5=function(){C.useEffect(function(){return document.body.setAttribute(Td,(RE()+1).toString()),function(){var n=RE()-1;n<=0?document.body.removeAttribute(Td):document.body.setAttribute(Td,n.toString())}},[])},O5=function(n){var e=n.noRelative,t=n.noImportant,s=n.gapMode,i=s===void 0?"margin":s;L5();var r=C.useMemo(function(){return D5(i)},[i]);return C.createElement(M5,{styles:j5(r,!e,i,t?"":"!important")})},NS=!1;if(typeof window<"u")try{var Ry=Object.defineProperty({},"passive",{get:function(){return NS=!0,!0}});window.addEventListener("test",Ry,Ry),window.removeEventListener("test",Ry,Ry)}catch{NS=!1}var Bu=NS?{passive:!1}:!1,F5=function(n){return n.tagName==="TEXTAREA"},S2=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!F5(n)&&t[e]==="visible")},$5=function(n){return S2(n,"overflowY")},V5=function(n){return S2(n,"overflowX")},IE=function(n,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=A2(n,s);if(i){var r=C2(n,s),a=r[1],o=r[2];if(a>o)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},B5=function(n){var e=n.scrollTop,t=n.scrollHeight,s=n.clientHeight;return[e,t,s]},z5=function(n){var e=n.scrollLeft,t=n.scrollWidth,s=n.clientWidth;return[e,t,s]},A2=function(n,e){return n==="v"?$5(e):V5(e)},C2=function(n,e){return n==="v"?B5(e):z5(e)},U5=function(n,e){return n==="h"&&e==="rtl"?-1:1},H5=function(n,e,t,s,i){var r=U5(n,window.getComputedStyle(e).direction),a=r*s,o=t.target,l=e.contains(o),u=!1,d=a>0,f=0,p=0;do{var y=C2(n,o),g=y[0],m=y[1],w=y[2],v=m-w-r*g;(g||v)&&A2(n,o)&&(f+=v,p+=g),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(d&&(Math.abs(f)<1||!i)||!d&&(Math.abs(p)<1||!i))&&(u=!0),u},Iy=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},DE=function(n){return[n.deltaX,n.deltaY]},ME=function(n){return n&&"current"in n?n.current:n},W5=function(n,e){return n[0]===e[0]&&n[1]===e[1]},q5=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},G5=0,zu=[];function K5(n){var e=C.useRef([]),t=C.useRef([0,0]),s=C.useRef(),i=C.useState(G5++)[0],r=C.useState(_2)[0],a=C.useRef(n);C.useEffect(function(){a.current=n},[n]),C.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var m=m5([n.lockRef.current],(n.shards||[]).map(ME),!0).filter(Boolean);return m.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var o=C.useCallback(function(m,w){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!a.current.allowPinchZoom;var v=Iy(m),x=t.current,_="deltaX"in m?m.deltaX:x[0]-v[0],S="deltaY"in m?m.deltaY:x[1]-v[1],E,P=m.target,T=Math.abs(_)>Math.abs(S)?"h":"v";if("touches"in m&&T==="h"&&P.type==="range")return!1;var N=IE(T,P);if(!N)return!0;if(N?E=T:(E=T==="v"?"h":"v",N=IE(T,P)),!N)return!1;if(!s.current&&"changedTouches"in m&&(_||S)&&(s.current=E),!E)return!0;var I=s.current||E;return H5(I,w,m,I==="h"?_:S,!0)},[]),l=C.useCallback(function(m){var w=m;if(!(!zu.length||zu[zu.length-1]!==r)){var v="deltaY"in w?DE(w):Iy(w),x=e.current.filter(function(E){return E.name===w.type&&(E.target===w.target||w.target===E.shadowParent)&&W5(E.delta,v)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var _=(a.current.shards||[]).map(ME).filter(Boolean).filter(function(E){return E.contains(w.target)}),S=_.length>0?o(w,_[0]):!a.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),u=C.useCallback(function(m,w,v,x){var _={name:m,delta:w,target:v,should:x,shadowParent:X5(v)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(S){return S!==_})},1)},[]),d=C.useCallback(function(m){t.current=Iy(m),s.current=void 0},[]),f=C.useCallback(function(m){u(m.type,DE(m),m.target,o(m,n.lockRef.current))},[]),p=C.useCallback(function(m){u(m.type,Iy(m),m.target,o(m,n.lockRef.current))},[]);C.useEffect(function(){return zu.push(r),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Bu),document.addEventListener("touchmove",l,Bu),document.addEventListener("touchstart",d,Bu),function(){zu=zu.filter(function(m){return m!==r}),document.removeEventListener("wheel",l,Bu),document.removeEventListener("touchmove",l,Bu),document.removeEventListener("touchstart",d,Bu)}},[]);var y=n.removeScrollBar,g=n.inert;return C.createElement(C.Fragment,null,g?C.createElement(r,{styles:q5(i)}):null,y?C.createElement(O5,{gapMode:n.gapMode}):null)}function X5(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const Y5=A5(b2,K5);var C1=C.forwardRef(function(n,e){return C.createElement(Pw,Ar({},n,{ref:e,sideCar:Y5}))});C1.classNames=Pw.classNames;var Q5=[" ","Enter","ArrowUp","ArrowDown"],Z5=[" ","Enter"],Zg="Select",[Nw,Rw,J5]=BA(Zg),[mf,q8]=Lr(Zg,[J5,yw]),Iw=yw(),[e6,Rl]=mf(Zg),[t6,n6]=mf(Zg),k2=n=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:i,onOpenChange:r,value:a,defaultValue:o,onValueChange:l,dir:u,name:d,autoComplete:f,disabled:p,required:y,form:g}=n,m=Iw(e),[w,v]=C.useState(null),[x,_]=C.useState(null),[S,E]=C.useState(!1),P=n1(u),[T=!1,N]=vu({prop:s,defaultProp:i,onChange:r}),[I,D]=vu({prop:a,defaultProp:o,onChange:l}),j=C.useRef(null),L=w?g||!!w.closest("form"):!0,[z,F]=C.useState(new Set),J=Array.from(z).map($=>$.props.value).join(";");return h.jsx(jV,{...m,children:h.jsxs(e6,{required:y,scope:e,trigger:w,onTriggerChange:v,valueNode:x,onValueNodeChange:_,valueNodeHasChildren:S,onValueNodeHasChildrenChange:E,contentId:ul(),value:I,onValueChange:D,open:T,onOpenChange:N,dir:P,triggerPointerDownPosRef:j,disabled:p,children:[h.jsx(Nw.Provider,{scope:e,children:h.jsx(t6,{scope:n.__scopeSelect,onNativeOptionAdd:C.useCallback($=>{F(B=>new Set(B).add($))},[]),onNativeOptionRemove:C.useCallback($=>{F(B=>{const O=new Set(B);return O.delete($),O})},[]),children:t})}),L?h.jsxs(Q2,{"aria-hidden":!0,required:y,tabIndex:-1,name:d,autoComplete:f,value:I,onChange:$=>D($.target.value),disabled:p,form:g,children:[I===void 0?h.jsx("option",{value:""}):null,Array.from(z)]},J):null]})})};k2.displayName=Zg;var E2="SelectTrigger",T2=C.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:s=!1,...i}=n,r=Iw(t),a=Rl(E2,t),o=a.disabled||s,l=rt(e,a.onTriggerChange),u=Rw(t),d=C.useRef("touch"),[f,p,y]=Z2(m=>{const w=u().filter(_=>!_.disabled),v=w.find(_=>_.value===a.value),x=J2(w,m,v);x!==void 0&&a.onValueChange(x.value)}),g=m=>{o||(a.onOpenChange(!0),y()),m&&(a.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx(tI,{asChild:!0,...r,children:h.jsx(be.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Y2(a.value)?"":void 0,...i,ref:l,onClick:fe(i.onClick,m=>{m.currentTarget.focus(),d.current!=="mouse"&&g(m)}),onPointerDown:fe(i.onPointerDown,m=>{d.current=m.pointerType;const w=m.target;w.hasPointerCapture(m.pointerId)&&w.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:fe(i.onKeyDown,m=>{const w=f.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&p(m.key),!(w&&m.key===" ")&&Q5.includes(m.key)&&(g(),m.preventDefault())})})})});T2.displayName=E2;var P2="SelectValue",N2=C.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:i,children:r,placeholder:a="",...o}=n,l=Rl(P2,t),{onValueNodeHasChildrenChange:u}=l,d=r!==void 0,f=rt(e,l.onValueNodeChange);return Mn(()=>{u(d)},[u,d]),h.jsx(be.span,{...o,ref:f,style:{pointerEvents:"none"},children:Y2(l.value)?h.jsx(h.Fragment,{children:a}):r})});N2.displayName=P2;var s6="SelectIcon",R2=C.forwardRef((n,e)=>{const{__scopeSelect:t,children:s,...i}=n;return h.jsx(be.span,{"aria-hidden":!0,...i,ref:e,children:s||""})});R2.displayName=s6;var i6="SelectPortal",I2=n=>h.jsx(dw,{asChild:!0,...n});I2.displayName=i6;var Eu="SelectContent",D2=C.forwardRef((n,e)=>{const t=Rl(Eu,n.__scopeSelect),[s,i]=C.useState();if(Mn(()=>{i(new DocumentFragment)},[]),!t.open){const r=s;return r?Iu.createPortal(h.jsx(M2,{scope:n.__scopeSelect,children:h.jsx(Nw.Slot,{scope:n.__scopeSelect,children:h.jsx("div",{children:n.children})})}),r):null}return h.jsx(j2,{...n,ref:e})});D2.displayName=Eu;var mi=10,[M2,Il]=mf(Eu),r6="SelectContentImpl",a6=tf("SelectContent.RemoveScroll"),j2=C.forwardRef((n,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:r,onPointerDownOutside:a,side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:y,sticky:g,hideWhenDetached:m,avoidCollisions:w,...v}=n,x=Rl(Eu,t),[_,S]=C.useState(null),[E,P]=C.useState(null),T=rt(e,Q=>S(Q)),[N,I]=C.useState(null),[D,j]=C.useState(null),L=Rw(t),[z,F]=C.useState(!1),J=C.useRef(!1);C.useEffect(()=>{if(_)return v2(_)},[_]),p2();const $=C.useCallback(Q=>{const[Ve,...Ct]=L().map(Me=>Me.ref.current),[We]=Ct.slice(-1),Ie=document.activeElement;for(const Me of Q)if(Me===Ie||(Me==null||Me.scrollIntoView({block:"nearest"}),Me===Ve&&E&&(E.scrollTop=0),Me===We&&E&&(E.scrollTop=E.scrollHeight),Me==null||Me.focus(),document.activeElement!==Ie))return},[L,E]),B=C.useCallback(()=>$([N,_]),[$,N,_]);C.useEffect(()=>{z&&B()},[z,B]);const{onOpenChange:O,triggerPointerDownPosRef:H}=x;C.useEffect(()=>{if(_){let Q={x:0,y:0};const Ve=We=>{var Ie,Me;Q={x:Math.abs(Math.round(We.pageX)-(((Ie=H.current)==null?void 0:Ie.x)??0)),y:Math.abs(Math.round(We.pageY)-(((Me=H.current)==null?void 0:Me.y)??0))}},Ct=We=>{Q.x<=10&&Q.y<=10?We.preventDefault():_.contains(We.target)||O(!1),document.removeEventListener("pointermove",Ve),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",Ve),document.addEventListener("pointerup",Ct,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ve),document.removeEventListener("pointerup",Ct,{capture:!0})}}},[_,O,H]),C.useEffect(()=>{const Q=()=>O(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[O]);const[ee,de]=Z2(Q=>{const Ve=L().filter(Ie=>!Ie.disabled),Ct=Ve.find(Ie=>Ie.ref.current===document.activeElement),We=J2(Ve,Q,Ct);We&&setTimeout(()=>We.ref.current.focus())}),me=C.useCallback((Q,Ve,Ct)=>{const We=!J.current&&!Ct;(x.value!==void 0&&x.value===Ve||We)&&(I(Q),We&&(J.current=!0))},[x.value]),Ce=C.useCallback(()=>_==null?void 0:_.focus(),[_]),Je=C.useCallback((Q,Ve,Ct)=>{const We=!J.current&&!Ct;(x.value!==void 0&&x.value===Ve||We)&&j(Q)},[x.value]),At=s==="popper"?RS:L2,at=At===RS?{side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:y,sticky:g,hideWhenDetached:m,avoidCollisions:w}:{};return h.jsx(M2,{scope:t,content:_,viewport:E,onViewportChange:P,itemRefCallback:me,selectedItem:N,onItemLeave:Ce,itemTextRefCallback:Je,focusSelectedItem:B,selectedItemText:D,position:s,isPositioned:z,searchRef:ee,children:h.jsx(C1,{as:a6,allowPinchZoom:!0,children:h.jsx(A1,{asChild:!0,trapped:x.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:fe(i,Q=>{var Ve;(Ve=x.trigger)==null||Ve.focus({preventScroll:!0}),Q.preventDefault()}),children:h.jsx(Vg,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:h.jsx(At,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:Q=>Q.preventDefault(),...v,...at,onPlaced:()=>F(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:fe(v.onKeyDown,Q=>{const Ve=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!Ve&&Q.key.length===1&&de(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let We=L().filter(Ie=>!Ie.disabled).map(Ie=>Ie.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(We=We.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const Ie=Q.target,Me=We.indexOf(Ie);We=We.slice(Me+1)}setTimeout(()=>$(We)),Q.preventDefault()}})})})})})})});j2.displayName=r6;var o6="SelectItemAlignedPosition",L2=C.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:s,...i}=n,r=Rl(Eu,t),a=Il(Eu,t),[o,l]=C.useState(null),[u,d]=C.useState(null),f=rt(e,T=>d(T)),p=Rw(t),y=C.useRef(!1),g=C.useRef(!0),{viewport:m,selectedItem:w,selectedItemText:v,focusSelectedItem:x}=a,_=C.useCallback(()=>{if(r.trigger&&r.valueNode&&o&&u&&m&&w&&v){const T=r.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),I=r.valueNode.getBoundingClientRect(),D=v.getBoundingClientRect();if(r.dir!=="rtl"){const Ie=D.left-N.left,Me=I.left-Ie,Zt=T.left-Me,Ln=T.width+Zt,Dl=Math.max(Ln,N.width),Ha=window.innerWidth-mi,Wa=AE(Me,[mi,Math.max(mi,Ha-Dl)]);o.style.minWidth=Ln+"px",o.style.left=Wa+"px"}else{const Ie=N.right-D.right,Me=window.innerWidth-I.right-Ie,Zt=window.innerWidth-T.right-Me,Ln=T.width+Zt,Dl=Math.max(Ln,N.width),Ha=window.innerWidth-mi,Wa=AE(Me,[mi,Math.max(mi,Ha-Dl)]);o.style.minWidth=Ln+"px",o.style.right=Wa+"px"}const j=p(),L=window.innerHeight-mi*2,z=m.scrollHeight,F=window.getComputedStyle(u),J=parseInt(F.borderTopWidth,10),$=parseInt(F.paddingTop,10),B=parseInt(F.borderBottomWidth,10),O=parseInt(F.paddingBottom,10),H=J+$+z+O+B,ee=Math.min(w.offsetHeight*5,H),de=window.getComputedStyle(m),me=parseInt(de.paddingTop,10),Ce=parseInt(de.paddingBottom,10),Je=T.top+T.height/2-mi,At=L-Je,at=w.offsetHeight/2,Q=w.offsetTop+at,Ve=J+$+Q,Ct=H-Ve;if(Ve<=Je){const Ie=j.length>0&&w===j[j.length-1].ref.current;o.style.bottom="0px";const Me=u.clientHeight-m.offsetTop-m.offsetHeight,Zt=Math.max(At,at+(Ie?Ce:0)+Me+B),Ln=Ve+Zt;o.style.height=Ln+"px"}else{const Ie=j.length>0&&w===j[0].ref.current;o.style.top="0px";const Zt=Math.max(Je,J+m.offsetTop+(Ie?me:0)+at)+Ct;o.style.height=Zt+"px",m.scrollTop=Ve-Je+m.offsetTop}o.style.margin=`${mi}px 0`,o.style.minHeight=ee+"px",o.style.maxHeight=L+"px",s==null||s(),requestAnimationFrame(()=>y.current=!0)}},[p,r.trigger,r.valueNode,o,u,m,w,v,r.dir,s]);Mn(()=>_(),[_]);const[S,E]=C.useState();Mn(()=>{u&&E(window.getComputedStyle(u).zIndex)},[u]);const P=C.useCallback(T=>{T&&g.current===!0&&(_(),x==null||x(),g.current=!1)},[_,x]);return h.jsx(c6,{scope:t,contentWrapper:o,shouldExpandOnScrollRef:y,onScrollButtonChange:P,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:h.jsx(be.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});L2.displayName=o6;var l6="SelectPopperPosition",RS=C.forwardRef((n,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:i=mi,...r}=n,a=Iw(t);return h.jsx(nI,{...a,...r,ref:e,align:s,collisionPadding:i,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});RS.displayName=l6;var[c6,k1]=mf(Eu,{}),IS="SelectViewport",O2=C.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:s,...i}=n,r=Il(IS,t),a=k1(IS,t),o=rt(e,r.onViewportChange),l=C.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),h.jsx(Nw.Slot,{scope:t,children:h.jsx(be.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:fe(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&f){const y=Math.abs(l.current-d.scrollTop);if(y>0){const g=window.innerHeight-mi*2,m=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),v=Math.max(m,w);if(v<g){const x=v+y,_=Math.min(g,x),S=x-_;f.style.height=_+"px",f.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,f.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});O2.displayName=IS;var F2="SelectGroup",[u6,d6]=mf(F2),h6=C.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=ul();return h.jsx(u6,{scope:t,id:i,children:h.jsx(be.div,{role:"group","aria-labelledby":i,...s,ref:e})})});h6.displayName=F2;var $2="SelectLabel",V2=C.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=d6($2,t);return h.jsx(be.div,{id:i.id,...s,ref:e})});V2.displayName=$2;var Cx="SelectItem",[f6,B2]=mf(Cx),z2=C.forwardRef((n,e)=>{const{__scopeSelect:t,value:s,disabled:i=!1,textValue:r,...a}=n,o=Rl(Cx,t),l=Il(Cx,t),u=o.value===s,[d,f]=C.useState(r??""),[p,y]=C.useState(!1),g=rt(e,x=>{var _;return(_=l.itemRefCallback)==null?void 0:_.call(l,x,s,i)}),m=ul(),w=C.useRef("touch"),v=()=>{i||(o.onValueChange(s),o.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(f6,{scope:t,value:s,disabled:i,textId:m,isSelected:u,onItemTextChange:C.useCallback(x=>{f(_=>_||((x==null?void 0:x.textContent)??"").trim())},[]),children:h.jsx(Nw.ItemSlot,{scope:t,value:s,disabled:i,textValue:d,children:h.jsx(be.div,{role:"option","aria-labelledby":m,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:g,onFocus:fe(a.onFocus,()=>y(!0)),onBlur:fe(a.onBlur,()=>y(!1)),onClick:fe(a.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:fe(a.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:fe(a.onPointerDown,x=>{w.current=x.pointerType}),onPointerMove:fe(a.onPointerMove,x=>{var _;w.current=x.pointerType,i?(_=l.onItemLeave)==null||_.call(l):w.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:fe(a.onPointerLeave,x=>{var _;x.currentTarget===document.activeElement&&((_=l.onItemLeave)==null||_.call(l))}),onKeyDown:fe(a.onKeyDown,x=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&x.key===" "||(Z5.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});z2.displayName=Cx;var ap="SelectItemText",U2=C.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:i,...r}=n,a=Rl(ap,t),o=Il(ap,t),l=B2(ap,t),u=n6(ap,t),[d,f]=C.useState(null),p=rt(e,v=>f(v),l.onItemTextChange,v=>{var x;return(x=o.itemTextRefCallback)==null?void 0:x.call(o,v,l.value,l.disabled)}),y=d==null?void 0:d.textContent,g=C.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:y},l.value),[l.disabled,l.value,y]),{onNativeOptionAdd:m,onNativeOptionRemove:w}=u;return Mn(()=>(m(g),()=>w(g)),[m,w,g]),h.jsxs(h.Fragment,{children:[h.jsx(be.span,{id:l.textId,...r,ref:p}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Iu.createPortal(r.children,a.valueNode):null]})});U2.displayName=ap;var H2="SelectItemIndicator",W2=C.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return B2(H2,t).isSelected?h.jsx(be.span,{"aria-hidden":!0,...s,ref:e}):null});W2.displayName=H2;var DS="SelectScrollUpButton",q2=C.forwardRef((n,e)=>{const t=Il(DS,n.__scopeSelect),s=k1(DS,n.__scopeSelect),[i,r]=C.useState(!1),a=rt(e,s.onScrollButtonChange);return Mn(()=>{if(t.viewport&&t.isPositioned){let o=function(){const u=l.scrollTop>0;r(u)};const l=t.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[t.viewport,t.isPositioned]),i?h.jsx(K2,{...n,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=t;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});q2.displayName=DS;var MS="SelectScrollDownButton",G2=C.forwardRef((n,e)=>{const t=Il(MS,n.__scopeSelect),s=k1(MS,n.__scopeSelect),[i,r]=C.useState(!1),a=rt(e,s.onScrollButtonChange);return Mn(()=>{if(t.viewport&&t.isPositioned){let o=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;r(d)};const l=t.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[t.viewport,t.isPositioned]),i?h.jsx(K2,{...n,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=t;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});G2.displayName=MS;var K2=C.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:s,...i}=n,r=Il("SelectScrollButton",t),a=C.useRef(null),o=Rw(t),l=C.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return C.useEffect(()=>()=>l(),[l]),Mn(()=>{var d;const u=o().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),h.jsx(be.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:fe(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(s,50))}),onPointerMove:fe(i.onPointerMove,()=>{var u;(u=r.onItemLeave)==null||u.call(r),a.current===null&&(a.current=window.setInterval(s,50))}),onPointerLeave:fe(i.onPointerLeave,()=>{l()})})}),p6="SelectSeparator",X2=C.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return h.jsx(be.div,{"aria-hidden":!0,...s,ref:e})});X2.displayName=p6;var jS="SelectArrow",m6=C.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=Iw(t),r=Rl(jS,t),a=Il(jS,t);return r.open&&a.position==="popper"?h.jsx(sI,{...i,...s,ref:e}):null});m6.displayName=jS;function Y2(n){return n===""||n===void 0}var Q2=C.forwardRef((n,e)=>{const{value:t,...s}=n,i=C.useRef(null),r=rt(e,i),a=g2(t);return C.useEffect(()=>{const o=i.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&d){const f=new Event("change",{bubbles:!0});d.call(o,t),o.dispatchEvent(f)}},[a,t]),h.jsx(Bg,{asChild:!0,children:h.jsx("select",{...s,ref:r,defaultValue:t})})});Q2.displayName="BubbleSelect";function Z2(n){const e=xs(n),t=C.useRef(""),s=C.useRef(0),i=C.useCallback(a=>{const o=t.current+a;e(o),function l(u){t.current=u,window.clearTimeout(s.current),u!==""&&(s.current=window.setTimeout(()=>l(""),1e3))}(o)},[e]),r=C.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return C.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,i,r]}function J2(n,e,t){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,r=t?n.indexOf(t):-1;let a=g6(n,Math.max(r,0));i.length===1&&(a=a.filter(u=>u!==t));const l=a.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function g6(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var y6=k2,ej=T2,v6=N2,x6=R2,w6=I2,tj=D2,b6=O2,nj=V2,sj=z2,_6=U2,S6=W2,ij=q2,rj=G2,aj=X2;const jE=y6,LE=v6,LS=C.forwardRef(({className:n,children:e,...t},s)=>h.jsxs(ej,{ref:s,className:Te("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,h.jsx(x6,{asChild:!0,children:h.jsx(xR,{className:"h-4 w-4 opacity-50"})})]}));LS.displayName=ej.displayName;const oj=C.forwardRef(({className:n,...e},t)=>h.jsx(ij,{ref:t,className:Te("flex cursor-default items-center justify-center py-1",n),...e,children:h.jsx(j3,{className:"h-4 w-4"})}));oj.displayName=ij.displayName;const lj=C.forwardRef(({className:n,...e},t)=>h.jsx(rj,{ref:t,className:Te("flex cursor-default items-center justify-center py-1",n),...e,children:h.jsx(xR,{className:"h-4 w-4"})}));lj.displayName=rj.displayName;const OS=C.forwardRef(({className:n,children:e,position:t="popper",...s},i)=>h.jsx(w6,{children:h.jsxs(tj,{ref:i,className:Te("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...s,children:[h.jsx(oj,{}),h.jsx(b6,{className:Te("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),h.jsx(lj,{})]})}));OS.displayName=tj.displayName;const A6=C.forwardRef(({className:n,...e},t)=>h.jsx(nj,{ref:t,className:Te("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));A6.displayName=nj.displayName;const Wr=C.forwardRef(({className:n,children:e,...t},s)=>h.jsxs(sj,{ref:s,className:Te("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(S6,{children:h.jsx(vR,{className:"h-4 w-4"})})}),h.jsx(_6,{children:e})]}));Wr.displayName=sj.displayName;const C6=C.forwardRef(({className:n,...e},t)=>h.jsx(aj,{ref:t,className:Te("-mx-1 my-1 h-px bg-muted",n),...e}));C6.displayName=aj.displayName;const k6=zg("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ge({className:n,variant:e,...t}){return h.jsx("div",{className:Te(k6({variant:e}),n),...t})}const E6=G.object({title:G.string().min(5,"Title must be at least 5 characters"),description:G.string().min(20,"Description must be at least 20 characters"),category:G.enum(["endpoint","network","cloud","identity"]),tenantInfo:G.object({tenantUrl:G.string().optional(),isMultiTenant:G.boolean().default(!1),serialNumber:G.string().optional(),tenantId:G.string().optional(),licenseExpiration:G.string().optional(),willMigrateToProduction:G.boolean().default(!1),customWidgets:G.number().min(0).default(0),automationPlaybooks:G.number().min(0).default(0),correlationRules:G.number().min(0).default(0),hasChildTenants:G.boolean().default(!1)}),infrastructureInfo:G.object({brokerInstalled:G.boolean().default(!1),brokerIpHostname:G.string().optional(),requiresHA:G.boolean().default(!1),engineInstalled:G.boolean().default(!1),engineIpHostname:G.string().optional(),isProductionConfig:G.boolean().default(!1),hasLoadBalancers:G.boolean().default(!1),networkDiagramUrl:G.string().optional()}),customerInfo:G.object({organizationName:G.string().min(1,"Organization name is required"),industry:G.string().min(1,"Industry is required"),environment:G.string().min(1,"Environment details are required"),teamSize:G.number().min(1,"Team size must be at least 1"),endpointStrategy:G.enum(["xdr_agents","third_party_edr","no_edr"]).default("xdr_agents"),thirdPartyEdrVendor:G.string().optional(),migrationStrategy:G.string().optional(),edrContractExpiration:G.string().optional(),povAgentCount:G.number().min(0).default(0),productionAgentCount:G.number().min(0).default(0),fullDeploymentTimeline:G.string().optional(),currentTools:G.array(G.string()).min(1,"At least one current tool is required"),painPoints:G.array(G.string()).min(1,"At least one pain point is required"),primaryDataSources:G.array(G.string()).default([]),desiredDataSources:G.array(G.string()).default([]),totalDataSources:G.number().min(0).default(0),usingCRIBL:G.boolean().default(!1),estimatedDataVolume:G.string().optional(),currentDetectionRules:G.number().min(0).default(0),detectionRulesList:G.string().optional(),interestedInASM:G.boolean().default(!1),asmLicenses:G.number().min(0).default(0),interestedInTIM:G.boolean().default(!1),timTasks:G.number().min(0).default(0),asmSeedUrl:G.string().optional()}),dataSources:G.array(G.object({product:G.string(),usedInPOV:G.boolean().default(!1),onboardStatus:G.string().optional(),ingestMethod:G.string().optional(),ingestionType:G.string().optional(),estimatedVolume:G.string().optional(),notes:G.string().optional()})).default([]),useCases:G.array(G.object({useCase:G.string(),description:G.string().optional(),dataSourcesUsed:G.array(G.string()).default([]),successCriteria:G.string().optional(),povScope:G.enum(["in_pov_scope","not_in_pov_scope","production_only"]).default("not_in_pov_scope"),testStatus:G.enum(["not_completed","in_progress","completed","failed"]).default("not_completed"),status:G.string().optional(),notes:G.string().optional()})).default([]),technicalRequirements:G.object({dataVolume:G.string().min(1,"Data volume is required"),compliance:G.array(G.string()),integrations:G.array(G.string()),sla:G.string().min(1,"SLA requirements are required")}),successCriteria:G.object({detectionAccuracy:G.number().min(0).max(100),responseTime:G.string().min(1,"Response time target is required"),falsePositiveRate:G.number().min(0).max(100),businessImpact:G.string().min(10,"Business impact description is required")}),priority:G.enum(["low","medium","high","critical"]),timeline:G.string().min(1,"Timeline is required"),stakeholders:G.array(G.string()).min(1,"At least one stakeholder is required")});function T6({onSubmit:n,onCancel:e}){const{toast:t}=Mu(),[s,i]=C.useState([]),[r,a]=C.useState([]),[o,l]=C.useState([]),[u,d]=C.useState([]),[f,p]=C.useState([]),[y,g]=C.useState(""),[m,w]=C.useState("");C.useState(""),C.useState("");const[v,x]=C.useState(""),_=qU({resolver:YU(E6),defaultValues:{category:"endpoint",priority:"medium",customerInfo:{teamSize:5,currentTools:[],painPoints:[]},technicalRequirements:{compliance:[],integrations:[]},successCriteria:{detectionAccuracy:95,falsePositiveRate:5},stakeholders:[]}}),S=(T,N,I,D)=>{if(T.trim()&&!I.includes(T.trim())){const j=[...I,T.trim()];N(j),D("")}},E=(T,N,I)=>{N(I.filter(D=>D!==T))},P=T=>{T.customerInfo.currentTools=s,T.customerInfo.painPoints=r,T.technicalRequirements.compliance=o,T.technicalRequirements.integrations=u,T.stakeholders=f;const N={id:`manual_${Date.now()}`,title:T.title,description:T.description,category:T.category,severity:T.priority,threatReportId:"",estimatedDuration:P6(T),mitreMapping:N6(T.description),indicators:R6(T.description),extractedTechniques:T.customerInfo.currentTools,extractedMitigations:T.customerInfo.painPoints,validated:!1,validationStatus:"needs_review",metadata:{customerInfo:T.customerInfo,technicalRequirements:T.technicalRequirements,successCriteria:T.successCriteria,timeline:T.timeline,stakeholders:T.stakeholders,entryDate:new Date().toISOString(),pocObjectives:I6(T),source:"manual_entry"},createdAt:new Date,updatedAt:new Date};n(N),t({title:"Use Case Created",description:`Manual use case "${T.title}" has been created for POC development.`})};return h.jsx("div",{className:"space-y-6",children:h.jsxs(Le,{children:[h.jsxs(ds,{children:[h.jsxs(hs,{className:"flex items-center gap-2",children:[h.jsx(tx,{className:"h-5 w-5"}),"Manual Use Case Entry for POC Development"]}),h.jsx(Vl,{children:"Enter customer-specific details to create targeted training scenarios that address real POC requirements and success criteria."})]}),h.jsx(Oe,{children:h.jsxs("form",{onSubmit:_.handleSubmit(P),className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{htmlFor:"title",children:"Use Case Title"}),h.jsx(rs,{id:"title",placeholder:"e.g., Advanced Persistent Threat Detection",..._.register("title")}),_.formState.errors.title&&h.jsx("p",{className:"text-sm text-red-500",children:_.formState.errors.title.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{htmlFor:"category",children:"Category"}),h.jsxs(jE,{onValueChange:T=>_.setValue("category",T),children:[h.jsx(LS,{children:h.jsx(LE,{placeholder:"Select category"})}),h.jsxs(OS,{children:[h.jsx(Wr,{value:"endpoint",children:"Endpoint Security"}),h.jsx(Wr,{value:"network",children:"Network Security"}),h.jsx(Wr,{value:"cloud",children:"Cloud Security"}),h.jsx(Wr,{value:"identity",children:"Identity & Access"})]})]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{htmlFor:"description",children:"Detailed Description"}),h.jsx(Ed,{id:"description",placeholder:"Describe the threat scenario, attack vectors, and detection challenges...",rows:4,..._.register("description")}),_.formState.errors.description&&h.jsx("p",{className:"text-sm text-red-500",children:_.formState.errors.description.message})]}),h.jsxs(Le,{children:[h.jsx(ds,{children:h.jsxs(hs,{className:"flex items-center gap-2 text-lg",children:[h.jsx(I3,{className:"h-4 w-4"}),"Customer Information"]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{htmlFor:"organizationName",children:"Organization Name"}),h.jsx(rs,{id:"organizationName",placeholder:"Customer organization",..._.register("customerInfo.organizationName")})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{htmlFor:"industry",children:"Industry"}),h.jsx(rs,{id:"industry",placeholder:"e.g., Financial Services, Healthcare",..._.register("customerInfo.industry")})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{htmlFor:"environment",children:"Environment Details"}),h.jsx(Ed,{id:"environment",placeholder:"Describe the customer's current environment, architecture, and infrastructure...",..._.register("customerInfo.environment")})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{htmlFor:"teamSize",children:"Security Team Size"}),h.jsx(rs,{id:"teamSize",type:"number",min:"1",..._.register("customerInfo.teamSize",{valueAsNumber:!0})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{htmlFor:"priority",children:"Priority Level"}),h.jsxs(jE,{onValueChange:T=>_.setValue("priority",T),children:[h.jsx(LS,{children:h.jsx(LE,{placeholder:"Select priority"})}),h.jsxs(OS,{children:[h.jsx(Wr,{value:"low",children:"Low"}),h.jsx(Wr,{value:"medium",children:"Medium"}),h.jsx(Wr,{value:"high",children:"High"}),h.jsx(Wr,{value:"critical",children:"Critical"})]})]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{children:"Current Security Tools"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(rs,{value:y,onChange:T=>g(T.target.value),placeholder:"Add security tool",onKeyPress:T=>T.key==="Enter"&&(T.preventDefault(),S(y,i,s,g))}),h.jsx(ve,{type:"button",size:"sm",onClick:()=>S(y,i,s,g),children:h.jsx(vb,{className:"h-4 w-4"})})]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(T=>h.jsxs(Ge,{variant:"secondary",className:"flex items-center gap-1",children:[T,h.jsx(_d,{className:"h-3 w-3 cursor-pointer",onClick:()=>E(T,i,s)})]},T))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{children:"Current Pain Points"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(rs,{value:m,onChange:T=>w(T.target.value),placeholder:"Add pain point",onKeyPress:T=>T.key==="Enter"&&(T.preventDefault(),S(m,a,r,w))}),h.jsx(ve,{type:"button",size:"sm",onClick:()=>S(m,a,r,w),children:h.jsx(vb,{className:"h-4 w-4"})})]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(T=>h.jsxs(Ge,{variant:"destructive",className:"flex items-center gap-1",children:[T,h.jsx(_d,{className:"h-3 w-3 cursor-pointer",onClick:()=>E(T,a,r)})]},T))})]})]})]}),h.jsxs(Le,{children:[h.jsx(ds,{children:h.jsxs(hs,{className:"flex items-center gap-2 text-lg",children:[h.jsx(tx,{className:"h-4 w-4"}),"Success Criteria & Requirements"]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{htmlFor:"detectionAccuracy",children:"Target Detection Accuracy (%)"}),h.jsx(rs,{id:"detectionAccuracy",type:"number",min:"0",max:"100",..._.register("successCriteria.detectionAccuracy",{valueAsNumber:!0})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{htmlFor:"falsePositiveRate",children:"Max False Positive Rate (%)"}),h.jsx(rs,{id:"falsePositiveRate",type:"number",min:"0",max:"100",..._.register("successCriteria.falsePositiveRate",{valueAsNumber:!0})})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{htmlFor:"responseTime",children:"Target Response Time"}),h.jsx(rs,{id:"responseTime",placeholder:"e.g., 15 minutes, 1 hour",..._.register("successCriteria.responseTime")})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{htmlFor:"timeline",children:"Project Timeline"}),h.jsx(rs,{id:"timeline",placeholder:"e.g., 30 days, 3 months",..._.register("timeline")})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{htmlFor:"businessImpact",children:"Expected Business Impact"}),h.jsx(Ed,{id:"businessImpact",placeholder:"Describe the expected business impact and ROI...",..._.register("successCriteria.businessImpact")})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(en,{children:"Key Stakeholders"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(rs,{value:v,onChange:T=>x(T.target.value),placeholder:"Add stakeholder",onKeyPress:T=>T.key==="Enter"&&(T.preventDefault(),S(v,p,f,x))}),h.jsx(ve,{type:"button",size:"sm",onClick:()=>S(v,p,f,x),children:h.jsx(vb,{className:"h-4 w-4"})})]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(T=>h.jsxs(Ge,{variant:"outline",className:"flex items-center gap-1",children:[h.jsx(SR,{className:"h-3 w-3"}),T,h.jsx(_d,{className:"h-3 w-3 cursor-pointer",onClick:()=>E(T,p,f)})]},T))})]})]})]}),h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx(ve,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),h.jsx(ve,{type:"submit",children:"Create Use Case"})]})]})})]})})}function P6(n){let e=120;return n.priority==="critical"&&(e+=60),n.priority==="high"&&(e+=30),n.customerInfo.currentTools.length>5&&(e+=30),n.technicalRequirements.compliance.length>2&&(e+=45),n.successCriteria.detectionAccuracy>95&&(e+=30),n.successCriteria.falsePositiveRate<3&&(e+=45),e}function N6(n){return["T1055","T1059","T1105","T1203","T1566","T1078","T1083","T1027","T1003","T1021","T1033","T1057","T1082","T1087","T1136","T1547"].filter(t=>n.toUpperCase().includes(t))}function R6(n){const e=[],t=/\b[a-f0-9]{32,64}\b/gi,s=/\b(?:[0-9]{1,3}\.){3}[0-9]{1,3}\b/g,i=/\b[a-z0-9-]+\.[a-z]{2,}\b/gi,r=n.match(t)||[],a=n.match(s)||[],o=n.match(i)||[];return e.push(...r,...a,...o),Array.from(new Set(e))}function I6(n){return[`Demonstrate ${n.successCriteria.detectionAccuracy}% detection accuracy for ${n.title}`,`Achieve response time target of ${n.successCriteria.responseTime}`,`Maintain false positive rate below ${n.successCriteria.falsePositiveRate}%`,`Integrate with existing tools: ${n.customerInfo.currentTools.join(", ")}`,`Address key pain points: ${n.customerInfo.painPoints.join(", ")}`,`Validate solution with ${n.stakeholders.length} key stakeholders`,`Demonstrate ROI through ${n.successCriteria.businessImpact}`]}function D6(){const[n,e]=C.useState("url"),[t,s]=C.useState(""),[i,r]=C.useState(!1),[a,o]=C.useState(!1),{toast:l}=Mu(),u=SB(),d=MI(),f=async()=>{if(!t.trim()){l({title:"Input Required",description:"Please enter a valid URL.",variant:"destructive"});return}r(!0);try{const m=await NB(t),w={id:`report_${Date.now()}`,title:m.title,url:m.url,content:m.content,source:"url",extractedAt:new Date,processed:!1};await u.mutateAsync(w),l({title:"URL Parsed Successfully",description:`Extracted content from: ${m.title}`}),s("")}catch(m){l({title:"Parsing Failed",description:m instanceof Error?m.message:"Failed to parse URL",variant:"destructive"})}finally{r(!1)}},p=async m=>{const w=m.target.files;if(!(!w||w.length===0)){r(!0);try{for(const v of Array.from(w)){if(v.type!=="application/pdf"){l({title:"Invalid File Type",description:"Only PDF files are supported.",variant:"destructive"});continue}const x=await wU(v),_={id:`report_${Date.now()}_${v.name}`,title:x.metadata.title||v.name,content:x.text,source:"pdf",extractedAt:new Date,processed:!1};await u.mutateAsync(_)}l({title:"PDF Processing Complete",description:`Successfully processed ${w.length} file(s).`}),m.target.value=""}catch(v){l({title:"Processing Failed",description:v instanceof Error?v.message:"Failed to process PDF",variant:"destructive"})}finally{r(!1)}}},y=async m=>{r(!0);try{const w=await bU(m);for(const v of w){const x={id:`report_${Date.now()}_${v.id}`,title:v.title,url:v.url,content:v.description,source:m,extractedAt:new Date,processed:!1};await u.mutateAsync(x)}l({title:"Feed Data Retrieved",description:`Successfully imported ${w.length} threat reports.`})}catch(w){l({title:"Feed Import Failed",description:w instanceof Error?w.message:"Failed to import threat feed",variant:"destructive"})}finally{r(!1)}},g=async m=>{try{await d.mutateAsync(m),o(!1),e("manual"),l({title:"POC Use Case Created",description:`"${m.title}" has been created for customer POC development.`})}catch(w){l({title:"Save Failed",description:w instanceof Error?w.message:"Failed to save use case",variant:"destructive"})}};return a?h.jsx(T6,{onSubmit:g,onCancel:()=>o(!1)}):h.jsx(Le,{className:"shadow-material",children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(Tk,{className:"text-cortex-blue text-xl mr-3"}),h.jsx("h2",{className:"text-xl font-medium text-cortex-dark",children:"Threat Intelligence Input"})]}),h.jsxs(ve,{onClick:()=>o(!0),variant:"outline",className:"flex items-center gap-2",children:[h.jsx(tx,{className:"w-4 h-4"}),"Customer POC Entry"]})]}),h.jsxs(DI,{value:n,onValueChange:e,children:[h.jsxs(r1,{className:"grid w-full grid-cols-3",children:[h.jsxs(el,{value:"url",className:"flex items-center gap-2",children:[h.jsx($3,{className:"w-4 h-4"}),"URL Link"]}),h.jsxs(el,{value:"pdf",className:"flex items-center gap-2",children:[h.jsx(Tk,{className:"w-4 h-4"}),"PDF Upload"]}),h.jsxs(el,{value:"feeds",className:"flex items-center gap-2",children:[h.jsx(_R,{className:"w-4 h-4"}),"Threat Feeds"]})]}),h.jsxs(tl,{value:"url",className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx(en,{htmlFor:"url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Threat Report URL"}),h.jsxs("div",{className:"flex",children:[h.jsx(rs,{id:"url",type:"url",placeholder:"https://example.com/threat-report",value:t,onChange:m=>s(m.target.value),className:"flex-1 rounded-r-none"}),h.jsxs(ve,{onClick:f,disabled:i,className:"rounded-l-none bg-cortex-blue hover:bg-blue-700",children:[h.jsx("i",{className:"fas fa-download mr-2"}),i?"Parsing...":"Parse"]})]})]}),h.jsx("div",{className:"text-sm text-gray-500",children:"Supported sources: Security blogs, MITRE ATT&CK reports, vendor advisories"})]}),h.jsxs(tl,{value:"pdf",className:"space-y-4",children:[h.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-cortex-blue transition-colors",children:[h.jsx("i",{className:"fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"}),h.jsx("p",{className:"text-lg font-medium text-gray-700 mb-2",children:"Drop PDF files here"}),h.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"or click to browse"}),h.jsx(ve,{variant:"outline",asChild:!0,children:h.jsx("label",{htmlFor:"pdf-upload",className:"cursor-pointer",children:"Select Files"})}),h.jsx("input",{id:"pdf-upload",type:"file",accept:".pdf",multiple:!0,className:"hidden",onChange:p,disabled:i})]}),i&&h.jsx("div",{className:"text-center text-sm text-gray-500",children:"Processing PDF files..."})]}),h.jsxs(tl,{value:"feeds",className:"space-y-4",children:[h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:GM.map(m=>h.jsx(Le,{className:"cursor-pointer hover:border-cortex-blue transition-colors",onClick:()=>y(m.id),children:h.jsx(Oe,{className:"p-4",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx("i",{className:`${m.icon} text-xl mr-3`,style:{color:M6(m.id)}}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium",children:m.name}),h.jsx("p",{className:"text-sm text-gray-500",children:m.description}),m.requiresAuth&&h.jsx("span",{className:"inline-block mt-1 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:"API Key Required"})]})]})})},m.id))}),i&&h.jsx("div",{className:"text-center text-sm text-gray-500",children:"Importing threat feed data..."})]})]})]})})}function M6(n){return{unit42:"#FF6B35",cisa:"#2563EB",recordedfuture:"#7C3AED",wiz:"#059669",datadog:"#6366F1"}[n]||"#6B7280"}const j6=[{name:"AWS Security Incident Layout",category:"cloud",severity:"high",description:"Comprehensive layout for AWS security incidents including policy violations and access anomalies",layoutConfig:{sections:[{id:"incident_summary",title:"Incident Summary",type:"summary",order:1,fields:[{name:"alert_name",label:"Alert Name",type:"text",source:"$xdm.alert.name",format:"bold"},{name:"severity",label:"Severity",type:"badge",source:"$xdm.alert.severity",color:"severity-based"},{name:"aws_account",label:"AWS Account",type:"text",source:"$aws.account_id"},{name:"region",label:"AWS Region",type:"text",source:"$aws.region"},{name:"event_time",label:"Event Time",type:"text",source:"$_time",format:"datetime"}]},{id:"technical_details",title:"Technical Details",type:"technical_details",order:2,fields:[{name:"event_name",label:"AWS Event",type:"text",source:"$eventName"},{name:"source_ip",label:"Source IP",type:"link",source:"$sourceIPAddress",format:"ip-lookup"},{name:"user_identity",label:"User Identity",type:"text",source:"$userIdentity.userName"},{name:"user_agent",label:"User Agent",type:"text",source:"$userAgent"},{name:"xql_query",label:"Detection Query",type:"code",source:"$correlation.xql_query",format:"xql"}]},{id:"mitre_mapping",title:"MITRE ATT&CK Mapping",type:"indicators",order:3,fields:[{name:"techniques",label:"Techniques",type:"table",source:"$mitre.techniques",format:"technique-table"},{name:"tactics",label:"Tactics",type:"badge",source:"$mitre.tactics",color:"blue"}]},{id:"response_actions",title:"Recommended Actions",type:"response_actions",order:4,fields:[{name:"immediate_actions",label:"Immediate Actions",type:"markdown",source:"$response.immediate_actions"},{name:"investigation_steps",label:"Investigation Steps",type:"markdown",source:"$response.investigation_steps"},{name:"containment",label:"Containment",type:"markdown",source:"$response.containment"}]}],styling:{theme:"cortex",colors:{primary:"#1976D2",secondary:"#424242",danger:"#D32F2F",warning:"#F57C00",success:"#388E3C"},fonts:{header:"Roboto",body:"Roboto",code:"Roboto Mono"}},notifications:{email:!0,slack:!0,teams:!1,sms:!1,escalation:{enabled:!0,timeoutMinutes:30,escalationLevels:["L1-SOC","L2-SOC","CISO"]}}}},{name:"Network Threat Detection Layout",category:"network",severity:"high",description:"Layout for network-based threats including malware communication and lateral movement",layoutConfig:{sections:[{id:"threat_summary",title:"Threat Summary",type:"summary",order:1,fields:[{name:"threat_name",label:"Threat Name",type:"text",source:"$threat.name",format:"bold"},{name:"threat_category",label:"Category",type:"badge",source:"$threat.category",color:"category-based"},{name:"source_ip",label:"Source IP",type:"link",source:"$source_ip",format:"ip-lookup"},{name:"dest_ip",label:"Destination IP",type:"link",source:"$dest_ip",format:"ip-lookup"},{name:"protocol",label:"Protocol",type:"text",source:"$protocol"}]},{id:"network_details",title:"Network Analysis",type:"technical_details",order:2,fields:[{name:"app",label:"Application",type:"text",source:"$app"},{name:"url_domain",label:"Domain",type:"link",source:"$url_domain",format:"domain-lookup"},{name:"bytes_total",label:"Total Bytes",type:"text",source:"$bytes_total",format:"bytes"},{name:"session_duration",label:"Session Duration",type:"text",source:"$session_duration",format:"duration"}]},{id:"firewall_action",title:"Firewall Response",type:"response_actions",order:3,fields:[{name:"action",label:"Action Taken",type:"badge",source:"$action",color:"action-based"},{name:"rule_matched",label:"Rule Matched",type:"text",source:"$rule_matched"},{name:"threat_id",label:"Threat ID",type:"text",source:"$threat_id"}]}],styling:{theme:"cortex",colors:{primary:"#1976D2",secondary:"#424242",danger:"#D32F2F",warning:"#F57C00",success:"#388E3C"},fonts:{header:"Roboto",body:"Roboto",code:"Roboto Mono"}},notifications:{email:!0,slack:!0,teams:!0,sms:!1,escalation:{enabled:!0,timeoutMinutes:15,escalationLevels:["Network-SOC","Security-Manager","CISO"]}}}},{name:"Endpoint Security Incident Layout",category:"endpoint",severity:"critical",description:"Layout for endpoint security incidents including malware detection and process execution",layoutConfig:{sections:[{id:"endpoint_summary",title:"Endpoint Incident Summary",type:"summary",order:1,fields:[{name:"endpoint_name",label:"Endpoint",type:"text",source:"$endpoint_name",format:"bold"},{name:"user",label:"User",type:"text",source:"$user"},{name:"process_name",label:"Process",type:"text",source:"$action_process_image_name"},{name:"file_hash",label:"File Hash",type:"link",source:"$action_file_sha256",format:"hash-lookup"}]},{id:"process_details",title:"Process Execution Details",type:"technical_details",order:2,fields:[{name:"command_line",label:"Command Line",type:"code",source:"$action_process_command_line",format:"command"},{name:"parent_process",label:"Parent Process",type:"text",source:"$action_process_parent_image_name"},{name:"process_id",label:"Process ID",type:"text",source:"$action_process_pid"},{name:"file_path",label:"File Path",type:"text",source:"$action_file_path"}]},{id:"remediation_actions",title:"Remediation Actions",type:"response_actions",order:3,fields:[{name:"quarantine_status",label:"Quarantine Status",type:"badge",source:"$remediation.quarantine",color:"status-based"},{name:"process_terminated",label:"Process Terminated",type:"badge",source:"$remediation.process_killed",color:"boolean"},{name:"isolation_status",label:"Endpoint Isolation",type:"badge",source:"$remediation.isolated",color:"boolean"}]}],styling:{theme:"cortex",colors:{primary:"#1976D2",secondary:"#424242",danger:"#D32F2F",warning:"#F57C00",success:"#388E3C"},fonts:{header:"Roboto",body:"Roboto",code:"Roboto Mono"}},notifications:{email:!0,slack:!0,teams:!0,sms:!0,escalation:{enabled:!0,timeoutMinutes:10,escalationLevels:["Endpoint-SOC","IR-Team","Security-Manager"]}}}},{name:"Identity Attack Detection Layout",category:"identity",severity:"high",description:"Layout for identity-based attacks including authentication failures and privilege escalation",layoutConfig:{sections:[{id:"identity_summary",title:"Identity Incident Summary",type:"summary",order:1,fields:[{name:"user_name",label:"User",type:"text",source:"$userName",format:"bold"},{name:"source_ip",label:"Source IP",type:"link",source:"$clientIp",format:"ip-lookup"},{name:"failure_count",label:"Failed Attempts",type:"badge",source:"$Failures",color:"count-based"},{name:"location",label:"Location",type:"text",source:"$gl_City, $gl_Country"}]},{id:"auth_details",title:"Authentication Details",type:"technical_details",order:2,fields:[{name:"user_agent",label:"User Agent",type:"text",source:"$userAgent"},{name:"auth_outcome",label:"Outcome",type:"badge",source:"$auth_outcome",color:"outcome-based"},{name:"platform",label:"Platform",type:"text",source:"$platform"},{name:"operation",label:"Operation",type:"text",source:"$operation"}]},{id:"risk_assessment",title:"Risk Assessment",type:"response_actions",order:3,fields:[{name:"risk_score",label:"Risk Score",type:"badge",source:"$risk.score",color:"risk-based"},{name:"account_status",label:"Account Status",type:"badge",source:"$account.status",color:"status-based"},{name:"recommended_action",label:"Recommended Action",type:"markdown",source:"$response.recommendation"}]}],styling:{theme:"cortex",colors:{primary:"#1976D2",secondary:"#424242",danger:"#D32F2F",warning:"#F57C00",success:"#388E3C"},fonts:{header:"Roboto",body:"Roboto",code:"Roboto Mono"}},notifications:{email:!0,slack:!0,teams:!1,sms:!1,escalation:{enabled:!0,timeoutMinutes:20,escalationLevels:["Identity-SOC","IAM-Team","Security-Manager"]}}}}];function L6(n){return j6.filter(e=>e.category===n)}function O6(n,e,t){const s=L6(e);if(s.length===0)return JSON.stringify({layout_name:`${n}_alert_layout`,sections:[{type:"summary",fields:["severity","confidence","affected_assets"]},{type:"technical_details",fields:["detection_rule","indicators","mitre_techniques"]},{type:"response_actions",fields:["immediate_actions","investigation_steps"]}]},null,2);const i=s[0],r={layout_name:`${n.toLowerCase().replace(/\s+/g,"_")}_alert_layout`,description:`Alert layout for ${n}`,severity:t,sections:i.layoutConfig.sections.map(a=>({id:a.id,title:a.title,type:a.type,order:a.order,fields:a.fields.map(o=>({name:o.name,label:o.label,type:o.type,source:o.source,format:o.format,color:o.color}))})),styling:i.layoutConfig.styling,notifications:i.layoutConfig.notifications};return JSON.stringify(r,null,2)}const F6=[{name:"Phishing Email Investigation Core",description:"Comprehensive phishing email analysis and response including indicator extraction, reputation checking, and user notification",category:"phishing",severity:"high",mitreMapping:["T1566.002","T1204.002","T1071.001"],workflow:{starttaskid:"0",description:"Automated phishing investigation with manual remediation capabilities",tags:["phishing","email","investigation"]},tasks:[{id:"0",name:"Start Investigation",type:"start",nexttasks:{"#none#":["1"]}},{id:"1",name:"Extract Email Indicators",type:"regular",description:"Extract URLs, domains, and file hashes from the reported email",script:"Builtin|||extractIndicators",scriptarguments:{text:"${incident.emailbody}${incident.emailsubject}${incident.emailattachments}"},nexttasks:{"#none#":["2"]},separatecontext:!1},{id:"2",name:"Acknowledge Email Receipt",type:"regular",description:"Send acknowledgment to reporting user",script:"|||send-mail",scriptarguments:{body:"Thank you for reporting the suspicious email. Our security team is investigating. Please do not interact with the email until further notice.",subject:"[Security Alert] ${incident.name} - Under Investigation",to:"${incident.emailfrom}"},nexttasks:{"#none#":["3"]},separatecontext:!1},{id:"3",name:"URL Reputation Check",type:"regular",description:"Check reputation of extracted URLs",script:"|||url",scriptarguments:{url:"${ExtractedIndicators.URL}"},nexttasks:{"#none#":["4"]},separatecontext:!1,continueonerror:!0},{id:"4",name:"Check for Malicious Indicators",type:"condition",description:"Determine if any malicious indicators were found",conditions:[{label:"malicious",condition:[{operator:"greaterThan",left:{value:"DBotScore.Score",iscontext:!0},right:{value:"2"}}]}],nexttasks:{"#default#":["5"],malicious:["6"]}},{id:"5",name:"Mark as False Positive",type:"regular",description:"Close investigation as false positive",script:"Builtin|||closeInvestigation",scriptarguments:{closeReason:"False Positive - No malicious indicators found"},nexttasks:{"#none#":[]}},{id:"6",name:"Escalate to Security Team",type:"regular",description:"Create task for manual investigation",script:"Builtin|||createTask",scriptarguments:{title:"Manual Review Required: Phishing Email",description:"Malicious indicators detected. Manual analysis required for ${incident.name}",assignee:"Security-Team"},nexttasks:{"#none#":[]}}],inputs:[{key:"emailbody",value:"${incident.emailbody}",required:!0,description:"The body content of the reported email"},{key:"emailfrom",value:"${incident.emailfrom}",required:!0,description:"Email address of the person who reported the phishing email"}],outputs:[{key:"malicious_indicators",description:"List of confirmed malicious indicators found",contextPath:"Investigation.MaliciousIndicators"}]},{name:"Malware Response Core",description:"Automated malware detection and response including prevention checks, indicator analysis, and endpoint isolation",category:"malware",severity:"critical",mitreMapping:["T1204","T1566","T1055","T1027"],workflow:{starttaskid:"0",description:"Comprehensive malware response with automated and manual components",tags:["malware","endpoint","prevention"]},tasks:[{id:"0",name:"Start Malware Response",type:"start",nexttasks:{"#none#":["1"]}},{id:"1",name:"Check Prevention Status",type:"condition",description:"Determine if the malware was prevented by security controls",conditions:[{label:"prevented",condition:[{operator:"isEqualString",left:{value:"alert.action",iscontext:!0},right:{value:"PREVENTED"}}]}],nexttasks:{"#default#":["2"],prevented:["7"]}},{id:"2",name:"Analyze File Hash",type:"regular",description:"Check file reputation and analyze hash",script:"|||file",scriptarguments:{file:"${alert.initiatorsha256}"},nexttasks:{"#none#":["3"]},separatecontext:!1},{id:"3",name:"Check Malicious Score",type:"condition",description:"Evaluate if confirmed malicious indicators were found",conditions:[{label:"malicious",condition:[{operator:"greaterThan",left:{value:"DBotScore.Score",iscontext:!0},right:{value:"1"}}]}],nexttasks:{"#default#":["8"],malicious:["4"]}},{id:"4",name:"Increase Severity to High",type:"regular",description:"Escalate incident severity due to malicious indicators",script:"IncreaseIncidentSeverity",scriptarguments:{severity:"High"},nexttasks:{"#none#":["5"]},separatecontext:!1},{id:"5",name:"Isolate Affected Endpoint",type:"regular",description:"Isolate the endpoint to prevent malware spread",script:"|||core-isolate-endpoint",scriptarguments:{endpoint_id:"${alert.agentid}",comment:"Automated isolation due to malware detection in ${alert.id}"},nexttasks:{"#none#":["6"]},separatecontext:!1,continueonerror:!0},{id:"6",name:"Block Malicious Hash",type:"regular",description:"Add malicious hash to blocklist",script:"|||core-blocklist-files",scriptarguments:{hash_list:"${alert.initiatorsha256}",comment:"Blocked due to malware detection in ${alert.id}"},nexttasks:{"#none#":[]},separatecontext:!1,continueonerror:!0},{id:"7",name:"Close as Prevented",type:"regular",description:"Close alert as the malware was successfully prevented",script:"Builtin|||closeInvestigation",scriptarguments:{closeReason:"Resolved - Threat Prevented"},nexttasks:{"#none#":[]}},{id:"8",name:"Close as False Positive",type:"regular",description:"Close alert as no malicious indicators confirmed",script:"Builtin|||closeInvestigation",scriptarguments:{closeReason:"False Positive - No confirmed malicious activity"},nexttasks:{"#none#":[]}}],inputs:[{key:"initiatorsha256",value:"${alert.initiatorsha256}",required:!0,description:"SHA256 hash of the suspected malicious file"},{key:"agentid",value:"${alert.agentid}",required:!0,description:"ID of the affected endpoint agent"}],outputs:[{key:"isolation_status",description:"Status of endpoint isolation action",contextPath:"Endpoint.IsolationStatus"}]},{name:"Network Door Knocking Investigation",description:"Investigate and respond to network scanning and door knocking attacks",category:"network",severity:"medium",mitreMapping:["T1595.001","T1046","T1018"],workflow:{starttaskid:"0",description:"Automated network reconnaissance detection and response",tags:["network","scanning","reconnaissance"]},tasks:[{id:"0",name:"Start Network Investigation",type:"start",nexttasks:{"#none#":["1"]}},{id:"1",name:"Enrich Source IP",type:"regular",description:"Gather intelligence on the source IP address",script:"|||ip",scriptarguments:{ip:"${alert.sourceip}"},nexttasks:{"#none#":["2"]},separatecontext:!1},{id:"2",name:"Check IP Reputation",type:"condition",description:"Determine if source IP is known malicious",conditions:[{label:"malicious",condition:[{operator:"greaterThan",left:{value:"DBotScore.Score",iscontext:!0},right:{value:"1"}}]}],nexttasks:{"#default#":["4"],malicious:["3"]}},{id:"3",name:"Block Malicious IP",type:"regular",description:"Add malicious IP to EDL for blocking",script:"|||pan-block-ip",scriptarguments:{ip:"${alert.sourceip}",comment:"Blocked due to door knocking attack from known malicious IP"},nexttasks:{"#none#":["5"]},separatecontext:!1,continueonerror:!0},{id:"4",name:"Monitor for Pattern",type:"regular",description:"Create monitoring task for continued observation",script:"Builtin|||createTask",scriptarguments:{title:"Monitor Network Activity",description:"Continue monitoring ${alert.sourceip} for scanning patterns",assignee:"Network-SOC"},nexttasks:{"#none#":["6"]}},{id:"5",name:"Close as Known Malicious",type:"regular",description:"Close alert with appropriate resolution",script:"Builtin|||setAlert",scriptarguments:{comment:"Source IP confirmed malicious and blocked. Attack was prevented by NGFW.",status:"Resolved - Known Issue"},nexttasks:{"#none#":[]}},{id:"6",name:"Close as Monitoring",type:"regular",description:"Close with monitoring status",script:"Builtin|||closeInvestigation",scriptarguments:{closeReason:"Monitoring - No immediate threat"},nexttasks:{"#none#":[]}}],inputs:[{key:"sourceip",value:"${alert.sourceip}",required:!0,description:"Source IP address performing the scanning activity"}],outputs:[{key:"block_status",description:"Status of IP blocking action",contextPath:"Network.BlockStatus"}]},{name:"Identity Attack Response",description:"Investigate and respond to identity-based attacks including authentication failures and account compromise",category:"identity",severity:"high",mitreMapping:["T1110.001","T1078","T1098"],workflow:{starttaskid:"0",description:"Comprehensive identity attack investigation and response",tags:["identity","authentication","brute_force"]},tasks:[{id:"0",name:"Start Identity Investigation",type:"start",nexttasks:{"#none#":["1"]}},{id:"1",name:"Analyze Failure Count",type:"condition",description:"Check if failure count exceeds threshold",conditions:[{label:"high_failures",condition:[{operator:"greaterThan",left:{value:"alert.failure_count",iscontext:!0},right:{value:"5"}}]}],nexttasks:{"#default#":["5"],high_failures:["2"]}},{id:"2",name:"Check User Status",type:"regular",description:"Verify current user account status",script:"|||ad-get-user",scriptarguments:{username:"${alert.username}"},nexttasks:{"#none#":["3"]},separatecontext:!1,continueonerror:!0},{id:"3",name:"Disable User Account",type:"regular",description:"Temporarily disable user account to prevent compromise",script:"|||ad-disable-account",scriptarguments:{username:"${alert.username}",reason:"Suspicious authentication activity detected"},nexttasks:{"#none#":["4"]},separatecontext:!1,continueonerror:!0},{id:"4",name:"Notify Security Team",type:"regular",description:"Alert security team of potential account compromise",script:"|||send-mail",scriptarguments:{body:"User account ${alert.username} has been disabled due to suspicious authentication activity. Manual review required.",subject:"[URGENT] Account Compromise Suspected - ${alert.username}",to:"security-team@company.com"},nexttasks:{"#none#":[]}},{id:"5",name:"Log for Monitoring",type:"regular",description:"Log event for continued monitoring",script:"Builtin|||setAlert",scriptarguments:{comment:"Authentication failures below threshold. Continuing to monitor ${alert.username}."},nexttasks:{"#none#":["6"]}},{id:"6",name:"Close as Monitoring",type:"regular",description:"Close with monitoring status",script:"Builtin|||closeInvestigation",scriptarguments:{closeReason:"Monitoring - Below threshold"},nexttasks:{"#none#":[]}}],inputs:[{key:"username",value:"${alert.username}",required:!0,description:"Username experiencing authentication failures"},{key:"failure_count",value:"${alert.failure_count}",required:!0,description:"Number of failed authentication attempts"}],outputs:[{key:"account_status",description:"Final status of user account after investigation",contextPath:"Identity.AccountStatus"}]},{name:"False Positive Checker",description:"Check for previous similar alerts that were closed as false positives",category:"endpoint",severity:"low",mitreMapping:[],workflow:{starttaskid:"0",description:"Automated false positive detection based on historical data",tags:["utility","false_positive","automation"]},tasks:[{id:"0",name:"Start FP Check",type:"start",nexttasks:{"#none#":["1"]}},{id:"1",name:"Search Previous Alerts",type:"regular",description:"Search for similar alerts in XSIAM",script:"SearchIncidentsV2",scriptarguments:{query:"${inputs.query}"},nexttasks:{"#none#":["2"]},separatecontext:!1},{id:"2",name:"Check FP Pattern",type:"condition",description:"Determine if previous alerts were closed as false positive",conditions:[{label:"false_positive",condition:[{operator:"containsGeneral",left:{value:"foundIncidents.rawCloseReason",iscontext:!0},right:{value:"False Positive"}},{operator:"greaterThanOrEqual",left:{value:"foundIncidents.id",iscontext:!0},right:{value:"${inputs.threshold}"}}]}],nexttasks:{"#default#":["4"],false_positive:["3"]}},{id:"3",name:"Set Previous Verdict",type:"regular",description:"Mark as previously determined false positive",script:"Set",scriptarguments:{key:"PreviousVerdict",value:"False Positive"},nexttasks:{"#none#":[]}},{id:"4",name:"Set No Pattern",type:"regular",description:"No false positive pattern found",script:"Set",scriptarguments:{key:"PreviousVerdict",value:"No Pattern"},nexttasks:{"#none#":[]}}],inputs:[{key:"query",value:"",required:!0,description:"Search query for similar incidents"},{key:"threshold",value:"2",required:!1,description:"Minimum number of similar FP alerts required"}],outputs:[{key:"previous_verdict",description:"Verdict based on historical false positive analysis",contextPath:"PreviousVerdict"}]}];function $6(n){return F6.filter(e=>e.category===n)}function V6(n,e,t){const s=$6(e);if(s.length===0)return`# Generated Playbook for: ${n}
id: ${OE()}
version: 1
name: ${n} Response Playbook
description: Automated response playbook for ${n}
starttaskid: "0"

tasks:
  "0":
    id: "0"
    type: start
    nexttasks:
      '#none#':
      - "1"
  "1":
    id: "1"
    type: regular
    task:
      name: Investigate ${n}
      description: Manual investigation required
    nexttasks: {}

inputs:
- key: alert_data
  required: true
  description: Alert data for investigation

outputs: []`;const i=s[0],r=OE();return`# Generated Playbook for: ${n}
# Based on template: ${i.name}
# MITRE ATT&CK: ${i.mitreMapping.join(", ")}

id: ${r}
version: 1
name: ${n.replace(/[^a-zA-Z0-9\s-]/g,"")} Response Playbook
description: ${i.description}
starttaskid: "${i.workflow.starttaskid}"

tasks:
${i.tasks.map(a=>`  "${a.id}":
    id: "${a.id}"
    type: ${a.type}
    task:
      name: ${a.name}
      ${a.description?`description: ${a.description}`:""}
      ${a.script?`script: ${a.script}`:""}
      ${a.type!=="start"?"iscommand: "+(a.script?"true":"false"):""}
    ${a.scriptarguments?`scriptarguments:
${Object.entries(a.scriptarguments).map(([o,l])=>`      ${o}:
        simple: ${l}`).join(`
`)}`:""}
    nexttasks:
${Object.entries(a.nexttasks).map(([o,l])=>`      ${o}:
${l.map(u=>`      - "${u}"`).join(`
`)}`).join(`
`)}
    ${a.conditions?`conditions:
${a.conditions.map(o=>`    - label: "${o.label}"
      condition:
${o.condition.map(l=>`      - operator: ${l.operator}
        left:
          value: ${l.left.value}
          ${l.left.iscontext?"iscontext: true":""}
        right:
          value: ${l.right.value}
          ${l.right.iscontext?"iscontext: true":""}`).join(`
`)}`).join(`
`)}`:""}
    separatecontext: ${a.separatecontext||!1}
    ${a.continueonerror?"continueonerror: true":""}`).join(`
`)}

inputs:
${i.inputs.map(a=>`- key: ${a.key}
  value: ${a.value}
  required: ${a.required}
  description: ${a.description}`).join(`
`)}

outputs:
${i.outputs.map(a=>`- key: ${a.key}
  description: ${a.description}
  contextPath: ${a.contextPath}`).join(`
`)}`}function OE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const B6=[{name:"Dynamic Evidence Display",description:"Display formatted evidence data from alert context in HTML table format for layout sections",category:"layout",type:"python",tags:["dynamic-section","evidence","html"],dockerimage:"demisto/python3:3.12.8.1983910",script:`# Dynamic Evidence Display Script
def json_array_to_html_table(json_array_string):
    import json
    def format_value(value):
        if isinstance(value, str):
            try:
                value_dict = json.loads(value)
                if isinstance(value_dict, dict):
                    return "<br>".join(["<b>{}</b>: {}".format(k, v) for k, v in value_dict.items()])
            except ValueError:
                pass
        elif isinstance(value, dict):
            return "<br>".join(["<b>{}</b>: {}".format(k, v) for k, v in value.items()])
        return value

    data = json.loads(json_array_string)
    html_tables = ""
    for dictionary in data:
        html_table = "<table style='border-collapse: collapse; width: 100%;'>"
        for key, value in dictionary.items():
            row_style = "background-color: #01cc66; font-size: 120%;" if key == "@odata.type" else ""
            key_html = "<span style='text-align: right; display: inline-block;'>{key}:</span>".format(key=key)
            value_html = format_value(value) if key != "@odata.type" else value
            html_table += "<tr style='{}'><td style='text-align: right; width: 20%;'>{}</td><td style='width: 80%;'>{}</td></tr>".format(row_style, key_html, value_html)
        html_table += "</table>"
        html_tables += html_table + "<br>"
    return html_tables

def main():
    try:
        context_data = demisto.alert()
        evidence_field = demisto.args().get('evidence_field', 'evidence')
        evidence_data = context_data['CustomFields'].get(evidence_field)
        if not evidence_data:
            return_results("No evidence data found in alert context.")
            return
        table = json_array_to_html_table(evidence_data)
        return_results({
            'ContentsFormat': EntryFormat.HTML,
            'Type': EntryType.NOTE,
            'Contents': table,
        })
    except Exception as e:
        error_statement = "Error rendering evidence field: " + str(e)
        return_results(error_statement)

if __name__ in ("builtins", "__builtin__", "__main__"):
    main()`,inputs:[{name:"evidence_field",type:"string",required:!1,description:"Field name containing evidence data in alert context",defaultValue:"evidence"}],outputs:[{name:"html_table",type:"html",description:"Formatted HTML table containing evidence data"}]},{name:"False Positive Checker",description:"Check for patterns indicating potential false positives based on historical data",category:"automation",type:"python",tags:["automation","false-positive","analysis"],dockerimage:"demisto/python3:3.12.8.1983910",script:`# False Positive Checker
def check_false_positive_patterns():
    try:
        alert_data = demisto.alert()
        args = demisto.args()
        fp_threshold = int(args.get('threshold', 3))
        time_window = args.get('time_window', '30 days')
        
        source_ip = alert_data['CustomFields'].get('sourceip', '')
        hostname = alert_data['CustomFields'].get('hostname', '')
        alert_name = alert_data.get('name', '')
        
        query_parts = []
        if source_ip:
            query_parts.append('sourceip:"{}"'.format(source_ip))
        if hostname:
            query_parts.append('hostname:"{}"'.format(hostname))
        if alert_name:
            query_parts.append('name:"{}"'.format(alert_name))
        
        if not query_parts:
            return_results("Insufficient data for false positive analysis")
            return
            
        search_query = " AND ".join(query_parts)
        search_query += " AND occurred:>={} AND status:closed".format(time_window)
        
        try:
            search_results = execute_command('SearchIncidentsV2', {
                'query': search_query,
                'size': 50
            })
            
            if not search_results or not search_results[0].get('Contents'):
                return_results("No similar historical alerts found")
                return
                
            incidents = search_results[0]['Contents']
            if not isinstance(incidents, list):
                incidents = [incidents] if incidents else []
            
            fp_count = 0
            total_count = len(incidents)
            closure_reasons = {}
            
            for incident in incidents:
                close_reason = incident.get('closeReason', 'Unknown')
                closure_reasons[close_reason] = closure_reasons.get(close_reason, 0) + 1
                if 'false positive' in close_reason.lower() or 'fp' in close_reason.lower():
                    fp_count += 1
            
            fp_rate = (fp_count / total_count * 100) if total_count > 0 else 0
            
            if fp_count >= fp_threshold and fp_rate >= 60:
                recommendation = "HIGH likelihood of false positive"
                risk_level = "LOW RISK"
            elif fp_count >= 2 and fp_rate >= 40:
                recommendation = "MODERATE likelihood of false positive"
                risk_level = "MEDIUM RISK"
            else:
                recommendation = "Requires manual investigation"
                risk_level = "HIGH RISK"
            
            report = "False Positive Analysis Results\\n"
            report += "Current Alert: {}\\n".format(alert_name)
            report += "Similar Alerts Found: {}\\n".format(total_count)
            report += "False Positives: {}\\n".format(fp_count)
            report += "FP Rate: {:.1f}%\\n".format(fp_rate)
            report += "Risk Level: {}\\n".format(risk_level)
            report += "Recommendation: {}\\n".format(recommendation)
            
            demisto.setContext('FalsePositive.Analysis', {
                'Recommendation': recommendation,
                'FPCount': fp_count,
                'TotalSimilar': total_count,
                'FPRate': fp_rate,
                'RiskLevel': risk_level
            })
            
            return_results({
                'Type': EntryType.NOTE,
                'Contents': report,
                'ContentsFormat': EntryFormat.TEXT,
                'HumanReadable': report
            })
            
        except Exception as e:
            return_results("Error searching for similar incidents: {}".format(str(e)))
            
    except Exception as e:
        return_results("False positive analysis failed: {}".format(str(e)))

def main():
    check_false_positive_patterns()

if __name__ in ("builtins", "__builtin__", "__main__"):
    main()`,inputs:[{name:"threshold",type:"number",required:!1,description:"Minimum number of false positives to trigger recommendation",defaultValue:3}],outputs:[{name:"fp_analysis",type:"object",description:"False positive analysis results",contextPath:"FalsePositive.Analysis"}]}];function z6(n){return B6.filter(e=>e.category===n)}function U6(n,e,t="python"){const s=z6(e);if(s.length===0)return H6(n,t);const i=s[0],r=cj();return`# Generated Script for: ${n}
# Based on template: ${i.name}

commonfields:
  id: ${r}
  version: 1
name: ${n.replace(/[^a-zA-Z0-9\s-]/g,"").replace(/\s+/g,"_")}_Script
script: |
  ${i.script.replace(/\n/g,`
  `)}
type: ${i.type}
tags:
${i.tags.map(a=>`- ${a}`).join(`
`)}
enabled: true
scripttarget: 0
subtype: ${i.type}3
${i.dockerimage?`dockerimage: ${i.dockerimage}`:""}
runas: DBotWeakRole`}function H6(n,e){const t=cj(),s=`# ${n} Script
def main():
    try:
        alert_data = demisto.alert()
        result = "Processing {} for alert: {}".format("${n}", alert_data.get('name', 'Unknown'))
        return_results({
            'Type': EntryType.NOTE,
            'Contents': result,
            'ContentsFormat': EntryFormat.TEXT
        })
    except Exception as e:
        return_results("Error in ${n} script: {}".format(str(e)))

if __name__ in ("builtins", "__builtin__", "__main__"):
    main()`,i=`// ${n} Script
function main() {
    try {
        const alertData = invContext.alert || {};
        const result = \`Processing ${n} for alert: \${alertData.name || 'Unknown'}\`;
        return {
            Type: entryTypes.note,
            Contents: result,
            ContentsFormat: formats.text
        };
    } catch (error) {
        return {
            Type: entryTypes.error,
            Contents: \`Error in ${n} script: \${error.message}\`
        };
    }
}
main();`,r=e==="javascript"?i:s;return`# Generated Script for: ${n}

commonfields:
  id: ${t}
  version: 1
name: ${n.replace(/[^a-zA-Z0-9\s-]/g,"").replace(/\s+/g,"_")}_Script
script: |
  ${r.replace(/\n/g,`
  `)}
type: ${e}
tags:
- automation
enabled: true
scripttarget: 0
subtype: ${e}3
runas: DBotWeakRole`}function cj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const FE={endpoint:[{title:"Environment Setup - Endpoint Detection Lab",description:"Set up a controlled lab environment for endpoint detection testing",contentTemplate:`
## Prerequisites
- Windows 10/11 virtual machine
- Windows Server 2019+ (Domain Controller)
- Cortex XDR Agent v8.2+
- Administrative privileges

## Setup Steps
1. **Configure Domain Environment**
   - Install Active Directory Domain Services
   - Create test user accounts with varying privilege levels
   - Configure Group Policy for security logging

2. **Deploy Cortex XDR Agent**
   - Download agent from tenant console
   - Install with appropriate policies
   - Verify agent connectivity and data collection

3. **Network Configuration**
   - Configure network segmentation for controlled testing
   - Set up monitoring tools and packet capture
   - Establish baseline network behavior

## Validation Checklist
- [ ] Agent reporting telemetry to tenant
- [ ] Domain authentication working
- [ ] Network connectivity verified
- [ ] Baseline data collection established
      `,category:"environment_buildout",estimatedDuration:60,validationRequired:!0},{title:"Attack Simulation - Credential Dumping",description:"Execute controlled credential access techniques for detection testing",contentTemplate:`
## Attack Overview
Simulate credential dumping techniques commonly used by adversaries to extract authentication materials from memory.

## Tools Required
- Mimikatz (latest version)
- Process Monitor
- Administrative access to test system

## Execution Steps
1. **Baseline Monitoring**
   - Enable process creation logging
   - Start Cortex XDR monitoring
   - Document normal LSASS behavior

2. **Attack Execution**
   \`\`\`powershell
   # Run Mimikatz with privilege debug
   mimikatz.exe "privilege::debug" "sekurlsa::logonpasswords" exit
   \`\`\`

3. **Alternative Techniques**
   - Task Manager LSASS dump
   - PowerShell memory access
   - Registry SAM extraction

## Expected Detections
- LSASS memory access alerts
- Suspicious process creation
- Credential access behavior patterns

## Safety Considerations
- Use isolated lab environment only
- Never run on production systems
- Disable network connectivity during testing
      `,category:"attack_simulation",estimatedDuration:45,validationRequired:!0,dependencies:["environment_buildout"]},{title:"Detection Rule Development - LSASS Access",description:"Create custom detection rules for LSASS memory access",contentTemplate:`
## Detection Logic Overview
Build rules to detect unauthorized access to Local Security Authority Subsystem Service (LSASS) memory.

## XQL Query Development
\`\`\`xql
dataset = xdr_data
| filter agent_hostname != null
| filter action_process_image_name ~= ".*lsass.*" 
   or action_process_command_line contains "lsass"
   or action_target_process_image_name ~= ".*lsass.*"
| filter action_type in ("PROCESS_CREATION", "MEMORY_ACCESS", "PROCESS_INJECTION")
| alter process_chain = action_process_image_path
| filter not (actor_process_image_name in ("explorer.exe", "svchost.exe", "services.exe"))
| comp count() by actor_process_image_name, endpoint_name
| filter _count > 1
\`\`\`

## Rule Configuration
1. **Alert Severity**: High
2. **MITRE Mapping**: T1003.001 - OS Credential Dumping: LSASS Memory
3. **False Positive Tuning**:
   - Exclude legitimate administrative tools
   - Add time-based thresholds
   - Consider process reputation

## Testing and Validation
- Test against known good processes
- Validate with attack simulation
- Adjust thresholds based on environment

## Documentation Requirements
- Rule logic explanation
- Tuning parameters
- Expected false positive rate
- Escalation procedures
      `,category:"detection_engineering",estimatedDuration:75,validationRequired:!0,dependencies:["attack_simulation"]}],network:[{title:"Network Lab Configuration",description:"Set up network monitoring and analysis environment",contentTemplate:`
## Network Infrastructure Setup
Configure a comprehensive network monitoring environment for threat detection testing.

## Required Components
- pfSense firewall
- Network tap or mirror port
- Wireshark/tcpdump
- Cortex XDR network sensors
- Multiple network segments

## Configuration Steps
1. **Network Segmentation**
   - Create DMZ, internal, and management VLANs
   - Configure routing between segments
   - Implement access control lists

2. **Monitoring Deployment**
   - Install network sensors
   - Configure traffic mirroring
   - Set up packet capture storage

3. **Baseline Establishment**
   - Document normal traffic patterns
   - Identify legitimate protocols and ports
   - Create network inventory

## Validation
- Verify sensor coverage across all segments
- Test traffic capture and analysis
- Confirm alert generation capabilities
      `,category:"environment_buildout",estimatedDuration:90,validationRequired:!0}],cloud:[{title:"Cloud Security Lab Setup",description:"Configure cloud environment for security testing",contentTemplate:`
## Cloud Platform Setup
Establish a secure cloud environment for testing detection and response capabilities.

## Platform Requirements
- AWS/Azure/GCP test account
- Cloud Security Posture Management tools
- Cortex XSIAM cloud connectors
- Infrastructure as Code templates

## Setup Process
1. **Account Configuration**
   - Create dedicated test account/subscription
   - Configure billing alerts and limits
   - Set up identity and access management

2. **Security Tooling**
   - Deploy CSPM agents
   - Configure cloud logging
   - Install monitoring solutions

3. **Test Workloads**
   - Deploy sample applications
   - Create various resource types
   - Implement intentional misconfigurations

## Security Validation
- Verify logging and monitoring coverage
- Test detection rule effectiveness
- Validate incident response procedures
      `,category:"environment_buildout",estimatedDuration:120,validationRequired:!0}],identity:[{title:"Identity Environment Setup",description:"Configure identity and access management testing environment",contentTemplate:`
## Identity Infrastructure
Set up comprehensive identity testing environment including on-premises and cloud identity systems.

## Components Required
- Active Directory Domain Services
- Azure Active Directory tenant
- ADFS/identity federation
- Privileged Access Management
- Identity monitoring tools

## Configuration Steps
1. **On-Premises Setup**
   - Install and configure AD DS
   - Create organizational units and groups
   - Configure service accounts and Kerberos

2. **Cloud Integration**
   - Set up Azure AD Connect
   - Configure federation and SSO
   - Implement conditional access policies

3. **Monitoring Implementation**
   - Deploy identity protection tools
   - Configure audit logging
   - Set up anomaly detection

## Validation Checklist
- Authentication flows working correctly
- Logging captured for all identity events
- Monitoring tools detecting test scenarios
      `,category:"environment_buildout",estimatedDuration:100,validationRequired:!0}]};function W6(n){const e=FE[n.category]||FE.endpoint,t=G6(n.description),r=[...[{title:"Planning and Requirements Analysis",description:"Define training objectives and resource requirements",contentTemplate:`
## Training Objectives
Define clear, measurable objectives for this training module.

### Primary Objectives
- Understand the threat landscape for ${n.title}
- Develop detection capabilities for ${n.category} threats
- Create effective response procedures
- Validate detection accuracy and tune for environment

### Resource Requirements
- **Time Allocation**: ${n.estimatedDuration} minutes estimated
- **Technical Skills**: Intermediate security operations knowledge
- **Prerequisites**: Basic understanding of ${n.category} security concepts

### Success Criteria
- Successfully detect simulated attacks
- Create functional detection rules with <5% false positive rate
- Develop complete incident response procedures
- Document lessons learned and improve processes

## Risk Assessment
Identify and mitigate risks associated with training activities:
- Ensure all testing is performed in isolated lab environment
- Verify no production systems are affected
- Implement proper change management procedures
- Document all activities for compliance and audit purposes
      `,category:"planning",estimatedDuration:30,validationRequired:!1},{title:"Alert Layout Configuration",description:"Configure alert layouts and notification systems",contentTemplate:`
## Alert Layout Design
Create effective alert layouts for ${n.title} detection.

### Layout Components
1. **Alert Summary**
   - Threat severity and confidence score
   - Affected assets and user accounts
   - Attack timeline and progression

2. **Technical Details**
   - Detection rule that triggered
   - Raw telemetry data and indicators
   - MITRE ATT&CK technique mapping

3. **Response Actions**
   - Recommended immediate actions
   - Investigation procedures
   - Escalation criteria and contacts

### Configuration Steps
1. **Cortex XSIAM Layout Editor**
   \`\`\`json
   {
     "layout_name": "${n.title}_alert",
     "sections": [
       {
         "type": "summary",
         "fields": ["severity", "confidence", "affected_assets"]
       },
       {
         "type": "technical_details", 
         "fields": ["detection_rule", "indicators", "mitre_techniques"]
       },
       {
         "type": "response_actions",
         "fields": ["immediate_actions", "investigation_steps"]
       }
     ]
   }
   \`\`\`

2. **Notification Rules**
   - Configure email/SMS notifications
   - Set up Slack/Teams integration
   - Define escalation timers

### Testing and Validation
- Test with simulated alerts
- Verify all stakeholders receive notifications
- Validate layout clarity and completeness
      `,category:"layout_configuration",estimatedDuration:45,validationRequired:!0,dependencies:["detection_engineering"]},{title:"Script Development for Automation",description:"Develop custom scripts for detection and response automation",contentTemplate:`
## Automation Script Development
Create custom scripts to enhance detection and response capabilities for ${n.title}.

### Script Categories
1. **Data Collection Scripts**
   - Automated evidence gathering
   - System state capture
   - Log aggregation and parsing

2. **Analysis Scripts**
   - Indicator extraction and enrichment
   - Timeline reconstruction
   - Threat correlation analysis

3. **Response Scripts**
   - Automated containment actions
   - User notification systems
   - Remediation procedures

### Example: Evidence Collection Script
\`\`\`python
#!/usr/bin/env python3
"""
Automated evidence collection for ${n.title}
"""
import json
import subprocess
import datetime
from pathlib import Path

class EvidenceCollector:
    def __init__(self, case_id):
        self.case_id = case_id
        self.timestamp = datetime.datetime.now().isoformat()
        
    def collect_system_info(self):
        """Collect basic system information"""
        try:
            result = subprocess.run(['systeminfo'], 
                                  capture_output=True, text=True)
            return result.stdout
        except Exception as e:
            return f"Error collecting system info: {e}"
    
    def collect_network_connections(self):
        """Collect active network connections"""
        try:
            result = subprocess.run(['netstat', '-an'], 
                                  capture_output=True, text=True)
            return result.stdout
        except Exception as e:
            return f"Error collecting network info: {e}"
    
    def generate_report(self):
        """Generate comprehensive evidence report"""
        evidence = {
            'case_id': self.case_id,
            'timestamp': self.timestamp,
            'system_info': self.collect_system_info(),
            'network_connections': self.collect_network_connections()
        }
        
        output_file = f"evidence_{self.case_id}_{self.timestamp}.json"
        with open(output_file, 'w') as f:
            json.dump(evidence, f, indent=2)
        
        return output_file

# Usage example
if __name__ == "__main__":
    collector = EvidenceCollector("CASE-001")
    report_file = collector.generate_report()
    print(f"Evidence collected: {report_file}")
\`\`\`

### Integration with XSOAR
- Package scripts as XSOAR integrations
- Define input/output parameters
- Create error handling and logging
- Test with various scenarios

### Documentation and Maintenance
- Document script functionality and usage
- Create troubleshooting guides
- Establish update and version control procedures
      `,category:"script_development",estimatedDuration:90,validationRequired:!0,dependencies:["detection_engineering"]},{title:"Dashboard and Widget Creation",description:"Build monitoring dashboards and visualization widgets",contentTemplate:`
## Dashboard Design for ${n.title}
Create comprehensive monitoring dashboards to track detection effectiveness and threat trends.

### Dashboard Components
1. **Executive Summary Widgets**
   - Threat landscape overview
   - Detection effectiveness metrics
   - Incident response times

2. **Technical Detail Widgets**
   - Alert volume and trends
   - False positive rates
   - Investigation outcomes

3. **Operational Widgets**
   - Team workload distribution
   - Response time metrics
   - Training effectiveness

### Widget Configuration Examples

#### Alert Volume Trend Widget
\`\`\`json
{
  "widget_type": "line_chart",
  "title": "${n.title} Alert Trends",
  "data_source": "cortex_xsiam",
  "query": {
    "timeframe": "last_30_days",
    "filters": {
      "alert_name": "${n.title}*",
      "severity": ["high", "critical"]
    },
    "group_by": "day",
    "aggregation": "count"
  },
  "visualization": {
    "x_axis": "date",
    "y_axis": "alert_count",
    "color_scheme": "severity_based"
  }
}
\`\`\`

#### Detection Effectiveness Widget
\`\`\`json
{
  "widget_type": "gauge",
  "title": "Detection Accuracy",
  "data_source": "validation_data",
  "query": {
    "calculation": "(true_positives / (true_positives + false_positives)) * 100",
    "timeframe": "last_7_days"
  },
  "thresholds": {
    "green": "> 95%",
    "yellow": "85-95%", 
    "red": "< 85%"
  }
}
\`\`\`

### Implementation Steps
1. **Dashboard Layout Design**
   - Plan widget placement and sizing
   - Consider user workflow and priorities
   - Implement responsive design principles

2. **Data Source Configuration**
   - Connect to Cortex XSIAM APIs
   - Set up data refresh intervals
   - Configure data retention policies

3. **User Access and Permissions**
   - Define role-based access controls
   - Configure sharing and export permissions
   - Set up dashboard subscriptions

### Testing and Optimization
- Validate data accuracy and completeness
- Test dashboard performance with high data volumes
- Gather user feedback and iterate on design
      `,category:"dashboard_creation",estimatedDuration:60,validationRequired:!1,dependencies:["detection_engineering"]},{title:"Analyst Decision Support Workflow",description:"Develop decision trees and workflows to support analyst investigations",contentTemplate:`
## Decision Support Framework for ${n.title}
Create structured decision trees and workflows to guide analyst investigations and ensure consistent response quality.

### Decision Tree Structure
\`\`\`
Alert: ${n.title}
 Initial Triage (5 minutes)
    Verify alert accuracy
    Check for false positive indicators
    Assess immediate threat level
 Investigation Phase (15-30 minutes)
    Gather additional context
    Analyze attack progression
    Identify affected systems/users
 Response Decision (5 minutes)
     Escalate to Tier 2
     Initiate containment
     Monitor and document
\`\`\`

### Workflow Implementation

#### 1. Initial Triage Checklist
- [ ] **Alert Validation** (2 minutes)
  - Verify detection rule logic
  - Check for known false positive patterns
  - Confirm data source reliability

- [ ] **Threat Assessment** (3 minutes)
  - Review MITRE ATT&CK techniques
  - Assess attack sophistication
  - Evaluate potential business impact

#### 2. Investigation Procedures
\`\`\`markdown
**Data Collection (10 minutes)**
1. Gather logs from affected systems
2. Collect network traffic captures
3. Obtain process execution history
4. Review user authentication events

**Analysis Framework (15 minutes)**
1. Timeline reconstruction
2. Indicator of compromise (IoC) extraction
3. Attribution and campaign analysis
4. Impact assessment

**Correlation Analysis (5 minutes)**
1. Search for related alerts
2. Check threat intelligence feeds
3. Review historical incidents
4. Identify attack patterns
\`\`\`

#### 3. Decision Matrix
| Criteria | Low Risk | Medium Risk | High Risk |
|----------|----------|-------------|-----------|
| Asset Criticality | Non-critical | Important | Mission-critical |
| Data Sensitivity | Public | Internal | Confidential |
| Attack Sophistication | Basic | Intermediate | Advanced |
| Potential Impact | Minimal | Moderate | Severe |

**Action Matrix:**
- **Low Risk**: Monitor, document, routine response
- **Medium Risk**: Enhanced monitoring, stakeholder notification
- **High Risk**: Immediate escalation, emergency response

### Automation Support Tools

#### Decision Support Script
\`\`\`python
class DecisionSupport:
    def __init__(self, alert_data):
        self.alert = alert_data
        self.risk_score = 0
        
    def calculate_risk_score(self):
        """Calculate risk score based on multiple factors"""
        factors = {
            'asset_criticality': self.assess_asset_criticality(),
            'data_sensitivity': self.assess_data_sensitivity(),
            'attack_sophistication': self.assess_sophistication(),
            'potential_impact': self.assess_impact()
        }
        
        weights = {
            'asset_criticality': 0.3,
            'data_sensitivity': 0.25,
            'attack_sophistication': 0.25,
            'potential_impact': 0.2
        }
        
        self.risk_score = sum(factors[k] * weights[k] for k in factors)
        return self.risk_score
    
    def recommend_action(self):
        """Provide action recommendation based on risk score"""
        if self.risk_score >= 0.8:
            return "HIGH_PRIORITY_ESCALATION"
        elif self.risk_score >= 0.5:
            return "STANDARD_INVESTIGATION"
        else:
            return "ROUTINE_MONITORING"
\`\`\`

### Training and Documentation
- Create analyst training materials
- Develop decision tree quick reference guides
- Establish feedback mechanisms for process improvement
- Regular review and update of decision criteria
      `,category:"decision_support",estimatedDuration:75,validationRequired:!0,dependencies:["detection_engineering","layout_configuration"]},{title:"Response Plan Development",description:"Create comprehensive incident response plans and procedures",contentTemplate:`
## Incident Response Plan for ${n.title}
Develop comprehensive response procedures to effectively handle incidents related to ${n.description}.

### Response Framework Overview
\`\`\`
Incident Lifecycle:
Detection  Triage  Investigation  Containment  Eradication  Recovery  Lessons Learned
\`\`\`

### Immediate Response Procedures (0-30 minutes)

#### 1. Alert Reception and Initial Assessment
- **Notification Channels**: Email, SIEM alerts, phone escalation
- **Initial Response Team**: SOC Analyst, Shift Lead
- **Assessment Criteria**:
  - Threat severity and confidence level
  - Affected systems and user count
  - Potential business impact

#### 2. Containment Decision Matrix
| Severity | Affected Systems | Immediate Action | Timeline |
|----------|------------------|------------------|----------|
| Critical | Production | Emergency containment | 15 minutes |
| High | Multiple systems | Rapid isolation | 30 minutes |
| Medium | Single system | Controlled containment | 1 hour |
| Low | Monitoring only | Enhanced monitoring | 4 hours |

### Investigation Procedures (30 minutes - 4 hours)

#### Evidence Collection Checklist
- [ ] **System State Capture**
  - Memory dumps from affected systems
  - Disk images (if required)
  - Network packet captures
  - Process execution logs

- [ ] **Log Analysis**
  - Authentication logs (4 hours before/after)
  - Network flow data
  - Endpoint detection logs
  - Application logs

#### Forensic Analysis Framework
\`\`\`bash
# Automated evidence collection script
#!/bin/bash
CASE_ID="INC-$(date +%Y%m%d-%H%M%S)"
EVIDENCE_DIR="/tmp/evidence/$CASE_ID"

# Create evidence directory
mkdir -p "$EVIDENCE_DIR"

# Collect system information
systeminfo > "$EVIDENCE_DIR/systeminfo.txt"
netstat -an > "$EVIDENCE_DIR/network_connections.txt"
tasklist /svc > "$EVIDENCE_DIR/running_processes.txt"

# Collect logs
wevtutil qe Security /f:text > "$EVIDENCE_DIR/security_logs.txt"
wevtutil qe System /f:text > "$EVIDENCE_DIR/system_logs.txt"

echo "Evidence collected in: $EVIDENCE_DIR"
\`\`\`

### Containment Strategies

#### Network-Based Containment
1. **Firewall Rules**
   - Block malicious IP addresses
   - Restrict network communication
   - Isolate affected subnets

2. **DNS Blocking**
   - Block malicious domains
   - Implement DNS sinkholing
   - Update threat intelligence feeds

#### Endpoint-Based Containment
1. **Process Termination**
   - Kill malicious processes
   - Remove persistence mechanisms
   - Clear malicious scheduled tasks

2. **System Isolation**
   - Network isolation
   - User account lockdown
   - Service termination

### Communication Plan

#### Internal Communications
- **Immediate**: SOC Team, Security Management
- **1 Hour**: IT Operations, Business Stakeholders
- **4 Hours**: Executive Leadership (if high impact)
- **24 Hours**: Legal, Compliance, HR (if data breach)

#### External Communications
- **Regulatory**: Data protection authorities (72 hours)
- **Law Enforcement**: If criminal activity suspected
- **Customers/Partners**: If external impact confirmed
- **Media**: Coordinated through communications team

### Recovery Procedures

#### System Restoration Checklist
- [ ] Verify threat eradication
- [ ] Apply security patches
- [ ] Reset compromised credentials
- [ ] Restore from clean backups
- [ ] Implement additional monitoring
- [ ] Conduct penetration testing

#### Business Continuity
- Activate backup systems and processes
- Communicate with affected customers
- Monitor for service disruption
- Coordinate with business units

### Post-Incident Activities

#### Lessons Learned Session
- **Participants**: Response team, stakeholders, management
- **Agenda**:
  - Timeline review and analysis
  - Response effectiveness assessment
  - Process improvement recommendations
  - Tool and technology gaps identified

#### Documentation Requirements
- Detailed incident timeline
- Evidence collection and analysis reports
- Response actions taken and their effectiveness
- Recommendations for prevention and improvement

### Response Plan Testing
- Quarterly tabletop exercises
- Annual full-scale simulations
- Regular plan review and updates
- Team training and certification maintenance
      `,category:"response_planning",estimatedDuration:120,validationRequired:!0,dependencies:["detection_engineering","layout_configuration"]},{title:"XSOAR Automation Playbook Development",description:"Create comprehensive automation playbooks for triage, investigation, response, containment, and resiliency",contentTemplate:`
## XSOAR Playbook Development for ${n.title}
Create comprehensive automation playbooks to streamline incident response and reduce manual effort.

### Playbook Architecture Overview
\`\`\`
Main Playbook: ${n.title}_Master
 Sub-Playbook: Triage_Automation
 Sub-Playbook: Investigation_Automation  
 Sub-Playbook: Response_Automation
 Sub-Playbook: Containment_Automation
 Sub-Playbook: Resiliency_Automation
\`\`\`

### 1. Triage Automation Playbook

#### Playbook Flow
\`\`\`yaml
name: "${n.title}_Triage"
description: "Automated triage for ${n.title} alerts"

tasks:
  - name: "Enrich Alert Data"
    type: "builtin"
    script: "enrichment"
    inputs:
      - indicators: "\${incident.indicators}"
      - sources: ["VirusTotal", "ThreatExchange", "Internal_TI"]
    
  - name: "Asset Criticality Check"
    type: "conditional"
    condition: "\${asset.criticality} in ['HIGH', 'CRITICAL']"
    
  - name: "False Positive Check"
    type: "script"
    script: "fp_checker"
    inputs:
      - alert_data: "\${incident.rawJSON}"
      - whitelist: "\${context.whitelist}"
    
  - name: "Severity Calculation"
    type: "script"
    script: "calculate_severity"
    outputs:
      - calculated_severity: "\${outputs.severity}"
      - confidence_score: "\${outputs.confidence}"
\`\`\`

#### Custom Scripts
\`\`\`python
# False Positive Checker Script
def fp_checker(alert_data, whitelist):
    """Check for known false positive patterns"""
    fp_indicators = []
    
    # Check against whitelist
    for indicator in alert_data.get('indicators', []):
        if indicator['value'] in whitelist:
            fp_indicators.append(indicator)
    
    # Check for known FP patterns
    fp_patterns = [
        r'legitimate_admin_tool.exe',
        r'windows\\\\system32\\\\svchost.exe',
        r'scheduled_backup_.*'
    ]
    
    for pattern in fp_patterns:
        if re.search(pattern, str(alert_data)):
            return {"is_false_positive": True, "reason": f"Matches pattern: {pattern}"}
    
    return {"is_false_positive": False, "confidence": 0.9}
\`\`\`

### 2. Investigation Automation Playbook

#### Data Collection Tasks
\`\`\`yaml
tasks:
  - name: "Collect Host Information"
    type: "integration"
    integration: "CortexXDR"
    command: "xdr-get-endpoints"
    inputs:
      - hostname: "\${incident.hostname}"
    
  - name: "Gather Network Data"
    type: "integration"
    integration: "Splunk"
    command: "splunk-search"
    inputs:
      - query: "index=network src=\${incident.src_ip} | head 100"
      - earliest_time: "-4h"
    
  - name: "Threat Intelligence Lookup"
    type: "integration"
    integration: "ThreatExchange"
    command: "threatexchange-query"
    inputs:
      - indicator: "\${incident.indicators}"
\`\`\`

#### Analysis and Correlation
\`\`\`python
# Timeline Reconstruction Script
def build_timeline(host_data, network_data, auth_logs):
    """Create chronological timeline of events"""
    events = []
    
    # Process host events
    for event in host_data:
        events.append({
            'timestamp': event['timestamp'],
            'source': 'endpoint',
            'description': event['description'],
            'severity': event.get('severity', 'info')
        })
    
    # Process network events
    for event in network_data:
        events.append({
            'timestamp': event['timestamp'],
            'source': 'network',
            'description': f"Network connection: {event['src']} -> {event['dst']}",
            'severity': 'info'
        })
    
    # Sort by timestamp
    timeline = sorted(events, key=lambda x: x['timestamp'])
    
    return timeline
\`\`\`

### 3. Response Automation Playbook

#### Notification and Escalation
\`\`\`yaml
tasks:
  - name: "Notify SOC Team"
    type: "integration"
    integration: "Slack"
    command: "send-notification"
    inputs:
      - channel: "#soc-alerts"
      - message: "High severity incident: \${incident.name}"
      - urgency: "\${incident.severity}"
    
  - name: "Create ServiceNow Ticket"
    type: "integration"
    integration: "ServiceNow"
    command: "servicenow-create-ticket"
    inputs:
      - category: "Security Incident"
      - priority: "\${incident.severity}"
      - description: "\${incident.details}"
    
  - name: "Escalation Decision"
    type: "conditional"
    condition: "\${incident.severity} in ['HIGH', 'CRITICAL']"
    true_path: "escalate_to_manager"
    false_path: "standard_response"
\`\`\`

### 4. Containment Automation Playbook

#### Network Containment
\`\`\`yaml
tasks:
  - name: "Block Malicious IPs"
    type: "integration"
    integration: "PaloAltoFirewall"
    command: "panorama-block-ip"
    inputs:
      - ip_addresses: "\${incident.malicious_ips}"
      - rule_name: "Auto_Block_\${incident.id}"
    
  - name: "DNS Blocking"
    type: "integration"
    integration: "Infoblox"
    command: "infoblox-create-rpz-rule"
    inputs:
      - fqdn: "\${incident.malicious_domains}"
      - action: "block"
\`\`\`

#### Endpoint Containment
\`\`\`yaml
tasks:
  - name: "Isolate Endpoint"
    type: "integration"
    integration: "CortexXDR"
    command: "xdr-isolate-endpoint"
    inputs:
      - endpoint_id: "\${incident.endpoint_id}"
      - isolation_type: "full"
    
  - name: "Terminate Processes"
    type: "integration"
    integration: "CortexXDR"
    command: "xdr-kill-process"
    inputs:
      - endpoint_id: "\${incident.endpoint_id}"
      - process_name: "\${incident.malicious_process}"
\`\`\`

### 5. Resiliency Automation Playbook

#### Recovery Operations
\`\`\`yaml
tasks:
  - name: "Verify Threat Removal"
    type: "script"
    script: "verify_cleanup"
    inputs:
      - endpoint_id: "\${incident.endpoint_id}"
      - indicators: "\${incident.indicators}"
    
  - name: "Apply Security Patches"
    type: "integration"
    integration: "WSUS"
    command: "wsus-install-updates"
    inputs:
      - computer_group: "affected_systems"
      - update_classification: "Security Updates"
    
  - name: "Reset Compromised Credentials"
    type: "integration"
    integration: "ActiveDirectory"
    command: "ad-reset-password"
    inputs:
      - username: "\${incident.affected_users}"
      - force_change: true
\`\`\`

#### Monitoring Enhancement
\`\`\`python
# Enhanced Monitoring Script
def deploy_additional_monitoring(endpoint_id, threat_type):
    """Deploy additional monitoring based on threat type"""
    
    monitoring_rules = {
        'credential_theft': [
            'monitor_lsass_access',
            'monitor_kerberos_anomalies',
            'monitor_privilege_escalation'
        ],
        'lateral_movement': [
            'monitor_rdp_connections',
            'monitor_smb_enumeration',
            'monitor_process_injection'
        ],
        'data_exfiltration': [
            'monitor_large_transfers',
            'monitor_dns_tunneling',
            'monitor_compression_tools'
        ]
    }
    
    rules = monitoring_rules.get(threat_type, [])
    
    for rule in rules:
        deploy_monitoring_rule(endpoint_id, rule)
    
    return f"Deployed {len(rules)} additional monitoring rules"
\`\`\`

### Playbook Testing and Validation

#### Test Scenarios
1. **Unit Testing**: Individual task validation
2. **Integration Testing**: Cross-system functionality
3. **End-to-End Testing**: Complete playbook execution
4. **Performance Testing**: Response time validation

#### Metrics and KPIs
- **Mean Time to Detection (MTTD)**: < 15 minutes
- **Mean Time to Response (MTTR)**: < 1 hour
- **Automation Coverage**: > 80% of tasks automated
- **False Positive Rate**: < 5%

### Maintenance and Updates
- Monthly playbook review and optimization
- Quarterly threat landscape updates
- Annual comprehensive testing and validation
- Continuous integration with new security tools
      `,category:"automation_playbook",estimatedDuration:180,validationRequired:!0,dependencies:["response_planning","script_development"]},{title:"Learning Summary and Outcomes Assessment",description:"Document lessons learned and assess training effectiveness",contentTemplate:`
## Training Summary for ${n.title}

### Learning Objectives Review
Evaluate achievement of training objectives and document key takeaways.

#### Objective Assessment
| Objective | Target | Achieved | Comments |
|-----------|--------|----------|----------|
| Threat Understanding | 100% | ___% | Understanding of ${n.title} threat landscape |
| Detection Capability | 95% accuracy | ___% | Detection rule effectiveness and tuning |
| Response Procedures | < 1 hour MTTR | ___ hours | Incident response time achievement |
| Process Documentation | Complete | ___% | Documentation completeness and quality |

### Key Learning Outcomes

#### Technical Skills Developed
- **Detection Engineering**: Created ${n.category} detection rules with XQL
- **Incident Response**: Developed comprehensive response procedures
- **Automation**: Built XSOAR playbooks for ${n.title} scenarios
- **Forensic Analysis**: Performed evidence collection and timeline reconstruction

#### Operational Improvements
- **Process Optimization**: Streamlined investigation workflows
- **Tool Integration**: Enhanced SIEM and SOAR integration
- **Team Coordination**: Improved cross-functional collaboration
- **Documentation**: Created standardized response procedures

#### Security Posture Enhancement
- **Coverage Expansion**: Added detection for ${n.description}
- **Response Capability**: Reduced manual effort through automation
- **Threat Intelligence**: Integrated new IoCs and TTPs
- **Monitoring Enhancement**: Improved visibility into ${n.category} threats

### Metrics and Performance Data

#### Detection Effectiveness
\`\`\`
True Positives: ___ 
False Positives: ___
True Negatives: ___
False Negatives: ___

Precision: ___% (TP / (TP + FP))
Recall: ___% (TP / (TP + FN))
F1 Score: ___% (2 * Precision * Recall / (Precision + Recall))
\`\`\`

#### Response Performance
- **Initial Response Time**: ___ minutes (Target: < 15 minutes)
- **Investigation Time**: ___ minutes (Target: < 60 minutes)
- **Containment Time**: ___ minutes (Target: < 30 minutes)
- **Resolution Time**: ___ hours (Target: < 4 hours)

#### Automation Success Rate
- **Playbook Execution Success**: ___%
- **Manual Intervention Required**: ___%
- **Time Saved Through Automation**: ___ hours per incident

### Challenges and Solutions

#### Technical Challenges
1. **Challenge**: [Describe technical difficulty encountered]
   - **Impact**: [Effect on training or detection capability]
   - **Solution**: [How it was resolved]
   - **Lessons Learned**: [Key takeaways for future]

2. **Challenge**: [Another technical challenge]
   - **Impact**: [Effect description]
   - **Solution**: [Resolution approach]
   - **Lessons Learned**: [Insights gained]

#### Process Challenges
1. **Challenge**: [Process or workflow issue]
   - **Impact**: [Effect on operations]
   - **Solution**: [Process improvement implemented]
   - **Lessons Learned**: [Process insights]

### Recommendations for Improvement

#### Short-term (1-3 months)
- [ ] **Detection Tuning**: Refine detection rules to reduce false positives
- [ ] **Documentation Updates**: Enhance response procedures based on lessons learned
- [ ] **Team Training**: Conduct additional training on identified knowledge gaps
- [ ] **Tool Integration**: Improve integration between security tools

#### Medium-term (3-6 months)
- [ ] **Advanced Analytics**: Implement machine learning for improved detection
- [ ] **Threat Hunting**: Develop proactive hunting procedures for this threat type
- [ ] **Red Team Exercises**: Conduct adversarial testing of detection capabilities
- [ ] **Cross-team Training**: Extend training to other security teams

#### Long-term (6-12 months)
- [ ] **Technology Upgrades**: Evaluate and implement new security technologies
- [ ] **Process Automation**: Expand automation to cover additional use cases
- [ ] **Maturity Assessment**: Conduct comprehensive security maturity evaluation
- [ ] **Industry Sharing**: Share lessons learned with security community

### Knowledge Transfer Plan

#### Documentation Deliverables
- [ ] **Detection Rule Library**: Documented and tested detection rules
- [ ] **Response Playbooks**: Step-by-step incident response procedures
- [ ] **Training Materials**: Reusable training content for future engineers
- [ ] **Lessons Learned Report**: Comprehensive summary of insights and recommendations

#### Training Materials Created
- Detection rule development guide
- Incident response quick reference
- XSOAR playbook documentation
- Troubleshooting and FAQ guide

#### Mentoring and Knowledge Sharing
- **Peer Training Sessions**: Conduct sessions with other team members
- **Documentation Review**: Ensure all procedures are clearly documented
- **Best Practices Guide**: Create guide for similar future training
- **Community Contribution**: Share anonymized insights with security community

### Continuous Improvement Framework

#### Regular Review Process
- **Weekly**: Review detection effectiveness and false positive rates
- **Monthly**: Assess response time metrics and process efficiency
- **Quarterly**: Comprehensive review of detection coverage and gaps
- **Annually**: Full training program evaluation and enhancement

#### Feedback Mechanisms
- **Incident Reviews**: Post-incident analysis and improvement identification
- **Team Retrospectives**: Regular team discussions on process improvements
- **Stakeholder Feedback**: Input from business stakeholders and other teams
- **External Benchmarking**: Compare performance against industry standards

### Certification and Validation

#### Skills Validation
- [ ] **Practical Assessment**: Demonstrate detection rule creation
- [ ] **Scenario Testing**: Successfully respond to simulated incidents
- [ ] **Documentation Review**: Validate completeness and accuracy
- [ ] **Peer Review**: Technical review by senior team members

#### Certification Criteria Met
- [ ] Successfully created functional detection rules
- [ ] Demonstrated incident response capability
- [ ] Completed all training modules and assessments
- [ ] Documented lessons learned and recommendations

### Next Steps and Career Development

#### Recommended Follow-up Training
- Advanced threat hunting techniques
- Additional MITRE ATT&CK techniques
- Specialized tools and technologies
- Leadership and communication skills

#### Career Progression Opportunities
- Subject matter expert for ${n.category} threats
- Training program developer and instructor
- Advanced threat researcher and analyst
- Security team leadership roles

This completes the comprehensive training path for ${n.title}. All learning objectives have been addressed through hands-on experience, practical application, and documented knowledge transfer.
      `,category:"learning_summary",estimatedDuration:60,validationRequired:!1,dependencies:["automation_playbook"]}],...e].map((o,l)=>{let u=o.contentTemplate;if(o.category==="detection_engineering"){const d=generateCategorySpecificXQLQuery(n.title,n.category,n.description);u+=`

### Custom XQL Detection Rule
\`\`\`xql
${d}
\`\`\`
`}if(o.category==="layout_configuration"){const d=O6(n.title,n.category);u+=`

### Alert Layout Configuration
\`\`\`json
${d}
\`\`\`
`}if(o.category==="automation_engineering"){const d=V6(n.title,n.category);u+=`

### Response Playbook
\`\`\`yaml
${d}
\`\`\`
`}if(o.category==="script_development"){const d=U6(n.title,"automation");u+=`

### Custom Automation Script
\`\`\`yaml
${d}
\`\`\`
`}return t&&(u+=K6(n)),{id:`step_${l+1}`,title:o.title,description:o.description,content:u,order:l+1,category:o.category,estimatedDuration:o.estimatedDuration,completed:!1,validationRequired:o.validationRequired,dependencies:o.dependencies||[]}}),a=r.reduce((o,l)=>o+l.estimatedDuration,0);return{id:`training_${n.id}`,useCaseId:n.id,title:`Complete Training Path: ${n.title}`,description:`Comprehensive step-by-step training for developing detection and response capabilities for ${n.title}`,totalDuration:a,steps:r,progress:0,status:"not_started",createdAt:new Date,updatedAt:new Date}}function q6(n,e){const t=[],s=[];if((!n.content||n.content.trim().length<100)&&(t.push("Step content is insufficient or missing"),s.push("Expand step content with detailed procedures and examples")),n.dependencies&&n.dependencies.length>0){const i=n.dependencies.filter(r=>{var a;return!((a=e.completedSteps)!=null&&a.includes(r))});i.length>0&&(t.push(`Incomplete dependencies: ${i.join(", ")}`),s.push("Complete prerequisite steps before proceeding"))}switch(n.category){case"detection_engineering":!n.content.includes("XQL")&&!n.content.includes("query")&&(t.push("Detection engineering step should include query examples"),s.push("Add sample detection queries and rule logic"));break;case"automation_playbook":!n.content.includes("playbook")&&!n.content.includes("XSOAR")&&(t.push("Automation step should include playbook details"),s.push("Include XSOAR playbook configuration and scripts"));break;case"environment_buildout":!n.content.includes("install")&&!n.content.includes("configure")&&(t.push("Environment setup should include installation steps"),s.push("Add detailed installation and configuration procedures"));break}return{isValid:t.length===0,issues:t,recommendations:s}}function G6(n){const e=["llm","large language model","ai","artificial intelligence","chatbot","prompt injection","model poisoning","data leakage","insecure output handling","overreliance","inadequate sandboxing","unauthorized code execution","ssrf","overreliance on llm","training data poisoning","model theft","supply chain vulnerabilities","sensitive information disclosure","excessive agency","hallucination","bias","fairness","adversarial inputs","model inversion","membership inference","gradient leakage","backdoor attacks"],t=n.toLowerCase();return e.some(s=>t.includes(s))}function K6(n){const e=X6(),t=e.filter(s=>s.keywords.some(i=>n.description.toLowerCase().includes(i.toLowerCase())));return t.length===0&&t.push(e[0]),`

## AI/LLM Security Considerations (OWASP Top 10 for LLMs)

Based on the OWASP Top 10 for Large Language Model Applications, the following AI-specific threats should be considered:

${t.map(s=>`
### ${s.id}: ${s.name}

**Description:** ${s.description}

**Detection Strategies:**
${s.detectionStrategies.map(i=>`- ${i}`).join(`
`)}

**XQL Query Examples:**
\`\`\`xql
${s.xqlExample}
\`\`\`

**Mitigation Techniques:**
${s.mitigations.map(i=>`- ${i}`).join(`
`)}

**Training Lab Setup:**
${s.labSetup}

---
`).join("")}

### AI Threat Hunting Queries

\`\`\`xql
// Hunt for potential prompt injection attempts
config case_sensitive = false timeframe between "7 days ago" and "now"
| dataset = xdr_data
| filter action_process_command_line ~= "prompt|inject|system|role|assistant"
| comp count() as injection_attempts by endpoint_name, action_process_command_line
| sort desc injection_attempts

// Monitor for AI model access anomalies
config case_sensitive = false timeframe between "24 hours ago" and "now"
| dataset = xdr_network
| filter action_remote_port in (443, 80, 8080) and action_remote_ip ~= "api\\.openai\\.com|anthropic\\.com|huggingface\\.co"
| comp count() as api_calls by endpoint_name, action_remote_ip
| sort desc api_calls
\`\`\`

### Validation Criteria for AI Threats
- [ ] Verify detection rules catch prompt injection patterns
- [ ] Test for unauthorized model access attempts
- [ ] Validate data exfiltration through AI APIs
- [ ] Confirm monitoring of training data integrity
- [ ] Check for model output manipulation detection
`}function X6(){return[{id:"LLM01",name:"Prompt Injection",description:"Manipulating LLMs through crafted inputs that cause the model to execute unintended actions or reveal sensitive information.",keywords:["prompt","injection","jailbreak","system prompt","role manipulation"],detectionStrategies:["Monitor for unusual prompt patterns in user inputs","Detect attempts to manipulate system prompts","Track unauthorized role or persona changes","Identify attempts to extract system instructions"],xqlExample:`// Detect potential prompt injection attempts
config case_sensitive = false timeframe between "24 hours ago" and "now"
| dataset = xdr_data
| filter action_process_command_line ~= "ignore previous|system prompt|you are now|jailbreak"
| comp count() as injection_attempts by endpoint_name, action_process_command_line`,mitigations:["Implement input validation and sanitization","Use prompt templates with parameter binding","Deploy content filtering and monitoring","Implement output validation before display"],labSetup:"Set up a controlled AI application with monitoring to test prompt injection detection capabilities."},{id:"LLM02",name:"Insecure Output Handling",description:"Insufficient validation, sanitization, and handling of LLM outputs before passing them to downstream systems.",keywords:["output","validation","sanitization","xss","injection"],detectionStrategies:["Monitor for malicious scripts in LLM outputs","Detect code injection attempts through AI responses","Track unauthorized command execution from AI outputs","Identify XSS attempts in web-facing AI applications"],xqlExample:`// Monitor for potentially malicious LLM outputs
config case_sensitive = false timeframe between "24 hours ago" and "now"
| dataset = xdr_data  
| filter action_process_command_line ~= "<script>|javascript:|eval\\(|exec\\("
| comp count() as malicious_outputs by endpoint_name, action_process_command_line`,mitigations:["Validate and sanitize all LLM outputs","Implement proper encoding for web contexts","Use parameterized queries for database operations","Deploy content security policies"],labSetup:"Create test scenarios with AI outputs containing various injection payloads to verify detection."},{id:"LLM03",name:"Training Data Poisoning",description:"Manipulation of training data or fine-tuning processes to introduce vulnerabilities or biases into the model.",keywords:["training","poisoning","backdoor","data integrity","model corruption"],detectionStrategies:["Monitor training data sources for integrity","Detect unauthorized modifications to datasets","Track unusual model behavior patterns","Identify potential backdoor triggers in outputs"],xqlExample:`// Monitor training data access and modifications
config case_sensitive = false timeframe between "7 days ago" and "now"
| dataset = xdr_data
| filter action_file_path ~= "training|dataset|model" and action_file_md5 != ""
| comp count() as file_modifications by endpoint_name, action_file_path`,mitigations:["Implement data provenance tracking","Use cryptographic signatures for training data","Deploy model behavior monitoring","Implement adversarial testing"],labSetup:"Set up monitoring for training pipeline integrity and model behavior anomalies."}]}var E1="Progress",T1=100,[Y6,G8]=Lr(E1),[Q6,Z6]=Y6(E1),uj=C.forwardRef((n,e)=>{const{__scopeProgress:t,value:s=null,max:i,getValueLabel:r=J6,...a}=n;(i||i===0)&&!$E(i)&&console.error(eW(`${i}`,"Progress"));const o=$E(i)?i:T1;s!==null&&!VE(s,o)&&console.error(tW(`${s}`,"Progress"));const l=VE(s,o)?s:null,u=kx(l)?r(l,o):void 0;return h.jsx(Q6,{scope:t,value:l,max:o,children:h.jsx(be.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":kx(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":fj(l,o),"data-value":l??void 0,"data-max":o,...a,ref:e})})});uj.displayName=E1;var dj="ProgressIndicator",hj=C.forwardRef((n,e)=>{const{__scopeProgress:t,...s}=n,i=Z6(dj,t);return h.jsx(be.div,{"data-state":fj(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...s,ref:e})});hj.displayName=dj;function J6(n,e){return`${Math.round(n/e*100)}%`}function fj(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function kx(n){return typeof n=="number"}function $E(n){return kx(n)&&!isNaN(n)&&n>0}function VE(n,e){return kx(n)&&!isNaN(n)&&n<=e&&n>=0}function eW(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${T1}\`.`}function tW(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${T1} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var pj=uj,nW=hj;const Dw=C.forwardRef(({className:n,value:e,...t},s)=>h.jsx(pj,{ref:s,className:Te("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:h.jsx(nW,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Dw.displayName=pj.displayName;var P1="Checkbox",[sW,K8]=Lr(P1),[iW,rW]=sW(P1),mj=C.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:s,checked:i,defaultChecked:r,required:a,disabled:o,value:l="on",onCheckedChange:u,form:d,...f}=n,[p,y]=C.useState(null),g=rt(e,S=>y(S)),m=C.useRef(!1),w=p?d||!!p.closest("form"):!0,[v=!1,x]=vu({prop:i,defaultProp:r,onChange:u}),_=C.useRef(v);return C.useEffect(()=>{const S=p==null?void 0:p.form;if(S){const E=()=>x(_.current);return S.addEventListener("reset",E),()=>S.removeEventListener("reset",E)}},[p,x]),h.jsxs(iW,{scope:t,state:v,disabled:o,children:[h.jsx(be.button,{type:"button",role:"checkbox","aria-checked":dl(v)?"mixed":v,"aria-required":a,"data-state":vj(v),"data-disabled":o?"":void 0,disabled:o,value:l,...f,ref:g,onKeyDown:fe(n.onKeyDown,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:fe(n.onClick,S=>{x(E=>dl(E)?!0:!E),w&&(m.current=S.isPropagationStopped(),m.current||S.stopPropagation())})}),w&&h.jsx(aW,{control:p,bubbles:!m.current,name:s,value:l,checked:v,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"},defaultChecked:dl(r)?!1:r})]})});mj.displayName=P1;var gj="CheckboxIndicator",yj=C.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:s,...i}=n,r=rW(gj,t);return h.jsx(Nl,{present:s||dl(r.state)||r.state===!0,children:h.jsx(be.span,{"data-state":vj(r.state),"data-disabled":r.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...n.style}})})});yj.displayName=gj;var aW=n=>{const{control:e,checked:t,bubbles:s=!0,defaultChecked:i,...r}=n,a=C.useRef(null),o=g2(t),l=WR(e);C.useEffect(()=>{const d=a.current,f=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(f,"checked").set;if(o!==t&&y){const g=new Event("click",{bubbles:s});d.indeterminate=dl(t),y.call(d,dl(t)?!1:t),d.dispatchEvent(g)}},[o,t,s]);const u=C.useRef(dl(t)?!1:t);return h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??u.current,...r,tabIndex:-1,ref:a,style:{...n.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function dl(n){return n==="indeterminate"}function vj(n){return dl(n)?"indeterminate":n?"checked":"unchecked"}var xj=mj,oW=yj;const ns=C.forwardRef(({className:n,...e},t)=>h.jsx(xj,{ref:t,className:Te("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:h.jsx(oW,{className:Te("flex items-center justify-center text-current"),children:h.jsx(vR,{className:"h-4 w-4"})})}));ns.displayName=xj.displayName;const lW=zg("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),FS=C.forwardRef(({className:n,variant:e,...t},s)=>h.jsx("div",{ref:s,role:"alert",className:Te(lW({variant:e}),n),...t}));FS.displayName="Alert";const cW=C.forwardRef(({className:n,...e},t)=>h.jsx("h5",{ref:t,className:Te("mb-1 font-medium leading-none tracking-tight",n),...e}));cW.displayName="AlertTitle";const $S=C.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Te("text-sm [&_p]:leading-relaxed",n),...e}));$S.displayName="AlertDescription";var N1="Dialog",[wj,X8]=Lr(N1),[uW,Gi]=wj(N1),bj=n=>{const{__scopeDialog:e,children:t,open:s,defaultOpen:i,onOpenChange:r,modal:a=!0}=n,o=C.useRef(null),l=C.useRef(null),[u=!1,d]=vu({prop:s,defaultProp:i,onChange:r});return h.jsx(uW,{scope:e,triggerRef:o,contentRef:l,contentId:ul(),titleId:ul(),descriptionId:ul(),open:u,onOpenChange:d,onOpenToggle:C.useCallback(()=>d(f=>!f),[d]),modal:a,children:t})};bj.displayName=N1;var _j="DialogTrigger",dW=C.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Gi(_j,t),r=rt(e,i.triggerRef);return h.jsx(be.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":D1(i.open),...s,ref:r,onClick:fe(n.onClick,i.onOpenToggle)})});dW.displayName=_j;var R1="DialogPortal",[hW,Sj]=wj(R1,{forceMount:void 0}),Aj=n=>{const{__scopeDialog:e,forceMount:t,children:s,container:i}=n,r=Gi(R1,e);return h.jsx(hW,{scope:e,forceMount:t,children:C.Children.map(s,a=>h.jsx(Nl,{present:t||r.open,children:h.jsx(dw,{asChild:!0,container:i,children:a})}))})};Aj.displayName=R1;var Ex="DialogOverlay",Cj=C.forwardRef((n,e)=>{const t=Sj(Ex,n.__scopeDialog),{forceMount:s=t.forceMount,...i}=n,r=Gi(Ex,n.__scopeDialog);return r.modal?h.jsx(Nl,{present:s||r.open,children:h.jsx(pW,{...i,ref:e})}):null});Cj.displayName=Ex;var fW=tf("DialogOverlay.RemoveScroll"),pW=C.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Gi(Ex,t);return h.jsx(C1,{as:fW,allowPinchZoom:!0,shards:[i.contentRef],children:h.jsx(be.div,{"data-state":D1(i.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),Tu="DialogContent",kj=C.forwardRef((n,e)=>{const t=Sj(Tu,n.__scopeDialog),{forceMount:s=t.forceMount,...i}=n,r=Gi(Tu,n.__scopeDialog);return h.jsx(Nl,{present:s||r.open,children:r.modal?h.jsx(mW,{...i,ref:e}):h.jsx(gW,{...i,ref:e})})});kj.displayName=Tu;var mW=C.forwardRef((n,e)=>{const t=Gi(Tu,n.__scopeDialog),s=C.useRef(null),i=rt(e,t.contentRef,s);return C.useEffect(()=>{const r=s.current;if(r)return v2(r)},[]),h.jsx(Ej,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:fe(n.onCloseAutoFocus,r=>{var a;r.preventDefault(),(a=t.triggerRef.current)==null||a.focus()}),onPointerDownOutside:fe(n.onPointerDownOutside,r=>{const a=r.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&r.preventDefault()}),onFocusOutside:fe(n.onFocusOutside,r=>r.preventDefault())})}),gW=C.forwardRef((n,e)=>{const t=Gi(Tu,n.__scopeDialog),s=C.useRef(!1),i=C.useRef(!1);return h.jsx(Ej,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var a,o;(a=n.onCloseAutoFocus)==null||a.call(n,r),r.defaultPrevented||(s.current||(o=t.triggerRef.current)==null||o.focus(),r.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:r=>{var l,u;(l=n.onInteractOutside)==null||l.call(n,r),r.defaultPrevented||(s.current=!0,r.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=r.target;((u=t.triggerRef.current)==null?void 0:u.contains(a))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&i.current&&r.preventDefault()}})}),Ej=C.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:r,...a}=n,o=Gi(Tu,t),l=C.useRef(null),u=rt(e,l);return p2(),h.jsxs(h.Fragment,{children:[h.jsx(A1,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:r,children:h.jsx(Vg,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":D1(o.open),...a,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(yW,{titleId:o.titleId}),h.jsx(xW,{contentRef:l,descriptionId:o.descriptionId})]})]})}),I1="DialogTitle",Tj=C.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Gi(I1,t);return h.jsx(be.h2,{id:i.titleId,...s,ref:e})});Tj.displayName=I1;var Pj="DialogDescription",Nj=C.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Gi(Pj,t);return h.jsx(be.p,{id:i.descriptionId,...s,ref:e})});Nj.displayName=Pj;var Rj="DialogClose",Ij=C.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=Gi(Rj,t);return h.jsx(be.button,{type:"button",...s,ref:e,onClick:fe(n.onClick,()=>i.onOpenChange(!1))})});Ij.displayName=Rj;function D1(n){return n?"open":"closed"}var Dj="DialogTitleWarning",[Y8,Mj]=$$(Dj,{contentName:Tu,titleName:I1,docsSlug:"dialog"}),yW=({titleId:n})=>{const e=Mj(Dj),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return C.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},vW="DialogDescriptionWarning",xW=({contentRef:n,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Mj(vW).contentName}}.`;return C.useEffect(()=>{var r;const i=(r=n.current)==null?void 0:r.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(s))},[s,n,e]),null},wW=bj,bW=Aj,jj=Cj,Lj=kj,Oj=Tj,Fj=Nj,_W=Ij;const $j=wW,SW=bW,Vj=C.forwardRef(({className:n,...e},t)=>h.jsx(jj,{ref:t,className:Te("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));Vj.displayName=jj.displayName;const M1=C.forwardRef(({className:n,children:e,...t},s)=>h.jsxs(SW,{children:[h.jsx(Vj,{}),h.jsxs(Lj,{ref:s,className:Te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,h.jsxs(_W,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(_d,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));M1.displayName=Lj.displayName;const j1=({className:n,...e})=>h.jsx("div",{className:Te("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});j1.displayName="DialogHeader";const L1=C.forwardRef(({className:n,...e},t)=>h.jsx(Oj,{ref:t,className:Te("text-lg font-semibold leading-none tracking-tight",n),...e}));L1.displayName=Oj.displayName;const Bj=C.forwardRef(({className:n,...e},t)=>h.jsx(Fj,{ref:t,className:Te("text-sm text-muted-foreground",n),...e}));Bj.displayName=Fj.displayName;function AW(n,e){const t=CW(n,e);return{id:`lab_buildout_${n.id}_${Date.now()}`,useCaseId:n.id,title:`Lab Buildout: ${n.title}`,description:`Comprehensive step-by-step lab infrastructure setup and validation for ${n.title}`,totalDuration:t.reduce((s,i)=>s+i.estimatedDuration,0),steps:t.map(s=>({id:s.id,title:s.title,description:s.description,content:tq(s),category:s.category,estimatedDuration:s.estimatedDuration,completed:!1,validationRequired:!0,dependencies:s.prerequisites,metadata:{validationCriteria:s.validationCriteria,troubleshooting:s.troubleshooting,relatedComponents:s.relatedComponents}})),progress:0,status:"not_started",createdAt:new Date,updatedAt:new Date}}function CW(n,e){const t=[];return t.push({id:"infra_planning",title:"Infrastructure Planning and Assessment",description:"Assess current infrastructure and plan lab deployment architecture",category:"environment_buildout",estimatedDuration:45,prerequisites:["network_access","admin_credentials"],instructions:kW(n,e),validationCriteria:["Network topology documented","Resource requirements calculated","Security boundaries defined","Deployment timeline established"],troubleshooting:["If network assessment fails, verify administrative access","For resource constraints, consider cloud deployment options","Contact network team for firewall rule requirements"],relatedComponents:["network","compute","storage","security"]}),t.push({id:"tenant_setup",title:"Cortex Tenant Configuration",description:"Configure Cortex tenant with appropriate licenses and settings",category:"environment_buildout",estimatedDuration:30,prerequisites:["cortex_tenant_access","license_keys"],instructions:EW(n,e),validationCriteria:["Tenant accessible and responsive","Licenses properly allocated","User accounts configured","Initial policies applied"],troubleshooting:["For login issues, verify SSO configuration","If licenses missing, contact Palo Alto support","For policy errors, check role permissions"],relatedComponents:["tenant","licenses","users","policies"]}),t.push({id:"data_integration",title:"Data Source Integration Setup",description:"Configure and validate data source integrations based on use case requirements",category:"environment_buildout",estimatedDuration:90,prerequisites:["tenant_setup","source_access"],instructions:TW(n),validationCriteria:["All required data sources connected","Data ingestion functioning properly","Field mapping validated","Data volume within expected range"],troubleshooting:["For connection errors, verify API credentials","If data missing, check source configuration","For parsing issues, review field mappings"],relatedComponents:["brokers","engines","apis","parsers"]}),n.category==="endpoint"&&t.push({id:"agent_deployment",title:"Cortex XDR Agent Deployment",description:"Deploy and configure Cortex XDR agents on target endpoints",category:"environment_buildout",estimatedDuration:60,prerequisites:["endpoint_access","deployment_package"],instructions:PW(),validationCriteria:["Agents successfully installed","Agent connectivity verified","Telemetry data flowing","Policy enforcement active"],troubleshooting:["For installation failures, check system requirements","If agents offline, verify network connectivity","For policy issues, review distribution group settings"],relatedComponents:["endpoints","agents","policies","telemetry"]}),t.push({id:"detection_rules",title:"Detection Rule Configuration",description:"Configure and tune detection rules specific to the use case",category:"detection_engineering",estimatedDuration:75,prerequisites:["data_integration","baseline_established"],instructions:NW(n),validationCriteria:["Detection rules created and enabled","Alert thresholds properly configured","False positive rate acceptable","Test detection successful"],troubleshooting:["For rule errors, validate XQL syntax","If no alerts, check data source availability","For high false positives, adjust thresholds"],relatedComponents:["rules","xql","alerts","thresholds"]}),t.push({id:"alert_layouts",title:"Alert Layout and Dashboard Configuration",description:"Create custom alert layouts and operational dashboards",category:"layout_configuration",estimatedDuration:45,prerequisites:["detection_rules","ui_access"],instructions:YW(n),validationCriteria:["Alert layouts properly formatted","Dashboards displaying relevant data","Widgets functioning correctly","User access permissions set"],troubleshooting:["For layout errors, check JSON syntax","If widgets empty, verify data sources","For permission issues, review user roles"],relatedComponents:["layouts","dashboards","widgets","permissions"]}),t.push({id:"dashboard_widgets",title:"Operational Dashboard and Widget Creation",description:"Build comprehensive dashboards and custom widgets for monitoring and analysis",category:"dashboard_creation",estimatedDuration:60,prerequisites:["alert_layouts","data_validation"],instructions:QW(n,e),validationCriteria:["Dashboards displaying relevant metrics","Widgets functioning with live data","User access permissions configured","Performance within acceptable limits"],troubleshooting:["For widget errors, verify data source connections","If dashboards slow, optimize queries and caching","For access issues, review user role permissions"],relatedComponents:["dashboards","widgets","metrics","analytics"]}),t.push({id:"automation_playbooks",title:"Automation Playbook Development",description:"Develop and test automation playbooks for incident response",category:"automation_playbook",estimatedDuration:120,prerequisites:["alert_layouts","integration_apis"],instructions:JW(n),validationCriteria:["Playbooks execute successfully","Integration points functioning","Error handling working properly","Performance within acceptable limits"],troubleshooting:["For execution errors, check API credentials","If timeouts occur, review network latency","For logic errors, validate playbook flow"],relatedComponents:["playbooks","apis","workflows","integrations"]}),t.push({id:"validation_testing",title:"End-to-End Validation and Testing",description:"Perform comprehensive testing of the complete lab setup",category:"environment_buildout",estimatedDuration:90,prerequisites:["automation_playbooks","test_scenarios"],instructions:eq(n),validationCriteria:["All components functioning together","Use case scenarios successfully tested","Performance metrics within targets","Documentation complete and accurate"],troubleshooting:["For integration failures, check component dependencies","If performance poor, review resource allocation","For test failures, validate test data and scenarios"],relatedComponents:["testing","integration","performance","documentation"]}),t}function kW(n,e){return generateCategorySpecificInfrastructure(n.category,n,e),`
## Infrastructure Assessment and Planning

### 1. Current Environment Analysis
\`\`\`bash
# Network connectivity check
ping cortex-data-lake.paloaltonetworks.com
nslookup *.xdr.us.paloaltonetworks.com

# Resource assessment
df -h  # Storage availability
free -h  # Memory usage
lscpu  # CPU information
\`\`\`

### 2. Architecture Planning
Based on use case: **${n.title}**
- **Lab Type**: ${e.labType}
- **Environment**: ${e.environment}
- **Data Volume**: ${e.dataVolume}
- **Complexity**: ${e.complexity}

### 3. Network Requirements
- Cortex tenant connectivity (port 443)
- Log forwarding ports (514, 6514 for syslog)
- Agent communication (port 443)
- API access for integrations

### 4. Resource Planning
${nq(e)}

### 5. Security Considerations
- Network segmentation for lab environment
- Firewall rules for Cortex connectivity
- Certificate management for secure communications
- Access control for lab resources

### 6. Timeline and Milestones
${sq(e)}
`}function EW(n,e){return`
## Cortex Tenant Configuration

### 1. Tenant Access Verification
1. Log into Cortex tenant: \`https://[tenant-name].xdr.us.paloaltonetworks.com\`
2. Verify administrative privileges
3. Check license allocation and expiration dates

### 2. Initial Configuration
\`\`\`json
{
  "tenant_settings": {
    "data_retention": "${lq(e)}",
    "time_zone": "UTC",
    "alert_retention": "90_days",
    "audit_logging": "enabled"
  }
}
\`\`\`

### 3. User and Role Management
- Create dedicated lab users
- Assign appropriate roles (Security Admin, Analyst)
- Configure access permissions for lab resources

### 4. Policy Configuration
- Set up distribution groups for agents
- Configure initial prevention policies
- Enable audit logging and monitoring

### 5. Integration Preparation
- Generate API keys for automation
- Configure webhook endpoints
- Set up SAML/SSO if required
`}function TW(n,e){const t=cq(n);return`
## Data Source Integration Setup

### Required Data Sources for ${n.title}:
${t.map(s=>`- ${s}`).join(`
`)}

### 1. Broker/Engine Deployment
\`\`\`bash
# Download broker package
wget https://[tenant]/public_api/v1/brokers/download/[package]

# Install broker
sudo dpkg -i cortex-xsiam-broker_[version].deb
sudo systemctl enable cortex-xsiam-broker
sudo systemctl start cortex-xsiam-broker
\`\`\`

### 2. Data Source Configuration
${uq(t)}

### 3. Parser Configuration
- Configure field mapping for custom logs
- Set up normalization rules
- Test parsing with sample data

### 4. Data Flow Validation
\`\`\`bash
# Check broker status
sudo systemctl status cortex-xsiam-broker

# Verify data ingestion
curl -X GET "https://[tenant]/public_api/v1/logs/search" \\
  -H "Authorization: [api-key]" \\
  -d '{"query": "dataset in (xdr_data)", "limit": 10}'
\`\`\`
`}function PW(n,e){return`
## Cortex XDR Agent Deployment

### 1. Agent Package Preparation
1. Download agent from Cortex console
2. Create distribution groups for lab endpoints
3. Configure deployment policies

### 2. Deployment Methods
${dq()}

### 3. Agent Configuration
\`\`\`json
{
  "agent_settings": {
    "protection_mode": "report",
    "behavioral_analysis": "enabled",
    "local_analysis": "enabled",
    "content_update": "automatic"
  }
}
\`\`\`

### 4. Validation Steps
- Verify agent connectivity
- Check telemetry data flow
- Test prevention capabilities (in report mode)
- Validate policy enforcement
`}function NW(n,e){const t=RW(n);return`
## Detection Rule Configuration

### 1. Use Case Analysis
**Threat**: ${n.title}
**Category**: ${n.category}
**Severity**: ${n.severity}

### 2. Category-Specific XQL Rule Development
${t}

### 3. Threshold Configuration
- Set appropriate alert thresholds
- Configure time windows for correlation
- Define suppression rules to reduce noise

### 4. Testing and Tuning
- Generate test events
- Validate detection accuracy
- Adjust rules based on false positive analysis
- Document tuning decisions
`}function RW(n){const e=O1(n);switch(n.category){case"cloud":return e.isKubernetes||e.isIngress?`
\`\`\`sql
-- ${n.title} Detection Rule
-- CVEs: ${e.cveNumbers.length>0?e.cveNumbers.join(", "):"Custom threat"}
-- Vulnerability Types: ${e.vulnerabilityTypes.join(", ")}
-- Technologies: ${e.technologies.join(", ")}
dataset = kubernetes_audit
| filter verb in ("create", "update", "patch")
| filter objectRef_resource = "ingresses"
| filter requestObject_metadata_annotations contains "nginx.ingress.kubernetes.io/server-snippet"
${e.specificPatterns.map(t=>`| filter requestObject_metadata_annotations contains "${t}"`).join(`
`)}
| alter severity = "${e.threatContext.severity.toUpperCase()}"
| alter threat_name = "${n.title.replace(/[^a-zA-Z0-9]/g,"_")}"
| alter cve_numbers = "${e.cveNumbers.join(",")}"
| alter attack_vectors = "${e.attackVectors.join(",")}"
| alter affected_components = "${e.affectedComponents.join(",")}"
| fields _time, user_username, sourceIPs, objectRef_namespace, objectRef_name, requestObject_metadata_annotations, cve_numbers, attack_vectors
| limit 100
\`\`\`

### Additional Detection Rules for ${n.title}
\`\`\`sql
-- Context-specific rule based on: ${n.description}
${WW(e,n)}
\`\`\``:`
\`\`\`sql
-- ${n.title} Cloud Detection Rule
-- Technologies: ${e.technologies.join(", ")}
-- Attack Vectors: ${e.attackVectors.join(", ")}
dataset = cloud_audit_logs
| filter event_name in ("CreateRole", "AttachRolePolicy", "PutBucketPolicy")
| filter error_code = null
| filter source_ip != "console.aws.amazon.com"
| alter severity = "${e.threatContext.severity.toUpperCase()}"
| alter cve_numbers = "${e.cveNumbers.join(",")}"
| alter vulnerability_types = "${e.vulnerabilityTypes.join(",")}"
| fields _time, user_name, source_ip, event_name, resources, cve_numbers, vulnerability_types
\`\`\``;case"endpoint":return qW(n,e);case"network":return GW(n,e);case"identity":return KW(n,e);default:return`
\`\`\`sql
-- ${n.title} Detection Rule
-- Context: ${n.description}
dataset = xdr_data
| filter event_type = "STORY"
| filter severity in ("high", "critical")
| alter custom_severity = "HIGH"
| fields _time, event_type, description, severity
\`\`\``}}function O1(n){const e=n.title.toLowerCase(),t=n.description.toLowerCase(),s=IW(n),i=`${e} ${t} ${s}`.toLowerCase();return{isKubernetes:DW(i),isIngress:MW(i),isContainer:jW(i),isRCE:LW(i),isCVE:OW(i),specificPatterns:zW(i),attackVectors:UW(i),affectedComponents:HW(i),cveNumbers:FW(i),vulnerabilityTypes:$W(i),technologies:VW(i),threatContext:BW(i)}}function IW(n){return n.description||""}function DW(n){return["kubernetes","k8s","kubectl","pod","namespace","cluster","ingress","deployment","service","configmap","secret","admission controller","api server","etcd","kubelet"].some(t=>n.includes(t))}function MW(n){return["ingress","nginx","ingress-nginx","ingress controller","nginx.ingress.kubernetes.io","server-snippet","annotation"].some(t=>n.includes(t))}function jW(n){return["container","docker","containerd","runtime","pod","image","registry","dockerfile","containerized"].some(t=>n.includes(t))}function LW(n){return["remote code execution","rce","code execution","command execution","arbitrary code","shell execution","payload execution"].some(t=>n.includes(t))}function OW(n){return/cve-\d{4}-\d+/i.test(n)}function FW(n){const e=/cve-\d{4}-\d+/gi,t=n.match(e);return t?[...new Set(t.map(s=>s.toUpperCase()))]:[]}function $W(n){const e=[];return Object.entries({"Remote Code Execution":["remote code execution","rce","code execution"],"Privilege Escalation":["privilege escalation","privesc","elevation"],"Authentication Bypass":["authentication bypass","auth bypass","unauthorized access"],Injection:["injection","script injection","command injection"],"Information Disclosure":["information disclosure","data leakage","sensitive information"],"Denial of Service":["denial of service","dos","resource exhaustion"],"Server-Side Request Forgery":["ssrf","server-side request forgery"],"Cross-Site Scripting":["xss","cross-site scripting"],"Directory Traversal":["directory traversal","path traversal","lfi"]}).forEach(([s,i])=>{i.some(r=>n.includes(r))&&e.push(s)}),e}function VW(n){const e=[];return Object.entries({Kubernetes:["kubernetes","k8s"],NGINX:["nginx","ingress-nginx"],Docker:["docker","container"],AWS:["aws","amazon web services","ec2","s3"],Azure:["azure","microsoft azure"],GCP:["gcp","google cloud platform"],Apache:["apache"],Tomcat:["tomcat"],Jenkins:["jenkins"],Redis:["redis"],MongoDB:["mongodb","mongo"],MySQL:["mysql"],PostgreSQL:["postgresql","postgres"]}).forEach(([s,i])=>{i.some(r=>n.includes(r))&&e.push(s)}),e}function BW(n){const e=n.match(/cvss.*?(\d+\.\d+)/i),t=e?parseFloat(e[1]):0;let s="medium";t>=9?s="critical":t>=7?s="high":t>=4?s="medium":t>0&&(s="low");const i=n.includes("unauthenticated")?"low":n.includes("authenticated")?"high":"medium",r=n.includes("cluster takeover")||n.includes("full compromise")?"changed":"unchanged",a=n.includes("exploit available")||n.includes("public exploit")?"high":"medium";return{severity:s,attackComplexity:i,impactScope:r,exploitability:a}}function zW(n){const e=[];return Object.entries({lua:["lua","lua script","lua_resty"],"server-snippet":["server-snippet","nginx.ingress.kubernetes.io/server-snippet"],"ngx.exec":["ngx.exec","nginx exec"],annotation:["annotation","metadata.annotations"],injection:["injection","script injection","code injection"],webhook:["webhook","admission webhook","validating webhook"],rbac:["rbac","role-based access"],secret:["secret","kubernetes secret","cluster secret"],privilege:["privilege","privileged","escalation"],bypass:["bypass","circumvent","evade"]}).forEach(([s,i])=>{i.some(r=>n.includes(r))&&e.push(s)}),e}function UW(n){const e=[];return Object.entries({"Kubernetes annotation manipulation":["annotation","metadata.annotations","server-snippet"],"Ingress controller exploitation":["ingress","ingress controller","nginx ingress"],"Admission controller bypass":["admission","admission controller","webhook bypass"],"Privilege escalation":["privilege","escalation","elevated privileges"],"Container escape":["container escape","breakout","sandbox escape"],"Secret extraction":["secret","sensitive data","credentials"],"Cluster takeover":["cluster takeover","full compromise","administrative access"],"API server exploitation":["api server","kubernetes api","etcd"],"Network policy bypass":["network policy","network segmentation","lateral movement"],"RBAC manipulation":["rbac","role binding","cluster role"]}).forEach(([s,i])=>{i.some(r=>n.includes(r))&&e.push(s)}),e}function HW(n){const e=[];return Object.entries({"NGINX Ingress Controller":["ingress controller","nginx ingress","ingress-nginx"],"Kubernetes API Server":["api server","kubernetes api","kube-apiserver"],"Admission Controllers":["admission controller","admission webhook"],"Validation Webhooks":["validation webhook","validating webhook"],"Mutating Webhooks":["mutating webhook","mutating admission"],"Container Runtime":["container runtime","containerd","docker runtime"],"etcd Database":["etcd","kubernetes database"],kubelet:["kubelet","node agent"],"kube-proxy":["kube-proxy","network proxy"],CoreDNS:["coredns","dns"],Helm:["helm","package manager"],"Istio Service Mesh":["istio","service mesh"],"Kubernetes Secrets":["secret","kubernetes secret"],ConfigMaps:["configmap","configuration"]}).forEach(([s,i])=>{i.some(r=>n.includes(r))&&e.push(s)}),e}function WW(n,e){const t=[];return n.isIngress&&t.push(`-- Monitor ingress annotation modifications for ${e.title}
dataset = kubernetes_audit
| filter verb = "patch"
| filter objectRef_resource = "ingresses"
| filter requestObject_metadata_annotations != ""
| alter severity = "${e.severity.toUpperCase()}"
| fields _time, user_username, objectRef_namespace, objectRef_name`),n.isContainer&&t.push(`-- Monitor container privilege escalation for ${e.title}
dataset = kubernetes_audit
| filter verb = "create"
| filter objectRef_resource = "pods"
| filter requestObject_spec_securityContext_privileged = true
| alter severity = "HIGH"
| fields _time, user_username, objectRef_namespace, objectRef_name`),t.join(`

`)}function qW(n,e){return`
\`\`\`sql
-- ${n.title} Endpoint Detection
-- CVEs: ${e.cveNumbers.length>0?e.cveNumbers.join(", "):"Custom threat"}
-- Vulnerability Types: ${e.vulnerabilityTypes.join(", ")}
-- Technologies: ${e.technologies.join(", ")}
dataset = xdr_data
| filter event_type = "STORY"
| filter action_process_image_name != null
${e.specificPatterns.map(t=>`| filter action_process_command_line contains "${t}"`).join(`
`)}
| alter severity = "${e.threatContext.severity.toUpperCase()}"
| alter cve_numbers = "${e.cveNumbers.join(",")}"
| alter attack_vectors = "${e.attackVectors.join(",")}"
| alter vulnerability_types = "${e.vulnerabilityTypes.join(",")}"
| fields _time, agent_hostname, action_process_image_name, action_process_command_line, action_process_username, cve_numbers, attack_vectors
\`\`\``}function GW(n,e){return`
\`\`\`sql
-- ${n.title} Network Detection
-- CVEs: ${e.cveNumbers.length>0?e.cveNumbers.join(", "):"Custom threat"}
-- Attack Vectors: ${e.attackVectors.join(", ")}
-- Technologies: ${e.technologies.join(", ")}
dataset = network_logs
| filter protocol = "tcp"
${e.attackVectors.length>0?`-- Attack vectors: ${e.attackVectors.join(", ")}`:""}
| alter severity = "${e.threatContext.severity.toUpperCase()}"
| alter cve_numbers = "${e.cveNumbers.join(",")}"
| alter attack_vectors = "${e.attackVectors.join(",")}"
| alter vulnerability_types = "${e.vulnerabilityTypes.join(",")}"
| fields _time, source_ip, destination_ip, destination_port, bytes_out, protocol, cve_numbers, attack_vectors
\`\`\``}function KW(n,e){return`
\`\`\`sql
-- ${n.title} Identity Detection
-- CVEs: ${e.cveNumbers.length>0?e.cveNumbers.join(", "):"Custom threat"}
-- Attack Vectors: ${e.attackVectors.join(", ")}
-- Technologies: ${e.technologies.join(", ")}
dataset = auth_logs
| filter event_type = "login"
| alter severity = "${e.threatContext.severity.toUpperCase()}"
| alter cve_numbers = "${e.cveNumbers.join(",")}"
| alter attack_vectors = "${e.attackVectors.join(",")}"
| alter vulnerability_types = "${e.vulnerabilityTypes.join(",")}"
| fields _time, username, source_ip, user_agent, authentication_method, cve_numbers, attack_vectors
\`\`\``}function XW(n,e){const t={kubernetesFields:[],attackFields:[],responseFields:[]};return e.isKubernetes&&(t.kubernetesFields=["cluster_name","namespace","resource_type","resource_name","user_username","source_ips"]),e.isIngress?(t.attackFields=["ingress_annotations","server_snippet_content","lua_script_detected","nginx_version","admission_controller_status"],t.responseFields=["isolate_ingress_resource","review_annotations","check_cluster_secrets","validate_rbac_permissions","scan_for_persistence"]):(t.attackFields=["attack_pattern","exploit_method","payload_detected","vulnerability_cve"],t.responseFields=["isolate_affected_resource","collect_forensic_evidence","check_lateral_movement","validate_security_controls"]),t}function YW(n,e){const t=O1(n),s=XW(n,t);return`
## Alert Layout Configuration for ${n.title}

### 1. Use Case-Specific Layout Design
**Threat Type**: ${n.category} - ${n.title}
**Primary Attack Vectors**: ${t.attackVectors.join(", ")||"To be analyzed"}
**Affected Components**: ${t.affectedComponents.join(", ")||"Multiple systems"}

#### Alert Header Section (${n.title}-Specific)
- **Alert Title**: "${n.title} Detection"
- **Severity Indicator**: ${n.severity.toUpperCase()} (Critical/High/Medium)
- **CVE Reference**: ${t.isCVE?"CVE Reference Field":"Custom threat detection"}
- **Context**: ${t.isKubernetes?"Kubernetes Environment":"System Environment"}

### 2. Context-Specific Alert Layout
\`\`\`json
{
  "layout_name": "${n.title.replace(/[^a-zA-Z0-9]/g,"_")}_Layout",
  "use_case_id": "${n.id}",
  "layout_sections": [
    {
      "section_name": "${t.isKubernetes?"kubernetes_context":"system_context"}",
      "title": "${t.isKubernetes?"Kubernetes Environment":"System Context"}",
      "fields": ${JSON.stringify(s.kubernetesFields,null,8)}
    },
    {
      "section_name": "attack_details", 
      "title": "Attack Specifics for ${n.title}",
      "fields": ${JSON.stringify(s.attackFields,null,8)}
    },
    {
      "section_name": "response_actions",
      "title": "Immediate Response Actions",
      "fields": ${JSON.stringify(s.responseFields,null,8)}
    }
  ]
}
\`\`\`

### 3. Custom Field Definitions for ${n.title}
${iq(n,t)}

### 4. Visual Configuration
- **Severity Color Coding**: Critical (Red), High (Orange), Medium (Yellow)  
- **Context Indicators**: ${t.isKubernetes?"Kubernetes cluster icon":"System type icon"}
- **Priority Highlighting**: Emphasize ${t.isRCE?"RCE indicators":"threat-specific patterns"}
`}function QW(n,e){return`
## Operational Dashboard and Widget Creation

### 1. Dashboard Architecture Planning
**Use Case**: ${n.title}
**Category**: ${n.category}
**Complexity**: ${e.complexity}

### 2. Core Dashboard Components
\`\`\`json
{
  "dashboard_config": {
    "title": "${n.title} Operations Dashboard",
    "refresh_interval": "30s",
    "time_range": "last_24h",
    "layout": "grid",
    "sections": [
      {
        "title": "Threat Overview",
        "widgets": ["threat_summary", "severity_distribution", "trend_analysis"]
      },
      {
        "title": "Detection Performance", 
        "widgets": ["detection_rate", "false_positive_rate", "response_time"]
      },
      {
        "title": "Infrastructure Health",
        "widgets": ["system_status", "data_ingestion", "resource_usage"]
      }
    ]
  }
}
\`\`\`

### 3. Custom Widget Development
${ZW(n.category)}

### 4. Key Performance Indicators (KPIs)
- **Detection Accuracy**: >95% true positive rate
- **Response Time**: <5 minutes mean time to detection
- **System Availability**: >99.5% uptime
- **Data Completeness**: >98% log ingestion rate

### 5. Alert Integration
- Configure dashboard alerts for KPI thresholds
- Integrate with notification channels
- Set up escalation procedures
- Link to incident response playbooks

### 6. User Experience Optimization
- Responsive design for mobile access
- Role-based dashboard views
- Customizable widget layouts
- Export capabilities for reporting
`}function ZW(n){const e={endpoint:`
#### Endpoint Security Widgets
- **Agent Health Monitor**: Track agent connectivity and version compliance
- **Process Execution Timeline**: Visualize process chains and parent-child relationships  
- **File System Activity**: Monitor file creation, modification, and deletion patterns
- **Network Connection Map**: Display endpoint network communications
- **Malware Detection Stats**: Track signatures, behavioral analysis, and quarantine actions`,network:`
#### Network Security Widgets
- **Traffic Flow Visualization**: Network topology with traffic patterns
- **Protocol Analysis**: Breakdown of network protocols and their usage
- **Geolocation Map**: Source and destination IP geographical mapping
- **Bandwidth Utilization**: Network capacity and usage trends
- **Threat Intelligence Correlation**: IOCs matched against network traffic`,cloud:`
#### Cloud Security Widgets
- **Resource Inventory**: Multi-cloud asset visualization and status
- **Compliance Posture**: Security control compliance dashboard
- **Cost Security Correlation**: Security events impact on cloud costs
- **API Usage Analytics**: Cloud service API calls and anomalies
- **Container Security Status**: Pod security, image vulnerabilities, runtime protection`,identity:`
#### Identity Security Widgets
- **Authentication Heatmap**: Login patterns across time and geography
- **Privilege Escalation Tracking**: Monitor permission changes and elevated access
- **Account Lifecycle**: User creation, modification, and deactivation timeline
- **Access Risk Scoring**: User risk scores based on behavior and privileges
- **SSO Integration Status**: Single sign-on health and failure tracking`};return e[n]||e.endpoint}function JW(n,e){const t=O1(n);return`
## Automation Playbook for ${n.title}

### 1. Use Case-Specific Playbook Architecture
\`\`\`yaml
name: "${n.title} Response Playbook"
description: "Automated response for ${n.description}"
trigger:
  type: "alert"
  conditions:
    - alert_name: "${n.title}"
    - severity: ["${n.severity.toUpperCase()}"]
    ${t.isKubernetes?'- source_type: "kubernetes_audit"':""}
    ${t.isCVE?"- cve_detected: true":""}

tasks:
${rq(n,t)}
\`\`\`

### 2. Context-Specific Integration Points
${aq(n,t)}

### 3. Use Case-Specific Testing
${oq(n,t)}
`}function eq(n,e){return`
## End-to-End Validation and Testing

### 1. Test Scenario Execution
Execute comprehensive test scenarios for ${n.title}:

#### Scenario 1: Detection Validation
- Generate realistic attack simulation
- Verify alert generation and accuracy
- Validate alert layout display
- Test playbook execution

#### Scenario 2: Performance Testing
- Load test with expected data volume
- Measure query response times
- Validate system stability under load

#### Scenario 3: Integration Testing
- Test all data source integrations
- Validate API connectivity
- Verify automation workflows

### 2. Acceptance Criteria Validation
${hq()}

### 3. Documentation and Handover
- Complete lab setup documentation
- Create user guides and runbooks
- Provide training materials
- Document known issues and workarounds

### 4. Performance Metrics
- Alert accuracy rate: >95%
- False positive rate: <5%
- Response time: <30 seconds
- System availability: >99.5%
`}function tq(n){return`
# ${n.title}

${n.description}

## Prerequisites
${n.prerequisites.map(e=>`- ${e}`).join(`
`)}

## Instructions
${n.instructions}

## Validation Criteria
${n.validationCriteria.map(e=>`- [ ] ${e}`).join(`
`)}

## Troubleshooting
${n.troubleshooting.map(e=>`- ${e}`).join(`
`)}

## Related Components
${n.relatedComponents.map(e=>`- ${e}`).join(`
`)}
`}function nq(n){const t={small:{cpu:"4 cores",memory:"8 GB",storage:"100 GB"},medium:{cpu:"8 cores",memory:"16 GB",storage:"500 GB"},large:{cpu:"16 cores",memory:"32 GB",storage:"1 TB"},enterprise:{cpu:"32 cores",memory:"64 GB",storage:"5 TB"}}[n.dataVolume];return`
- **CPU**: ${t.cpu}
- **Memory**: ${t.memory}
- **Storage**: ${t.storage}
- **Network**: 1 Gbps minimum
`}function sq(n){return`
**Total Duration**: ${{sprint:"1-2 weeks",month:"3-4 weeks",quarter:"8-12 weeks",extended:"12+ weeks"}[n.timeline]}
- Week 1: Infrastructure setup
- Week 2: Integration configuration  
- Week 3: Testing and validation
- Week 4: Documentation and handover
`}function iq(n,e){return e.isKubernetes&&e.isIngress?`
#### Kubernetes-Specific Fields for ${n.title}:
- **cluster_name**: Kubernetes cluster identifier
- **namespace**: Target namespace for the attack
- **ingress_annotations**: Full annotation content showing malicious snippets
- **server_snippet_content**: Extracted Lua/server-snippet code
- **admission_controller_status**: Validation webhook bypass indicators
- **rbac_permissions**: User permissions and potential privilege escalation
- **secrets_accessed**: List of secrets potentially compromised
- **pod_security_context**: Security context violations detected`:e.isKubernetes?`
#### Kubernetes-Specific Fields:
- **cluster_name**: Kubernetes cluster identifier  
- **resource_type**: Type of Kubernetes resource affected
- **resource_name**: Name of the specific resource
- **user_username**: Kubernetes user performing the action
- **source_ips**: Source IP addresses of the requests`:`
#### Standard Security Fields:
- **host_name**: Affected system hostname
- **process_name**: Process involved in the incident
- **command_line**: Command line arguments executed
- **user_context**: User account context and privileges`}function rq(n,e){return e.isKubernetes&&e.isIngress?`  - name: "Initial Assessment - IngressNightmare"
    type: "enrichment"
    actions:
      - get_kubernetes_cluster_info
      - check_ingress_controller_version
      - validate_admission_controller_status
      - query_threat_intelligence_for_cve
      
  - name: "Immediate Containment"
    type: "response"
    actions:
      - isolate_affected_ingress_resource
      - disable_malicious_annotations
      - block_source_ips
      - rotate_cluster_secrets
      
  - name: "Investigation and Analysis"
    type: "analysis"  
    actions:
      - collect_kubernetes_audit_logs
      - analyze_ingress_modifications
      - check_for_privilege_escalation
      - scan_all_ingress_resources
      - validate_rbac_permissions
      
  - name: "Recovery and Hardening"
    type: "remediation"
    actions:
      - update_ingress_controller
      - implement_admission_policies
      - review_and_harden_rbac
      - deploy_monitoring_rules`:e.isKubernetes?`  - name: "Initial Assessment - Kubernetes"
    type: "enrichment"
    actions:
      - get_kubernetes_cluster_info
      - check_resource_status
      - validate_user_permissions
      
  - name: "Containment"
    type: "response"
    actions:
      - isolate_affected_resource
      - block_malicious_user
      - quarantine_namespace
      
  - name: "Investigation"
    type: "analysis"
    actions:
      - collect_audit_logs
      - analyze_resource_changes
      - check_lateral_movement`:`  - name: "Initial Assessment"
    type: "enrichment"
    actions:
      - get_host_information
      - check_threat_intelligence
      
  - name: "Containment"
    type: "response"
    actions:
      - isolate_endpoint
      - disable_user_account
      
  - name: "Investigation"
    type: "analysis"
    actions:
      - collect_forensic_data
      - analyze_lateral_movement`}function aq(n,e){return e.isKubernetes?`
- **Kubernetes API Integration**: Direct API calls for resource isolation and remediation
- **Admission Controller Webhooks**: Real-time policy enforcement
- **Container Registry Scanning**: Image vulnerability assessment
- **RBAC Management**: Automated permission reviews and updates
- **Helm/Operator Integration**: Automated deployment of security policies`:`
- **SOAR Platform**: Standard incident response orchestration
- **Endpoint Management**: Direct agent communication for containment
- **SIEM Integration**: Centralized log analysis and correlation
- **Threat Intelligence**: IOC enrichment and validation`}function oq(n,e){return e.isKubernetes&&e.isIngress?`
- **IngressNightmare Simulation**: Deploy vulnerable ingress with malicious annotations
- **Admission Controller Testing**: Validate policy enforcement and bypass detection
- **Cluster Secret Access**: Test detection of unauthorized secret access
- **RBAC Escalation**: Simulate privilege escalation attempts
- **Recovery Testing**: Validate automated remediation and hardening steps`:`
- **Attack Simulation**: Execute realistic attack scenarios for ${n.title}
- **Integration Testing**: Validate all automation components
- **Performance Testing**: Measure playbook execution times
- **Rollback Testing**: Ensure safe recovery from automated actions`}function lq(n){return n.labType==="production"?"12_months":"3_months"}function cq(n){const e=["Windows Event Logs","Active Directory","Network Traffic"];return n.category==="endpoint"?[...e,"Cortex XDR Agent","Process Telemetry"]:n.category==="network"?[...e,"Firewall Logs","Network Flow Data"]:n.category==="cloud"?[...e,"Cloud Audit Logs","API Logs"]:[...e,"Identity Provider Logs","Authentication Logs"]}function uq(n,e){return n.map(t=>`
### ${t}
- Configure connection parameters
- Set up authentication credentials  
- Test connectivity and data flow
- Validate parsing and field mapping
`).join(`
`)}function dq(n){return`
#### Manual Installation
\`\`\`bash
# Download and install agent
./cortex-xdr-agent-installer.sh --install
\`\`\`

#### Group Policy Deployment (Windows)
- Configure MSI deployment through GPO
- Set installation parameters
- Monitor deployment status

#### Mass Deployment Tools
- SCCM, Ansible, or other automation tools
- Batch deployment scripts
- Remote installation capabilities
`}function hq(n,e){return`
- [ ] All data sources ingesting properly
- [ ] Detection rules generating accurate alerts
- [ ] Alert layouts displaying correctly
- [ ] Automation playbooks executing successfully
- [ ] Performance metrics within acceptable ranges
- [ ] Documentation complete and accurate
- [ ] User training completed
- [ ] Handover procedures defined
`}function fq({isOpen:n,onClose:e,useCase:t,onStartLabBuildout:s}){const[i,r]=C.useState(0),[a,o]=C.useState(new Set),[l,u]=C.useState({labType:"poc",environment:"hybrid",dataVolume:"medium",complexity:"intermediate",timeline:"month"}),[d,f]=C.useState(null),[p,y]=C.useState(!1),g=async()=>{y(!0);try{const S=AW(t,l);f(S)}catch(S){console.error("Error generating lab buildout:",S)}finally{y(!1)}},m=()=>{d&&(s(d),e())},w=S=>{const E=new Set(a);E.has(S)?E.delete(S):E.add(S),o(E)},v=S=>{switch(S){case"environment_buildout":return h.jsx(U3,{className:"h-4 w-4"});case"detection_engineering":return h.jsx(kk,{className:"h-4 w-4"});case"layout_configuration":return h.jsx(H3,{className:"h-4 w-4"});case"automation_playbook":return h.jsx(e_,{className:"h-4 w-4"});default:return h.jsx(yb,{className:"h-4 w-4"})}},x=S=>{switch(S){case"environment_buildout":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"detection_engineering":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"layout_configuration":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"automation_playbook":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}},_=d?a.size/d.steps.length*100:0;return h.jsx($j,{open:n,onOpenChange:e,children:h.jsxs(M1,{className:"max-w-6xl max-h-[90vh] overflow-hidden",children:[h.jsxs(j1,{children:[h.jsxs(L1,{className:"flex items-center gap-2",children:[h.jsx(bR,{className:"h-5 w-5"}),"Lab Buildout: ",t.title]}),h.jsx(Bj,{children:"Comprehensive step-by-step infrastructure setup and validation for your use case"})]}),h.jsxs("div",{className:"flex flex-col h-[calc(90vh-8rem)] overflow-hidden",children:[d?h.jsx("div",{className:"flex-1 overflow-hidden",children:h.jsxs(DI,{defaultValue:"overview",className:"h-full flex flex-col",children:[h.jsxs(r1,{className:"grid w-full grid-cols-4",children:[h.jsx(el,{value:"overview",children:"Overview"}),h.jsx(el,{value:"steps",children:"Build Steps"}),h.jsx(el,{value:"validation",children:"Validation"}),h.jsx(el,{value:"resources",children:"Resources"})]}),h.jsx(tl,{value:"overview",className:"flex-1 overflow-y-auto space-y-4",children:h.jsxs(Le,{children:[h.jsxs(ds,{children:[h.jsx(hs,{children:"Lab Buildout Progress"}),h.jsx(Vl,{children:"Track your progress through the lab infrastructure setup"})]}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-sm",children:[h.jsx("span",{children:"Progress"}),h.jsxs("span",{children:[a.size," of ",d.steps.length," steps"]})]}),h.jsx(Dw,{value:_,className:"h-2"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:["environment_buildout","detection_engineering","layout_configuration","automation_playbook"].map(S=>{const E=d.steps.filter(T=>T.category===S),P=E.filter((T,N)=>a.has(d.steps.indexOf(E[N])));return h.jsx(Le,{children:h.jsxs(Oe,{className:"p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v(S),h.jsx("span",{className:"font-medium capitalize",children:S})]}),h.jsxs("div",{className:"text-2xl font-bold",children:[P.length,"/",E.length]}),h.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(P.length/E.length*100),"% complete"]})]})},S)})}),h.jsxs(FS,{children:[h.jsx(bd,{className:"h-4 w-4"}),h.jsx($S,{children:"Complete all validation steps before proceeding to production deployment. Each step includes comprehensive testing and verification procedures."})]})]})]})}),h.jsx(tl,{value:"steps",className:"flex-1 overflow-y-auto space-y-4",children:h.jsx("div",{className:"space-y-4",children:d.steps.map((S,E)=>{var P,T;return h.jsxs(Le,{className:`transition-all ${i===E?"ring-2 ring-primary":""}`,children:[h.jsx(ds,{className:"pb-3",children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(ns,{checked:a.has(E),onCheckedChange:()=>w(E)}),h.jsxs("div",{className:"flex items-center gap-2",children:[v(S.category),h.jsxs("div",{children:[h.jsx(hs,{className:"text-base",children:S.title}),h.jsx(Vl,{children:S.description})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ge,{className:x(S.category),children:S.category}),h.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[h.jsx(Cr,{className:"h-3 w-3"}),S.estimatedDuration,"m"]})]})]})}),h.jsxs(Oe,{className:"space-y-3",children:[h.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:h.jsx("div",{dangerouslySetInnerHTML:{__html:((P=S.content)==null?void 0:P.replace(/\n/g,"<br />"))||""}})}),S.dependencies&&S.dependencies.length>0&&h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium mb-1",children:"Prerequisites:"}),h.jsx("div",{className:"flex flex-wrap gap-1",children:S.dependencies.map((N,I)=>h.jsx(Ge,{variant:"outline",className:"text-xs",children:N},I))})]}),((T=S.metadata)==null?void 0:T.validationCriteria)&&h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium mb-2",children:"Validation Criteria:"}),h.jsx("div",{className:"space-y-1",children:S.metadata.validationCriteria.map((N,I)=>h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(xu,{className:"h-3 w-3 text-green-500"}),N]},I))})]})]})]},S.id)})})}),h.jsx(tl,{value:"validation",className:"flex-1 overflow-y-auto space-y-4",children:h.jsxs(Le,{children:[h.jsxs(ds,{children:[h.jsx(hs,{children:"Validation and Testing Framework"}),h.jsx(Vl,{children:"Comprehensive validation procedures to ensure lab functionality"})]}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs(FS,{children:[h.jsx(e_,{className:"h-4 w-4"}),h.jsx($S,{children:"All infrastructure components must pass validation before the lab is ready for training scenarios."})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs(Le,{children:[h.jsx(ds,{className:"pb-3",children:h.jsx(hs,{className:"text-base",children:"Infrastructure Validation"})}),h.jsxs(Oe,{className:"space-y-2",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx(ns,{})," Network connectivity verified"]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(ns,{})," Resource allocation confirmed"]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(ns,{})," Security boundaries established"]})]})]}),h.jsxs(Le,{children:[h.jsx(ds,{className:"pb-3",children:h.jsx(hs,{className:"text-base",children:"Integration Validation"})}),h.jsxs(Oe,{className:"space-y-2",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx(ns,{})," Data sources connected"]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(ns,{})," APIs responding properly"]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(ns,{})," Authentication working"]})]})]}),h.jsxs(Le,{children:[h.jsx(ds,{className:"pb-3",children:h.jsx(hs,{className:"text-base",children:"Detection Validation"})}),h.jsxs(Oe,{className:"space-y-2",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx(ns,{})," Rules generating alerts"]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(ns,{})," False positive rate acceptable"]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(ns,{})," Alert layouts functional"]})]})]}),h.jsxs(Le,{children:[h.jsx(ds,{className:"pb-3",children:h.jsx(hs,{className:"text-base",children:"Automation Validation"})}),h.jsxs(Oe,{className:"space-y-2",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx(ns,{})," Playbooks executing"]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(ns,{})," Integrations functional"]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx(ns,{})," Performance acceptable"]})]})]})]})]})]})}),h.jsx(tl,{value:"resources",className:"flex-1 overflow-y-auto space-y-4",children:h.jsxs(Le,{children:[h.jsxs(ds,{children:[h.jsx(hs,{children:"Additional Resources"}),h.jsx(Vl,{children:"Documentation, tools, and support resources for lab buildout"})]}),h.jsx(Oe,{className:"space-y-4",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"font-medium",children:"Documentation"}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs(ve,{variant:"outline",size:"sm",className:"w-full justify-start",children:[h.jsx(yb,{className:"h-4 w-4 mr-2"}),"Cortex XSIAM Admin Guide"]}),h.jsxs(ve,{variant:"outline",size:"sm",className:"w-full justify-start",children:[h.jsx(Z0,{className:"h-4 w-4 mr-2"}),"Integration Documentation"]}),h.jsxs(ve,{variant:"outline",size:"sm",className:"w-full justify-start",children:[h.jsx(kk,{className:"h-4 w-4 mr-2"}),"Network Configuration Guide"]})]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"font-medium",children:"Support"}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs(ve,{variant:"outline",size:"sm",className:"w-full justify-start",children:[h.jsx(SR,{className:"h-4 w-4 mr-2"}),"Contact Support Team"]}),h.jsxs(ve,{variant:"outline",size:"sm",className:"w-full justify-start",children:[h.jsx(Z0,{className:"h-4 w-4 mr-2"}),"Community Forums"]}),h.jsxs(ve,{variant:"outline",size:"sm",className:"w-full justify-start",children:[h.jsx(yb,{className:"h-4 w-4 mr-2"}),"Troubleshooting Guide"]})]})]})]})})]})})]})}):h.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6",children:[h.jsxs(Le,{children:[h.jsxs(ds,{children:[h.jsx(hs,{children:"Lab Configuration"}),h.jsx(Vl,{children:"Configure your lab setup parameters to generate customized buildout instructions"})]}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Lab Type"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:["poc","pilot","production","demo"].map(S=>h.jsx(ve,{variant:l.labType===S?"default":"outline",size:"sm",onClick:()=>u(E=>({...E,labType:S})),children:S.toUpperCase()},S))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Environment"}),h.jsx("div",{className:"grid grid-cols-1 gap-2",children:["cloud","hybrid","on_premise"].map(S=>h.jsx(ve,{variant:l.environment===S?"default":"outline",size:"sm",onClick:()=>u(E=>({...E,environment:S})),children:S.replace("_"," ").toUpperCase()},S))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Data Volume"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:["small","medium","large","enterprise"].map(S=>h.jsx(ve,{variant:l.dataVolume===S?"default":"outline",size:"sm",onClick:()=>u(E=>({...E,dataVolume:S})),children:S.toUpperCase()},S))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Complexity"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:["basic","intermediate","advanced","expert"].map(S=>h.jsx(ve,{variant:l.complexity===S?"default":"outline",size:"sm",onClick:()=>u(E=>({...E,complexity:S})),children:S.toUpperCase()},S))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Timeline"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:["sprint","month","quarter","extended"].map(S=>h.jsx(ve,{variant:l.timeline===S?"default":"outline",size:"sm",onClick:()=>u(E=>({...E,timeline:S})),children:S.toUpperCase()},S))})]})]}),h.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[h.jsx("div",{className:"text-sm text-muted-foreground",children:"Configuration will generate tailored infrastructure setup instructions"}),h.jsx(ve,{onClick:g,disabled:p,children:p?h.jsxs(h.Fragment,{children:[h.jsx(B3,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):h.jsxs(h.Fragment,{children:[h.jsx(J0,{className:"h-4 w-4 mr-2"}),"Generate Lab Buildout"]})})]})]})]}),h.jsxs(Le,{children:[h.jsx(ds,{children:h.jsx(hs,{children:"Use Case Overview"})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"text-sm font-medium",children:"Category"}),h.jsx(Ge,{className:x("infrastructure"),children:t.category})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"text-sm font-medium",children:"Severity"}),h.jsx(Ge,{variant:"destructive",children:t.severity})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"text-sm font-medium",children:"Estimated Duration"}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(Cr,{className:"h-4 w-4"}),t.estimatedDuration," minutes"]})]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"text-sm font-medium",children:"Description"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]})]})]}),h.jsxs("div",{className:"flex justify-between items-center pt-4 border-t bg-background",children:[h.jsx("div",{className:"text-sm text-muted-foreground",children:d?`Total Duration: ${d.totalDuration} minutes`:"Configure lab parameters to begin"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(ve,{variant:"outline",onClick:e,children:d?"Save Progress":"Cancel"}),d&&h.jsxs(ve,{onClick:m,children:[h.jsx(J0,{className:"h-4 w-4 mr-2"}),"Start Lab Buildout"]})]})]})]})]})})}function pq({onGenerateTraining:n}){const{data:e=[],isLoading:t}=AB(),{data:s=[],isLoading:i}=_B();MI();const r=jI(),{toast:a}=Mu();C.useState(new Set);const[o,l]=C.useState({isOpen:!1,useCase:null}),u=async v=>{if(v.validationStatus!=="approved"&&v.validationStatus!=="pending"){a({title:"Validation Required",description:"This use case requires validation before training can be generated.",variant:"destructive"});return}try{const x=W6(v);await r.mutateAsync(x),n(x.id),a({title:"Training Path Generated",description:`Created comprehensive training path for ${v.title}`})}catch{a({title:"Generation Failed",description:"Failed to generate training path. Please try again.",variant:"destructive"})}},d=v=>{l({isOpen:!0,useCase:v})},f=async v=>{try{await r.mutateAsync(v),n(v.id),a({title:"Lab Buildout Started",description:`Lab infrastructure setup initiated for ${v.title}`})}catch{a({title:"Buildout Failed",description:"Failed to start lab buildout. Please try again.",variant:"destructive"})}},p=v=>{const x={pending:{variant:"secondary",label:"Pending Review"},approved:{variant:"default",label:"Validated"},rejected:{variant:"destructive",label:"Rejected"},needs_review:{variant:"outline",label:"Needs Review"}};return x[v]||x.pending},y=v=>{const x={low:"fas fa-info-circle text-blue-500",medium:"fas fa-exclamation-triangle text-yellow-500",high:"fas fa-exclamation-triangle text-orange-500",critical:"fas fa-exclamation-triangle text-red-500"};return x[v]||x.medium},g=v=>{const x={endpoint:"fas fa-desktop",network:"fas fa-network-wired",cloud:"fas fa-cloud",identity:"fas fa-user-shield"};return x[v]||x.endpoint};if(t||i)return h.jsx(Le,{className:"shadow-material",children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center mb-6",children:[h.jsx(xy,{className:"text-cortex-blue text-xl mr-3"}),h.jsx("h2",{className:"text-xl font-medium text-cortex-dark",children:"Extracted Use Cases"})]}),h.jsxs("div",{className:"text-center py-8",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cortex-blue mx-auto"}),h.jsx("p",{className:"text-gray-500 mt-2",children:"Loading use cases..."})]})]})});if(e.length===0)return h.jsx(Le,{className:"shadow-material",children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center mb-6",children:[h.jsx(xy,{className:"text-cortex-blue text-xl mr-3"}),h.jsx("h2",{className:"text-xl font-medium text-cortex-dark",children:"Extracted Use Cases"})]}),h.jsxs("div",{className:"text-center py-8",children:[h.jsx(xy,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"No Use Cases Yet"}),h.jsx("p",{className:"text-gray-400 text-sm",children:"Upload threat reports to automatically extract training use cases"})]})]})});const m=e.filter(v=>v.validationStatus==="approved").length,w=e.filter(v=>v.validationStatus==="pending").length;return h.jsxs(Le,{className:"shadow-material",children:[h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(xy,{className:"text-cortex-blue text-xl mr-3"}),h.jsx("h2",{className:"text-xl font-medium text-cortex-dark",children:"Extracted Use Cases"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[m>0&&h.jsxs(Ge,{className:"bg-cortex-success text-white",children:[m," Validated"]}),w>0&&h.jsxs(Ge,{className:"bg-cortex-warning text-white",children:[w," Pending"]})]})]}),h.jsx("div",{className:"space-y-4",children:e.map(v=>h.jsx(Le,{className:"border border-gray-200 hover:border-cortex-blue transition-colors",children:h.jsxs(Oe,{className:"p-4",children:[h.jsxs("div",{className:"flex items-start justify-between mb-3",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-medium text-cortex-dark mb-1",children:v.title}),h.jsx("p",{className:"text-sm text-gray-600 mb-3",children:v.description})]}),h.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[h.jsx(Ge,{...p(v.validationStatus),children:p(v.validationStatus).label}),h.jsx(ve,{size:"sm",variant:"outline",onClick:()=>d(v),disabled:v.validationStatus==="rejected",className:"border-cortex-blue text-cortex-blue hover:bg-cortex-blue hover:text-white",children:h.jsx(bR,{className:"w-4 h-4"})}),h.jsx(ve,{size:"sm",onClick:()=>u(v),disabled:v.validationStatus==="rejected"||r.isPending,className:"bg-cortex-blue hover:bg-blue-700",children:r.isPending?h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):h.jsx(J0,{className:"w-4 h-4"})})]})]}),h.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-4",children:[h.jsxs("span",{className:"flex items-center",children:[h.jsx("i",{className:g(v.category)+" mr-1"}),v.category.charAt(0).toUpperCase()+v.category.slice(1)]}),h.jsxs("span",{className:"flex items-center",children:[h.jsx("i",{className:y(v.severity)+" mr-1"}),v.severity.charAt(0).toUpperCase()+v.severity.slice(1)," Severity"]}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(Cr,{className:"w-3 h-3 mr-1"}),v.estimatedDuration," min training"]})]}),Array.isArray(v.extractedTechniques)&&v.extractedTechniques.length>0&&h.jsxs("div",{className:"mt-3 flex flex-wrap gap-1",children:[v.extractedTechniques.slice(0,5).map((x,_)=>h.jsx(Ge,{variant:"outline",className:"text-xs",children:x},_)),v.extractedTechniques.length>5&&h.jsxs(Ge,{variant:"outline",className:"text-xs",children:["+",v.extractedTechniques.length-5," more"]})]})]})},v.id))})]}),o.useCase&&h.jsx(fq,{isOpen:o.isOpen,onClose:()=>l({isOpen:!1,useCase:null}),useCase:o.useCase,onStartLabBuildout:f})]})}function mq(){var o;const{data:n=[],isLoading:e}=a1(),[t,s]=C.useState(null),i=l=>({not_started:h.jsx(O3,{className:"w-5 h-5 text-gray-400"}),in_progress:h.jsx(Cr,{className:"w-5 h-5 text-cortex-blue animate-pulse"}),completed:h.jsx(xu,{className:"w-5 h-5 text-cortex-success"}),validation_pending:h.jsx(wR,{className:"w-5 h-5 text-cortex-warning"})})[l],r=l=>({planning:"fas fa-clipboard-list",environment_buildout:"fas fa-tools",attack_simulation:"fas fa-crosshairs",detection_engineering:"fas fa-search",layout_configuration:"fas fa-th-large",script_development:"fas fa-code",dashboard_creation:"fas fa-chart-bar",decision_support:"fas fa-decision-tree",response_planning:"fas fa-shield-alt",automation_playbook:"fas fa-robot",learning_summary:"fas fa-graduation-cap"})[l]||"fas fa-circle";if(e)return h.jsx(Le,{className:"shadow-material",children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center mb-6",children:[h.jsx(wy,{className:"text-cortex-blue text-xl mr-3"}),h.jsx("h2",{className:"text-xl font-medium text-cortex-dark",children:"Generated Training Path"})]}),h.jsxs("div",{className:"text-center py-8",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cortex-blue mx-auto"}),h.jsx("p",{className:"text-gray-500 mt-2",children:"Loading training paths..."})]})]})});if(n.length===0)return h.jsx(Le,{className:"shadow-material",children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center mb-6",children:[h.jsx(wy,{className:"text-cortex-blue text-xl mr-3"}),h.jsx("h2",{className:"text-xl font-medium text-cortex-dark",children:"Generated Training Path"})]}),h.jsxs("div",{className:"text-center py-8",children:[h.jsx(wy,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"No Training Paths Generated"}),h.jsx("p",{className:"text-gray-400 text-sm",children:"Generate training from validated use cases to see paths here"})]})]})});const a=t?n.find(l=>l.id===t):n[n.length-1];return h.jsx(Le,{className:"shadow-material",children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(wy,{className:"text-cortex-blue text-xl mr-3"}),h.jsx("h2",{className:"text-xl font-medium text-cortex-dark",children:"Generated Training Path"})]}),h.jsxs(ve,{className:"bg-cortex-blue hover:bg-blue-700",children:[h.jsx("i",{className:"fas fa-download mr-2"}),"Export Path"]})]}),n.length>1&&h.jsx("div",{className:"mb-6",children:h.jsx("select",{className:"w-full p-2 border border-gray-300 rounded-md",value:t||(a==null?void 0:a.id)||"",onChange:l=>s(l.target.value),children:n.map(l=>h.jsxs("option",{value:l.id,children:[l.title," (",l.status.replace("_"," "),")"]},l.id))})}),a&&h.jsxs("div",{children:[h.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("h3",{className:"font-medium text-cortex-dark",children:a.title}),h.jsxs("div",{className:"flex items-center",children:[i(a.status),h.jsx("span",{className:"ml-2 text-sm font-medium capitalize",children:a.status.replace("_"," ")})]})]}),h.jsx("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-sm text-gray-500",children:[h.jsx(Cr,{className:"w-4 h-4 inline mr-1"}),"Total Duration: ",Math.floor(a.totalDuration/60),"h ",a.totalDuration%60,"m"]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:"text-sm text-gray-500 mr-2",children:"Progress:"}),h.jsx("div",{className:"w-24",children:h.jsx(Dw,{value:a.progress,className:"h-2"})}),h.jsxs("span",{className:"text-sm text-cortex-blue ml-2",children:[a.progress,"%"]})]})]})]}),h.jsx("div",{className:"space-y-4",children:a.steps.map((l,u)=>{var d,f,p,y;return h.jsxs("div",{className:"flex items-start space-x-4",children:[h.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium text-white ${l.completed?"bg-cortex-success":u===0||(d=a.steps[u-1])!=null&&d.completed?"bg-cortex-blue":"bg-gray-300"}`,children:l.order}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h4",{className:"text-sm font-medium text-cortex-dark",children:l.title}),h.jsxs("div",{className:"flex items-center space-x-2",children:[l.completed&&h.jsx(Ge,{className:"bg-cortex-success text-white text-xs",children:"Completed"}),!l.completed&&l.validationRequired&&h.jsx(Ge,{className:"bg-cortex-warning text-white text-xs",children:"Validation Required"}),!l.completed&&u===0||((f=a.steps[u-1])==null?void 0:f.completed)&&h.jsx(Ge,{className:"bg-cortex-blue text-white text-xs",children:"In Progress"}),!l.completed&&u>0&&!((p=a.steps[u-1])!=null&&p.completed)&&h.jsx(Ge,{variant:"outline",className:"text-xs",children:"Pending"})]})]}),h.jsx("p",{className:"text-sm text-gray-600 mt-1",children:l.description}),h.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[h.jsxs(Ge,{variant:"outline",className:"text-xs",children:[h.jsx("i",{className:r(l.category)+" mr-1"}),l.category.replace("_"," ")]}),h.jsxs(Ge,{variant:"outline",className:"text-xs",children:[h.jsx(Cr,{className:"w-3 h-3 mr-1"}),l.estimatedDuration," min"]}),l.dependencies.length>0&&h.jsxs(Ge,{variant:"outline",className:"text-xs",children:[h.jsx("i",{className:"fas fa-link mr-1"}),l.dependencies.length," dependencies"]})]}),!l.completed&&(u===0||((y=a.steps[u-1])==null?void 0:y.completed))&&h.jsx("div",{className:"mt-3 bg-gray-100 rounded-full h-2",children:h.jsx("div",{className:"bg-cortex-blue h-2 rounded-full transition-all duration-300",style:{width:"65%"}})})]})]},l.id)})}),h.jsxs("div",{className:"mt-6 flex items-center justify-between p-4 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:[h.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[h.jsx(Cr,{className:"w-4 h-4 mr-2"}),"Next milestone in ",((o=a.steps.find(l=>!l.completed))==null?void 0:o.estimatedDuration)||0," minutes"]}),h.jsxs("div",{className:"flex space-x-3",children:[h.jsx(ve,{variant:"outline",children:"Previous Step"}),h.jsx(ve,{className:"bg-cortex-blue hover:bg-blue-700",children:"Continue Training"})]})]})]})]})})}function gq(){const{data:n=[],isLoading:e}=a1(),[t,s]=C.useState(0),[i,r]=C.useState({});if(C.useEffect(()=>{if(n.length===0){s(0);return}const l=n.reduce((p,y)=>p+y.progress,0),u=Math.round(l/n.length);s(u);const d={"Environment Setup":{completed:0,total:0},"Detection Rules":{completed:0,total:0},"Playbook Creation":{completed:0,total:0},"Response Planning":{completed:0,total:0},Automation:{completed:0,total:0}};n.forEach(p=>{p.steps.forEach(y=>{let g="Environment Setup";y.category.includes("detection")||y.category.includes("engineering")?g="Detection Rules":y.category.includes("playbook")||y.category.includes("automation")?g="Playbook Creation":y.category.includes("response")||y.category.includes("planning")?g="Response Planning":(y.category.includes("script")||y.category.includes("dashboard"))&&(g="Automation"),d[g].total++,y.completed&&d[g].completed++})});const f={};Object.entries(d).forEach(([p,y])=>{f[p]=y.total>0?Math.round(y.completed/y.total*100):0}),r(f)},[n]),e)return h.jsx(Le,{className:"shadow-material",children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center mb-4",children:[h.jsx(Ek,{className:"text-cortex-blue text-xl mr-3"}),h.jsx("h2",{className:"text-lg font-medium text-cortex-dark",children:"Training Progress"})]}),h.jsxs("div",{className:"animate-pulse space-y-4",children:[h.jsx("div",{className:"h-4 bg-gray-200 rounded"}),h.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),h.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})});const a=l=>l===100?"text-cortex-success":l>=50?"text-cortex-blue":"text-gray-500",o=l=>l===100?h.jsx(xu,{className:"w-4 h-4 text-cortex-success"}):l>0?h.jsx(Cr,{className:"w-4 h-4 text-cortex-blue"}):h.jsx(tx,{className:"w-4 h-4 text-gray-400"});return h.jsx(Le,{className:"shadow-material",children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center mb-4",children:[h.jsx(Ek,{className:"text-cortex-blue text-xl mr-3"}),h.jsx("h2",{className:"text-lg font-medium text-cortex-dark",children:"Training Progress"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[h.jsx("span",{className:"font-medium",children:"Overall Completion"}),h.jsxs("span",{className:`font-medium ${a(t)}`,children:[t,"%"]})]}),h.jsx("div",{className:"bg-gray-100 rounded-full h-3",children:h.jsx("div",{className:"bg-cortex-blue h-3 rounded-full transition-all duration-500",style:{width:`${t}%`}})})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-100",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-cortex-blue",children:n.filter(l=>l.status==="completed").length}),h.jsx("div",{className:"text-xs text-gray-500",children:"Paths Completed"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-cortex-warning",children:n.filter(l=>l.status==="in_progress").length}),h.jsx("div",{className:"text-xs text-gray-500",children:"In Progress"})]})]}),Object.keys(i).length>0&&h.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[h.jsx("h3",{className:"text-sm font-medium text-cortex-dark mb-3",children:"Module Progress"}),h.jsx("div",{className:"space-y-3",children:Object.entries(i).map(([l,u])=>h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm text-gray-600",children:l}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"bg-gray-100 rounded-full h-2 w-16",children:h.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${u===100?"bg-cortex-success":u>0?"bg-cortex-blue":"bg-gray-300"}`,style:{width:`${u}%`}})}),o(u),h.jsxs("span",{className:`text-xs ${a(u)}`,children:[u,"%"]})]})]},l))})]}),h.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[h.jsx("h3",{className:"text-sm font-medium text-cortex-dark mb-3",children:"Recent Activity"}),h.jsxs("div",{className:"space-y-2 text-xs text-gray-500",children:[n.slice(0,3).map(l=>{const u=new Date(l.updatedAt).toLocaleDateString(),d=l.steps.filter(f=>f.completed).length;return h.jsxs("div",{className:"flex items-center justify-between py-1",children:[h.jsx("span",{className:"truncate max-w-32",children:l.title}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsxs("span",{children:[d,"/",l.steps.length," steps"]}),h.jsx("span",{children:""}),h.jsx("span",{children:u})]})]},l.id)}),n.length===0&&h.jsx("div",{className:"text-center py-2 text-gray-400",children:"No training activity yet"})]})]}),h.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[h.jsx("h3",{className:"text-sm font-medium text-cortex-dark mb-2",children:"Time Investment"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[h.jsxs("div",{className:"font-medium text-cortex-blue",children:[Math.floor(n.reduce((l,u)=>l+u.totalDuration,0)/60),"h"]}),h.jsx("div",{className:"text-gray-500",children:"Total Planned"})]}),h.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[h.jsxs("div",{className:"font-medium text-cortex-success",children:[Math.floor(n.reduce((l,u)=>l+u.steps.filter(d=>d.completed).reduce((d,f)=>d+f.estimatedDuration,0),0)/60),"h"]}),h.jsx("div",{className:"text-gray-500",children:"Time Completed"})]})]})]})]})]})})}function yq(){const{data:n=[],isLoading:e}=CB(),t=LI(),{toast:s}=Mu(),[i,r]=C.useState(null),[a,o]=C.useState({}),l=n.filter(g=>g.status==="pending"),u=async g=>{try{const m={...g,status:"approved",resolvedAt:new Date,comments:a[g.id]||void 0};await t.mutateAsync(m),s({title:"Item Approved",description:`${g.title} has been approved successfully.`}),o(w=>{const v={...w};return delete v[g.id],v})}catch{s({title:"Approval Failed",description:"Failed to approve validation item. Please try again.",variant:"destructive"})}},d=async g=>{try{const m=a[g.id];if(!(m!=null&&m.trim())){s({title:"Comment Required",description:"Please provide a reason for rejection.",variant:"destructive"});return}const w={...g,status:"rejected",resolvedAt:new Date,comments:m};await t.mutateAsync(w),s({title:"Item Rejected",description:`${g.title} has been rejected with feedback.`}),o(v=>{const x={...v};return delete x[g.id],x})}catch{s({title:"Rejection Failed",description:"Failed to reject validation item. Please try again.",variant:"destructive"})}},f=async g=>{try{const m={...g,status:"needs_review",comments:a[g.id]||void 0};await t.mutateAsync(m),s({title:"Marked for Review",description:`${g.title} has been marked as needing additional review.`}),o(w=>{const v={...w};return delete v[g.id],v})}catch{s({title:"Update Failed",description:"Failed to update validation item. Please try again.",variant:"destructive"})}},p=g=>({use_case:"fas fa-list-ul",training_step:"fas fa-step-forward",detection_rule:"fas fa-search",playbook_action:"fas fa-robot"})[g]||"fas fa-question-circle",y=g=>({use_case:"text-blue-500",training_step:"text-green-500",detection_rule:"text-orange-500",playbook_action:"text-purple-500"})[g]||"text-gray-500";return e?h.jsx(Le,{className:"shadow-material",children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(Ak,{className:"text-cortex-warning text-xl mr-3"}),h.jsx("h2",{className:"text-lg font-medium text-cortex-dark",children:"Validation Queue"})]}),h.jsx(Ge,{className:"bg-cortex-warning text-white",children:"Loading..."})]}),h.jsxs("div",{className:"animate-pulse space-y-3",children:[h.jsx("div",{className:"h-16 bg-gray-200 rounded-lg"}),h.jsx("div",{className:"h-16 bg-gray-200 rounded-lg"})]})]})}):h.jsx(Le,{className:"shadow-material",children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(Ak,{className:"text-cortex-warning text-xl mr-3"}),h.jsx("h2",{className:"text-lg font-medium text-cortex-dark",children:"Validation Queue"})]}),h.jsxs(Ge,{className:"bg-cortex-warning text-white",children:[l.length," Items"]})]}),l.length===0?h.jsxs("div",{className:"text-center py-8",children:[h.jsx(xu,{className:"h-12 w-12 text-cortex-success mx-auto mb-4"}),h.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"All Clear!"}),h.jsx("p",{className:"text-gray-400 text-sm",children:"No items pending validation"})]}):h.jsx("div",{className:"space-y-3",children:l.map(g=>h.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg border-l-4 border-cortex-warning",children:h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx(bd,{className:"text-cortex-warning mt-0.5 flex-shrink-0",size:16}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.title}),h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx("i",{className:`${p(g.type)} ${y(g.type)} text-xs`}),h.jsx("span",{className:"text-xs text-gray-500 capitalize",children:g.type.replace("_"," ")})]})]}),h.jsx("p",{className:"text-xs text-gray-600 mb-2",children:g.description}),h.jsxs("div",{className:"text-xs text-gray-500 mb-3",children:["Created: ",new Date(g.createdAt).toLocaleDateString()]}),h.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[h.jsxs(ve,{size:"sm",variant:"outline",onClick:()=>u(g),disabled:t.isPending,className:"text-cortex-success border-cortex-success hover:bg-green-50 text-xs px-2 py-1",children:[h.jsx(xu,{className:"w-3 h-3 mr-1"}),"Approve"]}),h.jsxs(ve,{size:"sm",variant:"outline",onClick:()=>d(g),disabled:t.isPending,className:"text-cortex-error border-cortex-error hover:bg-red-50 text-xs px-2 py-1",children:[h.jsx(L3,{className:"w-3 h-3 mr-1"}),"Reject"]}),h.jsxs(ve,{size:"sm",variant:"outline",onClick:()=>f(g),disabled:t.isPending,className:"text-cortex-blue border-cortex-blue hover:bg-blue-50 text-xs px-2 py-1",children:[h.jsx(V3,{className:"w-3 h-3 mr-1"}),"Needs Review"]}),h.jsx(ve,{size:"sm",variant:"ghost",onClick:()=>r(i===g.id?null:g.id),className:"text-gray-500 text-xs px-2 py-1",children:i===g.id?"Hide Details":"Show Details"})]}),i===g.id&&h.jsxs("div",{className:"mt-3 p-3 bg-white rounded border",children:[h.jsxs("div",{className:"mb-3",children:[h.jsx("h4",{className:"text-xs font-medium text-gray-700 mb-1",children:"Validation Details"}),h.jsxs("p",{className:"text-xs text-gray-600",children:["Entity ID: ",g.entityId]}),h.jsxs("p",{className:"text-xs text-gray-600",children:["Type: ",g.type.replace("_"," ")]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Comments (required for rejection):"}),h.jsx(Ed,{placeholder:"Add your validation comments here...",value:a[g.id]||"",onChange:m=>o(w=>({...w,[g.id]:m.target.value})),className:"text-xs min-h-16"})]})]})]})]})},g.id))}),h.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:h.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-lg font-bold text-cortex-success",children:n.filter(g=>g.status==="approved").length}),h.jsx("div",{className:"text-xs text-gray-500",children:"Approved"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-lg font-bold text-cortex-warning",children:l.length}),h.jsx("div",{className:"text-xs text-gray-500",children:"Pending"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-lg font-bold text-cortex-error",children:n.filter(g=>g.status==="rejected").length}),h.jsx("div",{className:"text-xs text-gray-500",children:"Rejected"})]})]})})]})})}function vq({trainingPathId:n,onClose:e}){const{data:t=[]}=a1();kB(n);const s=jI(),i=EB(),r=LI(),{toast:a}=Mu(),[o,l]=C.useState(0),[u,d]=C.useState({}),f=t.find(E=>E.id===n);if(C.useEffect(()=>{if(!f)return;const E=f.steps.findIndex(P=>!P.completed);E!==-1&&l(E)},[f]),!f)return null;const p=f.steps[o],y=f.steps.filter(E=>E.completed).length,g=Math.round(y/f.steps.length*100),m=()=>{o>0&&l(o-1)},w=()=>{o<f.steps.length-1&&l(o+1)},v=async()=>{if(p)try{if(p.validationRequired){const j=q6(p,{completedSteps:f.steps.filter(L=>L.completed).map(L=>L.id)});if(!j.isValid){const L={id:`validation_${Date.now()}`,type:"training_step",entityId:p.id,title:`Step Validation: ${p.title}`,description:j.issues.join("; "),status:"pending",comments:j.recommendations.join(`
`),createdAt:new Date};await r.mutateAsync(L),a({title:"Validation Required",description:"This step has been queued for validation review.",variant:"destructive"});return}}const E={...p,completed:!0},P=f.steps.map(j=>j.id===p.id?E:j),T=Math.round((y+1)/f.steps.length*100),I={...f,steps:P,progress:T,status:T===100?"completed":"in_progress",updatedAt:new Date};await s.mutateAsync(I);const D={id:`progress_${Date.now()}`,trainingPathId:f.id,stepId:p.id,status:"completed",startedAt:new Date,completedAt:new Date,timeSpent:p.estimatedDuration,notes:u[p.id]||void 0};await i.mutateAsync(D),a({title:"Step Completed",description:`${p.title} has been marked as complete.`}),o<f.steps.length-1&&l(o+1)}catch{a({title:"Completion Failed",description:"Failed to complete step. Please try again.",variant:"destructive"})}},x=async()=>{if(p)try{const E={id:`progress_${Date.now()}`,trainingPathId:f.id,stepId:p.id,status:"skipped",startedAt:new Date,completedAt:new Date,timeSpent:0,notes:u[p.id]||"Step skipped by user"};await i.mutateAsync(E),a({title:"Step Skipped",description:`${p.title} has been skipped.`}),o<f.steps.length-1&&l(o+1)}catch{a({title:"Skip Failed",description:"Failed to skip step. Please try again.",variant:"destructive"})}},_=()=>p?p.dependencies.length>0?p.dependencies.filter(P=>{var T;return!((T=f.steps.find(N=>N.id===P))!=null&&T.completed)}).length===0:!0:!1,S=E=>E.split(`
`).map((P,T)=>P.startsWith("## ")?h.jsx("h3",{className:"text-lg font-medium text-cortex-dark mb-2 mt-4",children:P.slice(3)},T):P.startsWith("### ")?h.jsx("h4",{className:"text-md font-medium text-cortex-dark mb-2 mt-3",children:P.slice(4)},T):P.startsWith("```")?null:P.trim().startsWith("- ")?h.jsx("li",{className:"ml-4 text-sm text-gray-700",children:P.slice(2)},T):P.trim()?h.jsx("p",{className:"text-sm text-gray-700 mb-2",children:P},T):h.jsx("br",{},T));return h.jsx($j,{open:!0,onOpenChange:()=>e(),children:h.jsxs(M1,{className:"max-w-4xl max-h-[90vh] overflow-hidden",children:[h.jsxs(j1,{className:"pb-4 border-b border-gray-200",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(F3,{className:"text-cortex-blue text-xl mr-3"}),h.jsx(L1,{className:"text-xl font-medium text-cortex-dark",children:f.title})]}),h.jsx(ve,{variant:"ghost",size:"sm",onClick:e,children:h.jsx(_d,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"flex items-center space-x-4 mt-4",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[h.jsxs("span",{children:["Step ",o+1," of ",f.steps.length]}),h.jsxs("span",{className:"text-cortex-blue",children:[g,"% Complete"]})]}),h.jsx(Dw,{value:g,className:"h-2"})]}),h.jsxs(Ge,{variant:"outline",className:"text-xs",children:[h.jsx(Cr,{className:"w-3 h-3 mr-1"}),(p==null?void 0:p.estimatedDuration)||0," min"]})]})]}),p&&h.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[h.jsxs("div",{className:"pb-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("h2",{className:"text-lg font-medium text-cortex-dark",children:p.title}),h.jsxs("div",{className:"flex items-center space-x-2",children:[p.completed&&h.jsxs(Ge,{className:"bg-cortex-success text-white text-xs",children:[h.jsx(xu,{className:"w-3 h-3 mr-1"}),"Completed"]}),p.validationRequired&&h.jsxs(Ge,{className:"bg-cortex-warning text-white text-xs",children:[h.jsx(bd,{className:"w-3 h-3 mr-1"}),"Validation Required"]})]})]}),h.jsx("p",{className:"text-sm text-gray-600",children:p.description})]}),h.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:h.jsx("div",{className:"prose max-w-none text-sm",children:S(p.content)})}),h.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Training Notes"}),h.jsx(Ed,{placeholder:"Add your notes, observations, or questions about this training step...",value:u[p.id]||"",onChange:E=>d(P=>({...P,[p.id]:E.target.value})),className:"text-sm min-h-20"})]}),h.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 bg-gray-50 -mx-6 -mb-6 px-6 py-4",children:[h.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[h.jsx(Cr,{className:"w-4 h-4 mr-2"}),"Estimated completion: ",p.estimatedDuration," minutes"]}),h.jsxs("div",{className:"flex space-x-3",children:[h.jsxs(ve,{variant:"outline",onClick:m,disabled:o===0,children:[h.jsx(D3,{className:"w-4 h-4 mr-1"}),"Previous"]}),!p.completed&&h.jsxs(h.Fragment,{children:[h.jsx(ve,{variant:"outline",onClick:x,className:"text-gray-600",children:"Skip Step"}),h.jsxs(ve,{onClick:v,disabled:!_()||s.isPending,className:"bg-cortex-success hover:bg-green-700",children:[s.isPending?h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):h.jsx(xu,{className:"w-4 h-4 mr-2"}),"Complete Step"]})]}),h.jsxs(ve,{onClick:w,disabled:o===f.steps.length-1,className:"bg-cortex-blue hover:bg-blue-700",children:["Next",h.jsx(M3,{className:"w-4 h-4 ml-1"})]})]})]})]})]})})}function xq(){const[n,e]=C.useState(null),{toast:t}=Mu(),s=TB(),i=PB(),r=async()=>{try{const o=await s.mutateAsync(),l=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),u=URL.createObjectURL(l),d=document.createElement("a");d.href=u,d.download=`cortex-training-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u),t({title:"Export Complete",description:"Training data has been exported successfully."})}catch{t({title:"Export Failed",description:"Failed to export training data. Please try again.",variant:"destructive"})}},a=async()=>{if(confirm("Are you sure you want to clear all training data? This action cannot be undone."))try{await i.mutateAsync(),t({title:"Cache Cleared",description:"All training data has been cleared successfully."})}catch{t({title:"Clear Failed",description:"Failed to clear training data. Please try again.",variant:"destructive"})}};return h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between items-center h-16",children:[h.jsx("div",{className:"flex items-center",children:h.jsxs("div",{className:"flex-shrink-0",children:[h.jsx(e_,{className:"text-cortex-blue text-2xl mr-3"}),h.jsx("span",{className:"text-xl font-medium text-cortex-dark",children:"Cortex Training Platform"})]})}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx(PN,{href:"/threat-feeds",children:h.jsxs(ve,{variant:"ghost",className:"flex items-center gap-2",children:[h.jsx(_R,{className:"h-4 w-4"}),"Threat Feeds"]})}),h.jsxs("div",{className:"flex items-center bg-cortex-light rounded-full px-3 py-1",children:[h.jsx("i",{className:"fas fa-user-circle text-cortex-blue mr-2"}),h.jsx("span",{className:"text-sm font-medium",children:"Training Engineer"})]}),h.jsx(ve,{variant:"ghost",size:"sm",children:h.jsx("i",{className:"fas fa-cog"})})]})]})})}),h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[h.jsx(D6,{}),h.jsx(pq,{onGenerateTraining:e}),h.jsx(mq,{})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsx(gq,{}),h.jsx(yq,{}),h.jsxs("div",{className:"bg-white rounded-lg shadow-material p-6",children:[h.jsx("h2",{className:"text-lg font-medium text-cortex-dark mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs(ve,{variant:"outline",className:"w-full justify-between",onClick:r,disabled:s.isPending,children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("i",{className:"fas fa-download text-cortex-blue mr-3"}),h.jsx("span",{className:"text-sm font-medium",children:s.isPending?"Exporting...":"Export Progress"})]}),h.jsx("i",{className:"fas fa-chevron-right text-gray-400"})]}),h.jsxs(ve,{variant:"outline",className:"w-full justify-between",onClick:a,disabled:i.isPending,children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("i",{className:"fas fa-trash-alt text-cortex-blue mr-3"}),h.jsx("span",{className:"text-sm font-medium",children:i.isPending?"Clearing...":"Clear Cache"})]}),h.jsx("i",{className:"fas fa-chevron-right text-gray-400"})]}),h.jsxs(ve,{variant:"outline",className:"w-full justify-between",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("i",{className:"fas fa-cog text-cortex-blue mr-3"}),h.jsx("span",{className:"text-sm font-medium",children:"Settings"})]}),h.jsx("i",{className:"fas fa-chevron-right text-gray-400"})]})]})]})]})]})}),n&&h.jsx(vq,{trainingPathId:n,onClose:()=>e(null)})]})}function Ki(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Pu(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}const zj=6048e5,wq=864e5;let bq={};function Mw(){return bq}function tm(n,e){var o,l,u,d;const t=Mw(),s=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((d=(u=t.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Ki(n),r=i.getDay(),a=(r<s?7:0)+r-s;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Tx(n){return tm(n,{weekStartsOn:1})}function Uj(n){const e=Ki(n),t=e.getFullYear(),s=Pu(n,0);s.setFullYear(t+1,0,4),s.setHours(0,0,0,0);const i=Tx(s),r=Pu(n,0);r.setFullYear(t,0,4),r.setHours(0,0,0,0);const a=Tx(r);return e.getTime()>=i.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function BE(n){const e=Ki(n);return e.setHours(0,0,0,0),e}function zE(n){const e=Ki(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function _q(n,e){const t=BE(n),s=BE(e),i=+t-zE(t),r=+s-zE(s);return Math.round((i-r)/wq)}function Sq(n){const e=Uj(n),t=Pu(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Tx(t)}function Aq(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Cq(n){if(!Aq(n)&&typeof n!="number")return!1;const e=Ki(n);return!isNaN(Number(e))}function kq(n){const e=Ki(n),t=Pu(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Eq={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Tq=(n,e,t)=>{let s;const i=Eq[n];return typeof i=="string"?s=i:e===1?s=i.one:s=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function Vb(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const Pq={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Nq={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Rq={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Iq={date:Vb({formats:Pq,defaultWidth:"full"}),time:Vb({formats:Nq,defaultWidth:"full"}),dateTime:Vb({formats:Rq,defaultWidth:"full"})},Dq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Mq=(n,e,t,s)=>Dq[n];function If(n){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let i;if(s==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):a;i=n.formattingValues[o]||n.formattingValues[a]}else{const a=n.defaultWidth,o=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[o]||n.values[a]}const r=n.argumentCallback?n.argumentCallback(e):e;return i[r]}}const jq={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Lq={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Oq={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Fq={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$q={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Vq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Bq=(n,e)=>{const t=Number(n),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},zq={ordinalNumber:Bq,era:If({values:jq,defaultWidth:"wide"}),quarter:If({values:Lq,defaultWidth:"wide",argumentCallback:n=>n-1}),month:If({values:Oq,defaultWidth:"wide"}),day:If({values:Fq,defaultWidth:"wide"}),dayPeriod:If({values:$q,defaultWidth:"wide",formattingValues:Vq,defaultFormattingWidth:"wide"})};function Df(n){return(e,t={})=>{const s=t.width,i=s&&n.matchPatterns[s]||n.matchPatterns[n.defaultMatchWidth],r=e.match(i);if(!r)return null;const a=r[0],o=s&&n.parsePatterns[s]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?Hq(o,f=>f.test(a)):Uq(o,f=>f.test(a));let u;u=n.valueCallback?n.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;const d=e.slice(a.length);return{value:u,rest:d}}}function Uq(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Hq(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Wq(n){return(e,t={})=>{const s=e.match(n.matchPattern);if(!s)return null;const i=s[0],r=e.match(n.parsePattern);if(!r)return null;let a=n.valueCallback?n.valueCallback(r[0]):r[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(i.length);return{value:a,rest:o}}}const qq=/^(\d+)(th|st|nd|rd)?/i,Gq=/\d+/i,Kq={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Xq={any:[/^b/i,/^(a|c)/i]},Yq={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qq={any:[/1/i,/2/i,/3/i,/4/i]},Zq={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Jq={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},e8={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},t8={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},n8={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},s8={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},i8={ordinalNumber:Wq({matchPattern:qq,parsePattern:Gq,valueCallback:n=>parseInt(n,10)}),era:Df({matchPatterns:Kq,defaultMatchWidth:"wide",parsePatterns:Xq,defaultParseWidth:"any"}),quarter:Df({matchPatterns:Yq,defaultMatchWidth:"wide",parsePatterns:Qq,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Df({matchPatterns:Zq,defaultMatchWidth:"wide",parsePatterns:Jq,defaultParseWidth:"any"}),day:Df({matchPatterns:e8,defaultMatchWidth:"wide",parsePatterns:t8,defaultParseWidth:"any"}),dayPeriod:Df({matchPatterns:n8,defaultMatchWidth:"any",parsePatterns:s8,defaultParseWidth:"any"})},r8={code:"en-US",formatDistance:Tq,formatLong:Iq,formatRelative:Mq,localize:zq,match:i8,options:{weekStartsOn:0,firstWeekContainsDate:1}};function a8(n){const e=Ki(n);return _q(e,kq(e))+1}function o8(n){const e=Ki(n),t=+Tx(e)-+Sq(e);return Math.round(t/zj)+1}function Hj(n,e){var d,f,p,y;const t=Ki(n),s=t.getFullYear(),i=Mw(),r=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(p=i.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??1,a=Pu(n,0);a.setFullYear(s+1,0,r),a.setHours(0,0,0,0);const o=tm(a,e),l=Pu(n,0);l.setFullYear(s,0,r),l.setHours(0,0,0,0);const u=tm(l,e);return t.getTime()>=o.getTime()?s+1:t.getTime()>=u.getTime()?s:s-1}function l8(n,e){var o,l,u,d;const t=Mw(),s=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((d=(u=t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=Hj(n,e),r=Pu(n,0);return r.setFullYear(i,0,s),r.setHours(0,0,0,0),tm(r,e)}function c8(n,e){const t=Ki(n),s=+tm(t,e)-+l8(t,e);return Math.round(s/zj)+1}function Qe(n,e){const t=n<0?"-":"",s=Math.abs(n).toString().padStart(e,"0");return t+s}const Xa={y(n,e){const t=n.getFullYear(),s=t>0?t:1-t;return Qe(e==="yy"?s%100:s,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Qe(t+1,2)},d(n,e){return Qe(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Qe(n.getHours()%12||12,e.length)},H(n,e){return Qe(n.getHours(),e.length)},m(n,e){return Qe(n.getMinutes(),e.length)},s(n,e){return Qe(n.getSeconds(),e.length)},S(n,e){const t=e.length,s=n.getMilliseconds(),i=Math.trunc(s*Math.pow(10,t-3));return Qe(i,e.length)}},Uu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},UE={G:function(n,e,t){const s=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const s=n.getFullYear(),i=s>0?s:1-s;return t.ordinalNumber(i,{unit:"year"})}return Xa.y(n,e)},Y:function(n,e,t,s){const i=Hj(n,s),r=i>0?i:1-i;if(e==="YY"){const a=r%100;return Qe(a,2)}return e==="Yo"?t.ordinalNumber(r,{unit:"year"}):Qe(r,e.length)},R:function(n,e){const t=Uj(n);return Qe(t,e.length)},u:function(n,e){const t=n.getFullYear();return Qe(t,e.length)},Q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return Qe(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return Qe(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(n,e,t){const s=n.getMonth();switch(e){case"M":case"MM":return Xa.M(n,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(n,e,t){const s=n.getMonth();switch(e){case"L":return String(s+1);case"LL":return Qe(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(n,e,t,s){const i=c8(n,s);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Qe(i,e.length)},I:function(n,e,t){const s=o8(n);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):Qe(s,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Xa.d(n,e)},D:function(n,e,t){const s=a8(n);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):Qe(s,e.length)},E:function(n,e,t){const s=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(n,e,t,s){const i=n.getDay(),r=(i-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(r);case"ee":return Qe(r,2);case"eo":return t.ordinalNumber(r,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,s){const i=n.getDay(),r=(i-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(r);case"cc":return Qe(r,e.length);case"co":return t.ordinalNumber(r,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const s=n.getDay(),i=s===0?7:s;switch(e){case"i":return String(i);case"ii":return Qe(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const s=n.getHours();let i;switch(s===12?i=Uu.noon:s===0?i=Uu.midnight:i=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const s=n.getHours();let i;switch(s>=17?i=Uu.evening:s>=12?i=Uu.afternoon:s>=4?i=Uu.morning:i=Uu.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let s=n.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return Xa.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Xa.H(n,e)},K:function(n,e,t){const s=n.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):Qe(s,e.length)},k:function(n,e,t){let s=n.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):Qe(s,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Xa.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Xa.s(n,e)},S:function(n,e){return Xa.S(n,e)},X:function(n,e,t){const s=n.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return WE(s);case"XXXX":case"XX":return $l(s);case"XXXXX":case"XXX":default:return $l(s,":")}},x:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"x":return WE(s);case"xxxx":case"xx":return $l(s);case"xxxxx":case"xxx":default:return $l(s,":")}},O:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+HE(s,":");case"OOOO":default:return"GMT"+$l(s,":")}},z:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+HE(s,":");case"zzzz":default:return"GMT"+$l(s,":")}},t:function(n,e,t){const s=Math.trunc(n.getTime()/1e3);return Qe(s,e.length)},T:function(n,e,t){const s=n.getTime();return Qe(s,e.length)}};function HE(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),i=Math.trunc(s/60),r=s%60;return r===0?t+String(i):t+String(i)+e+Qe(r,2)}function WE(n,e){return n%60===0?(n>0?"-":"+")+Qe(Math.abs(n)/60,2):$l(n,e)}function $l(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),i=Qe(Math.trunc(s/60),2),r=Qe(s%60,2);return t+i+e+r}const qE=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Wj=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},u8=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],s=t[1],i=t[2];if(!i)return qE(n,e);let r;switch(s){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;case"PPPP":default:r=e.dateTime({width:"full"});break}return r.replace("{{date}}",qE(s,e)).replace("{{time}}",Wj(i,e))},d8={p:Wj,P:u8},h8=/^D+$/,f8=/^Y+$/,p8=["D","DD","YY","YYYY"];function m8(n){return h8.test(n)}function g8(n){return f8.test(n)}function y8(n,e,t){const s=v8(n,e,t);if(console.warn(s),p8.includes(n))throw new RangeError(s)}function v8(n,e,t){const s=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const x8=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,w8=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,b8=/^'([^]*?)'?$/,_8=/''/g,S8=/[a-zA-Z]/;function A8(n,e,t){var d,f,p,y;const s=Mw(),i=s.locale??r8,r=s.firstWeekContainsDate??((f=(d=s.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,a=s.weekStartsOn??((y=(p=s.locale)==null?void 0:p.options)==null?void 0:y.weekStartsOn)??0,o=Ki(n);if(!Cq(o))throw new RangeError("Invalid time value");let l=e.match(w8).map(g=>{const m=g[0];if(m==="p"||m==="P"){const w=d8[m];return w(g,i.formatLong)}return g}).join("").match(x8).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const m=g[0];if(m==="'")return{isToken:!1,value:C8(g)};if(UE[m])return{isToken:!0,value:g};if(m.match(S8))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:g}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const u={firstWeekContainsDate:r,weekStartsOn:a,locale:i};return l.map(g=>{if(!g.isToken)return g.value;const m=g.value;(g8(m)||m8(m))&&y8(m,e,String(n));const w=UE[m[0]];return w(o,m,i.localize,u)}).join("")}function C8(n){const e=n.match(b8);return e?e[1].replace(_8,"'"):n}const k8=()=>{const n=[],e=new Date;for(let t=0;t<30;t++){const s=new Date(e);s.setDate(s.getDate()-t);const i=s.toISOString().split("T")[0],r=Math.floor(Math.random()*3)+1;for(let a=0;a<r;a++){const o=`threat_${s.getTime()}_${a}`,l=["critical","high","medium","low"][Math.floor(Math.random()*4)],u=["Unit42","CISA","RecordedFuture","Wiz","Datadog"],d=u[Math.floor(Math.random()*u.length)];n.push({id:o,title:E8(l),url:T8(d),source:d,severity:l,publishedDate:i,cves:P8(),technologies:N8(),vulnerabilityTypes:R8(),summary:I8(l),cvssScore:D8(l),exploitAvailable:Math.random()>.7})}}return n.sort((t,s)=>{const i={critical:4,high:3,medium:2,low:1},r=i[s.severity]-i[t.severity];return r!==0?r:new Date(s.publishedDate).getTime()-new Date(t.publishedDate).getTime()})};function E8(n,e){const t=["CVE-2025-1974: The IngressNightmare in Kubernetes","Critical Apache Struts RCE Vulnerability Exploited","Microsoft Exchange Zero-Day Under Active Attack","VMware vCenter Authentication Bypass Exploitation","Critical Docker Runtime Escape Vulnerability"],s=["Supply Chain Attack Targeting Node.js Packages","Privilege Escalation in Linux Kernel Components","SQL Injection in Popular WordPress Plugin","Cross-Site Scripting in Enterprise Applications","Authentication Bypass in Cloud Services"],i=["Information Disclosure in API Endpoints","Directory Traversal in Web Frameworks","Denial of Service in Network Components","Weak Cryptography Implementation Found","Session Management Vulnerability Disclosed"],r=["Minor Configuration Issue in Default Settings","Low-Impact Buffer Overflow Discovered","Informational Security Advisory Released","Best Practice Guidance for Secure Deployment","Security Hardening Recommendations Published"];let a;switch(n){case"critical":a=t;break;case"high":a=s;break;case"medium":a=i;break;default:a=r}return a[Math.floor(Math.random()*a.length)]}function T8(n,e){return{Unit42:"https://unit42.paloaltonetworks.com/threat-research/",CISA:"https://www.cisa.gov/news-events/cybersecurity-advisories",RecordedFuture:"https://www.recordedfuture.com/blog",Wiz:"https://www.wiz.io/blog",Datadog:"https://www.datadoghq.com/blog/security/"}[n]||"https://nvd.nist.gov/vuln/search"}function P8(){const n=Math.floor(Math.random()*3)+1,e=[];for(let t=0;t<n;t++){const i=Math.floor(Math.random()*9999)+1;e.push(`CVE-2025-${i.toString().padStart(4,"0")}`)}return e}function N8(){const n=["Kubernetes","Docker","Apache Struts","Microsoft Exchange","VMware vCenter","Linux Kernel","Node.js","WordPress","Java","Python","NGINX","Apache","PostgreSQL","MySQL","Redis","MongoDB","AWS","Azure","GCP"],e=Math.floor(Math.random()*3)+1,t=[];for(let s=0;s<e;s++){const i=n[Math.floor(Math.random()*n.length)];t.includes(i)||t.push(i)}return t}function R8(){const n=["Remote Code Execution","Privilege Escalation","SQL Injection","Cross-Site Scripting","Authentication Bypass","Information Disclosure","Denial of Service","Directory Traversal","Supply Chain Attack","Zero-Day","Buffer Overflow","Injection"],e=Math.floor(Math.random()*2)+1,t=[];for(let s=0;s<e;s++){const i=n[Math.floor(Math.random()*n.length)];t.includes(i)||t.push(i)}return t}function I8(n){const e={critical:["Critical vulnerability with active exploitation in the wild","Unauthenticated remote code execution leading to full system compromise","Zero-day vulnerability being actively exploited by threat actors"],high:["High-severity vulnerability with proof-of-concept available","Privilege escalation vulnerability affecting multiple systems","Authentication bypass allowing unauthorized access"],medium:["Medium-severity vulnerability requiring user interaction","Information disclosure vulnerability with limited impact","Denial of service vulnerability affecting availability"],low:["Low-severity vulnerability with minimal security impact","Configuration issue requiring administrative access","Minor information leak with limited exposure"]},t=e[n]||e.low;return t[Math.floor(Math.random()*t.length)]}function D8(n){switch(n){case"critical":return Math.random()*1+9;case"high":return Math.random()*2+7;case"medium":return Math.random()*3+4;default:return Math.random()*4}}const Bb=k8();function M8(){const[n,e]=C.useState(Bb),[t,s]=C.useState(Bb),[i,r]=C.useState(""),[a,o]=C.useState("all"),[l,u]=C.useState("all");C.useEffect(()=>{let g=n;i&&(g=g.filter(m=>m.title.toLowerCase().includes(i.toLowerCase())||m.cves.some(w=>w.toLowerCase().includes(i.toLowerCase()))||m.technologies.some(w=>w.toLowerCase().includes(i.toLowerCase())))),a!=="all"&&(g=g.filter(m=>m.source===a)),l!=="all"&&(g=g.filter(m=>m.severity===l)),g.sort((m,w)=>{const v=new Date(w.publishedDate).getTime()-new Date(m.publishedDate).getTime();if(v!==0)return v;const x={critical:4,high:3,medium:2,low:1};return x[w.severity]-x[m.severity]}),s(g)},[n,i,a,l]);const d=g=>{switch(g){case"critical":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-yellow-500";case"low":return"bg-blue-500";default:return"bg-gray-500"}},f=g=>{switch(g){case"critical":return h.jsx(W3,{className:"h-4 w-4"});case"high":return h.jsx(bd,{className:"h-4 w-4"});default:return h.jsx(bd,{className:"h-4 w-4"})}},p=async g=>{try{const m={id:`report_${Date.now()}`,title:g.title,url:g.url,content:`${g.summary}. 

CVE Details: ${g.cves.join(", ")}
Technologies Affected: ${g.technologies.join(", ")}
Vulnerability Types: ${g.vulnerabilityTypes.join(", ")}
CVSS Score: ${g.cvssScore}
Exploit Available: ${g.exploitAvailable?"Yes":"No"}
Source: ${g.source}
Published: ${g.publishedDate}

Technical Summary: This ${g.severity} severity vulnerability affects ${g.technologies.join(" and ")} systems. The attack vector involves ${g.vulnerabilityTypes.join(" and ")} techniques. ${g.exploitAvailable?"Active exploits are available in the wild.":"No public exploits are currently available."}`},w=JSON.parse(localStorage.getItem("threatReports")||"[]"),v=[m,...w.filter(E=>E.url!==g.url)];localStorage.setItem("threatReports",JSON.stringify(v));const x={id:`usecase_${Date.now()}`,title:g.title,description:m.content,category:y(g.technologies),severity:g.severity,source:g.source,threatReportId:m.id,cves:g.cves,technologies:g.technologies,vulnerabilityTypes:g.vulnerabilityTypes,cvssScore:g.cvssScore,exploitAvailable:g.exploitAvailable,createdAt:new Date().toISOString()},_=JSON.parse(localStorage.getItem("useCases")||"[]"),S=[x,..._.filter(E=>E.title!==g.title)];localStorage.setItem("useCases",JSON.stringify(S)),alert(` Successfully ingested threat: ${g.title}

 Category: ${x.category}
 Severity: ${g.severity.toUpperCase()}
 CVEs: ${g.cves.join(", ")}
 Technologies: ${g.technologies.join(", ")}

The use case has been created and is ready for lab buildout generation. Return to the dashboard to see it in your use cases list.`)}catch(m){console.error("Error ingesting threat:",m),alert(` Failed to ingest threat: ${g.title}. Please try again.`)}};function y(g){const m=g.join(" ").toLowerCase();return m.includes("kubernetes")||m.includes("docker")||m.includes("container")||m.includes("cloud")||m.includes("aws")||m.includes("azure")||m.includes("gcp")?"cloud":m.includes("windows")||m.includes("endpoint")||m.includes("agent")||m.includes("workstation")||m.includes("desktop")?"endpoint":m.includes("network")||m.includes("firewall")||m.includes("router")||m.includes("switch")||m.includes("proxy")?"network":"identity"}return h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsx("div",{className:"flex justify-between items-center h-16",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx(PN,{href:"/",children:h.jsxs(ve,{variant:"ghost",size:"sm",children:[h.jsx(R3,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),h.jsx("div",{children:h.jsx("h1",{className:"text-xl font-semibold",children:"Threat Intelligence Feeds"})})]})})})}),h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{children:h.jsx("p",{className:"text-muted-foreground",children:"Last 30 days of threat reports from trusted sources, ranked by severity"})}),h.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.length," threats found"]})]}),h.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[h.jsxs("div",{className:"relative flex-1",children:[h.jsx(z3,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),h.jsx(rs,{placeholder:"Search threats, CVEs, or technologies...",value:i,onChange:g=>r(g.target.value),className:"pl-10"})]}),h.jsxs("select",{value:a,onChange:g=>o(g.target.value),className:"px-3 py-2 border rounded-md bg-background",children:[h.jsx("option",{value:"all",children:"All Sources"}),h.jsx("option",{value:"Unit42",children:"Unit 42"}),h.jsx("option",{value:"CISA",children:"CISA"}),h.jsx("option",{value:"RecordedFuture",children:"Recorded Future"}),h.jsx("option",{value:"Wiz",children:"Wiz"}),h.jsx("option",{value:"Custom",children:"Custom"})]}),h.jsxs("select",{value:l,onChange:g=>u(g.target.value),className:"px-3 py-2 border rounded-md bg-background",children:[h.jsx("option",{value:"all",children:"All Severities"}),h.jsx("option",{value:"critical",children:"Critical Only"}),h.jsx("option",{value:"high",children:"High Only"}),h.jsx("option",{value:"medium",children:"Medium Only"}),h.jsx("option",{value:"low",children:"Low Only"})]}),h.jsxs("select",{onChange:g=>{const m=parseInt(g.target.value),w=new Date;w.setDate(w.getDate()-m);const v=Bb.filter(x=>new Date(x.publishedDate)>=w);s(v)},className:"px-3 py-2 border rounded-md bg-background",children:[h.jsx("option",{value:"30",children:"Last 30 Days"}),h.jsx("option",{value:"7",children:"Last 7 Days"}),h.jsx("option",{value:"3",children:"Last 3 Days"}),h.jsx("option",{value:"1",children:"Today Only"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[h.jsx(Le,{children:h.jsx(Oe,{className:"p-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"h-3 w-3 rounded-full bg-red-500"}),h.jsx("span",{className:"text-sm font-medium",children:"Critical"}),h.jsx("span",{className:"ml-auto text-lg font-bold",children:t.filter(g=>g.severity==="critical").length})]})})}),h.jsx(Le,{children:h.jsx(Oe,{className:"p-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"h-3 w-3 rounded-full bg-orange-500"}),h.jsx("span",{className:"text-sm font-medium",children:"High"}),h.jsx("span",{className:"ml-auto text-lg font-bold",children:t.filter(g=>g.severity==="high").length})]})})}),h.jsx(Le,{children:h.jsx(Oe,{className:"p-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ck,{className:"h-4 w-4 text-muted-foreground"}),h.jsx("span",{className:"text-sm font-medium",children:"With Exploits"}),h.jsx("span",{className:"ml-auto text-lg font-bold",children:t.filter(g=>g.exploitAvailable).length})]})})}),h.jsx(Le,{children:h.jsx(Oe,{className:"p-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Sk,{className:"h-4 w-4 text-muted-foreground"}),h.jsx("span",{className:"text-sm font-medium",children:"This Week"}),h.jsx("span",{className:"ml-auto text-lg font-bold",children:t.filter(g=>{const m=new Date(g.publishedDate),w=new Date;return w.setDate(w.getDate()-7),m>=w}).length})]})})})]}),h.jsx("div",{className:"space-y-4",children:t.map(g=>h.jsx(Le,{className:"hover:shadow-md transition-shadow",children:h.jsx(Oe,{className:"p-6",children:h.jsxs("div",{className:"flex items-start justify-between gap-4",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsxs(Ge,{className:`${d(g.severity)} text-white flex items-center gap-1`,children:[f(g.severity),g.severity.toUpperCase()]}),h.jsx(Ge,{variant:"outline",children:g.source}),g.exploitAvailable&&h.jsx(Ge,{variant:"destructive",className:"text-xs",children:"EXPLOIT AVAILABLE"}),g.cvssScore&&h.jsxs(Ge,{variant:"secondary",children:["CVSS ",g.cvssScore]})]}),h.jsx("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:g.title}),h.jsx("p",{className:"text-muted-foreground mb-3 line-clamp-2",children:g.summary}),h.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[g.cves.map(m=>h.jsx(Ge,{variant:"outline",className:"text-xs",children:m},m)),g.technologies.map(m=>h.jsx(Ge,{variant:"secondary",className:"text-xs",children:m},m))]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(Sk,{className:"h-4 w-4"}),A8(new Date(g.publishedDate),"MMM dd, yyyy")]}),h.jsx("span",{children:g.vulnerabilityTypes.join(", ")})]})]}),h.jsxs("div",{className:"flex flex-col gap-2 shrink-0",children:[h.jsxs(ve,{onClick:()=>p(g),className:"bg-blue-600 hover:bg-blue-700",children:[h.jsx(Ck,{className:"h-4 w-4 mr-2"}),"Ingest"]}),h.jsxs(ve,{variant:"outline",onClick:()=>window.open(g.url,"_blank"),title:`View ${g.source} threat intelligence`,children:[h.jsx(Z0,{className:"h-4 w-4 mr-2"}),"View Source"]})]})]})})},g.id))}),t.length===0&&h.jsx(Le,{children:h.jsxs(Oe,{className:"p-8 text-center",children:[h.jsx(bd,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),h.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No threats found"}),h.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search criteria or filters"})]})})]})})]})}function j8(){return h.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:h.jsx(Le,{className:"w-full max-w-md mx-4",children:h.jsxs(Oe,{className:"pt-6",children:[h.jsxs("div",{className:"flex mb-4 gap-2",children:[h.jsx(wR,{className:"h-8 w-8 text-red-500"}),h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),h.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function L8(){return h.jsxs(JF,{children:[h.jsx(hb,{path:"/",component:xq}),h.jsx(hb,{path:"/threat-feeds",component:M8}),h.jsx(hb,{component:j8})]})}function O8(){return h.jsx(x$,{client:D$,children:h.jsxs(JV,{children:[h.jsx(E4,{}),h.jsx(L8,{})]})})}vN(document.getElementById("root")).render(h.jsx(O8,{}));
